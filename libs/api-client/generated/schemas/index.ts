/**
 * Auto-Generated Zod Validation Schemas
 *
 * This file serves as the entry point for all auto-generated Zod schemas
 * from GraphQL types with @validate directives.
 *
 * Generated by: npm run codegen:zod (when configured)
 *
 * Until full codegen integration is complete, you can manually create
 * schemas using the network validators from @nasnet/core/forms:
 *
 * @example
 * ```typescript
 * import { z } from 'zod';
 * import { ipv4, cidr, port, mac } from '@nasnet/core/forms';
 *
 * export const dhcpServerSchema = z.object({
 *   name: z.string().min(1).max(64),
 *   interface: z.string().min(1),
 *   addressPool: cidr,
 *   gateway: ipv4,
 *   leaseTime: z.string().regex(/^\d+[smhd]$/),
 * });
 * ```
 *
 * @module @nasnet/api-client/generated/schemas
 */

// Re-export network validators for convenience
export {
  networkValidators,
  ipv4,
  ipv6,
  ipAddress,
  mac,
  cidr,
  cidr6,
  port,
  portString,
  portRange,
  vlanId,
  vlanIdString,
  wgKey,
  hostname,
  domain,
  interfaceName,
  comment,
  duration,
  bandwidth,
} from '@nasnet/core/forms';

// Re-export schema utilities
export {
  makePartial,
  mergeSchemas,
  pickFields,
  omitFields,
  optionalString,
  requiredString,
  numberFromString,
  booleanFromString,
  conditionalSchema,
  type InferSchema,
  type InferInput,
} from '@nasnet/core/forms';

// Export z for convenience
export { z } from 'zod';

// =============================================================================
// Example Schemas (remove or move to domain-specific files when codegen works)
// =============================================================================

import { z } from 'zod';
import { ipv4, cidr, mac, port, duration, hostname } from '@nasnet/core/forms';

/**
 * Example: DHCP Server configuration schema
 * Demonstrates how to compose network validators with standard Zod validators.
 */
export const dhcpServerConfigSchema = z.object({
  /** Server name */
  name: z.string().min(1, 'Name is required').max(64, 'Name too long'),
  /** Network interface to bind to */
  interface: z.string().min(1, 'Interface is required'),
  /** Address pool in CIDR notation */
  addressPool: cidr,
  /** Gateway IP address */
  gateway: ipv4,
  /** Lease time (e.g., "1d", "12h", "30m") */
  leaseTime: duration,
  /** DNS servers */
  dnsServers: z.array(ipv4).optional(),
  /** Whether the server is disabled */
  disabled: z.boolean().default(false),
});

export type DHCPServerConfig = z.infer<typeof dhcpServerConfigSchema>;

/**
 * Example: Static DHCP Lease schema
 */
export const dhcpLeaseSchema = z.object({
  /** MAC address of the client */
  macAddress: mac,
  /** IP address to assign */
  address: ipv4,
  /** Hostname for the lease */
  hostname: hostname.optional(),
  /** Comment/description */
  comment: z.string().max(256).optional(),
});

export type DHCPLease = z.infer<typeof dhcpLeaseSchema>;

/**
 * Example: Firewall rule input schema
 */
export const firewallRuleInputSchema = z.object({
  chain: z.enum(['input', 'forward', 'output']),
  action: z.enum(['accept', 'drop', 'reject', 'jump', 'log']),
  srcAddress: cidr.optional(),
  dstAddress: cidr.optional(),
  srcPort: port.optional(),
  dstPort: port.optional(),
  protocol: z.enum(['tcp', 'udp', 'icmp', 'all']).optional(),
  comment: z.string().max(256).optional(),
  disabled: z.boolean().default(false),
});

export type FirewallRuleInput = z.infer<typeof firewallRuleInputSchema>;

/**
 * Example: WireGuard peer configuration schema
 */
export const wireguardPeerSchema = z.object({
  /** Public key of the peer */
  publicKey: z.string().length(44).regex(/^[A-Za-z0-9+/]{43}=$/),
  /** Allowed IPs (CIDR notation) */
  allowedAddress: z.array(cidr).min(1),
  /** Endpoint address (IP:port) */
  endpointAddress: ipv4.optional(),
  endpointPort: port.optional(),
  /** Persistent keepalive interval */
  persistentKeepalive: z.number().int().min(0).max(65535).optional(),
  /** Comment */
  comment: z.string().max(256).optional(),
});

export type WireguardPeer = z.infer<typeof wireguardPeerSchema>;
