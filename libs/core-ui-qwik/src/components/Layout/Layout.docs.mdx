# Layout System

The Connect layout system provides a set of flexible and composable primitives for building consistent, responsive layouts.

## Overview

The layout system consists of five core components:

1. **Box**: The fundamental building block for creating visual containers
2. **Stack**: A one-dimensional layout for arranging elements in a row or column
3. **Grid**: A two-dimensional layout for creating complex grid-based designs
4. **Flex**: An advanced flexbox layout with comprehensive control options
5. **Container**: A component for constraining and centering content within a page

These components are designed to work together seamlessly, allowing you to build anything from simple interfaces to complex application layouts.

## Importing

You can import all layout components from a single entry point:

```tsx
import {
  Box,
  Stack,
  Grid,
  GridItem,
  Flex,
  FlexItem,
  Container,
} from "@connect/Core/Layout";
```

Or import components individually:

```tsx
import { Box } from "@connect/Core/Layout/Box";
import { Stack } from "@connect/Core/Layout/Stack";
// etc.
```

## When to Use Each Component

### Box

Use Box when you need:

- A simple container with consistent styling
- Control over padding, margin, borders, and background
- A polymorphic element that can render as different HTML tags

```tsx
<Box padding="md" backgroundColor="surface" borderRadius="md" as="section">
  Content goes here
</Box>
```

### Stack

Use Stack when you need:

- To arrange elements in a single direction (row or column)
- Consistent spacing between elements
- Simple alignment control
- Responsive direction changes

```tsx
<Stack direction={{ base: "column", md: "row" }} spacing="md" align="center">
  <Item1 />
  <Item2 />
  <Item3 />
</Stack>
```

### Grid

Use Grid when you need:

- A two-dimensional layout system
- To create complex, multi-column layouts
- Precise control over item placement
- Auto-responsive layouts with auto-fit/auto-fill

```tsx
<Grid columns="3" gap="md">
  <GridItem colSpan={2}>
    <HeaderContent />
  </GridItem>
  <SidebarContent />
  <MainContent />
</Grid>
```

### Flex

Use Flex when you need:

- Advanced control over flexbox layouts
- Fine-grained control over individual items
- Complex distribution of space
- Multi-line alignment control

```tsx
<Flex direction="row" wrap="wrap" justify="between" align="center">
  <FlexItem grow={1}>
    <ExpandingContent />
  </FlexItem>
  <FlexItem shrink={0}>
    <FixedContent />
  </FlexItem>
</Flex>
```

### Container

Use Container when you need:

- To constrain content width for readability
- Consistent horizontal padding across different screens
- Content centering within the viewport
- Different max-widths at different breakpoints

```tsx
<Container maxWidth="lg" paddingX="md">
  <PageContent />
</Container>
```

## Component Relationships

The layout components are designed to be nested and composed in various ways:

1. **Container → Grid/Stack/Flex → Box**: A typical page layout

   ```tsx
   <Container maxWidth="xl">
     <Grid columns={{ base: 1, md: 12 }} gap="md">
       <GridItem colSpan={{ base: 1, md: 12 }}>
         <Box as="header" padding="md" backgroundColor="surface">
           Header content
         </Box>
       </GridItem>

       <GridItem colSpan={{ base: 1, md: 3 }}>
         <Box padding="md" backgroundColor="surface">
           Sidebar content
         </Box>
       </GridItem>

       <GridItem colSpan={{ base: 1, md: 9 }}>
         <Box padding="md" backgroundColor="surface">
           Main content
         </Box>
       </GridItem>
     </Grid>
   </Container>
   ```

2. **Stack → Flex**: Simple arrangement with complex item control

   ```tsx
   <Stack direction="column" spacing="lg">
     <Header />

     <Flex direction="row" justify="between" align="center">
       <FlexItem>Left content</FlexItem>
       <FlexItem>Center content</FlexItem>
       <FlexItem>Right content</FlexItem>
     </Flex>

     <Footer />
   </Stack>
   ```

3. **Grid + Stack**: Complex layouts with simple item arrangement

   ```tsx
   <Grid columns="3" gap="md">
     <GridItem colSpan={3}>
       <Header />
     </GridItem>

     <GridItem>
       <Stack direction="column" spacing="md">
         <SidebarItem />
         <SidebarItem />
         <SidebarItem />
       </Stack>
     </GridItem>

     <GridItem colSpan={2}>
       <MainContent />
     </GridItem>
   </Grid>
   ```

## Best Practices

1. **Start simple, add complexity as needed**: Begin with Box and Stack for simpler layouts before reaching for Grid or Flex.

2. **Use the right primitive for the job**:

   - Use Stack for simple one-dimensional layouts
   - Use Grid for complex two-dimensional layouts
   - Use Flex when you need fine-grained control over flexible layouts

3. **Be consistent with spacing values**: Stick to the predefined spacing options (xs, sm, md, lg, xl, etc.) rather than arbitrary values.

4. **Design responsively from the start**: Use responsive props like `direction={{ base: 'column', md: 'row' }}` to ensure your layouts work across all screen sizes.

5. **Avoid overriding too much**: The layout primitives provide sensible defaults. Only customize what you need to change.

6. **Compose instead of creating complex one-off components**: Build complex layouts by composing these primitives rather than creating custom layout components from scratch.

7. **Leverage polymorphic rendering**: Use the `as` prop to ensure semantic HTML while maintaining consistent styling.

## Accessibility Considerations

All layout components are built with accessibility in mind:

- **Semantic HTML**: Use the `as` prop to specify the appropriate HTML element
- **ARIA attributes**: Add props like `role` and `aria-label` where needed
- **Logical source order**: Keep the DOM order logical for screen readers, even when visual order changes
- **RTL support**: Direction-based components handle RTL languages appropriately

## Migration from Other Systems

If you're migrating from other UI libraries:

- **From CSS Flexbox/Grid**: Our layout primitives provide a declarative API over these CSS features
- **From CSS Frameworks (like Bootstrap)**: Replace row/col systems with our Grid and Stack components
- **From other React UI libraries**: Most concepts map directly, but review the props API for differences

## Related Concepts

- **Responsive Utilities**: All layout components include responsive prop variants
- **Spacing System**: The spacing values (xs, sm, md, etc.) are consistent across all components
- **RTL Support**: Direction-aware components automatically adjust for RTL languages
