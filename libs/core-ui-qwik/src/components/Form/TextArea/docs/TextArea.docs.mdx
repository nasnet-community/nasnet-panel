import { Meta, Title, Controls, Canvas, Story } from "@storybook/blocks";
import * as TextAreaStories from "./TextArea.stories";

<Meta of={TextAreaStories} />

# TextArea

The TextArea component allows users to enter multi-line text input with advanced features like auto-resizing, character counting, and validation states.

## Overview

TextArea is an enhanced version of the native HTML `<textarea>` element, providing additional functionality while maintaining accessibility. It's useful for collecting longer form text such as comments, reviews, and descriptions.

## Features

- Multiple size variants (sm, md, lg)
- Validation states (default, success, error, warning)
- Auto-resizing capability that grows with content
- Character counting with custom formatting
- Configurable resize behavior (none, vertical, horizontal, both)
- Clear button for quickly emptying input
- Comprehensive accessibility support
- Full keyboard navigation
- Label and helper text support

## Basic Usage

<Canvas of={TextAreaStories.Default} />

## Sizes

The TextArea component comes in three different sizes to match different UI contexts.

<Canvas of={TextAreaStories.Sizes} />

## States

TextArea supports multiple states to provide feedback to users.

<Canvas of={TextAreaStories.States} />

## Resize Behaviors

Control how users can resize the textarea.

<Canvas of={TextAreaStories.ResizeBehaviors} />

## Auto-Resize

The textarea can automatically grow as the user types to accommodate content.

<Canvas of={TextAreaStories.AutoResize} />

## Character Count

Show character count with optional maximum length.

<Canvas of={TextAreaStories.CharacterCount} />

## Clear Button

Provide a clear button for easily emptying the textarea.

<Canvas of={TextAreaStories.ClearButton} />

## Form Integration

Example of TextArea components used in a form with validation.

<Canvas of={TextAreaStories.FormIntegration} />

## Props

<Controls />

## Accessibility

The TextArea component follows accessibility best practices:

- Uses semantic HTML with proper ARIA attributes
- Supports keyboard navigation
- Provides proper labeling with `<label>` elements
- Includes helper text and error messages with `aria-describedby`
- Uses `aria-invalid` for error states
- Maintains appropriate color contrast in all states

## Usage Guidelines

1. **Labels**: Always provide a meaningful label for each textarea to help users understand what information is expected.

2. **Placeholder Text**: Use placeholder text as a hint, not as a replacement for labels. Placeholder text disappears when the user starts typing and may not be accessible to all users.

3. **Helper Text**: Provide clear instructions about any specific requirements or formatting expectations.

4. **Feedback**: Use appropriate state indicators (success, warning, error) to provide feedback on user input.

5. **Auto-resize vs. Fixed Height**: Choose auto-resize for content of unpredictable length, and fixed height with scrolling for content that might be very long or when space is constrained.

6. **Character Limits**: If imposing character limits, make these clear to the user through the character counter.

7. **Validation**: Validate input on form submission rather than on every keystroke to avoid frustrating the user during typing.

## Implementation Notes

- The auto-resize feature works by adjusting the height of the textarea based on its content, with optional minimum and maximum rows.
- Character counting requires the textarea to be a controlled component, with its value tracked in state.
- For the most responsive auto-resizing experience, avoid setting a fixed height on the textarea when `autoResize` is enabled.
- The component uses Qwik's `useVisibleTask$` to handle browser-side functionality like calculating line heights and adjusting textarea sizes.

## Related Components

- Input: For single-line text input
- Select: For choosing from a list of options
- Form: For grouping form elements
- FormLabel: For providing accessible labels
- FormHelperText: For additional descriptive text
- FormErrorMessage: For validation error messages
