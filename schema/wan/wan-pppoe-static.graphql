# -----------------------------------------------------------------------------
# DHCP Client Types
# -----------------------------------------------------------------------------

"""
DHCP client configuration for dynamic WAN IP
"""
type DhcpClient implements Node {
  "Unique identifier"
  id: ID!

  "Interface name"
  interface: String! @mikrotik(path: "/ip/dhcp-client", field: "interface")

  "Whether DHCP client is disabled"
  disabled: Boolean! @mikrotik(path: "/ip/dhcp-client", field: "disabled")

  "Add default route from DHCP"
  addDefaultRoute: Boolean! @mikrotik(path: "/ip/dhcp-client", field: "add-default-route")

  "Use DNS servers from DHCP"
  usePeerDNS: Boolean! @mikrotik(path: "/ip/dhcp-client", field: "use-peer-dns")

  "Use NTP servers from DHCP"
  usePeerNTP: Boolean! @mikrotik(path: "/ip/dhcp-client", field: "use-peer-ntp")

  "Current DHCP status"
  status: String! @mikrotik(path: "/ip/dhcp-client", field: "status")

  "Assigned IP address"
  address: IPv4 @mikrotik(path: "/ip/dhcp-client", field: "address")

  "DHCP server address"
  dhcpServer: IPv4 @mikrotik(path: "/ip/dhcp-client", field: "dhcp-server")

  "Gateway from DHCP"
  gateway: IPv4 @mikrotik(path: "/ip/dhcp-client", field: "gateway")

  "Lease expiry time"
  expiresAfter: Duration @mikrotik(path: "/ip/dhcp-client", field: "expires-after")

  "User comment"
  comment: String @mikrotik(path: "/ip/dhcp-client", field: "comment")
}

"""
Input for creating/updating DHCP client
"""
input DhcpClientInput {
  "Interface to enable DHCP client on"
  interface: String! @validate(minLength: 1, maxLength: 100)

  "Add default route (default: true)"
  addDefaultRoute: Boolean

  "Use peer DNS (default: true)"
  usePeerDNS: Boolean

  "Use peer NTP (default: true)"
  usePeerNTP: Boolean

  "User comment"
  comment: String @validate(maxLength: 255)
}

# -----------------------------------------------------------------------------
# PPPoE Client Types
# -----------------------------------------------------------------------------

"""
PPPoE client configuration for dial-up WAN
"""
type PppoeClient implements Node {
  "Unique identifier"
  id: ID!

  "PPPoE interface name"
  name: String! @mikrotik(path: "/interface/pppoe-client", field: "name")

  "Underlying interface (ethernet/bridge)"
  interface: String! @mikrotik(path: "/interface/pppoe-client", field: "interface")

  "Whether PPPoE is disabled"
  disabled: Boolean! @mikrotik(path: "/interface/pppoe-client", field: "disabled")

  "Username for authentication"
  username: String! @mikrotik(path: "/interface/pppoe-client", field: "user")

  "Service name (optional)"
  serviceName: String @mikrotik(path: "/interface/pppoe-client", field: "service-name")

  "Add default route"
  addDefaultRoute: Boolean! @mikrotik(path: "/interface/pppoe-client", field: "add-default-route")

  "Use peer DNS"
  usePeerDNS: Boolean! @mikrotik(path: "/interface/pppoe-client", field: "use-peer-dns")

  "Current connection status"
  running: Boolean! @mikrotik(path: "/interface/pppoe-client", field: "running")

  "MTU setting"
  mtu: Int @mikrotik(path: "/interface/pppoe-client", field: "mtu")

  "MRU setting"
  mru: Int @mikrotik(path: "/interface/pppoe-client", field: "mru")

  "User comment"
  comment: String @mikrotik(path: "/interface/pppoe-client", field: "comment")
}

"""
Input for creating/updating PPPoE client
"""
input PppoeClientInput {
  "PPPoE interface name"
  name: String! @validate(minLength: 1, maxLength: 100, pattern: "^[a-zA-Z0-9_-]+$")

  "Physical interface (ether1, bridge, etc.)"
  interface: String! @validate(minLength: 1, maxLength: 100)

  "Username for ISP authentication"
  username: String! @validate(minLength: 1, maxLength: 128)

  "Password for ISP authentication"
  password: String! @validate(minLength: 1, maxLength: 128)

  "Service name (optional, ISP-specific)"
  serviceName: String @validate(maxLength: 100)

  "Add default route (default: true)"
  addDefaultRoute: Boolean

  "Use peer DNS (default: true)"
  usePeerDNS: Boolean

  "MTU (default: auto)"
  mtu: Int @validate(min: 576, max: 1500)

  "MRU (default: auto)"
  mru: Int @validate(min: 576, max: 1500)

  "User comment"
  comment: String @validate(maxLength: 255)
}

# -----------------------------------------------------------------------------
# Static IP Types
# -----------------------------------------------------------------------------

"""
Static IP WAN configuration
"""
type StaticIPConfig implements Node {
  "Unique identifier"
  id: ID!

  "Interface name"
  interface: String!

  "Static IP address with CIDR"
  address: CIDR! @mikrotik(path: "/ip/address", field: "address")

  "Gateway IP address"
  gateway: IPv4! @mikrotik(path: "/ip/route", field: "gateway")

  "Primary DNS server"
  primaryDNS: IPv4

  "Secondary DNS server"
  secondaryDNS: IPv4

  "User comment"
  comment: String
}

"""
Input for configuring static IP WAN
"""
input StaticIPInput {
  "Interface to configure"
  interface: String! @validate(minLength: 1, maxLength: 100)

  "Static IP address with CIDR (e.g., 203.0.113.5/30)"
  address: CIDR!

  "Gateway IP address"
  gateway: IPv4!

  "Primary DNS server"
  primaryDNS: IPv4

  "Secondary DNS server"
  secondaryDNS: IPv4

  "User comment"
  comment: String @validate(maxLength: 255)
}
