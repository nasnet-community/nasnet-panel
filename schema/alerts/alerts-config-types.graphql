# -----------------------------------------------------------------------------
# Alert Configuration Types
# -----------------------------------------------------------------------------

"""
Throttle configuration to prevent alert spam
"""
type ThrottleConfig {
  """
  Maximum number of alerts allowed
  """
  maxAlerts: Int!

  """
  Time period in seconds
  """
  periodSeconds: Int!

  """
  Optional field to group alerts by
  """
  groupByField: String
}

"""
Quiet hours configuration
"""
type QuietHoursConfig {
  """
  Start time in HH:MM format
  """
  startTime: String!

  """
  End time in HH:MM format
  """
  endTime: String!

  """
  Timezone (IANA timezone database name)
  """
  timezone: String!

  """
  Whether critical alerts bypass quiet hours
  """
  bypassCritical: Boolean!

  """
  Days of week when quiet hours apply (0=Sunday, 1=Monday, 2=Tuesday, 3=Wednesday, 4=Thursday, 5=Friday, 6=Saturday). Empty array means all days.
  """
  daysOfWeek: [Int!]!
}

"""
Escalation configuration for unacknowledged alerts (NAS-18.9)
"""
type EscalationConfig {
  """
  Whether escalation is enabled
  """
  enabled: Boolean!

  """
  Whether alert must be acknowledged to stop escalation
  """
  requireAck: Boolean!

  """
  Delay in seconds before first escalation
  """
  escalationDelay: Int!

  """
  Maximum number of escalation levels
  """
  maxEscalations: Int!

  """
  Additional notification channels to add during escalation
  """
  additionalChannels: [String!]!

  """
  Per-level delay intervals in seconds
  """
  repeatIntervals: [Int!]!
}

"""
Alert escalation tracking record (NAS-18.9)
"""
type AlertEscalation implements Node {
  """
  Globally unique identifier
  """
  id: ID!

  """
  Alert being tracked for escalation
  """
  alertId: ID!

  """
  Alert rule with escalation configuration
  """
  ruleId: ID!

  """
  Current escalation level (0 = initial)
  """
  currentLevel: Int!

  """
  Maximum escalation level
  """
  maxLevel: Int!

  """
  Escalation status
  """
  status: EscalationStatus!

  """
  When next escalation level should trigger
  """
  nextEscalationAt: DateTime

  """
  When escalation was resolved
  """
  resolvedAt: DateTime

  """
  Reason for resolution
  """
  resolvedBy: String

  """
  Record creation timestamp
  """
  createdAt: DateTime!

  """
  Last update timestamp
  """
  updatedAt: DateTime!
}
