# ============================================
# STORAGE EVENT TYPES
# ============================================

"""
Event emitted when storage is mounted or becomes available.
"""
type StorageMountedEvent {
  """Storage path that was mounted"""
  path: String!

  """Storage information"""
  storageInfo: StorageInfo!

  """Number of features restored (if reconnection)"""
  featuresRestored: Int!

  """Timestamp of the event"""
  timestamp: DateTime!
}

"""
Event emitted when storage is unmounted or becomes unavailable.
"""
type StorageUnmountedEvent {
  """Storage path that was unmounted"""
  path: String!

  """Number of features affected (stopped)"""
  featuresAffected: Int!

  """List of affected feature IDs"""
  affectedFeatureIds: [String!]!

  """Timestamp of the event"""
  timestamp: DateTime!
}

"""
Event emitted when storage space crosses a threshold.
"""
type StorageSpaceEvent {
  """Storage path"""
  path: String!

  """Current threshold status"""
  status: StorageThresholdStatus!

  """Previous threshold status"""
  previousStatus: StorageThresholdStatus!

  """Current usage percentage"""
  usagePercent: Float!

  """Available bytes remaining (serialized uint64)"""
  availableBytes: String!

  """Timestamp of the event"""
  timestamp: DateTime!
}

# ============================================
# INPUT TYPES
# ============================================

"""
Input for configuring external storage.
"""
input ConfigureExternalStorageInput {
  """Absolute path to external storage mount point"""
  path: String! @validate(minLength: 1, maxLength: 255)

  """Whether to enable external storage (default: true)"""
  enabled: Boolean
}

"""
Input for resetting external storage configuration.
"""
input ResetExternalStorageInput {
  """Whether to move existing binaries back to flash (default: false)"""
  migrateToFlash: Boolean
}
