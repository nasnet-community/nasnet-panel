# ============================================
# DEVICE ROUTING INPUT TYPES
# ============================================

"""
Input for assigning device routing.
"""
input AssignDeviceRoutingInput {
  """
  Router ID
  """
  routerID: ID!

  """
  Device ID to route
  """
  deviceID: String! @validate(minLength: 1, maxLength: 100)

  """
  Device MAC address
  """
  macAddress: String! @validate(pattern: "^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$")

  """
  Device IP address (optional)
  """
  deviceIP: String

  """
  Device hostname (optional)
  """
  deviceName: String @validate(maxLength: 255)

  """
  Service instance ID to route through
  """
  instanceID: ID!

  """
  Virtual interface ID to route through
  """
  interfaceID: ID!

  """
  Routing mark
  """
  routingMark: String! @validate(minLength: 1, maxLength: 255)

  """
  Routing mode
  """
  routingMode: RoutingMode!
}

"""
Input for bulk device routing assignment.
"""
input BulkAssignRoutingInput {
  """
  Router ID
  """
  routerID: ID!

  """
  List of device routing assignments
  """
  assignments: [SingleDeviceRoutingInput!]!
}

"""
Single device routing assignment for bulk operations.
"""
input SingleDeviceRoutingInput {
  """
  Device ID
  """
  deviceID: String!

  """
  Device MAC address
  """
  macAddress: String!

  """
  Device IP (optional)
  """
  deviceIP: String

  """
  Device name (optional)
  """
  deviceName: String

  """
  Instance ID
  """
  instanceID: ID!

  """
  Interface ID
  """
  interfaceID: ID!

  """
  Routing mark
  """
  routingMark: String!

  """
  Routing mode
  """
  routingMode: RoutingMode!
}

"""
Result of bulk routing assignment operation.
"""
type BulkRoutingResult {
  """
  Number of successful assignments
  """
  successCount: Int!

  """
  Number of failed assignments
  """
  failureCount: Int!

  """
  Successfully assigned routings
  """
  successes: [DeviceRouting!]!

  """
  Failed assignments with error messages
  """
  failures: [BulkRoutingFailure!]!
}

"""
Failed routing assignment in bulk operation.
"""
type BulkRoutingFailure {
  """
  Device ID that failed
  """
  deviceID: String!

  """
  Device MAC address
  """
  macAddress: String!

  """
  Error message
  """
  errorMessage: String!
}

"""
Input for setting kill switch on a device routing.
"""
input SetKillSwitchInput {
  """
  Router ID
  """
  routerID: ID!

  """
  Device ID whose routing should have kill switch
  """
  deviceID: String! @validate(minLength: 1, maxLength: 100)

  """
  Whether to enable kill switch
  """
  enabled: Boolean!

  """
  Kill switch behavior mode
  """
  mode: KillSwitchMode!

  """
  Fallback interface ID (required if mode=FALLBACK_SERVICE)
  """
  fallbackInterfaceID: String
}

"""
Device routing change event for subscriptions.
"""
type DeviceRoutingEvent {
  """
  Event ID
  """
  id: ID!

  """
  Event type (assigned, removed, updated, kill_switch_activated, kill_switch_deactivated)
  """
  eventType: String!

  """
  Router ID
  """
  routerID: ID!

  """
  Device routing (null if removed)
  """
  routing: DeviceRouting

  """
  Timestamp
  """
  timestamp: DateTime!
}
