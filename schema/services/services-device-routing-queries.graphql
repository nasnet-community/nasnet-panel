# ============================================
# DEVICE ROUTING QUERIES, MUTATIONS, SUBSCRIPTIONS
# ============================================

extend type Query {
  """
  Get the complete device routing matrix for a router.
  Includes discovered devices, available interfaces, and current routings.
  """
  deviceRoutingMatrix(
    """
    Router ID
    """
    routerID: ID!
  ): DeviceRoutingMatrix!

  """
  Get all device routing assignments for a router.
  """
  deviceRoutings(
    """
    Router ID
    """
    routerID: ID!
  ): [DeviceRouting!]!

  """
  Get a specific device routing assignment.
  """
  deviceRouting(
    """
    Router ID
    """
    routerID: ID!

    """
    Device routing ID
    """
    routingID: ID!
  ): DeviceRouting

  """
  Get kill switch status for a specific device routing.
  Returns current kill switch configuration and state.
  """
  killSwitchStatus(
    """
    Router ID
    """
    routerID: ID!

    """
    Device ID
    """
    deviceID: String!
  ): KillSwitchStatus!
}

extend type Subscription {
  """
  Subscribe to device routing changes for a router.
  Emits events when devices are assigned, removed, or updated.
  """
  deviceRoutingChanged(
    """
    Router ID to subscribe to
    """
    routerID: ID!
  ): DeviceRoutingEvent!

  """
  Subscribe to kill switch state changes for a router.
  Emits events when kill switch is activated, deactivated, or configuration changes.
  """
  killSwitchChanged(
    """
    Router ID to subscribe to
    """
    routerID: ID!
  ): DeviceRoutingEvent!
}
