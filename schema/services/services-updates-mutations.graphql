# ============================================
# UPDATE INSTANCE MUTATIONS
# ============================================

extend type Mutation {
  """
  Apply an available update to a service instance.
  Uses atomic 6-phase update with rollback on failure.
  """
  updateInstance(
    """
    Router ID
    """
    routerID: ID!

    """
    Instance ID to update
    """
    instanceID: ID!
  ): UpdateResult!

  """
  Update all instances that have critical updates available.
  Returns number of instances updated.
  """
  updateAllInstances(
    """
    Router ID
    """
    routerID: ID!

    """
    Minimum severity to update (default: CRITICAL)
    """
    minSeverity: UpdateSeverity
  ): Int!
}
