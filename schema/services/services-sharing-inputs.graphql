# ============================================
# SERVICE SHARING INPUT TYPES AND PAYLOADS
# ============================================

"""
Input for exporting a service configuration.
"""
input ExportServiceConfigInput {
  """Router ID"""
  routerID: ID!

  """Instance ID to export"""
  instanceID: ID!

  """Whether to redact sensitive fields (passwords, API keys, etc.)"""
  redactSecrets: Boolean!

  """Whether to include device routing rules"""
  includeRoutingRules: Boolean!
}

"""
Payload for export service configuration mutation.
"""
type ExportServiceConfigPayload {
  """Whether the operation succeeded"""
  success: Boolean!

  """Exported service package (null if failed)"""
  package: ServiceExportPackage

  """Download URL for JSON file (15-minute expiry)"""
  downloadURL: String

  """Mutation errors"""
  errors: [MutationError!]
}

"""
Input for importing a service configuration.
Performs validation only, does not apply changes.
"""
input ImportServiceConfigInput {
  """Router ID to import into"""
  routerID: ID!

  """Service export package (JSON)"""
  package: JSON!

  """Conflict resolution strategy (required if conflicts exist)"""
  conflictResolution: ConflictResolution

  """User-provided values for redacted fields (map of field name to value)"""
  redactedFieldValues: JSON

  """Device MAC addresses to filter routing rules (optional)"""
  deviceFilter: [String!]

  """Dry-run mode (validate only, don't create instance)"""
  dryRun: Boolean
}

"""
Payload for import service configuration mutation.
Returns validation results without applying changes.
"""
type ImportServiceConfigPayload {
  """Whether validation succeeded"""
  valid: Boolean!

  """Validation result"""
  validationResult: ImportValidationResult!

  """Mutation errors"""
  errors: [MutationError!]
}

"""
Input for applying a validated service import.
Actually creates/updates the service instance.
"""
input ApplyServiceImportInput {
  """Router ID to import into"""
  routerID: ID!

  """Service export package (JSON)"""
  package: JSON!

  """Conflict resolution strategy"""
  conflictResolution: ConflictResolution!

  """User-provided values for redacted fields"""
  redactedFieldValues: JSON!

  """Device MAC addresses to filter routing rules (optional)"""
  deviceFilter: [String!]
}

"""
Payload for apply service import mutation.
"""
type ApplyServiceImportPayload {
  """Whether the operation succeeded"""
  success: Boolean!

  """Created or updated service instance (null if failed)"""
  instance: ServiceInstance

  """Mutation errors"""
  errors: [MutationError!]
}

"""
Input for generating a QR code for service config.
"""
input GenerateConfigQRInput {
  """Router ID"""
  routerID: ID!

  """Instance ID to generate QR code for"""
  instanceID: ID!

  """Whether to redact sensitive fields"""
  redactSecrets: Boolean!

  """Whether to include routing rules"""
  includeRoutingRules: Boolean!

  """QR code image size in pixels (default 256)"""
  imageSize: Int
}

"""
Payload for generate config QR mutation.
"""
type GenerateConfigQRPayload {
  """Whether the operation succeeded"""
  success: Boolean!

  """Base64-encoded PNG image data"""
  imageDataBase64: String

  """Download URL for PNG file (15-minute expiry)"""
  downloadURL: String

  """QR code data size in bytes (before encoding)"""
  dataSize: Int

  """PNG image size in bytes"""
  imageSize: Int

  """Mutation errors"""
  errors: [MutationError!]
}
