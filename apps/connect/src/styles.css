@import "tailwindcss";

/* Import generated design tokens from token pipeline */
@import "@nasnet/ui/tokens/variables.css";

/* CSS Variables for shadcn/ui theming */
/* Based on NasNetConnect UX Design Specification */
/* Complete dual-theme support (light + dark modes) */

@layer base {
  :root {
    /* ========================================
     * LIGHT THEME - Primary colors
     * ======================================== */
    
    /* Main surface colors */
    --background: 210 40% 96.1%; /* slate-100 #F1F5F9 */
    --foreground: 222.2 47.4% 11.2%; /* slate-900 #0F172A */
    
    /* Surface hierarchy */
    --surface: 0 0% 100%; /* white #FFFFFF */
    --surface-secondary: 210 40% 98%; /* slate-50 #F8FAFC */

    /* Card surfaces */
    --card: 0 0% 100%; /* white */
    --card-foreground: 222.2 47.4% 11.2%; /* slate-900 */

    /* Popover surfaces */
    --popover: 0 0% 100%; /* white */
    --popover-foreground: 222.2 47.4% 11.2%; /* slate-900 */

    /* Primary: Golden Amber #EFC729 - empowerment, confidence, energy */
    --primary: 47 84% 55%;
    --primary-foreground: 222.2 47.4% 11.2%; /* dark text for WCAG AAA contrast */

    /* Secondary: Trust Blue #4972ba - reliability, safety, trust */
    --secondary: 217 44% 51%;
    --secondary-foreground: 210 40% 98%; /* light text for contrast */

    /* Muted backgrounds */
    --muted: 210 40% 96.1%; /* slate-100 */
    --muted-foreground: 215.4 16.3% 46.9%; /* slate-500 */

    /* Accent backgrounds */
    --accent: 210 40% 96.1%; /* slate-100 */
    --accent-foreground: 222.2 47.4% 11.2%; /* slate-900 */

    /* Destructive/error states */
    --destructive: 0 84.2% 60.2%; /* red #EF4444 */
    --destructive-foreground: 210 40% 98%; /* light text */

    /* Borders and inputs */
    --border: 214.3 31.8% 91.4%; /* slate-200 #E2E8F0 */
    --input: 214.3 31.8% 91.4%; /* slate-200 */
    --ring: 47 84% 55%; /* primary color for focus ring */

    /* Component-specific tokens */
    --radius: 0.75rem; /* Base border radius */
    --card-padding: 1rem;
    --button-height: 2.5rem;
    --nav-height: 4rem;
  }

  .dark {
    /* ========================================
     * DARK THEME - All colors optimized
     * ======================================== */
    
    /* Main surface colors */
    --background: 222.2 47.4% 11.2%; /* slate-900 #0F172A */
    --foreground: 210 40% 98%; /* slate-50 #F8FAFC */
    
    /* Surface hierarchy */
    --surface: 217.2 32.6% 17.5%; /* slate-800 #1E293B */
    --surface-secondary: 215 25% 27%; /* slate-700 #334155 */

    /* Card surfaces */
    --card: 217.2 32.6% 17.5%; /* slate-800 #1E293B */
    --card-foreground: 210 40% 98%; /* slate-50 */

    /* Popover surfaces */
    --popover: 217.2 32.6% 17.5%; /* slate-800 */
    --popover-foreground: 210 40% 98%; /* slate-50 */

    /* Primary: Golden Amber - maintains visibility in dark mode */
    --primary: 47 84% 55%; /* #EFC729 - works well on dark backgrounds */
    --primary-foreground: 222.2 47.4% 11.2%; /* dark text for contrast */

    /* Secondary: Trust Blue - adjusted for dark mode */
    --secondary: 215 25% 27%; /* slate-700 as bg */
    --secondary-foreground: 210 40% 98%; /* light text */

    /* Muted backgrounds */
    --muted: 215 25% 27%; /* slate-700 */
    --muted-foreground: 215 20.2% 65.1%; /* slate-400 */

    /* Accent backgrounds */
    --accent: 215 25% 27%; /* slate-700 */
    --accent-foreground: 210 40% 98%; /* slate-50 */

    /* Destructive/error states - darker for dark mode */
    --destructive: 0 62.8% 30.6%; /* darker red #DC2626 */
    --destructive-foreground: 210 40% 98%; /* light text */

    /* Borders and inputs - more visible in dark mode */
    --border: 215 25% 27%; /* slate-700 #334155 */
    --input: 215 25% 27%; /* slate-700 */
    --ring: 47 84% 55%; /* primary color for focus ring */

    /* Component-specific tokens (same as light) */
    --radius: 0.75rem;
    --card-padding: 1rem;
    --button-height: 2.5rem;
    --nav-height: 4rem;
  }
}

@layer base {
  * {
    border-color: hsl(var(--border));
  }
  
  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    font-feature-settings: "rlig" 1, "calt" 1;
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
  }
  
  /* Smooth theme transitions - 200ms as per design spec */
  * {
    transition-property: background-color, border-color, color, fill, stroke;
    transition-timing-function: ease-in-out;
    transition-duration: 200ms;
  }
  
  /* Disable transitions for animations and transforms */
  *,
  *::before,
  *::after {
    transition-property: background-color, border-color, color, fill, stroke;
  }
}

/* ========================================
 * CUSTOM UTILITY CLASSES
 * Theme-aware components and utilities
 * ======================================== */

@layer components {
  /* Status badges - work in both light and dark themes */
  .status-connected {
    background-color: #22C55E;
    color: white;
  }
  
  .dark .status-connected {
    background-color: #16A34A;
  }
  
  .status-warning {
    background-color: #F59E0B;
    color: #0F172A;
  }
  
  .dark .status-warning {
    background-color: #D97706;
    color: white;
  }
  
  .status-error {
    background-color: #EF4444;
    color: white;
  }
  
  .dark .status-error {
    background-color: #DC2626;
  }
  
  .status-info {
    background-color: #0EA5E9;
    color: white;
  }
  
  .dark .status-info {
    background-color: #0284C7;
  }
  
  .status-offline {
    @apply bg-slate-400 text-white dark:bg-slate-600;
  }

  /* Card variants */
  .card-elevated {
    @apply bg-white shadow-lg border border-slate-200;
    @apply dark:bg-slate-800 dark:border-slate-700 dark:shadow-xl;
    border-radius: 1rem;
  }
  
  @media (min-width: 768px) {
    .card-elevated {
      border-radius: 1.5rem;
    }
  }
  
  .card-interactive {
    @apply bg-white shadow-sm border border-slate-200;
    @apply hover:shadow-md hover:border-slate-300 transition-all duration-200;
    @apply dark:bg-slate-800 dark:border-slate-700 dark:hover:border-slate-600;
    border-radius: 1rem;
  }
  
  @media (min-width: 768px) {
    .card-interactive {
      border-radius: 1.5rem;
    }
  }
  
  .card-flat {
    @apply bg-slate-50 border border-slate-200;
    @apply dark:bg-slate-800 dark:border-slate-700;
    border-radius: 1rem;
  }
  
  @media (min-width: 768px) {
    .card-flat {
      border-radius: 1.5rem;
    }
  }

  /* Button variants - theme-aware */
  .btn-action {
    @apply text-slate-900 font-semibold py-3 px-6;
    @apply transition-colors;
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
    background-color: #EFC729;
    border-radius: 0.75rem;
  }
  
  .btn-action:hover {
    background-color: #D4A50E;
  }
  
  .btn-action:active {
    background-color: #9C790A;
  }
  
  .btn-action:focus {
    --tw-ring-color: #EFC729;
  }
  
  .dark .btn-action:focus {
    --tw-ring-offset-color: #0F172A;
  }
  
  .btn-secondary {
    @apply text-white font-semibold py-3 px-6;
    @apply transition-colors;
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
    background-color: #4972ba;
    border-radius: 0.75rem;
  }
  
  .btn-secondary:hover {
    background-color: #3A5B95;
  }
  
  .btn-secondary:active {
    background-color: #2C4470;
  }
  
  .btn-secondary:focus {
    --tw-ring-color: #4972ba;
  }
  
  .dark .btn-secondary:focus {
    --tw-ring-offset-color: #0F172A;
  }
  
  .btn-ghost {
    @apply bg-transparent text-slate-700 font-medium py-2 px-4;
    @apply hover:bg-slate-100 active:bg-slate-200 transition-colors;
    @apply dark:text-slate-300 dark:hover:bg-slate-800 dark:active:bg-slate-700;
    border-radius: 0.75rem;
  }
  
  .btn-destructive {
    @apply font-semibold py-3 px-6 text-white transition-colors;
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
    background-color: #EF4444;
    border-radius: 0.75rem;
  }
  
  .btn-destructive:hover {
    background-color: #DC2626;
  }
  
  .btn-destructive:active {
    background-color: #B91C1C;
  }
  
  .btn-destructive:focus {
    --tw-ring-color: #EF4444;
  }
  
  .dark .btn-destructive:focus {
    --tw-ring-offset-color: #0F172A;
  }

  /* VPN/Connection status indicators */
  .status-indicator-connected {
    @apply w-2 h-2 rounded-full;
    background-color: #22C55E;
    animation: pulse-glow 2s infinite;
  }
  
  @keyframes pulse-glow {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4);
    }
    50% {
      box-shadow: 0 0 0 8px rgba(34, 197, 94, 0);
    }
  }
  
  .status-indicator-connecting {
    @apply w-2 h-2 rounded-full animate-pulse;
    background-color: #F59E0B;
  }
  
  .status-indicator-disconnected {
    @apply w-2 h-2 rounded-full bg-slate-400 dark:bg-slate-600;
  }
  
  .status-indicator-error {
    @apply w-2 h-2 rounded-full;
    background-color: #EF4444;
  }

  /* Surface utilities */
  .surface {
    @apply bg-white dark:bg-slate-800;
  }
  
  .surface-secondary {
    @apply bg-slate-50 dark:bg-slate-700;
  }

  /* Text utilities for better readability */
  .text-muted {
    @apply text-slate-500 dark:text-slate-400;
  }
  
  .text-emphasis {
    @apply text-slate-900 dark:text-slate-50 font-medium;
  }

  /* Border utilities */
  .border-default {
    @apply border-slate-200 dark:border-slate-700;
  }

  /* Focus states - WCAG compliant */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
  }
  
  .focus-ring:focus {
    --tw-ring-color: #EFC729;
  }
  
  .dark .focus-ring:focus {
    --tw-ring-offset-color: #0F172A;
  }
  
  .focus-ring-error {
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
  }
  
  .focus-ring-error:focus {
    --tw-ring-color: #EF4444;
  }
  
  .dark .focus-ring-error:focus {
    --tw-ring-offset-color: #0F172A;
  }
}

/* ========================================
 * UTILITY OVERRIDES
 * Additional helper classes
 * ======================================== */

@layer utilities {
  /* Shadow utilities for dark mode - enhanced visibility */
  .dark .shadow-sm {
    box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.25);
  }
  
  .dark .shadow {
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.3);
  }
  
  .dark .shadow-md {
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.3);
  }
  
  .dark .shadow-lg {
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3);
  }
  
  .dark .shadow-xl {
    box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.3), 0 8px 10px -6px rgb(0 0 0 / 0.3);
  }
  
  /* Responsive card padding */
  .card-padding {
    padding: var(--card-padding);
  }
  
  @media (min-width: 768px) {
    .card-padding {
      padding: 1.5rem;
    }
  }
  
  /* Safe area support for mobile */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* ========================================
   * TOUCH TARGET UTILITIES (WCAG AAA)
   * Minimum 44x44px touch targets for mobile/tablet
   * @see AC 3.5: Accessibility - Touch Targets
   * ======================================== */

  /* Minimum touch target size - 44x44px */
  .touch-target-min {
    min-height: 44px;
    min-width: 44px;
  }

  /* Ensure clickable area even for smaller visual elements */
  .touch-target {
    position: relative;
  }

  .touch-target::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    min-width: 44px;
    min-height: 44px;
  }

  /* Touch-friendly padding for inline elements */
  .touch-padding {
    padding: 10px;
  }

  @media (min-width: 1024px) {
    .touch-padding {
      padding: 8px;
    }
  }

  /* Larger touch target for primary actions */
  .touch-target-lg {
    min-height: 48px;
    min-width: 48px;
  }

  /* ========================================
   * SCREEN READER ONLY UTILITIES (WCAG AAA)
   * Hide content visually but keep accessible to screen readers
   * @see NAS-4.17: Implement Accessibility (a11y) Foundation
   * ======================================== */

  /* Screen reader only - visually hidden but accessible */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Show element when focused within (for skip links) */
  .focus-within\:not-sr-only:focus-within {
    position: static;
    width: auto;
    height: auto;
    padding: revert;
    margin: revert;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }

  /* Show element when focused (for individual skip links) */
  .focus\:not-sr-only:focus {
    position: static;
    width: auto;
    height: auto;
    padding: revert;
    margin: revert;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }

  /* ========================================
   * FOCUS VISIBLE UTILITIES (WCAG AAA)
   * Clear focus indicators for keyboard navigation
   * @see NAS-4.17: Implement Accessibility (a11y) Foundation
   * ======================================== */

  /* Default focus-visible styles - applied globally */
  *:focus-visible {
    outline: none;
    --tw-ring-color: hsl(var(--ring));
    --tw-ring-offset-width: 2px;
    --tw-ring-offset-color: hsl(var(--background));
    --tw-ring-width: 2px;
    box-shadow:
      0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color),
      0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);
  }

  /* Exclude elements that handle their own focus styles */
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible,
  button:focus-visible,
  [role="button"]:focus-visible,
  a:focus-visible {
    box-shadow: none;
  }

  /* Keyboard-only focus styles via data attribute */
  [data-keyboard-user="true"] :focus {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
  }

  /* ========================================
   * REDUCED MOTION UTILITIES (WCAG AAA)
   * Respect user's prefers-reduced-motion preference
   * @see AC 3.6: Reduced Motion Support
   * ======================================== */

  /* Disable all transitions when reduced motion is preferred */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Utility to force instant transitions */
  .motion-safe\:transition-all {
    transition-property: all;
    transition-timing-function: ease-out;
    transition-duration: 200ms;
  }

  .motion-safe\:duration-150 {
    transition-duration: 150ms;
  }

  .motion-safe\:duration-200 {
    transition-duration: 200ms;
  }

  @media (prefers-reduced-motion: reduce) {
    .motion-safe\:transition-all,
    .motion-safe\:duration-150,
    .motion-safe\:duration-200 {
      transition-duration: 0ms;
    }
  }

  /* Animation durations per design spec */
  .duration-sidebar {
    transition-duration: 200ms;
  }

  .duration-layout {
    transition-duration: 150ms;
  }

  .duration-drawer {
    transition-duration: 200ms;
  }

  @media (prefers-reduced-motion: reduce) {
    .duration-sidebar,
    .duration-layout,
    .duration-drawer {
      transition-duration: 0ms;
    }
  }

  /* ========================================
   * RTL TECHNICAL INPUT UTILITIES (NAS-4A.4)
   * Ensures technical data (IP, MAC, ports) remains LTR in RTL layouts
   * @see Docs/brainstorming-sessions/localization-2026-01-03/
   * ======================================== */

  /* Technical inputs must remain LTR even in RTL layouts */
  /* Use on inputs for IP addresses, MAC addresses, port numbers, etc. */
  .technical-input {
    direction: ltr;
    text-align: left;
    unicode-bidi: isolate;
  }

  /* Technical data container - isolates LTR content in RTL flow */
  .technical-data {
    direction: ltr;
    unicode-bidi: isolate;
  }

  /* For inline technical terms that should stay LTR */
  .technical-term {
    direction: ltr;
    unicode-bidi: embed;
  }

  /* RTL-aware layout helpers */
  [dir="rtl"] .flip-rtl {
    transform: scaleX(-1);
  }

  /* Mirror padding/margin for RTL */
  [dir="rtl"] .rtl-flip-horizontal {
    transform: scaleX(-1);
  }

  /* ========================================
   * LOG ENTRY HIGHLIGHT ANIMATION
   * Subtle highlight for new log entries (Story NAS-5.6)
   * Respects prefers-reduced-motion preference
   * ======================================== */

  @keyframes highlight {
    0% {
      background-color: hsl(var(--primary) / 0.15);
    }
    100% {
      background-color: transparent;
    }
  }

  .animate-highlight {
    animation: highlight 2s ease-out forwards;
  }

  @media (prefers-reduced-motion: reduce) {
    .animate-highlight {
      animation: none;
    }
  }
}
