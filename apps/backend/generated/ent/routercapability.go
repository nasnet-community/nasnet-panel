// Code generated by ent, DO NOT EDIT.

package ent

import (
	"encoding/json"
	"fmt"
	"strings"
	"time"

	"backend/generated/ent/routercapability"

	"entgo.io/ent"
	"entgo.io/ent/dialect/sql"
)

// RouterCapability is the model entity for the RouterCapability schema.
type RouterCapability struct {
	config `json:"-"`
	// ID of the ent.
	// ULID primary key
	ID string `json:"id,omitempty"`
	// CPU architecture (arm, arm64, x86_64, etc.)
	Architecture string `json:"architecture,omitempty"`
	// Router model name
	Model string `json:"model,omitempty"`
	// Board name
	BoardName string `json:"board_name,omitempty"`
	// Total RAM in bytes
	TotalMemory int64 `json:"total_memory,omitempty"`
	// Available storage in bytes
	AvailableStorage int64 `json:"available_storage,omitempty"`
	// Number of CPU cores
	CPUCount int `json:"cpu_count,omitempty"`
	// Whether wireless hardware is present
	HasWirelessChip bool `json:"has_wireless_chip,omitempty"`
	// Whether LTE/cellular hardware is present
	HasLteModule bool `json:"has_lte_module,omitempty"`
	// Raw RouterOS version string
	VersionRaw string `json:"version_raw,omitempty"`
	// Parsed major version number
	VersionMajor int `json:"version_major,omitempty"`
	// Parsed minor version number
	VersionMinor int `json:"version_minor,omitempty"`
	// Parsed patch version number
	VersionPatch int `json:"version_patch,omitempty"`
	// List of installed packages
	InstalledPackages []string `json:"installed_packages,omitempty"`
	// RouterOS license level (0-6)
	LicenseLevel int `json:"license_level,omitempty"`
	// Update channel (stable, testing, development)
	UpdateChannel string `json:"update_channel,omitempty"`
	// Whether container package is installed
	ContainerPackageInstalled bool `json:"container_package_installed,omitempty"`
	// Whether container feature is enabled
	ContainerEnabled bool `json:"container_enabled,omitempty"`
	// Whether a container registry is configured
	ContainerRegistryConfigured bool `json:"container_registry_configured,omitempty"`
	// Available storage for container images in bytes
	ContainerStorageAvailable int64 `json:"container_storage_available,omitempty"`
	// Whether network namespace is supported
	SupportsNetworkNamespace bool `json:"supports_network_namespace,omitempty"`
	// Maximum number of containers supported
	MaxContainers int `json:"max_containers,omitempty"`
	// Capability entries map with levels and guidance
	CapabilityEntries map[string]interface{} `json:"capability_entries,omitempty"`
	// When capabilities were detected
	DetectedAt time.Time `json:"detected_at,omitempty"`
	// When the cached capabilities expire (24h TTL)
	ExpiresAt time.Time `json:"expires_at,omitempty"`
	// Whether a background refresh is in progress
	IsRefreshing bool `json:"is_refreshing,omitempty"`
	// Record creation timestamp
	CreatedAt time.Time `json:"created_at,omitempty"`
	// Last update timestamp
	UpdatedAt    time.Time `json:"updated_at,omitempty"`
	selectValues sql.SelectValues
}

// scanValues returns the types for scanning values from sql.Rows.
func (*RouterCapability) scanValues(columns []string) ([]any, error) {
	values := make([]any, len(columns))
	for i := range columns {
		switch columns[i] {
		case routercapability.FieldInstalledPackages, routercapability.FieldCapabilityEntries:
			values[i] = new([]byte)
		case routercapability.FieldHasWirelessChip, routercapability.FieldHasLteModule, routercapability.FieldContainerPackageInstalled, routercapability.FieldContainerEnabled, routercapability.FieldContainerRegistryConfigured, routercapability.FieldSupportsNetworkNamespace, routercapability.FieldIsRefreshing:
			values[i] = new(sql.NullBool)
		case routercapability.FieldTotalMemory, routercapability.FieldAvailableStorage, routercapability.FieldCPUCount, routercapability.FieldVersionMajor, routercapability.FieldVersionMinor, routercapability.FieldVersionPatch, routercapability.FieldLicenseLevel, routercapability.FieldContainerStorageAvailable, routercapability.FieldMaxContainers:
			values[i] = new(sql.NullInt64)
		case routercapability.FieldID, routercapability.FieldArchitecture, routercapability.FieldModel, routercapability.FieldBoardName, routercapability.FieldVersionRaw, routercapability.FieldUpdateChannel:
			values[i] = new(sql.NullString)
		case routercapability.FieldDetectedAt, routercapability.FieldExpiresAt, routercapability.FieldCreatedAt, routercapability.FieldUpdatedAt:
			values[i] = new(sql.NullTime)
		default:
			values[i] = new(sql.UnknownType)
		}
	}
	return values, nil
}

// assignValues assigns the values that were returned from sql.Rows (after scanning)
// to the RouterCapability fields.
func (_m *RouterCapability) assignValues(columns []string, values []any) error {
	if m, n := len(values), len(columns); m < n {
		return fmt.Errorf("mismatch number of scan values: %d != %d", m, n)
	}
	for i := range columns {
		switch columns[i] {
		case routercapability.FieldID:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field id", values[i])
			} else if value.Valid {
				_m.ID = value.String
			}
		case routercapability.FieldArchitecture:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field architecture", values[i])
			} else if value.Valid {
				_m.Architecture = value.String
			}
		case routercapability.FieldModel:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field model", values[i])
			} else if value.Valid {
				_m.Model = value.String
			}
		case routercapability.FieldBoardName:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field board_name", values[i])
			} else if value.Valid {
				_m.BoardName = value.String
			}
		case routercapability.FieldTotalMemory:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field total_memory", values[i])
			} else if value.Valid {
				_m.TotalMemory = value.Int64
			}
		case routercapability.FieldAvailableStorage:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field available_storage", values[i])
			} else if value.Valid {
				_m.AvailableStorage = value.Int64
			}
		case routercapability.FieldCPUCount:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field cpu_count", values[i])
			} else if value.Valid {
				_m.CPUCount = int(value.Int64)
			}
		case routercapability.FieldHasWirelessChip:
			if value, ok := values[i].(*sql.NullBool); !ok {
				return fmt.Errorf("unexpected type %T for field has_wireless_chip", values[i])
			} else if value.Valid {
				_m.HasWirelessChip = value.Bool
			}
		case routercapability.FieldHasLteModule:
			if value, ok := values[i].(*sql.NullBool); !ok {
				return fmt.Errorf("unexpected type %T for field has_lte_module", values[i])
			} else if value.Valid {
				_m.HasLteModule = value.Bool
			}
		case routercapability.FieldVersionRaw:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field version_raw", values[i])
			} else if value.Valid {
				_m.VersionRaw = value.String
			}
		case routercapability.FieldVersionMajor:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field version_major", values[i])
			} else if value.Valid {
				_m.VersionMajor = int(value.Int64)
			}
		case routercapability.FieldVersionMinor:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field version_minor", values[i])
			} else if value.Valid {
				_m.VersionMinor = int(value.Int64)
			}
		case routercapability.FieldVersionPatch:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field version_patch", values[i])
			} else if value.Valid {
				_m.VersionPatch = int(value.Int64)
			}
		case routercapability.FieldInstalledPackages:
			if value, ok := values[i].(*[]byte); !ok {
				return fmt.Errorf("unexpected type %T for field installed_packages", values[i])
			} else if value != nil && len(*value) > 0 {
				if err := json.Unmarshal(*value, &_m.InstalledPackages); err != nil {
					return fmt.Errorf("unmarshal field installed_packages: %w", err)
				}
			}
		case routercapability.FieldLicenseLevel:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field license_level", values[i])
			} else if value.Valid {
				_m.LicenseLevel = int(value.Int64)
			}
		case routercapability.FieldUpdateChannel:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field update_channel", values[i])
			} else if value.Valid {
				_m.UpdateChannel = value.String
			}
		case routercapability.FieldContainerPackageInstalled:
			if value, ok := values[i].(*sql.NullBool); !ok {
				return fmt.Errorf("unexpected type %T for field container_package_installed", values[i])
			} else if value.Valid {
				_m.ContainerPackageInstalled = value.Bool
			}
		case routercapability.FieldContainerEnabled:
			if value, ok := values[i].(*sql.NullBool); !ok {
				return fmt.Errorf("unexpected type %T for field container_enabled", values[i])
			} else if value.Valid {
				_m.ContainerEnabled = value.Bool
			}
		case routercapability.FieldContainerRegistryConfigured:
			if value, ok := values[i].(*sql.NullBool); !ok {
				return fmt.Errorf("unexpected type %T for field container_registry_configured", values[i])
			} else if value.Valid {
				_m.ContainerRegistryConfigured = value.Bool
			}
		case routercapability.FieldContainerStorageAvailable:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field container_storage_available", values[i])
			} else if value.Valid {
				_m.ContainerStorageAvailable = value.Int64
			}
		case routercapability.FieldSupportsNetworkNamespace:
			if value, ok := values[i].(*sql.NullBool); !ok {
				return fmt.Errorf("unexpected type %T for field supports_network_namespace", values[i])
			} else if value.Valid {
				_m.SupportsNetworkNamespace = value.Bool
			}
		case routercapability.FieldMaxContainers:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field max_containers", values[i])
			} else if value.Valid {
				_m.MaxContainers = int(value.Int64)
			}
		case routercapability.FieldCapabilityEntries:
			if value, ok := values[i].(*[]byte); !ok {
				return fmt.Errorf("unexpected type %T for field capability_entries", values[i])
			} else if value != nil && len(*value) > 0 {
				if err := json.Unmarshal(*value, &_m.CapabilityEntries); err != nil {
					return fmt.Errorf("unmarshal field capability_entries: %w", err)
				}
			}
		case routercapability.FieldDetectedAt:
			if value, ok := values[i].(*sql.NullTime); !ok {
				return fmt.Errorf("unexpected type %T for field detected_at", values[i])
			} else if value.Valid {
				_m.DetectedAt = value.Time
			}
		case routercapability.FieldExpiresAt:
			if value, ok := values[i].(*sql.NullTime); !ok {
				return fmt.Errorf("unexpected type %T for field expires_at", values[i])
			} else if value.Valid {
				_m.ExpiresAt = value.Time
			}
		case routercapability.FieldIsRefreshing:
			if value, ok := values[i].(*sql.NullBool); !ok {
				return fmt.Errorf("unexpected type %T for field is_refreshing", values[i])
			} else if value.Valid {
				_m.IsRefreshing = value.Bool
			}
		case routercapability.FieldCreatedAt:
			if value, ok := values[i].(*sql.NullTime); !ok {
				return fmt.Errorf("unexpected type %T for field created_at", values[i])
			} else if value.Valid {
				_m.CreatedAt = value.Time
			}
		case routercapability.FieldUpdatedAt:
			if value, ok := values[i].(*sql.NullTime); !ok {
				return fmt.Errorf("unexpected type %T for field updated_at", values[i])
			} else if value.Valid {
				_m.UpdatedAt = value.Time
			}
		default:
			_m.selectValues.Set(columns[i], values[i])
		}
	}
	return nil
}

// Value returns the ent.Value that was dynamically selected and assigned to the RouterCapability.
// This includes values selected through modifiers, order, etc.
func (_m *RouterCapability) Value(name string) (ent.Value, error) {
	return _m.selectValues.Get(name)
}

// Update returns a builder for updating this RouterCapability.
// Note that you need to call RouterCapability.Unwrap() before calling this method if this RouterCapability
// was returned from a transaction, and the transaction was committed or rolled back.
func (_m *RouterCapability) Update() *RouterCapabilityUpdateOne {
	return NewRouterCapabilityClient(_m.config).UpdateOne(_m)
}

// Unwrap unwraps the RouterCapability entity that was returned from a transaction after it was closed,
// so that all future queries will be executed through the driver which created the transaction.
func (_m *RouterCapability) Unwrap() *RouterCapability {
	_tx, ok := _m.config.driver.(*txDriver)
	if !ok {
		panic("ent: RouterCapability is not a transactional entity")
	}
	_m.config.driver = _tx.drv
	return _m
}

// String implements the fmt.Stringer.
func (_m *RouterCapability) String() string {
	var builder strings.Builder
	builder.WriteString("RouterCapability(")
	builder.WriteString(fmt.Sprintf("id=%v, ", _m.ID))
	builder.WriteString("architecture=")
	builder.WriteString(_m.Architecture)
	builder.WriteString(", ")
	builder.WriteString("model=")
	builder.WriteString(_m.Model)
	builder.WriteString(", ")
	builder.WriteString("board_name=")
	builder.WriteString(_m.BoardName)
	builder.WriteString(", ")
	builder.WriteString("total_memory=")
	builder.WriteString(fmt.Sprintf("%v", _m.TotalMemory))
	builder.WriteString(", ")
	builder.WriteString("available_storage=")
	builder.WriteString(fmt.Sprintf("%v", _m.AvailableStorage))
	builder.WriteString(", ")
	builder.WriteString("cpu_count=")
	builder.WriteString(fmt.Sprintf("%v", _m.CPUCount))
	builder.WriteString(", ")
	builder.WriteString("has_wireless_chip=")
	builder.WriteString(fmt.Sprintf("%v", _m.HasWirelessChip))
	builder.WriteString(", ")
	builder.WriteString("has_lte_module=")
	builder.WriteString(fmt.Sprintf("%v", _m.HasLteModule))
	builder.WriteString(", ")
	builder.WriteString("version_raw=")
	builder.WriteString(_m.VersionRaw)
	builder.WriteString(", ")
	builder.WriteString("version_major=")
	builder.WriteString(fmt.Sprintf("%v", _m.VersionMajor))
	builder.WriteString(", ")
	builder.WriteString("version_minor=")
	builder.WriteString(fmt.Sprintf("%v", _m.VersionMinor))
	builder.WriteString(", ")
	builder.WriteString("version_patch=")
	builder.WriteString(fmt.Sprintf("%v", _m.VersionPatch))
	builder.WriteString(", ")
	builder.WriteString("installed_packages=")
	builder.WriteString(fmt.Sprintf("%v", _m.InstalledPackages))
	builder.WriteString(", ")
	builder.WriteString("license_level=")
	builder.WriteString(fmt.Sprintf("%v", _m.LicenseLevel))
	builder.WriteString(", ")
	builder.WriteString("update_channel=")
	builder.WriteString(_m.UpdateChannel)
	builder.WriteString(", ")
	builder.WriteString("container_package_installed=")
	builder.WriteString(fmt.Sprintf("%v", _m.ContainerPackageInstalled))
	builder.WriteString(", ")
	builder.WriteString("container_enabled=")
	builder.WriteString(fmt.Sprintf("%v", _m.ContainerEnabled))
	builder.WriteString(", ")
	builder.WriteString("container_registry_configured=")
	builder.WriteString(fmt.Sprintf("%v", _m.ContainerRegistryConfigured))
	builder.WriteString(", ")
	builder.WriteString("container_storage_available=")
	builder.WriteString(fmt.Sprintf("%v", _m.ContainerStorageAvailable))
	builder.WriteString(", ")
	builder.WriteString("supports_network_namespace=")
	builder.WriteString(fmt.Sprintf("%v", _m.SupportsNetworkNamespace))
	builder.WriteString(", ")
	builder.WriteString("max_containers=")
	builder.WriteString(fmt.Sprintf("%v", _m.MaxContainers))
	builder.WriteString(", ")
	builder.WriteString("capability_entries=")
	builder.WriteString(fmt.Sprintf("%v", _m.CapabilityEntries))
	builder.WriteString(", ")
	builder.WriteString("detected_at=")
	builder.WriteString(_m.DetectedAt.Format(time.ANSIC))
	builder.WriteString(", ")
	builder.WriteString("expires_at=")
	builder.WriteString(_m.ExpiresAt.Format(time.ANSIC))
	builder.WriteString(", ")
	builder.WriteString("is_refreshing=")
	builder.WriteString(fmt.Sprintf("%v", _m.IsRefreshing))
	builder.WriteString(", ")
	builder.WriteString("created_at=")
	builder.WriteString(_m.CreatedAt.Format(time.ANSIC))
	builder.WriteString(", ")
	builder.WriteString("updated_at=")
	builder.WriteString(_m.UpdatedAt.Format(time.ANSIC))
	builder.WriteByte(')')
	return builder.String()
}

// RouterCapabilities is a parsable slice of RouterCapability.
type RouterCapabilities []*RouterCapability
