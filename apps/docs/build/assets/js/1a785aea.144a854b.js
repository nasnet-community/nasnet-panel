"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[6580],{71184:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var s=n(14041);const i={},r=s.createContext(i);function o(e){const t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:t},e.children)}},86633:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"stores/domain-ui-stores","title":"Domain UI Stores","description":"Domain UI stores manage feature-specific user interface state like filters, view preferences, selections, and wizard draft data. They follow a consistent pattern across the codebase and are never used for server state (which belongs in Apollo Client).","source":"@site/../../libs/state/docs/stores/domain-ui-stores.md","sourceDirName":"stores","slug":"/stores/domain-ui-stores","permalink":"/docs/state/stores/domain-ui-stores","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../../libs/state/docs/stores/domain-ui-stores.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Connection Stores (useConnectionStore & useNetworkStore)","permalink":"/docs/state/stores/connection"},"next":{"title":"Drift Detection Store & Utilities","permalink":"/docs/state/stores/drift-detection"}}');var i=n(31085),r=n(71184);const o={},a="Domain UI Stores",l={},d=[{value:"Overview",id:"overview",level:2},{value:"Pattern Template",id:"pattern-template",level:3},{value:"Catalog of 11 Domain UI Stores",id:"catalog-of-11-domain-ui-stores",level:2},{value:"Deep Dive: useAlertNotificationStore",id:"deep-dive-usealertnotificationstore",level:2},{value:"State Shape",id:"state-shape",level:3},{value:"Key Features",id:"key-features",level:3},{value:"1. Deduplication Window (2 seconds)",id:"1-deduplication-window-2-seconds",level:4},{value:"2. Auto-Filtering to 24 Hours",id:"2-auto-filtering-to-24-hours",level:4},{value:"3. Max Queue Size (100 Notifications)",id:"3-max-queue-size-100-notifications",level:4},{value:"4. Selective Persistence",id:"4-selective-persistence",level:4},{value:"Common Actions",id:"common-actions",level:3},{value:"Selector Hooks",id:"selector-hooks",level:3},{value:"Common Patterns Across Stores",id:"common-patterns-across-stores",level:2},{value:"1. Filter States (NOT persisted)",id:"1-filter-states-not-persisted",level:3},{value:"2. Selection States (NOT persisted)",id:"2-selection-states-not-persisted",level:3},{value:"3. Wizard Drafts (PERSISTED)",id:"3-wizard-drafts-persisted",level:3},{value:"4. View Preferences (PERSISTED)",id:"4-view-preferences-persisted",level:3},{value:"5. Dialog States (NOT persisted)",id:"5-dialog-states-not-persisted",level:3},{value:"When to Create a New Domain UI Store",id:"when-to-create-a-new-domain-ui-store",level:2},{value:"Template for New Store",id:"template-for-new-store",level:3},{value:"Performance &amp; Optimization",id:"performance--optimization",level:2},{value:"Selector Hooks",id:"selector-hooks-1",level:3},{value:"Partial Persistence",id:"partial-persistence",level:3},{value:"Storage Choice",id:"storage-choice",level:3},{value:"Summary",id:"summary",level:2}];function c(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"domain-ui-stores",children:"Domain UI Stores"})}),"\n",(0,i.jsx)(t.p,{children:"Domain UI stores manage feature-specific user interface state like filters, view preferences, selections, and wizard draft data. They follow a consistent pattern across the codebase and are never used for server state (which belongs in Apollo Client)."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Source:"})," ",(0,i.jsx)(t.code,{children:"libs/state/stores/src/*-ui.store.ts"})]}),"\n",(0,i.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(t.p,{children:"Each domain (firewall, DHCP, services, etc.) has a dedicated UI store that:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Manages ",(0,i.jsx)(t.strong,{children:"filters"})," (search, status, category, action)"]}),"\n",(0,i.jsxs)(t.li,{children:["Tracks ",(0,i.jsx)(t.strong,{children:"selections"})," (checked rows, expanded items)"]}),"\n",(0,i.jsxs)(t.li,{children:["Stores ",(0,i.jsx)(t.strong,{children:"wizard drafts"})," (recovered on page reload)"]}),"\n",(0,i.jsxs)(t.li,{children:["Persists ",(0,i.jsx)(t.strong,{children:"user preferences"})," (view mode, compact mode, polling interval)"]}),"\n",(0,i.jsxs)(t.li,{children:["Handles ",(0,i.jsx)(t.strong,{children:"dialog/modal states"})," for feature-specific operations"]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"pattern-template",children:"Pattern Template"}),"\n",(0,i.jsx)(t.p,{children:"All domain UI stores follow this shape:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"interface DomainUIState {\n  // Filters (NOT persisted)\n  search: string;\n  setSearch: (search: string) => void;\n\n  // Selection (NOT persisted)\n  selectedIds: string[];\n  toggleSelection: (id: string) => void;\n  clearSelection: () => void;\n\n  // Wizard draft (PERSISTED for recovery)\n  wizardDraft: WizardDraft | null;\n  saveWizardDraft: (draft: WizardDraft) => void;\n  clearWizardDraft: () => void;\n\n  // UI preferences (PERSISTED)\n  viewMode: 'grid' | 'list';\n  setViewMode: (mode: 'grid' | 'list') => void;\n\n  // Reset all\n  reset: () => void;\n}\n\nexport const useDomainUIStore = create<DomainUIState>()(\n  persist(\n    (set) => ({\n      // implementation...\n    }),\n    {\n      name: 'domain-ui-storage',\n      partialize: (state) => ({\n        wizardDraft: state.wizardDraft,\n        viewMode: state.viewMode,\n      }),\n    }\n  )\n);\n\n// Selector hooks for optimization\nexport const useDomainSearch = () => useDomainUIStore((state) => state.search);\n"})}),"\n",(0,i.jsx)(t.h2,{id:"catalog-of-11-domain-ui-stores",children:"Catalog of 11 Domain UI Stores"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Store"}),(0,i.jsx)(t.th,{children:"File"}),(0,i.jsx)(t.th,{children:"Primary Purpose"}),(0,i.jsx)(t.th,{children:"Key State"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"Alert Notification"})}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"alert-notification.store.ts"})}),(0,i.jsx)(t.td,{children:"In-app notifications with deduplication"}),(0,i.jsx)(t.td,{children:"notifications, unreadCount, settings"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"Alert Rule Template"})}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"alert-rule-template-ui.store.ts"})}),(0,i.jsx)(t.td,{children:"Template browser, filtering, view mode"}),(0,i.jsx)(t.td,{children:"filters, sort, viewMode, dialogs"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"DHCP"})}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"dhcp-ui.store.ts"})}),(0,i.jsx)(t.td,{children:"DHCP server leases, pools"}),(0,i.jsx)(t.td,{children:"leaseSearch, leaseStatusFilter, wizardDraft"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"Service"})}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"service-ui.store.ts"})}),(0,i.jsx)(t.td,{children:"Feature marketplace instance management"}),(0,i.jsx)(t.td,{children:"serviceSearch, categoryFilter, statusFilter, wizardDraft, updateStage"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"Firewall Log"})}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"firewall-log-ui.store.ts"})}),(0,i.jsx)(t.td,{children:"Real-time log viewing with filters"}),(0,i.jsx)(t.td,{children:"filters, autoRefresh, refreshInterval, sortBy, expandedStats"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"Mangle"})}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"mangle-ui.store.ts"})}),(0,i.jsx)(t.td,{children:"Mangle rules by chain"}),(0,i.jsx)(t.td,{children:"selectedChain, expandedRules, actionFilter, compactMode"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"NAT"})}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"nat-ui.store.ts"})}),(0,i.jsx)(t.td,{children:"NAT rules by chain"}),(0,i.jsx)(t.td,{children:"selectedChain, expandedRules, actionFilter, compactMode"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"Port Knock"})}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"port-knock-ui.store.ts"})}),(0,i.jsx)(t.td,{children:"Port knocking sequences and logs"}),(0,i.jsx)(t.td,{children:"activeTab, showDisabledSequences, logStatusFilter, autoRefreshLog"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"Rate Limiting"})}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"rate-limiting-ui.store.ts"})}),(0,i.jsx)(t.td,{children:"Rate limit rules and statistics"}),(0,i.jsx)(t.td,{children:"selectedTab, showRuleEditor, actionFilter, expandedRules"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"Raw"})}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"raw-ui.store.ts"})}),(0,i.jsx)(t.td,{children:"RAW firewall rules with guides"}),(0,i.jsx)(t.td,{children:"selectedChain, filterSettings, ddosWizardOpen, expandedRules"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"Interface Stats"})}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"interface-stats-store.ts"})}),(0,i.jsx)(t.td,{children:"Interface traffic monitoring preferences"}),(0,i.jsx)(t.td,{children:"pollingInterval"})]})]})]}),"\n",(0,i.jsx)(t.h2,{id:"deep-dive-usealertnotificationstore",children:"Deep Dive: useAlertNotificationStore"}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.strong,{children:"Alert Notification Store"})," is the most complex domain UI store, demonstrating advanced patterns worth studying."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Source:"})," ",(0,i.jsx)(t.code,{children:"libs/state/stores/src/alert-notification.store.ts"})]}),"\n",(0,i.jsx)(t.h3,{id:"state-shape",children:"State Shape"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"interface AlertNotificationState {\n  // Notification queue (NOT persisted - memory only)\n  notifications: InAppNotification[];\n  unreadCount: number;\n\n  // User settings (PERSISTED)\n  settings: NotificationSettings;\n\n  // Actions...\n}\n\ninterface InAppNotification {\n  id: string;\n  alertId: string;\n  title: string;\n  message: string;\n  severity: 'CRITICAL' | 'WARNING' | 'INFO';\n  deviceId?: string;\n  ruleId?: string;\n  data?: Record<string, unknown>;\n  read: boolean;\n  receivedAt: string; // ISO timestamp\n}\n\ninterface NotificationSettings {\n  enabled: boolean;\n  soundEnabled: boolean;\n  severityFilter: AlertSeverity | 'ALL';\n  autoDismissTiming: number; // milliseconds, 0 = no auto-dismiss\n}\n"})}),"\n",(0,i.jsx)(t.h3,{id:"key-features",children:"Key Features"}),"\n",(0,i.jsx)(t.h4,{id:"1-deduplication-window-2-seconds",children:"1. Deduplication Window (2 seconds)"}),"\n",(0,i.jsx)(t.p,{children:"Prevents duplicate alerts from flooding the UI when multiple instances trigger simultaneously:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"function isDuplicate(\n  notifications: InAppNotification[],\n  alertId: string,\n  now: number\n): boolean {\n  return notifications.some((n) => {\n    const age = now - new Date(n.receivedAt).getTime();\n    return n.alertId === alertId && age < 2000; // 2-second window\n  });\n}\n\naddNotification: (notification) => {\n  if (isDuplicate(state.notifications, notification.alertId, Date.now())) {\n    return; // Skip duplicate\n  }\n  // Add notification...\n}\n"})}),"\n",(0,i.jsx)(t.h4,{id:"2-auto-filtering-to-24-hours",children:"2. Auto-Filtering to 24 Hours"}),"\n",(0,i.jsx)(t.p,{children:"Rehydration automatically trims old notifications:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"function filterLast24Hours(notifications: InAppNotification[]): InAppNotification[] {\n  const now = Date.now();\n  return notifications.filter((n) => {\n    const age = now - new Date(n.receivedAt).getTime();\n    return age < 24 * 60 * 60 * 1000; // 24 hours\n  });\n}\n"})}),"\n",(0,i.jsx)(t.h4,{id:"3-max-queue-size-100-notifications",children:"3. Max Queue Size (100 Notifications)"}),"\n",(0,i.jsx)(t.p,{children:"Prevents memory bloat with automatic enforcement:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"const MAX_QUEUE_SIZE = 100;\n\nfunction enforceMaxQueue(notifications: InAppNotification[]): InAppNotification[] {\n  if (notifications.length <= MAX_QUEUE_SIZE) return notifications;\n\n  // Keep newest 100, discard oldest\n  return [...notifications]\n    .sort((a, b) => new Date(b.receivedAt).getTime() - new Date(a.receivedAt).getTime())\n    .slice(0, MAX_QUEUE_SIZE);\n}\n"})}),"\n",(0,i.jsx)(t.h4,{id:"4-selective-persistence",children:"4. Selective Persistence"}),"\n",(0,i.jsx)(t.p,{children:"Only settings are persisted (notifications are memory-only):"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"persist(\n  (set, get) => ({ /* implementation */ }),\n  {\n    name: 'alert-notification-store',\n    partialize: (state) => ({\n      settings: state.settings, // Persist only settings\n    }),\n    onRehydrateStorage: () => (state) => {\n      if (state) {\n        state._filterOldNotifications(); // Auto-filter on rehydration\n      }\n    },\n  }\n)\n"})}),"\n",(0,i.jsx)(t.h3,{id:"common-actions",children:"Common Actions"}),"\n",(0,i.jsx)(t.p,{children:"All notifications stores provide these core actions:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"// Add/remove notifications\naddNotification(notification: Omit<InAppNotification, 'id' | 'read' | 'receivedAt'>): void\nmarkAsRead(notificationId: string): void\nmarkAllRead(): void\nclearNotification(notificationId: string): void\nclearAll(): void\n\n// Update settings\nupdateSettings(settings: Partial<NotificationSettings>): void\n"})}),"\n",(0,i.jsx)(t.h3,{id:"selector-hooks",children:"Selector Hooks"}),"\n",(0,i.jsx)(t.p,{children:"Optimized hooks prevent unnecessary re-renders:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"// Get all notifications\nexport const useNotifications = () =>\n  useAlertNotificationStore((state) => state.notifications);\n\n// Get unread count only (avoids re-render on read state changes)\nexport const useUnreadCount = () =>\n  useAlertNotificationStore((state) => state.unreadCount);\n\n// Get unread notifications\nexport const useUnreadNotifications = () =>\n  useAlertNotificationStore((state) => state.notifications.filter((n) => !n.read));\n\n// Get settings\nexport const useNotificationSettings = () =>\n  useAlertNotificationStore((state) => state.settings);\n\n// Filter by severity\nexport const useNotificationsBySeverity = (severity: AlertSeverity) =>\n  useAlertNotificationStore((state) =>\n    state.notifications.filter((n) => n.severity === severity)\n  );\n\n// Filter by device\nexport const useNotificationsByDevice = (deviceId: string) =>\n  useAlertNotificationStore((state) =>\n    state.notifications.filter((n) => n.deviceId === deviceId)\n  );\n"})}),"\n",(0,i.jsx)(t.h2,{id:"common-patterns-across-stores",children:"Common Patterns Across Stores"}),"\n",(0,i.jsx)(t.h3,{id:"1-filter-states-not-persisted",children:"1. Filter States (NOT persisted)"}),"\n",(0,i.jsx)(t.p,{children:"Filters change frequently and shouldn't persist:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"// DHCP Store\nleaseSearch: string;\nleaseStatusFilter: 'all' | 'bound' | 'waiting' | 'static';\nleaseServerFilter: string;\n\n// Service Store\nserviceSearch: string;\ncategoryFilter: 'all' | 'privacy' | 'proxy' | 'dns' | 'security' | 'monitoring';\nstatusFilter: 'all' | 'available' | 'installed' | 'running' | 'stopped' | 'failed';\n"})}),"\n",(0,i.jsx)(t.h3,{id:"2-selection-states-not-persisted",children:"2. Selection States (NOT persisted)"}),"\n",(0,i.jsx)(t.p,{children:"Selections are transient UI state:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"// Firewall Log, DHCP, Service stores\nselectedIds: string[];\ntoggleSelection: (id: string) => void;\nclearSelection: () => void;\nselectAll: (ids: string[]) => void;\n"})}),"\n",(0,i.jsx)(t.h3,{id:"3-wizard-drafts-persisted",children:"3. Wizard Drafts (PERSISTED)"}),"\n",(0,i.jsx)(t.p,{children:"Save work-in-progress configurations for recovery:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"interface DHCPWizardDraft {\n  interface?: string;\n  interfaceIP?: string;\n  poolStart?: string;\n  poolEnd?: string;\n  gateway?: string;\n  dnsServers?: string[];\n  leaseTime?: string;\n  domain?: string;\n  ntpServer?: string;\n}\n\nwizardDraft: DHCPWizardDraft | null;\nsaveWizardDraft: (draft: DHCPWizardDraft) => void;\nclearWizardDraft: () => void;\n"})}),"\n",(0,i.jsx)(t.h3,{id:"4-view-preferences-persisted",children:"4. View Preferences (PERSISTED)"}),"\n",(0,i.jsx)(t.p,{children:"User's layout and display choices:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"// Service Store\nviewMode: 'grid' | 'list';\nshowResourceMetrics: boolean;\nshowAdvancedConfig: boolean;\n\n// Firewall Log Store\nsortBy: 'timestamp' | 'srcIp' | 'dstIp' | 'protocol' | 'action';\nsortOrder: 'asc' | 'desc';\nexpandedStats: boolean;\n\n// Mangle, NAT, Raw stores\ncompactMode: boolean;\nselectedChain: ChainType | 'all';\n"})}),"\n",(0,i.jsx)(t.h3,{id:"5-dialog-states-not-persisted",children:"5. Dialog States (NOT persisted)"}),"\n",(0,i.jsx)(t.p,{children:"Transient UI modal state:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"// Alert Rule Template Store\ndialogs: {\n  browserOpen: boolean;\n  detailOpen: boolean;\n  createOpen: boolean;\n  editOpen: boolean;\n  importOpen: boolean;\n  deleteConfirmOpen: boolean;\n}\n\n// Port Knock Store\ncreateDialogOpen: boolean;\neditingSequenceId: string | null;\n"})}),"\n",(0,i.jsx)(t.h2,{id:"when-to-create-a-new-domain-ui-store",children:"When to Create a New Domain UI Store"}),"\n",(0,i.jsx)(t.p,{children:"Create a new domain UI store when:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"You have feature-specific UI state"})," that isn't server data (filters, selections, preferences)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Multiple components need shared state"})," (avoid prop drilling)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"The state has persistence needs"})," (wizard drafts, view preferences)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"The state is independent"})," from other domains (don't extend existing stores)"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Do NOT create a domain UI store for:"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Server data (use Apollo Client with GraphQL)"}),"\n",(0,i.jsx)(t.li,{children:"Complex workflows (use XState machines)"}),"\n",(0,i.jsx)(t.li,{children:"Form state (use React Hook Form)"}),"\n",(0,i.jsx)(t.li,{children:"Global UI state like theme/sidebar (use core UI stores)"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"template-for-new-store",children:"Template for New Store"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"/**\n * [Feature] UI Store\n * Manages UI state for [Feature]\n */\n\nimport { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\n// Types\nexport interface [Feature]UIState {\n  // Filters (NOT persisted)\n  search: string;\n  setSearch: (search: string) => void;\n\n  // Preferences (PERSISTED)\n  viewMode: 'grid' | 'list';\n  setViewMode: (mode: 'grid' | 'list') => void;\n\n  // Reset\n  reset: () => void;\n}\n\nconst initialState = {\n  search: '',\n  viewMode: 'grid' as const,\n};\n\n// Store\nexport const use[Feature]UIStore = create<[Feature]UIState>()(\n  persist(\n    (set) => ({\n      ...initialState,\n      setSearch: (search) => set({ search }),\n      setViewMode: (viewMode) => set({ viewMode }),\n      reset: () => set(initialState),\n    }),\n    {\n      name: '[feature]-ui-store',\n      partialize: (state) => ({\n        viewMode: state.viewMode,\n      }),\n    }\n  )\n);\n\n// Selectors\nexport const use[Feature]Search = () =>\n  use[Feature]UIStore((state) => state.search);\n\nexport const use[Feature]ViewMode = () =>\n  use[Feature]UIStore((state) => state.viewMode);\n"})}),"\n",(0,i.jsx)(t.h2,{id:"performance--optimization",children:"Performance & Optimization"}),"\n",(0,i.jsx)(t.h3,{id:"selector-hooks-1",children:"Selector Hooks"}),"\n",(0,i.jsx)(t.p,{children:"Always use selector hooks to optimize re-renders:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"// \u2705 GOOD - only unreadCount changes trigger re-render\nconst unreadCount = useUnreadCount();\n\n// \u274c BAD - entire store updates trigger re-render\nconst { unreadCount } = useAlertNotificationStore();\n"})}),"\n",(0,i.jsx)(t.h3,{id:"partial-persistence",children:"Partial Persistence"}),"\n",(0,i.jsx)(t.p,{children:"Only persist what's necessary:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"partialize: (state) => ({\n  settings: state.settings,        // \u2705 Persist\n  wizardDraft: state.wizardDraft,  // \u2705 Persist\n  // notifications NOT included     // \u2705 Memory-only\n  // search NOT included            // \u2705 Reset on reload\n}),\n"})}),"\n",(0,i.jsx)(t.h3,{id:"storage-choice",children:"Storage Choice"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"localStorage"}),": Persists across browser restarts (default)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"sessionStorage"}),": Clears on tab close"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"No persistence"}),": For transient state (filters, selections)"]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(t.p,{children:"Domain UI stores are the glue between features and the store system. They handle:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Filters"}),": Transient search/filter state"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Selections"}),": Checked items, expanded rows"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Preferences"}),": View mode, compact mode, polling intervals"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Drafts"}),": Wizard work-in-progress data"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"By following the consistent pattern, they keep features organized and prevent prop drilling while respecting the boundary between UI state and server state."})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);