"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[5323],{71184:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>c});var r=t(14041);const s={},o=r.createContext(s);function i(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(o.Provider,{value:n},e.children)}},77962:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"stores/command-shortcut","title":"Command and Shortcut Registry Stores","description":"This document covers the command palette and keyboard shortcut systems that power NasNetConnect\'s fast navigation and power-user experience.","source":"@site/../../libs/state/docs/stores/command-shortcut.md","sourceDirName":"stores","slug":"/stores/command-shortcut","permalink":"/docs/state/stores/command-shortcut","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../../libs/state/docs/stores/command-shortcut.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Change Set Store","permalink":"/docs/state/stores/change-set"},"next":{"title":"Connection Stores (useConnectionStore & useNetworkStore)","permalink":"/docs/state/stores/connection"}}');var s=t(31085),o=t(71184);const i={},c="Command and Shortcut Registry Stores",a={},d=[{value:"Overview",id:"overview",level:2},{value:"Command Registry Store",id:"command-registry-store",level:2},{value:"State Shape",id:"state-shape",level:3},{value:"Command Interface",id:"command-interface",level:3},{value:"Search and Ranking Algorithm",id:"search-and-ranking-algorithm",level:3},{value:"API Reference",id:"api-reference",level:3},{value:"Persistence",id:"persistence",level:3},{value:"Usage Example",id:"usage-example",level:3},{value:"Shortcut Registry Store",id:"shortcut-registry-store",level:2},{value:"State Shape",id:"state-shape-1",level:3},{value:"Shortcut Interface",id:"shortcut-interface",level:3},{value:"Multi-Key Shortcut Support",id:"multi-key-shortcut-support",level:3},{value:"Platform-Specific Handling",id:"platform-specific-handling",level:3},{value:"Contextual Shortcuts",id:"contextual-shortcuts",level:3},{value:"API Reference",id:"api-reference-1",level:3},{value:"Usage Example",id:"usage-example-1",level:3},{value:"Shortcuts Overlay",id:"shortcuts-overlay",level:3},{value:"Integration with Command Palette",id:"integration-with-command-palette",level:2},{value:"Map Serialization for Persistence",id:"map-serialization-for-persistence",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"command-and-shortcut-registry-stores",children:"Command and Shortcut Registry Stores"})}),"\n",(0,s.jsx)(n.p,{children:"This document covers the command palette and keyboard shortcut systems that power NasNetConnect's fast navigation and power-user experience."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Source:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/state/stores/src/command/command-registry.store.ts"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/state/stores/src/command/shortcut-registry.store.ts"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"The command and shortcut registries provide:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Command Palette"}),": Searchable registry of all app commands with fuzzy matching, ranking, and usage tracking"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Shortcut Registry"}),': Vim-style multi-key shortcuts (e.g., "g d" for go-dashboard) with conflict resolution']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Recent Items"}),": Tracked based on usage frequency and recency"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Platform Detection"}),": Automatic CMD/Ctrl handling, disabled on mobile"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Persistence"}),": Recent items and usage frequency stored in localStorage"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"command-registry-store",children:"Command Registry Store"}),"\n",(0,s.jsx)(n.h3,{id:"state-shape",children:"State Shape"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"export interface CommandRegistryState {\n  // Map of command ID \u2192 command definition\n  commands: Map<string, Command>;\n\n  // Recent command IDs (max 5, most recent first)\n  recentIds: string[];\n\n  // Usage count per command for frequency boost\n  usageCount: Map<string, number>;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"command-interface",children:"Command Interface"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"export interface Command {\n  id: string;                    // Unique ID (e.g., 'nav-dashboard')\n  label: string;                 // Display label (plain text)\n  description?: string;          // Optional description\n  icon: LucideIcon;             // Icon component\n  category: 'navigation' | 'action' | 'resource' | 'recent';\n  shortcut?: string;            // Keyboard shortcut display (e.g., 'g d')\n  requiresNetwork?: boolean;    // Network requirement flag\n  keywords?: string[];          // Search keywords\n  onExecute: () => void;        // Handler function\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"search-and-ranking-algorithm",children:"Search and Ranking Algorithm"}),"\n",(0,s.jsx)(n.p,{children:"The registry uses a multi-factor ranking system:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Priority 1: Label matching\n  - Exact match: 100 points\n  - Starts with: 80 points\n  - Contains: 60 points\n  - Description match: 50 points\n  - Keyword match: 50 points\n  - Fuzzy match: 40 points\n\nPriority 2: Behavioral signals (added to base score)\n  - Recency boost: up to 20 points (decays with position)\n  - Frequency boost: +10 points (if usage >= 5)\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example:"})," Searching \"dash\" when you've recently executed 'nav-dashboard' twice:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Base score (starts with): 80\nRecency boost (1st in recent): 20 * (1 - 0/5) = 20\nFrequency boost (usage=2): 0 (less than 5)\nTotal: 100 points\n"})}),"\n",(0,s.jsx)(n.h3,{id:"api-reference",children:"API Reference"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Method"}),(0,s.jsx)(n.th,{children:"Purpose"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"register(command)"})}),(0,s.jsx)(n.td,{children:"Register single command"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"registerMany(commands)"})}),(0,s.jsx)(n.td,{children:"Batch register commands"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"unregister(id)"})}),(0,s.jsx)(n.td,{children:"Remove command by ID"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"search(query)"})}),(0,s.jsx)(n.td,{children:"Search with ranking, returns [] if query is empty"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"getCommand(id)"})}),(0,s.jsx)(n.td,{children:"Get command by ID or undefined"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"trackUsage(id)"})}),(0,s.jsx)(n.td,{children:"Increment usage count, update recent IDs"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"getRecent()"})}),(0,s.jsx)(n.td,{children:"Get recent commands as Command[]"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"clearRecent()"})}),(0,s.jsx)(n.td,{children:"Clear all recent items"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"getAllCommands()"})}),(0,s.jsx)(n.td,{children:"Get all registered commands"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"getByCategory(category)"})}),(0,s.jsx)(n.td,{children:"Filter by category"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"persistence",children:"Persistence"}),"\n",(0,s.jsx)(n.p,{children:"The store persists only to localStorage:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Only these are persisted:\n{\n  recentIds: string[],\n  usageCount: Record<string, number>\n}\n\n// Commands are NOT persisted (registered at runtime)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["On rehydration, ",(0,s.jsx)(n.code,{children:"usageCount"})," objects are converted back to Maps."]}),"\n",(0,s.jsx)(n.h3,{id:"usage-example",children:"Usage Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { useCommandRegistry } from '@nasnet/state/stores';\n\nfunction CommandPalette() {\n  const { register, search, trackUsage, getRecent } = useCommandRegistry();\n\n  // Register on mount\n  useEffect(() => {\n    register({\n      id: 'nav-dashboard',\n      label: 'Dashboard',\n      icon: Home,\n      category: 'navigation',\n      shortcut: 'g d',\n      onExecute: () => navigate('/dashboard'),\n    });\n\n    register({\n      id: 'action-export',\n      label: 'Export Configuration',\n      icon: Download,\n      category: 'action',\n      keywords: ['export', 'config', 'backup'],\n      onExecute: () => openExportDialog(),\n    });\n  }, [register]);\n\n  const handleSearch = (query: string) => {\n    const results = search(query);\n    // results are sorted by relevance\n    return results;\n  };\n\n  const handleExecute = (id: string) => {\n    const cmd = getCommand(id);\n    if (cmd) {\n      cmd.onExecute();\n      trackUsage(id); // Record for future ranking\n    }\n  };\n\n  return (\n    // Command palette UI\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"shortcut-registry-store",children:"Shortcut Registry Store"}),"\n",(0,s.jsx)(n.h3,{id:"state-shape-1",children:"State Shape"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'export interface ShortcutRegistryState {\n  // Map of shortcut ID \u2192 shortcut definition\n  shortcuts: Map<string, Shortcut>;\n\n  // Overlay visibility (for help/reference overlay)\n  overlayOpen: boolean;\n\n  // Pending first key in multi-key sequence (e.g., "g" in "g d")\n  pendingKey: string | null;\n\n  // Current route for contextual shortcut matching\n  currentRoute: string;\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"shortcut-interface",children:"Shortcut Interface"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"export interface Shortcut {\n  id: string;                    // Unique ID\n  label: string;                 // Display label\n  keys: string;                  // Key combo: \"cmd+k\", \"g h\", or \"?\"\n  group: 'navigation' | 'global' | 'actions' | 'editing' | 'context';\n  contextual?: boolean;          // Only active on certain routes\n  activeRoutes?: string[];       // Routes where active\n  onExecute: () => void;         // Handler\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"multi-key-shortcut-support",children:"Multi-Key Shortcut Support"}),"\n",(0,s.jsx)(n.p,{children:"The registry supports Vim-style multi-key shortcuts:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Single key combinations\n{\n  id: 'cmd-palette',\n  keys: 'cmd+k',          // Cmd+K or Ctrl+K\n  label: 'Open Command Palette',\n}\n\n// Multi-key sequences (Vim-style)\n{\n  id: 'go-dashboard',\n  keys: 'g d',            // Press 'g', then 'd'\n  label: 'Go to Dashboard',\n}\n\n{\n  id: 'go-home',\n  keys: 'g h',\n  label: 'Go Home',\n}\n\n// Single character\n{\n  id: 'help-overlay',\n  keys: '?',\n  label: 'Show Help',\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Implementation tracks ",(0,s.jsx)(n.code,{children:"pendingKey"})," during sequences:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"User presses 'g' \u2192 set pendingKey='g'\n              Wait for next key within timeout\nUser presses 'd' \u2192 look up 'g d' shortcut and execute\n              Clear pendingKey\n"})}),"\n",(0,s.jsx)(n.h3,{id:"platform-specific-handling",children:"Platform-Specific Handling"}),"\n",(0,s.jsx)(n.p,{children:"The registry automatically handles platform differences:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// formatShortcutKeys('cmd+k', true) on macOS:\n// \"\u2318K\"\n\n// formatShortcutKeys('cmd+k', false) on Windows:\n// \"Ctrl+K\"\n\n// Automatic conversion:\n'cmd'/'meta'  \u2192 '\u2318' (Mac) or 'Ctrl' (Windows)\n'alt'         \u2192 '\u2325' (Mac) or 'Alt' (Windows)\n'shift'       \u2192 '\u21e7' (Mac) or 'Shift' (Windows)\n'enter'       \u2192 '\u21b5'\n'escape'      \u2192 'Esc'\n'arrow*'      \u2192 '\u2191\u2193\u2190\u2192'\n"})}),"\n",(0,s.jsx)(n.h3,{id:"contextual-shortcuts",children:"Contextual Shortcuts"}),"\n",(0,s.jsx)(n.p,{children:"Shortcuts can be route-specific:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Global navigation (always available)\n{\n  id: 'go-dashboard',\n  keys: 'g d',\n  group: 'navigation',\n  label: 'Go to Dashboard',\n  contextual: false,\n}\n\n// Contextual (only on firewall pages)\n{\n  id: 'add-rule',\n  keys: 'a r',\n  group: 'context',\n  label: 'Add Firewall Rule',\n  contextual: true,\n  activeRoutes: ['/router/:id/firewall', '/router/:id/firewall/nat'],\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Method ",(0,s.jsx)(n.code,{children:"getContextualShortcuts()"})," filters based on current route."]}),"\n",(0,s.jsx)(n.h3,{id:"api-reference-1",children:"API Reference"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Method"}),(0,s.jsx)(n.th,{children:"Purpose"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"register(shortcut)"})}),(0,s.jsx)(n.td,{children:"Register single shortcut"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"registerMany(shortcuts)"})}),(0,s.jsx)(n.td,{children:"Batch register"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"unregister(id)"})}),(0,s.jsx)(n.td,{children:"Remove by ID"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"openOverlay()"})}),(0,s.jsx)(n.td,{children:"Show shortcuts help overlay"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"closeOverlay()"})}),(0,s.jsx)(n.td,{children:"Hide overlay"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"toggleOverlay()"})}),(0,s.jsx)(n.td,{children:"Toggle overlay"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"setPendingKey(key | null)"})}),(0,s.jsx)(n.td,{children:"Track multi-key state"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"setCurrentRoute(route)"})}),(0,s.jsx)(n.td,{children:"Update for contextual matching"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"getAllShortcuts()"})}),(0,s.jsx)(n.td,{children:"Get all shortcuts"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"getByGroup(group)"})}),(0,s.jsx)(n.td,{children:"Filter by group"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"getContextualShortcuts()"})}),(0,s.jsx)(n.td,{children:"Get shortcuts for current route"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"getByKeys(keys)"})}),(0,s.jsx)(n.td,{children:"Find by key combination"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"usage-example-1",children:"Usage Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { useShortcutRegistry, groupShortcutsByCategory } from '@nasnet/state/stores';\n\nfunction GlobalShortcutHandler() {\n  const { register, toggleOverlay, setPendingKey, getByKeys } = useShortcutRegistry();\n  const currentRoute = useLocation().pathname;\n  const { setCurrentRoute } = useShortcutRegistry();\n\n  // Register shortcuts on mount\n  useEffect(() => {\n    register({\n      id: 'cmd-palette',\n      label: 'Command Palette',\n      keys: 'cmd+k',\n      group: 'global',\n      onExecute: () => openCommandPalette(),\n    });\n\n    register({\n      id: 'go-network',\n      label: 'Go to Network',\n      keys: 'g n',\n      group: 'navigation',\n      onExecute: () => navigate('/router/network'),\n    });\n  }, [register]);\n\n  // Update current route for contextual shortcuts\n  useEffect(() => {\n    setCurrentRoute(currentRoute);\n  }, [currentRoute, setCurrentRoute]);\n\n  // Handle keyboard events\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Skip if in input/textarea\n      if (e.target instanceof HTMLInputElement) return;\n\n      const isMac = /Mac|iPhone|iPad|iPod/.test(navigator.platform);\n      const key = e.key.toLowerCase();\n\n      // Cmd+K / Ctrl+K for command palette\n      if ((e.metaKey || e.ctrlKey) && key === 'k') {\n        e.preventDefault();\n        toggleOverlay();\n        return;\n      }\n\n      // Multi-key shortcuts\n      const shortcut = getByKeys(key);\n      if (shortcut) {\n        setPendingKey(key);\n        const timeout = setTimeout(() => setPendingKey(null), 1000);\n\n        // Wait for second key or timeout\n        const handleSecondKey = (e2: KeyboardEvent) => {\n          const twoKeyCombo = `${key} ${e2.key.toLowerCase()}`;\n          const fullShortcut = getByKeys(twoKeyCombo);\n\n          if (fullShortcut) {\n            e2.preventDefault();\n            fullShortcut.onExecute();\n          }\n\n          clearTimeout(timeout);\n          setPendingKey(null);\n          document.removeEventListener('keydown', handleSecondKey);\n        };\n\n        document.addEventListener('keydown', handleSecondKey);\n        return;\n      }\n\n      // Single-key shortcuts\n      if (key === '?') {\n        e.preventDefault();\n        toggleOverlay();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [register, setPendingKey, toggleOverlay]);\n\n  return null;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"shortcuts-overlay",children:"Shortcuts Overlay"}),"\n",(0,s.jsx)(n.p,{children:"Display grouped shortcuts with proper formatting:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { groupShortcutsByCategory, formatShortcutKeys } from '@nasnet/state/stores';\n\nfunction ShortcutsOverlay() {\n  const { shortcuts, overlayOpen, closeOverlay } = useShortcutRegistry();\n  const isMac = /Mac|iPhone|iPad|iPod/.test(navigator.platform);\n\n  const grouped = groupShortcutsByCategory(shortcuts);\n\n  return (\n    <Dialog open={overlayOpen} onOpenChange={closeOverlay}>\n      <DialogContent>\n        <DialogTitle>Keyboard Shortcuts</DialogTitle>\n        {Array.from(grouped.entries()).map(([group, shortcuts]) => (\n          <div key={group}>\n            <h3>{group}</h3>\n            <table>\n              <tbody>\n                {shortcuts.map((s) => (\n                  <tr key={s.id}>\n                    <td><kbd>{formatShortcutKeys(s.keys, isMac)}</kbd></td>\n                    <td>{s.label}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        ))}\n      </DialogContent>\n    </Dialog>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"integration-with-command-palette",children:"Integration with Command Palette"}),"\n",(0,s.jsx)(n.p,{children:"The command registry integrates with shortcuts:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Command object can include shortcut display\n{\n  id: 'nav-dashboard',\n  label: 'Go to Dashboard',\n  shortcut: 'g d',  // Displayed in command palette\n  onExecute: () => navigate('/dashboard'),\n}\n\n// Search shows both command and shortcut\n\"Dashboard\" [g d]\n"})}),"\n",(0,s.jsx)(n.h2,{id:"map-serialization-for-persistence",children:"Map Serialization for Persistence"}),"\n",(0,s.jsx)(n.p,{children:"Maps cannot be JSON serialized, so persistence uses custom conversion:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Serialize for storage\nconst persisted = {\n  recentIds: state.recentIds,                    // string[]\n  usageCount: Object.fromEntries(state.usageCount),  // Record<string, number>\n};\n\n// Rehydrate from storage\nconst usageCount = new Map(Object.entries(persisted.usageCount));\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Register at App Root"}),": Register core commands/shortcuts early, domain-specific ones in feature modules"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Unique IDs"}),": Use prefixes for organization: ",(0,s.jsx)(n.code,{children:"nav-*"}),", ",(0,s.jsx)(n.code,{children:"action-*"}),", ",(0,s.jsx)(n.code,{children:"edit-*"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Keyboard Shortcut Conflicts"}),": Resolve via priority groups (navigation > editing > context)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Accessibility"}),": Don't conflict with browser/OS shortcuts (Cmd+Q, Ctrl+L, etc.)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Mobile Handling"}),": Check ",(0,s.jsx)(n.code,{children:"platform"})," before registering; disable shortcuts on mobile"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Documentation"}),": Always provide help overlay with formatted shortcuts"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Testing"}),": Mock registry in tests; avoid keyboard event testing"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"History & Undo/Redo"}),": ",(0,s.jsx)(n.code,{children:"history-undo-redo.md"})," - See useHistoryShortcuts for integration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Core Stores"}),": ",(0,s.jsx)(n.code,{children:"overview.md"})," - Zustand patterns used here"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"State Architecture"}),": ",(0,s.jsx)(n.code,{children:"../../architecture/frontend-architecture.md"})," - State management layer"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);