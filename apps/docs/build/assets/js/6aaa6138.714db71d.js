"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[52816],{71184:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>a});var i=r(14041);const s={},d=i.createContext(s);function t(e){const n=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(d.Provider,{value:n},e.children)}},79730:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"validation-pipeline","title":"Validation Pipeline","description":"Multi-domain input validation across router connection parameters, service configuration, network scanning targets, manifest metadata, and ARP subnet constraints.","source":"@site/../backend/docs/validation-pipeline.md","sourceDirName":".","slug":"/validation-pipeline","permalink":"/docs/backend/validation-pipeline","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../backend/docs/validation-pipeline.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Translator Layer","permalink":"/docs/backend/translator-layer"},"next":{"title":"Virtual Interface Factory (VIF)","permalink":"/docs/backend/virtual-interface-factory"}}');var s=r(31085),d=r(71184);const t={},a="Validation Pipeline",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Package Reference",id:"package-reference",level:2},{value:"<code>internal/config</code> \u2014 Service Config Validators",id:"internalconfig--service-config-validators",level:3},{value:"IP Binding Validation",id:"ip-binding-validation",level:4},{value:"Port Validation",id:"port-validation",level:4},{value:"String and Scalar Validators",id:"string-and-scalar-validators",level:4},{value:"Network Address Validators",id:"network-address-validators",level:4},{value:"Generator Interface",id:"generator-interface",level:4},{value:"<code>internal/router</code> \u2014 Router Input Validator",id:"internalrouter--router-input-validator",level:3},{value:"ValidationError and ValidationErrors",id:"validationerror-and-validationerrors",level:4},{value:"AddRouterInputValidator",id:"addrouterinputvalidator",level:4},{value:"<code>internal/scanner</code> \u2014 RouterOS Response Validator",id:"internalscanner--routeros-response-validator",level:3},{value:"ValidateRouterOSResponse",id:"validaterouterosresponse",level:4},{value:"ValidateSubnet (Scan Target)",id:"validatesubnet-scan-target",level:4},{value:"<code>internal/scanner/arp</code> \u2014 ARP Scan Constraints",id:"internalscannerarp--arp-scan-constraints",level:3},{value:"<code>internal/common/manifest</code> \u2014 Feature Manifest Validator",id:"internalcommonmanifest--feature-manifest-validator",level:3},{value:"Error Formats",id:"error-formats",level:2},{value:"Integration with Config Generation",id:"integration-with-config-generation",level:2},{value:"Cross-References",id:"cross-references",level:2}];function o(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"validation-pipeline",children:"Validation Pipeline"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Multi-domain input validation across router connection parameters, service configuration, network scanning targets, manifest metadata, and ARP subnet constraints."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Packages:"})," ",(0,s.jsx)(n.code,{children:"internal/config/"}),", ",(0,s.jsx)(n.code,{children:"internal/router/"}),", ",(0,s.jsx)(n.code,{children:"internal/scanner/"}),", ",(0,s.jsx)(n.code,{children:"internal/scanner/arp/"}),", ",(0,s.jsx)(n.code,{children:"internal/common/manifest/"}),"\n",(0,s.jsx)(n.strong,{children:"Key Files:"})," ",(0,s.jsx)(n.code,{children:"config/validators.go"}),", ",(0,s.jsx)(n.code,{children:"config/integration_test.go"}),", ",(0,s.jsx)(n.code,{children:"router/validation.go"}),", ",(0,s.jsx)(n.code,{children:"scanner/validation.go"}),", ",(0,s.jsx)(n.code,{children:"scanner/ordering.go"}),", ",(0,s.jsx)(n.code,{children:"scanner/arp/validation.go"}),", ",(0,s.jsx)(n.code,{children:"common/manifest/validate.go"}),"\n",(0,s.jsx)(n.strong,{children:"Prerequisites:"})," [See: 08-provisioning-engine.md \xa7Config Pipeline], [See: 10-feature-marketplace.md \xa7Manifest]"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"NasNetConnect does not have a single monolithic validation pipeline. Instead, validation is applied at system boundaries in discrete, domain-focused packages:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Domain"}),(0,s.jsx)(n.th,{children:"Package"}),(0,s.jsx)(n.th,{children:"What Is Validated"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Service config"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"internal/config/"})}),(0,s.jsx)(n.td,{children:"IP binding, ports, DNS names, URLs, emails, CIDR, ranges"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Router input"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"internal/router/"})}),(0,s.jsx)(n.td,{children:"AddRouter form fields: host, port, username, password, protocol"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"RouterOS response"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"internal/scanner/"})}),(0,s.jsx)(n.td,{children:"REST API response body confidence scoring"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Scan target"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"internal/scanner/"})}),(0,s.jsx)(n.td,{children:"Subnet or IP range scope, privacy, size"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ARP scan"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"internal/scanner/arp/"})}),(0,s.jsx)(n.td,{children:"CIDR format, max subnet size"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Manifest"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"internal/common/manifest/"})}),(0,s.jsx)(n.td,{children:"Feature marketplace manifest structural rules"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Each domain validates at the moment of ingestion: GraphQL mutations validate router inputs before any connection is attempted; config generators validate before file generation; manifest validation runs at download time."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"GraphQL Mutation (AddRouter)\n        \u2502\n        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  AddRouterInputValidator  \u2502  internal/router/validation.go\n\u2502  - host (IP or hostname)  \u2502\n\u2502  - port (1\u201365535)         \u2502\n\u2502  - username (alphanum)    \u2502\n\u2502  - password (non-empty)   \u2502\n\u2502  - protocolPreference     \u2502\n\u2502  - name (length)          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nFeature Marketplace \u2192 Generator.Validate()\n        \u2502\n        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  config.ValidateBindIP()  \u2502  internal/config/validators.go\n\u2502  config.ValidatePort()    \u2502\n\u2502  config.ValidateDNSName() \u2502\n\u2502  config.ValidateURL()     \u2502\n\u2502  ... etc.                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nNetwork Scanner (ScanSubnet)\n        \u2502\n        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  scanner.ValidateSubnet() \u2502  internal/scanner/ordering.go\n\u2502  - CIDR or range format   \u2502\n\u2502  - private IP ranges only \u2502\n\u2502  - max /16 (65536 IPs)    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nARP Scan\n        \u2502\n        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  arp.validateSubnet()     \u2502  internal/scanner/arp/validation.go\n\u2502  - CIDR format only       \u2502\n\u2502  - max /16                \u2502\n\u2502  - max 2000 IPs returned  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nRouterOS REST API Response\n        \u2502\n        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 scanner.ValidateRouterOS  \u2502  internal/scanner/validation.go\n\u2502   Response()              \u2502\n\u2502  - JSON parsing           \u2502\n\u2502  - field presence scoring \u2502\n\u2502  - confidence threshold   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nManifest Download\n        \u2502\n        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  manifest.Validate()      \u2502  internal/common/manifest/validate.go\n\u2502  - ID format              \u2502\n\u2502  - semantic version       \u2502\n\u2502  - architectures          \u2502\n\u2502  - port mappings          \u2502\n\u2502  - resource budget        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"package-reference",children:"Package Reference"}),"\n",(0,s.jsxs)(n.h3,{id:"internalconfig--service-config-validators",children:[(0,s.jsx)(n.code,{children:"internal/config"})," \u2014 Service Config Validators"]}),"\n",(0,s.jsx)(n.p,{children:"Primitive validation functions used by all six feature config generators (Tor, sing-box, Xray, MTProxy, AdGuard Home, Psiphon). These are composable building blocks, not a structured pipeline."}),"\n",(0,s.jsx)(n.h4,{id:"ip-binding-validation",children:"IP Binding Validation"}),"\n",(0,s.jsxs)(n.p,{children:["Every config generator calls ",(0,s.jsx)(n.code,{children:"ValidateBindIP"})," before producing any output. This enforces the VIF isolation invariant: services must bind to a specific VLAN IP, never to the wildcard."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:"// ValidateBindIP validates that a bind IP is not wildcard (0.0.0.0 or ::).\n// Returns error for: empty string, invalid IP, unspecified (wildcard), loopback.\nfunc ValidateBindIP(ip string) error\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Rejection criteria:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Empty string \u2192 ",(0,s.jsx)(n.code,{children:'"bind IP is required"'})]}),"\n",(0,s.jsxs)(n.li,{children:["Unparseable IP \u2192 ",(0,s.jsx)(n.code,{children:'"invalid IP address: %s"'})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"0.0.0.0"})," or ",(0,s.jsx)(n.code,{children:"::"})," (IsUnspecified) \u2192 ",(0,s.jsx)(n.code,{children:'"wildcard IP addresses (...) are not allowed"'})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"127.0.0.1"})," or ",(0,s.jsx)(n.code,{children:"::1"})," (IsLoopback) \u2192 ",(0,s.jsx)(n.code,{children:'"loopback IP addresses (...) are not allowed"'})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["This check is enforced in the integration test suite ",(0,s.jsx)(n.code,{children:"TestAllGenerators_IPBinding"}),", which verifies that all six generators reject ",(0,s.jsx)(n.code,{children:'"0.0.0.0"'})," and ",(0,s.jsx)(n.code,{children:'"::"'})," in both ",(0,s.jsx)(n.code,{children:"Validate()"})," and ",(0,s.jsx)(n.code,{children:"Generate()"}),"."]}),"\n",(0,s.jsx)(n.h4,{id:"port-validation",children:"Port Validation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:"// ValidatePort validates that a port number is in range 1\u201365535.\nfunc ValidatePort(port int) error\n\n// ValidatePortString parses a string port and delegates to ValidatePort.\nfunc ValidatePortString(portStr string) error\n"})}),"\n",(0,s.jsx)(n.h4,{id:"string-and-scalar-validators",children:"String and Scalar Validators"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:"// ValidateNonEmpty checks that a string is not blank (after TrimSpace).\nfunc ValidateNonEmpty(fieldName, value string) error\n\n// ValidateEnum checks that value is one of allowedValues.\nfunc ValidateEnum(fieldName, value string, allowedValues []string) error\n\n// ValidateRange checks minVal <= value <= maxVal.\nfunc ValidateRange(fieldName string, value, minVal, maxVal int) error\n\n// ValidatePositive checks value > 0.\nfunc ValidatePositive(fieldName string, value int) error\n\n// ValidateStringLength checks minLen <= len(value) <= maxLen.\nfunc ValidateStringLength(fieldName, value string, minLen, maxLen int) error\n"})}),"\n",(0,s.jsx)(n.h4,{id:"network-address-validators",children:"Network Address Validators"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:"// ValidateDNSName validates a DNS hostname.\n// Rules: non-empty, max 253 chars, only [a-zA-Z0-9-.].\nfunc ValidateDNSName(hostname string) error\n\n// ValidateURL validates HTTP/HTTPS URL prefix.\nfunc ValidateURL(url string) error\n\n// ValidateEmail validates basic email format (contains @, two non-empty parts).\nfunc ValidateEmail(email string) error\n\n// ValidateIPCIDR validates CIDR notation using net.ParseCIDR.\nfunc ValidateIPCIDR(cidr string) error\n\n// ValidateIPRange validates that startIP <= endIP and both are valid IPs.\nfunc ValidateIPRange(startIP, endIP string) error\n"})}),"\n",(0,s.jsx)(n.h4,{id:"generator-interface",children:"Generator Interface"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"config.Generator"})," interface defines validation as a first-class method:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type Generator interface {\n    GetServiceType() string\n    GetConfigFormat() string    // "json", "yaml", "text"\n    GetConfigFileName() string  // "config.json", "torrc", "AdGuardHome.yaml"\n    GetSchema() *Schema\n    Validate(config map[string]interface{}, bindIP string) error\n    Generate(instanceID string, config map[string]interface{}, bindIP string) ([]byte, error)\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Pipeline within a generator:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Validate(config, bindIP)"})," is called first:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Always calls ",(0,s.jsx)(n.code,{children:"ValidateBindIP(bindIP)"})," first"]}),"\n",(0,s.jsx)(n.li,{children:"Validates required service-specific fields (e.g., port, secret, protocol)"}),"\n",(0,s.jsx)(n.li,{children:"Returns on first error"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Generate(instanceID, config, bindIP)"})," repeats validation (defensive) before templating"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Integration tests"})," (",(0,s.jsx)(n.code,{children:"config/integration_test.go"}),") verify:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"All 6 generators register without conflict"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Validate()"})," accepts valid configs"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Validate()"})," rejects wildcard IPs (",(0,s.jsx)(n.code,{children:"0.0.0.0"}),", ",(0,s.jsx)(n.code,{children:"::"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Validate()"})," rejects invalid IP formats (5 cases: out-of-range, incomplete, extra octets, non-IP, non-numeric)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Validate()"})," rejects empty configs"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GetConfigFormat()"})," and ",(0,s.jsx)(n.code,{children:"GetConfigFileName()"})," match expected values"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GetSchema()"})," returns consistent, self-validating schema"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h3,{id:"internalrouter--router-input-validator",children:[(0,s.jsx)(n.code,{children:"internal/router"})," \u2014 Router Input Validator"]}),"\n",(0,s.jsxs)(n.p,{children:["Validates the ",(0,s.jsx)(n.code,{children:"AddRouter"})," GraphQL mutation input before any connection attempt."]}),"\n",(0,s.jsx)(n.h4,{id:"validationerror-and-validationerrors",children:"ValidationError and ValidationErrors"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'// ValidationError is a single field-level error.\ntype ValidationError struct {\n    Field         string // e.g., "input.host"\n    Code          string // e.g., "REQUIRED", "INVALID_FORMAT", "OUT_OF_RANGE"\n    Message       string // human-readable\n    Suggestion    string // guidance for fixing\n    ProvidedValue string // the invalid value (truncated for display)\n}\n\nfunc (e *ValidationError) Error() string // returns "field: message"\n\n// ValidationErrors is a slice of ValidationError, implements error.\ntype ValidationErrors []*ValidationError\n\nfunc (e ValidationErrors) Error() string   // returns first error string\nfunc (e ValidationErrors) HasErrors() bool // true if len > 0\n'})}),"\n",(0,s.jsx)(n.h4,{id:"addrouterinputvalidator",children:"AddRouterInputValidator"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:"type AddRouterInputData struct {\n    Host               string\n    Port               *int    // optional\n    Username           string\n    Password           string\n    ProtocolPreference *string // optional\n    Name               *string // optional\n}\n\ntype AddRouterInputValidator struct{}\n\nfunc NewAddRouterInputValidator() *AddRouterInputValidator\n\n// Validate runs all field validators and aggregates errors.\n// All fields are validated independently \u2014 multiple errors can be returned.\nfunc (v *AddRouterInputValidator) Validate(input AddRouterInputData) ValidationErrors\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Field validation rules:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Code"}),(0,s.jsx)(n.th,{children:"Rule"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"host"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"REQUIRED"})}),(0,s.jsx)(n.td,{children:"Must not be empty"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"host"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"MAX_LENGTH"})}),(0,s.jsx)(n.td,{children:"Max 253 characters"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"host"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"INVALID_FORMAT"})}),(0,s.jsxs)(n.td,{children:["Must be valid IP (",(0,s.jsx)(n.code,{children:"network.IsValidIP"}),") or hostname (",(0,s.jsx)(n.code,{children:"network.IsValidHostname"}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"port"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OUT_OF_RANGE"})}),(0,s.jsx)(n.td,{children:"Must be 1\u201365535 (if provided)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"username"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"REQUIRED"})}),(0,s.jsx)(n.td,{children:"Must not be empty"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"username"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"MAX_LENGTH"})}),(0,s.jsx)(n.td,{children:"Max 64 characters"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"username"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"INVALID_CHARS"})}),(0,s.jsxs)(n.td,{children:["Only ",(0,s.jsx)(n.code,{children:"[a-zA-Z0-9_\\-.@]"})," allowed"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"password"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"REQUIRED"})}),(0,s.jsx)(n.td,{children:"Must not be empty"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"protocolPreference"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"INVALID_VALUE"})}),(0,s.jsxs)(n.td,{children:["Must be one of: ",(0,s.jsx)(n.code,{children:"AUTO"}),", ",(0,s.jsx)(n.code,{children:"REST"}),", ",(0,s.jsx)(n.code,{children:"API"}),", ",(0,s.jsx)(n.code,{children:"API_SSL"}),", ",(0,s.jsx)(n.code,{children:"SSH"}),", ",(0,s.jsx)(n.code,{children:"TELNET"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"name"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"MAX_LENGTH"})}),(0,s.jsx)(n.td,{children:"Max 128 characters (if provided)"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Design notes:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"All validators run even if an earlier one fails (collect-all-errors pattern)"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ProvidedValue"})," is truncated to 50 chars for sensitive fields to avoid logging credentials"]}),"\n",(0,s.jsxs)(n.li,{children:["Helper functions ",(0,s.jsx)(n.code,{children:"ValidateHostFormat(host)"})," and ",(0,s.jsx)(n.code,{children:"ValidatePortRange(port)"})," wrap individual field checks for standalone use"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h3,{id:"internalscanner--routeros-response-validator",children:[(0,s.jsx)(n.code,{children:"internal/scanner"})," \u2014 RouterOS Response Validator"]}),"\n",(0,s.jsx)(n.p,{children:"Validates whether a REST API response body comes from a RouterOS device."}),"\n",(0,s.jsx)(n.h4,{id:"validaterouterosresponse",children:"ValidateRouterOSResponse"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:"// RouterOSInfo contains extracted device information and confidence score.\ntype RouterOSInfo struct {\n    Version      string\n    Architecture string\n    BoardName    string\n    Platform     string\n    IsValid      bool\n    Confidence   int // 0\u2013100+; >=40 with >=3 fields = valid\n}\n\n// ValidateRouterOSResponse scores a REST API JSON response body.\n// Returns IsValid=false for non-JSON or low-confidence responses.\nfunc ValidateRouterOSResponse(body []byte) RouterOSInfo\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Scoring algorithm:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Parse JSON body \u2014 failure returns ",(0,s.jsx)(n.code,{children:"IsValid=false, Confidence=0"})]}),"\n",(0,s.jsxs)(n.li,{children:["Check for presence of 14 RouterOS-specific fields:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"version"}),", ",(0,s.jsx)(n.code,{children:"version-string"}),", ",(0,s.jsx)(n.code,{children:"architecture"}),", ",(0,s.jsx)(n.code,{children:"architecture-name"}),", ",(0,s.jsx)(n.code,{children:"board-name"}),", ",(0,s.jsx)(n.code,{children:"cpu"}),", ",(0,s.jsx)(n.code,{children:"cpu-count"}),", ",(0,s.jsx)(n.code,{children:"cpu-frequency"}),", ",(0,s.jsx)(n.code,{children:"total-memory"}),", ",(0,s.jsx)(n.code,{children:"free-memory"}),", ",(0,s.jsx)(n.code,{children:"platform"}),", ",(0,s.jsx)(n.code,{children:"factory-software"}),", ",(0,s.jsx)(n.code,{children:"uptime"})]}),"\n",(0,s.jsxs)(n.li,{children:["Each present field: ",(0,s.jsx)(n.code,{children:"+10 points"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Version extraction and scoring:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Valid version format (",(0,s.jsx)(n.code,{children:"N.N"})," or ",(0,s.jsx)(n.code,{children:"N.N.N"}),"): ",(0,s.jsx)(n.code,{children:"+20"})]}),"\n",(0,s.jsxs)(n.li,{children:['Contains "routers" in version string: ',(0,s.jsx)(n.code,{children:"+30"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Architecture scoring:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Contains ",(0,s.jsx)(n.code,{children:"arm"}),"/",(0,s.jsx)(n.code,{children:"x86"}),"/",(0,s.jsx)(n.code,{children:"mips"}),"/",(0,s.jsx)(n.code,{children:"tile"})," (case-insensitive): ",(0,s.jsx)(n.code,{children:"+15"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Board name presence: ",(0,s.jsx)(n.code,{children:"+15"})]}),"\n",(0,s.jsxs)(n.li,{children:['Platform field contains "mikrotik": ',(0,s.jsx)(n.code,{children:"+25"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Validity threshold:"})," ",(0,s.jsx)(n.code,{children:"presentFields >= 3 AND confidence >= 40"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"HTTP 401 handling"})," (",(0,s.jsx)(n.code,{children:"handleUnauthorizedResponse"}),"):"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'JSON content-type with "unauthorized" or "error" in body \u2192 Confidence=35'}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"WWW-Authenticate: Basic"})," header \u2192 Confidence=30"]}),"\n",(0,s.jsxs)(n.li,{children:["Any 401 on ",(0,s.jsx)(n.code,{children:"/rest/system/resource"})," \u2192 Confidence=25 (path itself is strong signal)"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"validatesubnet-scan-target",children:"ValidateSubnet (Scan Target)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'// ValidateSubnet validates a network scan target.\n// Accepts three formats: CIDR ("192.168.1.0/24"), range ("192.168.1.1-192.168.1.100"),\n// or single IP ("192.168.88.1").\nfunc ValidateSubnet(subnet string) error\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Format detection:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Contains ",(0,s.jsx)(n.code,{children:"/"})," \u2192 ",(0,s.jsx)(n.code,{children:"validateCIDRSubnet"})]}),"\n",(0,s.jsxs)(n.li,{children:["Contains ",(0,s.jsx)(n.code,{children:"-"})," \u2192 ",(0,s.jsx)(n.code,{children:"validateIPRange"})]}),"\n",(0,s.jsxs)(n.li,{children:["Otherwise \u2192 ",(0,s.jsx)(n.code,{children:"validateSingleIP"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"CIDR validation rules:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Must parse with ",(0,s.jsx)(n.code,{children:"net.ParseCIDR"})]}),"\n",(0,s.jsx)(n.li,{children:"Must be IPv4 (rejects IPv6 CIDR blocks)"}),"\n",(0,s.jsxs)(n.li,{children:["Must be in private range (",(0,s.jsx)(n.code,{children:"IsPrivateIP"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"hostBits <= 16"})," \u2014 max /16 (65,536 IPs). Rejects /15 and larger."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Range validation rules:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Format: ",(0,s.jsx)(n.code,{children:"startIP-endIP"})]}),"\n",(0,s.jsx)(n.li,{children:"Both IPs must be valid IPv4"}),"\n",(0,s.jsx)(n.li,{children:"Both must be in private range"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"startIP <= endIP"})}),"\n",(0,s.jsxs)(n.li,{children:["Range size ",(0,s.jsx)(n.code,{children:"<= 65,536"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Private range check"})," (",(0,s.jsx)(n.code,{children:"IsPrivateIP"}),"):"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"10.0.0.0/8"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"172.16.0.0/12"})," through ",(0,s.jsx)(n.code,{children:"172.31.0.0"})]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"192.168.0.0/16"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Loopback (",(0,s.jsx)(n.code,{children:"127.x.x.x"}),"), link-local (",(0,s.jsx)(n.code,{children:"169.254.x.x"}),"), and all public IPs are rejected."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h3,{id:"internalscannerarp--arp-scan-constraints",children:[(0,s.jsx)(n.code,{children:"internal/scanner/arp"})," \u2014 ARP Scan Constraints"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:"const (\n    MaxSubnetSize = 16   // Maximum CIDR prefix (/16 minimum)\n    MaxDevices    = 2000 // Maximum IPs returned from generateIPList\n)\n\n// validateSubnet (unexported) validates CIDR for ARP scanning.\n// Stricter than scanner.ValidateSubnet: CIDR format only (no range/single-IP).\nfunc validateSubnet(subnet string) error\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Rules:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Must be valid CIDR (",(0,s.jsx)(n.code,{children:"net.ParseCIDR"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ones >= MaxSubnetSize (16)"})," \u2014 rejects ",(0,s.jsx)(n.code,{children:"/15"})," and larger"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"IP list generation:"})," ",(0,s.jsx)(n.code,{children:"generateIPList"})," iterates the CIDR block up to ",(0,s.jsx)(n.code,{children:"MaxDevices=2000"})," addresses. The ",(0,s.jsx)(n.code,{children:"incIP"})," helper increments byte arrays in-place for efficient traversal."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h3,{id:"internalcommonmanifest--feature-manifest-validator",children:[(0,s.jsx)(n.code,{children:"internal/common/manifest"})," \u2014 Feature Manifest Validator"]}),"\n",(0,s.jsx)(n.p,{children:"Validates feature marketplace manifests at download and import time."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:"// Validate checks manifest structural correctness.\n// Called after JSON unmarshal during feature download.\nfunc (m *Manifest) Validate() error\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Validation checks (in order):"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ID"})," \u2014 Required, matches ",(0,s.jsx)(n.code,{children:"^[a-z0-9-_]+$"})," (",(0,s.jsx)(n.code,{children:"idRegexp"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Name"})," \u2014 Required"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Version"})," \u2014 Required, matches semantic version pattern (",(0,s.jsx)(n.code,{children:"^[0-9]+\\.[0-9]+\\.[0-9]+(-[a-zA-Z0-9]+)?$"}),", via ",(0,s.jsx)(n.code,{children:"versionRegexp"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"DockerImage"})," \u2014 Required"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"DockerTag"})," \u2014 Required"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Architectures"})," \u2014 At least one; each must be ",(0,s.jsx)(n.code,{children:"amd64"}),", ",(0,s.jsx)(n.code,{children:"arm64"}),", ",(0,s.jsx)(n.code,{children:"arm"}),", or ",(0,s.jsx)(n.code,{children:"armv7"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"DockerPullPolicy"})," \u2014 If set, must be ",(0,s.jsx)(n.code,{children:"always"}),", ",(0,s.jsx)(n.code,{children:"if-not-present"}),", or ",(0,s.jsx)(n.code,{children:"never"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"NetworkMode"})," \u2014 If set, must be ",(0,s.jsx)(n.code,{children:"bridge"}),", ",(0,s.jsx)(n.code,{children:"host"}),", or ",(0,s.jsx)(n.code,{children:"none"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Port mappings"})," \u2014 For each port: container_port and host_port in 1\u201365535, protocol is ",(0,s.jsx)(n.code,{children:"tcp"})," or ",(0,s.jsx)(n.code,{children:"udp"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Source"})," \u2014 If present: github_owner, github_repo, binary_name are required; archive_format must be ",(0,s.jsx)(n.code,{children:"none"}),"/",(0,s.jsx)(n.code,{children:"tar.gz"}),"/",(0,s.jsx)(n.code,{children:"zip"}),"; extract_path required when archive_format is set and not ",(0,s.jsx)(n.code,{children:"none"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Resource budget"})," \u2014 min_ram \u2265 0, recommended_ram \u2265 0, recommended_ram \u2265 min_ram (when both > 0), cpu_weight 0\u2013100"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"Schema.Validate()"})," method (called by ",(0,s.jsx)(n.code,{children:"GetSchema()"})," integration tests) performs analogous structural validation on the service config schema definition."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"error-formats",children:"Error Formats"}),"\n",(0,s.jsx)(n.p,{children:"Each domain uses a distinct error style suited to its context:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Domain"}),(0,s.jsx)(n.th,{children:"Error Style"}),(0,s.jsx)(n.th,{children:"Example"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"config/validators.go"})}),(0,s.jsxs)(n.td,{children:["Plain ",(0,s.jsx)(n.code,{children:"error"})," string"]}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'"port must be between 1 and 65535, got 99999"'})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"router/validation.go"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"ValidationError"})," struct"]}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'{Field: "input.host", Code: "REQUIRED", Message: "Host is required", Suggestion: "..."}'})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"scanner/validation.go"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"RouterOSInfo.IsValid=false"})}),(0,s.jsx)(n.td,{children:"Confidence-scored result, not a Go error"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"scanner/ordering.go"})}),(0,s.jsxs)(n.td,{children:["Plain ",(0,s.jsx)(n.code,{children:"error"})," string"]}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'"subnet too large: /15 would require scanning..."'})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"manifest/validate.go"})}),(0,s.jsxs)(n.td,{children:["Plain ",(0,s.jsx)(n.code,{children:"error"})," string"]}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'"manifest ID must contain only lowercase letters..."'})})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"ValidationErrors"})," type in ",(0,s.jsx)(n.code,{children:"internal/router/"})," is the only aggregating error \u2014 it collects all field errors in a single pass. All other validators return on first error."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"integration-with-config-generation",children:"Integration with Config Generation"}),"\n",(0,s.jsx)(n.p,{children:"The config package validation functions are the primary defense layer before config file generation [See: 08-provisioning-engine.md \xa7Config Pipeline]. The lifecycle is:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"GraphQL Mutation: CreateServiceInstance\n        \u2502\n        \u25bc\n1. Generator.Validate(userConfig, bindIP)\n   \u251c\u2500\u2500 ValidateBindIP(bindIP)           \u2190 Rejects wildcard/loopback\n   \u251c\u2500\u2500 ValidatePort(port)               \u2190 Rejects out-of-range\n   \u251c\u2500\u2500 ValidateNonEmpty(...)            \u2190 Rejects missing required fields\n   \u2514\u2500\u2500 Service-specific rules           \u2190 e.g., UUID format for Xray\n        \u2502 if error \u2192 return GraphQL validation error\n        \u25bc\n2. Generator.Generate(instanceID, config, bindIP)\n   \u251c\u2500\u2500 (repeats Validate defensively)\n   \u2514\u2500\u2500 Template rendering \u2192 config bytes\n        \u2502\n        \u25bc\n3. Write config file to service working directory\n4. Start service process [See: 06-service-orchestrator.md]\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The binding IP (",(0,s.jsx)(n.code,{children:"bindIP"}),") always comes from the VIF allocation for the service's VLAN, ensuring config validation and VIF isolation operate consistently [See: 07-virtual-interface-factory.md]."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"cross-references",children:"Cross-References"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["[See: 03-graphql-api.md \xa7Directives] \u2014 ",(0,s.jsx)(n.code,{children:"@validate"})," directive for GraphQL-layer input coercion"]}),"\n",(0,s.jsx)(n.li,{children:"[See: 04-router-communication.md \xa7AddRouter] \u2014 Router validator used before connection creation"}),"\n",(0,s.jsx)(n.li,{children:"[See: 08-provisioning-engine.md \xa7Config Pipeline] \u2014 Config validators in the provisioning flow"}),"\n",(0,s.jsx)(n.li,{children:"[See: 10-feature-marketplace.md \xa7Manifest Download] \u2014 Manifest validator at download time"}),"\n",(0,s.jsxs)(n.li,{children:["[See: 07-virtual-interface-factory.md] \u2014 VIF IP allocation feeds ",(0,s.jsx)(n.code,{children:"bindIP"})," into config validators"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);