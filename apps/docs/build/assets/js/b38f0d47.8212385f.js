"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[98655],{5566:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"feature-modules/vpn","title":"VPN Feature","description":"The VPN feature manages all MikroTik VPN tunnels \u2014 both outgoing client connections","source":"@site/../connect/docs/feature-modules/vpn.md","sourceDirName":"feature-modules","slug":"/feature-modules/vpn","permalink":"/docs/frontend/feature-modules/vpn","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../connect/docs/feature-modules/vpn.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Services Feature Module","permalink":"/docs/frontend/feature-modules/services"},"next":{"title":"Wireless Feature Module","permalink":"/docs/frontend/feature-modules/wireless"}}');var i=n(31085),t=n(71184);const d={},c="VPN Feature",l={},o=[{value:"Page Overview",id:"page-overview",level:2},{value:"VPN Dashboard",id:"vpn-dashboard",level:2},{value:"Data Source",id:"data-source",level:3},{value:"VPN Servers Page",id:"vpn-servers-page",level:2},{value:"Supported Protocol Architecture",id:"supported-protocol-architecture",level:3},{value:"Data Hooks (all from <code>@nasnet/api-client/queries</code>)",id:"data-hooks-all-from-nasnetapi-clientqueries",level:3},{value:"Server Card (<code>VPNServerCard</code>)",id:"server-card-vpnservercard",level:3},{value:"VPN Clients Page",id:"vpn-clients-page",level:2},{value:"Protocol to Data Hook Mapping",id:"protocol-to-data-hook-mapping",level:3},{value:"Client Card (<code>VPNClientCard</code>)",id:"client-card-vpnclientcard",level:3},{value:"Protocol Tab Navigation",id:"protocol-tab-navigation",level:3},{value:"VPN Quick View Page (<code>VPNPage</code>)",id:"vpn-quick-view-page-vpnpage",level:2},{value:"Enable/Disable Mutation",id:"enabledisable-mutation",level:2},{value:"Protocol Constants",id:"protocol-constants",level:2},{value:"Kill Switch",id:"kill-switch",level:2},{value:"Accessibility",id:"accessibility",level:2},{value:"Related",id:"related",level:2}];function a(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"vpn-feature",children:"VPN Feature"})}),"\n",(0,i.jsx)(r.p,{children:"The VPN feature manages all MikroTik VPN tunnels \u2014 both outgoing client connections\nand incoming server configurations \u2014 across six protocols. It consists of three\nmain pages and a shared quick-view page, all mounted inside the router panel."}),"\n",(0,i.jsx)(r.h2,{id:"page-overview",children:"Page Overview"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Page"}),(0,i.jsx)(r.th,{children:"Route"}),(0,i.jsx)(r.th,{children:"Component"}),(0,i.jsx)(r.th,{children:"Source"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"VPN Dashboard"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/router/$id/vpn"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"VPNDashboard"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"apps/connect/src/app/pages/vpn/VPNDashboard.tsx"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"VPN Servers"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/router/$id/vpn/servers"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"VPNServersPage"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"apps/connect/src/app/pages/vpn/servers/VPNServersPage.tsx"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"VPN Clients"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/router/$id/vpn/clients"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"VPNClientsPage"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"apps/connect/src/app/pages/vpn/clients/VPNClientsPage.tsx"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"VPN Quick View"}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"/vpn"})," (global)"]}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"VPNPage"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"apps/connect/src/app/pages/vpn/VPNPage.tsx"})})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"vpn-dashboard",children:"VPN Dashboard"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"VPNDashboard"})," provides a high-level overview of all VPN activity on the router."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:'VPNDashboard\n\u251c\u2500\u2500 Header (title + refresh button, 44px min-height)\n\u251c\u2500\u2500 Loading skeleton (3 skeletons while fetching)\n\u251c\u2500\u2500 Error state (alert role banner with retry)\n\u2514\u2500\u2500 Dashboard content\n    \u251c\u2500\u2500 VPNStatusHero         # Overall health + connection counts + bandwidth totals\n    \u251c\u2500\u2500 Navigation Cards (2)\n    \u2502   \u251c\u2500\u2500 VPNNavigationCard (server)   # Total/active servers \u2192 navigates to /servers\n    \u2502   \u2514\u2500\u2500 VPNNavigationCard (client)   # Total/active clients \u2192 navigates to /clients\n    \u251c\u2500\u2500 Protocol Stats Grid (1\u20133 columns)\n    \u2502   \u2514\u2500\u2500 VPNProtocolStatsCard \xd7 6     # One per protocol (WireGuard \u2192 IKEv2)\n    \u2514\u2500\u2500 Issues Section (conditional)\n        \u2514\u2500\u2500 VPNIssuesList (max 5, with "See all" link)\n'})}),"\n",(0,i.jsx)(r.h3,{id:"data-source",children:"Data Source"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"useVPNStats(routerIp)"})," (TanStack Query) fetches the aggregate VPN statistics\nobject:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-ts",children:"interface VPNStats {\n  overallHealth: 'healthy' | 'degraded' | 'error';\n  totalServers: number;\n  totalClients: number;\n  activeServers: number;\n  activeClients: number;\n  totalServerConnections: number;\n  totalClientConnections: number;\n  totalRx: number;\n  totalTx: number;\n  protocolStats: ProtocolStat[];  // one entry per protocol\n  issues: VPNIssue[];\n}\n"})}),"\n",(0,i.jsxs)(r.p,{children:["Protocol display order is fixed: ",(0,i.jsx)(r.code,{children:"wireguard \u2192 openvpn \u2192 l2tp \u2192 pptp \u2192 sstp \u2192 ikev2"}),"."]}),"\n",(0,i.jsx)(r.p,{children:"Navigation from the dashboard:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:['"Configure Servers" \u2192 ',(0,i.jsx)(r.code,{children:"/router/${routerId}/vpn/servers"})]}),"\n",(0,i.jsxs)(r.li,{children:['"Configure Clients" \u2192 ',(0,i.jsx)(r.code,{children:"/router/${routerId}/vpn/clients"})]}),"\n",(0,i.jsxs)(r.li,{children:["Clicking a ",(0,i.jsx)(r.code,{children:"VPNProtocolStatsCard"})," \u2192 ",(0,i.jsx)(r.code,{children:"/router/${routerId}/vpn/servers?protocol=<p>"}),"\nwhich pre-selects the matching tab on the servers page."]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"vpn-servers-page",children:"VPN Servers Page"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"VPNServersPage"})," lists every VPN server configuration, grouped by protocol in\ncollapsible ",(0,i.jsx)(r.code,{children:"VPNTypeSection"})," accordions. Protocol tabs allow filtering to a\nsingle type."]}),"\n",(0,i.jsx)(r.h3,{id:"supported-protocol-architecture",children:"Supported Protocol Architecture"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Protocol"}),(0,i.jsx)(r.th,{children:"Server type"}),(0,i.jsx)(r.th,{children:"MikroTik model"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"WireGuard"}),(0,i.jsx)(r.td,{children:"Multiple interface instances"}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"wg*"})," interfaces"]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"OpenVPN"}),(0,i.jsx)(r.td,{children:"Multiple server instances"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"ovpn-server"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"L2TP"}),(0,i.jsx)(r.td,{children:"Single global server"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/interface l2tp-server server"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"PPTP"}),(0,i.jsx)(r.td,{children:"Single global server"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/interface pptp-server server"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"SSTP"}),(0,i.jsx)(r.td,{children:"Single global server"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/interface sstp-server server"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"IKEv2/IPsec"}),(0,i.jsx)(r.td,{children:"Passive IPsec peers"}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"/ip ipsec peer"})," with ",(0,i.jsx)(r.code,{children:"passive=yes"})]})]})]})]}),"\n",(0,i.jsx)(r.p,{children:"L2TP, PPTP, and SSTP each expose one server object; WireGuard, OpenVPN, and\nIKEv2 support multiple instances."}),"\n",(0,i.jsxs)(r.h3,{id:"data-hooks-all-from-nasnetapi-clientqueries",children:["Data Hooks (all from ",(0,i.jsx)(r.code,{children:"@nasnet/api-client/queries"}),")"]}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Hook"}),(0,i.jsx)(r.th,{children:"Returns"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"useWireGuardInterfaces(routerIp)"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"WireGuardInterface[]"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"useOpenVPNServers(routerIp)"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"OpenVPNServer[]"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"useL2TPServer(routerIp)"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"L2TPServer | undefined"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"usePPTPServer(routerIp)"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"PPTPServer | undefined"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"useSSTPServer(routerIp)"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"SSTPServer | undefined"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"useIPsecPeers(routerIp)"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"IPsecPeer[]"})," \u2014 filtered with ",(0,i.jsx)(r.code,{children:"isPassive=true"})," for servers"]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"usePPPActive(routerIp)"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"PPPActiveSession[]"})," \u2014 for connected-client counts"]})]})]})]}),"\n",(0,i.jsxs)(r.p,{children:["All queries run in parallel. The combined ",(0,i.jsx)(r.code,{children:"isLoading"})," drives the skeleton and the\ncombined ",(0,i.jsx)(r.code,{children:"isFetching"})," drives the refresh button spinner."]}),"\n",(0,i.jsxs)(r.p,{children:["Connected client counts for L2TP, PPTP, SSTP, and OpenVPN are derived from\n",(0,i.jsx)(r.code,{children:"pppActiveQuery.data?.filter(c => c.service === '<service>')"}),"."]}),"\n",(0,i.jsxs)(r.h3,{id:"server-card-vpnservercard",children:["Server Card (",(0,i.jsx)(r.code,{children:"VPNServerCard"}),")"]}),"\n",(0,i.jsxs)(r.p,{children:["Each server is rendered as a ",(0,i.jsx)(r.code,{children:"VPNServerCard"})," from ",(0,i.jsx)(r.code,{children:"@nasnet/ui/patterns"})," with:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Protocol icon badge."}),"\n",(0,i.jsxs)(r.li,{children:["Enable/disable toggle (calls ",(0,i.jsx)(r.code,{children:"useToggleVPNInterface"})," mutation)."]}),"\n",(0,i.jsx)(r.li,{children:"Edit button \u2192 navigates to the server's edit route."}),"\n",(0,i.jsx)(r.li,{children:"Delete button (WireGuard, OpenVPN, IKEv2 only; L2TP/PPTP/SSTP are singletons)."}),"\n",(0,i.jsx)(r.li,{children:"View Details button (WireGuard)."}),"\n",(0,i.jsx)(r.li,{children:"Connected client count (PPP-based protocols)."}),"\n",(0,i.jsx)(r.li,{children:"Listen port display."}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"vpn-clients-page",children:"VPN Clients Page"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"VPNClientsPage"})," mirrors the servers page structure but for outgoing client\nconnections."]}),"\n",(0,i.jsx)(r.h3,{id:"protocol-to-data-hook-mapping",children:"Protocol to Data Hook Mapping"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Protocol"}),(0,i.jsx)(r.th,{children:"Hook"}),(0,i.jsx)(r.th,{children:"Filtering"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"WireGuard"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"useWireGuardPeers(routerIp)"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"filter(p => p.endpoint)"})," \u2014 peers with endpoint = clients"]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"OpenVPN"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"useOpenVPNClients(routerIp)"})}),(0,i.jsx)(r.td,{children:"All returned records"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"L2TP"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"useL2TPClients(routerIp)"})}),(0,i.jsx)(r.td,{children:"All"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"PPTP"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"usePPTPClients(routerIp)"})}),(0,i.jsx)(r.td,{children:"All"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"SSTP"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"useSSTPClients(routerIp)"})}),(0,i.jsx)(r.td,{children:"All"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"IKEv2/IPsec"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"useIPsecPeers(routerIp)"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"filter(p => !p.isPassive)"})," \u2014 non-passive = clients"]})]})]})]}),"\n",(0,i.jsxs)(r.p,{children:["IPsec active connections are fetched in parallel via ",(0,i.jsx)(r.code,{children:"useIPsecActive(routerIp)"}),"\nand joined by ",(0,i.jsx)(r.code,{children:"peer"})," ID to display runtime metrics (uptime, RX/TX, local/remote\naddress)."]}),"\n",(0,i.jsxs)(r.h3,{id:"client-card-vpnclientcard",children:["Client Card (",(0,i.jsx)(r.code,{children:"VPNClientCard"}),")"]}),"\n",(0,i.jsxs)(r.p,{children:["Each client is rendered as a ",(0,i.jsx)(r.code,{children:"VPNClientCard"})," from ",(0,i.jsx)(r.code,{children:"@nasnet/ui/patterns"})," with:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Protocol icon badge."}),"\n",(0,i.jsx)(r.li,{children:"Enable/disable toggle."}),"\n",(0,i.jsxs)(r.li,{children:["Connection target (",(0,i.jsx)(r.code,{children:"connectTo"})," / endpoint)."]}),"\n",(0,i.jsx)(r.li,{children:"Port, user, uptime, RX/TX (where applicable)."}),"\n",(0,i.jsx)(r.li,{children:"Local / remote address for tunnelled protocols."}),"\n",(0,i.jsx)(r.li,{children:"Last handshake for WireGuard peers."}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"protocol-tab-navigation",children:"Protocol Tab Navigation"}),"\n",(0,i.jsxs)(r.p,{children:["A URL search parameter ",(0,i.jsx)(r.code,{children:"?protocol=<protocol>"})," pre-selects the tab on load:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-ts",children:"const initialProtocol = (search as { protocol?: VPNProtocol }).protocol || null;\nconst [activeTab, setActiveTab] = useState<VPNProtocol | 'all'>(initialProtocol || 'all');\n"})}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(r.code,{children:"VPNDashboard"})," uses this when the user clicks a protocol stats card."]}),"\n",(0,i.jsxs)(r.h2,{id:"vpn-quick-view-page-vpnpage",children:["VPN Quick View Page (",(0,i.jsx)(r.code,{children:"VPNPage"}),")"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"VPNPage"})," is the lightweight, always-visible ",(0,i.jsx)(r.code,{children:"/vpn"})," route. It shows:"]}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"WireGuard interfaces"})," \u2014 rendered as ",(0,i.jsx)(r.code,{children:"WireGuardCard"})," components with\nstatus, listening port, public key (copyable), and peer count."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Other VPN types"})," \u2014 L2TP, PPTP, SSTP rendered as collapsed ",(0,i.jsx)(r.code,{children:"VPNTypeSection"}),"\naccordions containing ",(0,i.jsx)(r.code,{children:"GenericVPNCard"})," items."]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["It uses 5-second auto-refresh via TanStack Query's ",(0,i.jsx)(r.code,{children:"refetchInterval"})," on\n",(0,i.jsx)(r.code,{children:"useWireGuardInterfaces"}),". The manual refresh button updates the WireGuard data\nimmediately; PPP protocols are refreshed passively."]}),"\n",(0,i.jsx)(r.h2,{id:"enabledisable-mutation",children:"Enable/Disable Mutation"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"useToggleVPNInterface()"})," (from ",(0,i.jsx)(r.code,{children:"@nasnet/api-client/queries"}),") is shared across\nall three pages. It accepts:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-ts",children:"{\n  routerIp: string;\n  id: string;\n  name: string;\n  protocol: VPNProtocol;\n  disabled: boolean;  // true = disable, false = enable\n}\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"toggleMutation.isPending"})," drives a loading indicator on the card's toggle\ncontrol."]}),"\n",(0,i.jsx)(r.h2,{id:"protocol-constants",children:"Protocol Constants"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-ts",children:"const ALL_PROTOCOLS: VPNProtocol[] = [\n  'wireguard', 'openvpn', 'l2tp', 'pptp', 'sstp', 'ikev2'\n];\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"getProtocolLabel(protocol)"})," from ",(0,i.jsx)(r.code,{children:"@nasnet/ui/patterns"})," returns the human-readable\nlabel (e.g. ",(0,i.jsx)(r.code,{children:"'IKEv2/IPsec'"})," for ",(0,i.jsx)(r.code,{children:"'ikev2'"}),")."]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"ProtocolIconBadge"})," renders the protocol-specific icon at ",(0,i.jsx)(r.code,{children:"sm"})," or ",(0,i.jsx)(r.code,{children:"lg"})," size."]}),"\n",(0,i.jsx)(r.h2,{id:"kill-switch",children:"Kill Switch"}),"\n",(0,i.jsxs)(r.p,{children:["The kill switch feature is managed at the service/network layer\n(",(0,i.jsx)(r.code,{children:"apps/backend/internal/vif/isolation/kill_switch_coordinator_test.go"}),",\n",(0,i.jsx)(r.code,{children:"kill_switch_listener.go"}),"). On the frontend it surfaces as:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"The VPN routing configuration page under the router panel."}),"\n",(0,i.jsx)(r.li,{children:"Kill switch state is part of the service isolation query."}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"See the architecture doc for kill-switch coordinator details."}),"\n",(0,i.jsx)(r.h2,{id:"accessibility",children:"Accessibility"}),"\n",(0,i.jsx)(r.p,{children:"All interactive controls in the VPN pages meet WCAG AAA requirements:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"min-h-[44px]"})," on all buttons."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"focus-visible:ring-2"})," on all focusable elements."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"aria-label"})," on icon-only buttons."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:'role="status"'})," on loading containers."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:'role="alert"'})," on error banners."]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"related",children:"Related"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"../data-fetching/graphql-hooks.md"})," \u2014 ",(0,i.jsx)(r.code,{children:"useVPNStats"}),", ",(0,i.jsx)(r.code,{children:"useWireGuardInterfaces"}),",\n",(0,i.jsx)(r.code,{children:"useWireGuardPeers"}),", ",(0,i.jsx)(r.code,{children:"useToggleVPNInterface"}),", and all VPN protocol hooks."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"../ui-system/patterns-catalog.md"})," \u2014 ",(0,i.jsx)(r.code,{children:"VPNStatusHero"}),", ",(0,i.jsx)(r.code,{children:"VPNProtocolStatsCard"}),",\n",(0,i.jsx)(r.code,{children:"VPNNavigationCard"}),", ",(0,i.jsx)(r.code,{children:"VPNIssuesList"}),", ",(0,i.jsx)(r.code,{children:"VPNClientCard"}),", ",(0,i.jsx)(r.code,{children:"VPNServerCard"}),",\n",(0,i.jsx)(r.code,{children:"VPNTypeSection"}),", ",(0,i.jsx)(r.code,{children:"WireGuardCard"}),", ",(0,i.jsx)(r.code,{children:"GenericVPNCard"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},71184:(e,r,n)=>{n.d(r,{R:()=>d,x:()=>c});var s=n(14041);const i={},t=s.createContext(i);function d(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(t.Provider,{value:r},e.children)}}}]);