"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[50919],{71184:(r,e,n)=>{n.d(e,{R:()=>i,x:()=>a});var o=n(14041);const t={},s=o.createContext(t);function i(r){const e=o.useContext(s);return o.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function a(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(t):r.components||t:i(r.components),o.createElement(s.Provider,{value:e},r.children)}},82708:(r,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"error-handling","title":"Error Handling Architecture","description":"File: libs/features/docs/error-handling.md","source":"@site/../../libs/features/docs/error-handling.md","sourceDirName":".","slug":"/error-handling","permalink":"/docs/features/error-handling","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../../libs/features/docs/error-handling.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Cross-Cutting Flows","permalink":"/docs/features/cross-cutting-flows"},"next":{"title":"Feature Module: Alerts (libs/features/alerts)","permalink":"/docs/features/feature-alerts"}}');var t=n(31085),s=n(71184);const i={},a="Error Handling Architecture",l={},d=[{value:"Overview",id:"overview",level:2},{value:"Three-Tier Hierarchy",id:"three-tier-hierarchy",level:2},{value:"Base ErrorBoundary",id:"base-errorboundary",level:2},{value:"Key Methods",id:"key-methods",level:3},{value:"Props",id:"props",level:3},{value:"Features",id:"features",level:3},{value:"AppErrorBoundary",id:"apperrorboundary",level:2},{value:"Features",id:"features-1",level:3},{value:"Integration Example",id:"integration-example",level:3},{value:"When It Fires",id:"when-it-fires",level:3},{value:"RouteErrorBoundary",id:"routeerrorboundary",level:2},{value:"Features",id:"features-2",level:3},{value:"RouteErrorDisplay Component",id:"routeerrordisplay-component",level:3},{value:"Integration with TanStack Router",id:"integration-with-tanstack-router",level:3},{value:"Route-level errorComponent",id:"route-level-errorcomponent",level:4},{value:"Layout-level boundary",id:"layout-level-boundary",level:4},{value:"Auto-Reset Behavior",id:"auto-reset-behavior",level:3},{value:"ComponentErrorBoundary",id:"componenterrorboundary",level:2},{value:"InlineErrorCard Component",id:"inlineerrorcard-component",level:3},{value:"Features",id:"features-3",level:3},{value:"Usage Example",id:"usage-example",level:3},{value:"withErrorBoundary HOC",id:"witherrorboundary-hoc",level:2},{value:"Signature",id:"signature",level:3},{value:"Usage Examples",id:"usage-examples",level:3},{value:"useErrorBoundaryWrapper Hook",id:"useerrorboundarywrapper-hook",level:3},{value:"TanStack Router Error Integration",id:"tanstack-router-error-integration",level:2},{value:"Root Route Configuration",id:"root-route-configuration",level:3},{value:"Error Handling Flow in Router",id:"error-handling-flow-in-router",level:3},{value:"Error Display Patterns",id:"error-display-patterns",level:2},{value:"ErrorDisplay Component",id:"errordisplay-component",level:3},{value:"Toast Notifications",id:"toast-notifications",level:3},{value:"Inline Error States",id:"inline-error-states",level:3},{value:"GraphQL Error Handling",id:"graphql-error-handling",level:2},{value:"Error Categories",id:"error-categories",level:3},{value:"Error Logging",id:"error-logging",level:3},{value:"Error Policies",id:"error-policies",level:3},{value:"Error Flow Diagram",id:"error-flow-diagram",level:2},{value:"Testing Error Boundaries",id:"testing-error-boundaries",level:2},{value:"Test Patterns",id:"test-patterns",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Cross-References",id:"cross-references",level:2}];function c(r){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...r.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"error-handling-architecture",children:"Error Handling Architecture"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"File:"})," ",(0,t.jsx)(e.code,{children:"libs/features/docs/error-handling.md"})]}),"\n",(0,t.jsx)(e.p,{children:"NasNetConnect implements a comprehensive 3-tier error boundary system for resilient frontend error handling and graceful error recovery. This document covers the hierarchy, implementation patterns, and integration guidelines."}),"\n",(0,t.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(e.p,{children:["The error handling architecture provides ",(0,t.jsx)(e.strong,{children:"graceful degradation"})," through nested error boundaries:"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Tier 1 (AppErrorBoundary):"})," Catches catastrophic failures that escape all other boundaries. Shows full-page error UI with reload and error reporting options."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Tier 2 (RouteErrorBoundary):"})," Isolates errors to specific routes. Errors don't affect other routes or the main layout. Auto-resets on route change."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Tier 3 (ComponentErrorBoundary):"})," Isolates errors to individual components/widgets. Shows inline error cards that don't disrupt surrounding UI."]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Philosophy:"})," Errors are caught as close as possible to their source. Only errors that escape a boundary bubble up to the next level. This prevents a single component error from crashing the entire application."]}),"\n",(0,t.jsx)(e.h2,{id:"three-tier-hierarchy",children:"Three-Tier Hierarchy"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 AppErrorBoundary (Outermost)                                \u2502\n\u2502 \u251c\u2500 Catches: Catastrophic failures, provider initialization  \u2502\n\u2502 \u251c\u2500 Scope: Entire application                                \u2502\n\u2502 \u251c\u2500 Display: Full-page error UI with reload/home buttons     \u2502\n\u2502 \u2514\u2500 Action: Reload application                               \u2502\n\u2502                                                               \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502 RouteErrorBoundary (Middle)                            \u2502 \u2502\n\u2502  \u2502 \u251c\u2500 Catches: Route-level render errors                  \u2502 \u2502\n\u2502  \u2502 \u251c\u2500 Scope: Single route/page                            \u2502 \u2502\n\u2502  \u2502 \u251c\u2500 Display: Error message with navigation options      \u2502 \u2502\n\u2502  \u2502 \u251c\u2500 Action: Retry (reset boundary) or navigate away     \u2502 \u2502\n\u2502  \u2502 \u2514\u2500 Auto-reset: When pathname changes                   \u2502 \u2502\n\u2502  \u2502                                                          \u2502 \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502 \u2502\n\u2502  \u2502  \u2502 ComponentErrorBoundary (Innermost)               \u2502  \u2502 \u2502\n\u2502  \u2502  \u2502 \u251c\u2500 Catches: Component-level render errors        \u2502  \u2502 \u2502\n\u2502  \u2502  \u2502 \u251c\u2500 Scope: Single widget/feature                  \u2502  \u2502 \u2502\n\u2502  \u2502  \u2502 \u251c\u2500 Display: Inline error card                    \u2502  \u2502 \u2502\n\u2502  \u2502  \u2502 \u2514\u2500 Action: Retry (reset boundary)                \u2502  \u2502 \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Error Flow:"})," Component error \u2192 caught by nearest boundary \u2192 fallback UI \u2192 user action (retry/navigate) \u2192 attempt recovery or escalate to parent boundary."]}),"\n",(0,t.jsx)(e.h2,{id:"base-errorboundary",children:"Base ErrorBoundary"}),"\n",(0,t.jsxs)(e.p,{children:["Located: ",(0,t.jsx)(e.code,{children:"libs/ui/patterns/src/error-boundary/ErrorBoundary.tsx"})]}),"\n",(0,t.jsx)(e.p,{children:"The foundation class component that all other boundaries build upon. Implements React's error boundary lifecycle methods."}),"\n",(0,t.jsx)(e.h3,{id:"key-methods",children:"Key Methods"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"// getDerivedStateFromError: Synchronously called when an error is caught\n// Updates state so the next render shows fallback UI\nstatic getDerivedStateFromError(error: Error): Partial<ErrorBoundaryState> {\n  return { hasError: true, error };\n}\n\n// componentDidCatch: Called after an error is caught\n// Receives error and component stack trace\noverride componentDidCatch(error: Error, errorInfo: React.ErrorInfo): void {\n  this.setState({ errorInfo });\n  if (import.meta.env.DEV) {\n    console.group('[ErrorBoundary] Caught error');\n    console.error('Error:', error);\n    console.error('Component Stack:', errorInfo.componentStack);\n    console.groupEnd();\n  }\n  this.props.onError?.(error, errorInfo);\n}\n\n// resetErrorBoundary: Called to recover from an error state\nresetErrorBoundary = (): void => {\n  this.props.onReset?.();\n  this.setState({\n    hasError: false,\n    error: null,\n    errorInfo: null,\n  });\n};\n"})}),"\n",(0,t.jsx)(e.h3,{id:"props",children:"Props"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Prop"}),(0,t.jsx)(e.th,{children:"Type"}),(0,t.jsx)(e.th,{children:"Purpose"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"children"})}),(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"ReactNode"})}),(0,t.jsx)(e.td,{children:"Components to protect"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"fallback"})}),(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"ReactNode | (props) => ReactNode"})}),(0,t.jsx)(e.td,{children:"UI to show on error (static or render prop)"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"onError"})}),(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"(error, info) => void"})}),(0,t.jsx)(e.td,{children:"Callback when error is caught (logging/telemetry)"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"onReset"})}),(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"() => void"})}),(0,t.jsx)(e.td,{children:"Callback when boundary resets"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"resetKey"})}),(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"string | number"})}),(0,t.jsx)(e.td,{children:"Change to auto-reset (useful for route changes)"})]})]})]}),"\n",(0,t.jsx)(e.h3,{id:"features",children:"Features"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Catches render errors, lifecycle method errors, constructor errors"}),"\n",(0,t.jsx)(e.li,{children:"Configurable fallback UI (static component or render function)"}),"\n",(0,t.jsx)(e.li,{children:"Reset capability for retry functionality"}),"\n",(0,t.jsx)(e.li,{children:"Error logging with component stack"}),"\n",(0,t.jsx)(e.li,{children:"Key-based reset for route changes"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"apperrorboundary",children:"AppErrorBoundary"}),"\n",(0,t.jsxs)(e.p,{children:["Located: ",(0,t.jsx)(e.code,{children:"libs/ui/patterns/src/error-boundary/AppErrorBoundary.tsx"})]}),"\n",(0,t.jsx)(e.p,{children:"The outermost boundary for catching catastrophic failures that escape all other boundaries (provider initialization errors, unrecoverable crashes)."}),"\n",(0,t.jsx)(e.h3,{id:"features-1",children:"Features"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Full-page error display (centers error message with white card on error background)"}),"\n",(0,t.jsxs)(e.li,{children:["Reload Application button (hard page reload via ",(0,t.jsx)(e.code,{children:"window.location.reload()"}),")"]}),"\n",(0,t.jsx)(e.li,{children:"Try Again button (resets boundary state)"}),"\n",(0,t.jsx)(e.li,{children:"Go to Dashboard button (navigates to home)"}),"\n",(0,t.jsx)(e.li,{children:"Report Issue button (copies error details to clipboard for debugging)"}),"\n",(0,t.jsx)(e.li,{children:"Technical details panel (always visible in dev mode, collapsible in production)"}),"\n",(0,t.jsx)(e.li,{children:"Structured logging with timestamp, URL, user agent"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"integration-example",children:"Integration Example"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"// In main.tsx or root app wrapper\n<AppErrorBoundary onError={logToTelemetry}>\n  <ApolloProvider client={apolloClient}>\n    <ThemeProvider>\n      <App />\n    </ThemeProvider>\n  </ApolloProvider>\n</AppErrorBoundary>\n"})}),"\n",(0,t.jsx)(e.h3,{id:"when-it-fires",children:"When It Fires"}),"\n",(0,t.jsx)(e.p,{children:"This boundary catches errors that occur:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"During provider initialization"}),"\n",(0,t.jsx)(e.li,{children:"In event handlers not caught by other boundaries"}),"\n",(0,t.jsx)(e.li,{children:"In async errors that become synchronous (rare)"}),"\n",(0,t.jsx)(e.li,{children:"Critical framework errors"}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Example:"})," If Apollo Client initialization fails, ",(0,t.jsx)(e.code,{children:"AppErrorBoundary"})," will catch it and display the full-page error UI instead of a blank page."]}),"\n",(0,t.jsx)(e.h2,{id:"routeerrorboundary",children:"RouteErrorBoundary"}),"\n",(0,t.jsxs)(e.p,{children:["Located: ",(0,t.jsx)(e.code,{children:"libs/ui/patterns/src/error-boundary/RouteErrorBoundary.tsx"})]}),"\n",(0,t.jsxs)(e.p,{children:["Route-level error boundary for per-route isolation. Automatically resets when the route changes using TanStack Router's ",(0,t.jsx)(e.code,{children:"useLocation"})," hook."]}),"\n",(0,t.jsx)(e.h3,{id:"features-2",children:"Features"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Route-level error isolation (one route's error doesn't affect others)"}),"\n",(0,t.jsxs)(e.li,{children:["Auto-reset on pathname change (via ",(0,t.jsx)(e.code,{children:"resetKey"}),")"]}),"\n",(0,t.jsx)(e.li,{children:"TanStack Router integration (can be used as errorComponent)"}),"\n",(0,t.jsx)(e.li,{children:"User-friendly error display with navigation options"}),"\n",(0,t.jsx)(e.li,{children:"Network error detection (contextual messaging)"}),"\n",(0,t.jsx)(e.li,{children:"Detailed error inspection panel (dev mode)"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"routeerrordisplay-component",children:"RouteErrorDisplay Component"}),"\n",(0,t.jsxs)(e.p,{children:["Can be used both as a fallback in ",(0,t.jsx)(e.code,{children:"RouteErrorBoundary"})," and as a TanStack Router ",(0,t.jsx)(e.code,{children:"errorComponent"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"export interface RouteErrorDisplayProps {\n  error: Error;\n  reset?: () => void;\n  className?: string;\n}\n\nexport function RouteErrorDisplay({ error, reset, className }: RouteErrorDisplayProps) {\n  // Render user-friendly error with retry/navigation options\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"integration-with-tanstack-router",children:"Integration with TanStack Router"}),"\n",(0,t.jsx)(e.h4,{id:"route-level-errorcomponent",children:"Route-level errorComponent"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"// In a specific route file (apps/connect/src/routes/router/$id.tsx)\nexport const Route = createFileRoute('/router/$id')({\n  errorComponent: ({ error, reset }) => (\n    <RouteErrorDisplay error={error} reset={reset} />\n  ),\n});\n"})}),"\n",(0,t.jsx)(e.h4,{id:"layout-level-boundary",children:"Layout-level boundary"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"// In a layout route (apps/connect/src/routes/_layout.tsx)\nexport const Route = createFileRoute('/_layout')({\n  component: () => (\n    <RouteErrorBoundary>\n      <Outlet />\n    </RouteErrorBoundary>\n  ),\n});\n"})}),"\n",(0,t.jsx)(e.h3,{id:"auto-reset-behavior",children:"Auto-Reset Behavior"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"const location = useLocation();\nconst resetKey = location.pathname;  // Changes when route changes\n// ErrorBoundary.componentDidUpdate checks if resetKey changed and calls resetErrorBoundary()\n"})}),"\n",(0,t.jsxs)(e.p,{children:["When the user navigates to a different route, the ",(0,t.jsx)(e.code,{children:"pathname"})," changes, triggering the boundary reset and clearing the error state."]}),"\n",(0,t.jsx)(e.h2,{id:"componenterrorboundary",children:"ComponentErrorBoundary"}),"\n",(0,t.jsxs)(e.p,{children:["Located: ",(0,t.jsx)(e.code,{children:"libs/ui/patterns/src/error-boundary/ComponentErrorBoundary.tsx"})]}),"\n",(0,t.jsx)(e.p,{children:"The innermost boundary for individual components/widgets. Shows inline error cards that don't disrupt surrounding UI."}),"\n",(0,t.jsx)(e.h3,{id:"inlineerrorcard-component",children:"InlineErrorCard Component"}),"\n",(0,t.jsx)(e.p,{children:"Displays errors in a compact card format with optional detail expansion:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"interface InlineErrorCardProps {\n  error: Error;\n  reset?: () => void;\n  componentName?: string;\n  className?: string;\n  minimal?: boolean;  // Minimal inline variant\n}\n"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Default variant:"})," Card with icon, title, description, retry button, and expandable details."]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Minimal variant:"})," Single-line inline alert with icon and minimal footprint."]}),"\n",(0,t.jsx)(e.h3,{id:"features-3",children:"Features"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Inline error display (doesn't disrupt page layout)"}),"\n",(0,t.jsx)(e.li,{children:"Minimal mode for compact presentations"}),"\n",(0,t.jsx)(e.li,{children:"Memoized component to prevent unnecessary re-renders"}),"\n",(0,t.jsx)(e.li,{children:"Retry button for user-initiated recovery"}),"\n",(0,t.jsx)(e.li,{children:"Expandable technical details panel"}),"\n",(0,t.jsx)(e.li,{children:"Component name context in error message"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"usage-example",children:"Usage Example"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:'// Basic usage with default card style\n<ComponentErrorBoundary componentName="User Statistics">\n  <UserStatsWidget />\n</ComponentErrorBoundary>\n\n// Minimal inline variant\n<ComponentErrorBoundary minimal componentName="Quick Stats">\n  <QuickStatsRow />\n</ComponentErrorBoundary>\n\n// With custom fallback\n<ComponentErrorBoundary\n  fallback={<MyCustomErrorState />}\n  onError={(error) => logError(error)}\n>\n  <DataChart />\n</ComponentErrorBoundary>\n'})}),"\n",(0,t.jsx)(e.h2,{id:"witherrorboundary-hoc",children:"withErrorBoundary HOC"}),"\n",(0,t.jsxs)(e.p,{children:["Located: ",(0,t.jsx)(e.code,{children:"libs/ui/patterns/src/error-boundary/withErrorBoundary.tsx"})]}),"\n",(0,t.jsx)(e.p,{children:"Higher-order component for wrapping components with error boundaries without modifying component JSX."}),"\n",(0,t.jsx)(e.h3,{id:"signature",children:"Signature"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"export function withErrorBoundary<P extends object>(\n  Component: React.ComponentType<P>,\n  options: WithErrorBoundaryOptions = {}\n): React.ComponentType<P>\n\nexport interface WithErrorBoundaryOptions {\n  fallback?: React.ReactNode | ((props: ErrorBoundaryFallbackProps) => React.ReactNode);\n  onError?: (error: Error, errorInfo: React.ErrorInfo) => void;\n  componentName?: string;\n  minimal?: boolean;\n  className?: string;\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"// Basic usage\nconst SafeWidget = withErrorBoundary(Widget);\n<SafeWidget data={data} />\n\n// With options\nconst SafeChart = withErrorBoundary(DataChart, {\n  componentName: 'Traffic Chart',\n  onError: (error) => analytics.trackError(error),\n  minimal: true,\n});\n\n// With custom fallback\nconst SafeUserCard = withErrorBoundary(UserCard, {\n  fallback: ({ error, resetErrorBoundary }) => (\n    <div className=\"p-4 bg-amber-50 rounded\">\n      <p>User information unavailable</p>\n      <button onClick={resetErrorBoundary}>Refresh</button>\n    </div>\n  ),\n});\n"})}),"\n",(0,t.jsx)(e.h3,{id:"useerrorboundarywrapper-hook",children:"useErrorBoundaryWrapper Hook"}),"\n",(0,t.jsx)(e.p,{children:"Utility hook to wrap multiple components with consistent error boundary configuration:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"export function useErrorBoundaryWrapper(\n  options: Omit<ComponentErrorBoundaryProps, 'children' | 'componentName'> = {}\n) {\n  return React.useCallback(\n    (children: React.ReactNode, componentName?: string) => (\n      <ComponentErrorBoundary {...options} componentName={componentName}>\n        {children}\n      </ComponentErrorBoundary>\n    ),\n    [options]\n  );\n}\n\n// Usage\nfunction DashboardWidgets() {\n  const wrapWithErrorBoundary = useErrorBoundaryWrapper({\n    onError: (error) => logError(error),\n    minimal: true,\n  });\n\n  return (\n    <div className=\"grid grid-cols-3 gap-4\">\n      {wrapWithErrorBoundary(<CPUWidget />, 'CPU Stats')}\n      {wrapWithErrorBoundary(<MemoryWidget />, 'Memory Stats')}\n      {wrapWithErrorBoundary(<NetworkWidget />, 'Network Stats')}\n    </div>\n  );\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"tanstack-router-error-integration",children:"TanStack Router Error Integration"}),"\n",(0,t.jsxs)(e.p,{children:["Located: ",(0,t.jsx)(e.code,{children:"apps/connect/src/routes/__root.tsx"})]}),"\n",(0,t.jsx)(e.p,{children:"The root route defines error and not-found components for app-wide error handling."}),"\n",(0,t.jsx)(e.h3,{id:"root-route-configuration",children:"Root Route Configuration"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:'function RootErrorComponent({ error }: { error: Error }) {\n  const { t } = useTranslation(\'common\');\n\n  return (\n    <div className="min-h-screen flex items-center justify-center bg-background" role="alert" aria-live="assertive">\n      <div className="max-w-md p-8 bg-card text-card-foreground rounded-lg shadow-lg border border-border">\n        <h1 className="text-2xl font-bold text-error mb-4">{t(\'errors.applicationError\')}</h1>\n        <p className="text-muted-foreground mb-4">{error.message}</p>\n        <button\n          onClick={() => window.location.reload()}\n          className="min-h-[44px] px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary-hover"\n        >\n          {t(\'actions.reloadApplication\')}\n        </button>\n        {import.meta.env.DEV && (\n          <pre className="mt-4 p-4 bg-muted rounded text-xs overflow-auto text-foreground">\n            {error.stack}\n          </pre>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction NotFoundComponent() {\n  const { t } = useTranslation(\'common\');\n\n  return (\n    <div className="min-h-screen flex items-center justify-center bg-background">\n      <div className="text-center">\n        <h1 className="text-6xl font-bold text-muted">{t(\'errors.notFound\')}</h1>\n        <p className="text-xl text-muted-foreground mt-4">{t(\'errors.pageNotFound\')}</p>\n        <a\n          href="/"\n          className="mt-6 inline-block min-h-[44px] px-4 py-2 bg-primary text-primary-foreground rounded"\n        >\n          {t(\'actions.goHome\')}\n        </a>\n      </div>\n    </div>\n  );\n}\n\nexport const Route = createRootRoute({\n  component: RootComponent,\n  errorComponent: RootErrorComponent,\n  notFoundComponent: NotFoundComponent,\n});\n'})}),"\n",(0,t.jsx)(e.h3,{id:"error-handling-flow-in-router",children:"Error Handling Flow in Router"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Route render error:"})," Router catches via ",(0,t.jsx)(e.code,{children:"errorComponent"})]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Unmatched path:"})," Router catches via ",(0,t.jsx)(e.code,{children:"notFoundComponent"})]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Async errors in async route options:"})," Router catches and passes to ",(0,t.jsx)(e.code,{children:"errorComponent"})]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Unhandled errors:"})," Bubble up to ",(0,t.jsx)(e.code,{children:"AppErrorBoundary"})," (if wrapped)"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"error-display-patterns",children:"Error Display Patterns"}),"\n",(0,t.jsx)(e.h3,{id:"errordisplay-component",children:"ErrorDisplay Component"}),"\n",(0,t.jsxs)(e.p,{children:["Located: ",(0,t.jsx)(e.code,{children:"apps/connect/src/app/pages/network/components/ErrorDisplay.tsx"})]}),"\n",(0,t.jsx)(e.p,{children:"Shows user-friendly error messages with retry option:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:'export interface ErrorDisplayProps {\n  error: Error;\n  onRetry?: () => void;\n}\n\nexport const ErrorDisplay = React.memo(function ErrorDisplay({\n  error,\n  onRetry\n}: ErrorDisplayProps) {\n  return (\n    <div className="container mx-auto px-page-mobile md:px-page-tablet lg:px-page-desktop">\n      <div className="flex flex-col items-center justify-center py-12">\n        <div className="bg-error/10 border border-error/30 rounded-card-sm p-6 max-w-md w-full">\n          <AlertCircle className="w-12 h-12 text-error" />\n          <h2 className="text-xl font-semibold text-error">Failed to load</h2>\n          <p className="text-muted-foreground text-sm">{error.message}</p>\n          {onRetry && (\n            <button onClick={onRetry} className="mt-4 px-4 py-3 bg-primary text-primary-foreground rounded-lg">\n              Try Again\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n});\n'})}),"\n",(0,t.jsx)(e.h3,{id:"toast-notifications",children:"Toast Notifications"}),"\n",(0,t.jsx)(e.p,{children:"Transient errors are shown via toast notifications from the notification store:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"// From apollo-error-link.ts\nuseNotificationStore.getState().addNotification({\n  type: 'error',\n  title: 'Network error',\n  message: 'Unable to reach the server.',\n});\n"})}),"\n",(0,t.jsx)(e.h3,{id:"inline-error-states",children:"Inline Error States"}),"\n",(0,t.jsx)(e.p,{children:"Form validation errors are displayed inline next to fields:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:'// From react-hook-form integration\n{errors.address && (\n  <span className="text-sm text-error">{errors.address.message}</span>\n)}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"graphql-error-handling",children:"GraphQL Error Handling"}),"\n",(0,t.jsxs)(e.p,{children:["Located: ",(0,t.jsx)(e.code,{children:"libs/api-client/core/src/apollo/apollo-error-link.ts"})]}),"\n",(0,t.jsx)(e.p,{children:"Centralized error handling for GraphQL and network errors with integration to auth and notification stores."}),"\n",(0,t.jsx)(e.h3,{id:"error-categories",children:"Error Categories"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"GraphQL Errors"})," (from server response)"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"UNAUTHENTICATED"}),": Clears auth store, shows session expired notification"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"FORBIDDEN"}),": Shows permission denied notification"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"NOT_FOUND"}),": Shows not found notification"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"VALIDATION_FAILED"}),": Passed to form validation handlers"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Network Errors"})," (connection/HTTP issues)"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"401 Unauthorized"}),": Clears auth, redirects to login"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"403 Forbidden"}),": Shows permission denied notification"]}),"\n",(0,t.jsx)(e.li,{children:"Generic network error: Shows connectivity notification"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"error-logging",children:"Error Logging"}),"\n",(0,t.jsx)(e.p,{children:"Errors are logged with structured format:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"logGraphQLError(operation.operationName, error, {\n  path: path?.join('.'),\n  variables: operation.variables,\n});\n\nlogNetworkError(operation.operationName, networkError, {\n  statusCode,\n  variables: operation.variables,\n});\n"})}),"\n",(0,t.jsx)(e.h3,{id:"error-policies",children:"Error Policies"}),"\n",(0,t.jsxs)(e.p,{children:["Apollo Client's ",(0,t.jsx)(e.code,{children:"errorPolicy"})," controls how GraphQL errors are handled:"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"none"})," (default): Errors cause entire operation to fail"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"ignore"}),": Errors are silently ignored"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"all"}),": Both data and errors are returned"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"Configuration in useQuery/useMutation hooks:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"const { data, error } = useQuery(QUERY, {\n  errorPolicy: 'all',  // Get both data and errors\n});\n"})}),"\n",(0,t.jsx)(e.h2,{id:"error-flow-diagram",children:"Error Flow Diagram"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"Component renders with error\n           \u2193\nNearest ComponentErrorBoundary catches\n    \u2193                          \u2193\nSuccess: Reset & continue   Failure: Escalate\n                                 \u2193\n            Nearest RouteErrorBoundary catches\n                \u2193                          \u2193\n            Success: Reset         Failure: Escalate\n            on route change            \u2193\n                            AppErrorBoundary catches\n                                \u2193\n                    Full-page error UI\n                    Reload or reset app\n"})}),"\n",(0,t.jsx)(e.h2,{id:"testing-error-boundaries",children:"Testing Error Boundaries"}),"\n",(0,t.jsxs)(e.p,{children:["Located: ",(0,t.jsx)(e.code,{children:"libs/ui/patterns/src/error-boundary/ErrorBoundary.test.tsx"})]}),"\n",(0,t.jsx)(e.h3,{id:"test-patterns",children:"Test Patterns"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Force an error in a component:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"function ThrowingComponent({ shouldThrow = true }: { shouldThrow?: boolean }) {\n  if (shouldThrow) {\n    throw new Error('Test error');\n  }\n  return <div>No error</div>;\n}\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Test fallback renders:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"it('renders fallback when error occurs', () => {\n  render(\n    <ErrorBoundary fallback={<div>Error occurred</div>}>\n      <ThrowingComponent />\n    </ErrorBoundary>\n  );\n\n  expect(screen.getByText('Error occurred')).toBeInTheDocument();\n});\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Test error callback:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"it('calls onError callback when error occurs', () => {\n  const onError = vi.fn();\n\n  render(\n    <ErrorBoundary fallback={<div>Error</div>} onError={onError}>\n      <ThrowingComponent />\n    </ErrorBoundary>\n  );\n\n  expect(onError).toHaveBeenCalledTimes(1);\n});\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Test recovery via reset:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"it('resets error state when resetErrorBoundary is called', () => {\n  function TestComponent() {\n    const [shouldThrow, setShouldThrow] = React.useState(true);\n\n    return (\n      <ErrorBoundary\n        fallback={({ resetErrorBoundary }) => (\n          <button\n            onClick={() => {\n              setShouldThrow(false);\n              resetErrorBoundary();\n            }}\n          >\n            Reset\n          </button>\n        )}\n      >\n        <ThrowingComponent shouldThrow={shouldThrow} />\n      </ErrorBoundary>\n    );\n  }\n\n  render(<TestComponent />);\n  fireEvent.click(screen.getByText('Reset'));\n  expect(screen.getByText('No error')).toBeInTheDocument();\n});\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Test key-based reset:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"it('resets when resetKey changes', () => {\n  function TestComponent() {\n    const [key, setKey] = React.useState(0);\n    const [shouldThrow, setShouldThrow] = React.useState(true);\n\n    return (\n      <>\n        <button onClick={() => {\n          setShouldThrow(false);\n          setKey((k) => k + 1);\n        }}>\n          Change Key\n        </button>\n        <ErrorBoundary resetKey={key} fallback={<div>Error</div>}>\n          <ThrowingComponent shouldThrow={shouldThrow} />\n        </ErrorBoundary>\n      </>\n    );\n  }\n\n  render(<TestComponent />);\n  fireEvent.click(screen.getByText('Change Key'));\n  expect(screen.getByText('No error')).toBeInTheDocument();\n});\n"})}),"\n",(0,t.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Choose the right boundary:"})," Wrap components at the logical scope where you want to isolate errors."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Provide context:"})," Use ",(0,t.jsx)(e.code,{children:"componentName"})," to help users understand what failed."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Add onError callbacks:"})," Log errors for debugging and monitoring."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Test error states:"})," Always test the fallback UI rendering."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"User-friendly messages:"})," Avoid technical jargon in error messages."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Recovery paths:"})," Always provide retry or navigation options."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Accessibility:"})," Use ",(0,t.jsx)(e.code,{children:'role="alert"'})," and ",(0,t.jsx)(e.code,{children:'aria-live="polite"'})," on error displays."]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"cross-references",children:"Cross-References"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Document 15: Routing & Route Errors"})," - TanStack Router error components (",(0,t.jsx)(e.code,{children:"errorComponent"}),", ",(0,t.jsx)(e.code,{children:"notFoundComponent"}),")"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Document 12: API Client Architecture"})," - GraphQL error handling, Apollo Client error link"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Document 14: Testing Strategy"})," - Error boundary testing patterns with Vitest and React Testing Library"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Design Tokens & Accessibility"})," - Error color tokens, WCAG AAA contrast ratios for error displays"]}),"\n"]})]})}function h(r={}){const{wrapper:e}={...(0,s.R)(),...r.components};return e?(0,t.jsx)(e,{...r,children:(0,t.jsx)(c,{...r})}):c(r)}}}]);