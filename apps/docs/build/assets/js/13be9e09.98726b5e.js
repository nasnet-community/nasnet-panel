"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[41655],{71184:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>c});var d=r(14041);const s={},i=d.createContext(s);function t(e){const n=d.useContext(i);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),d.createElement(i.Provider,{value:n},e.children)}},99627:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>x,frontMatter:()=>t,metadata:()=>d,toc:()=>h});const d=JSON.parse('{"id":"config-generation","title":"Config Generation","description":"Overview","source":"@site/../backend/docs/config-generation.md","sourceDirName":".","slug":"/config-generation","permalink":"/docs/backend/config-generation","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../backend/docs/config-generation.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Build and Deploy","permalink":"/docs/backend/build-and-deploy"},"next":{"title":"Connection Management","permalink":"/docs/backend/connection-management"}}');var s=r(31085),i=r(71184);const t={},c="Config Generation",l={},h=[{value:"Overview",id:"overview",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Package Reference",id:"package-reference",level:2},{value:"<code>internal/config</code> \u2014 Core Types",id:"internalconfig--core-types",level:3},{value:"<code>internal/config/services</code> \u2014 Concrete Generators",id:"internalconfigservices--concrete-generators",level:3},{value:"Tor (<code>tor.go</code>)",id:"tor-torgo",level:4},{value:"sing-box (<code>singbox.go</code>)",id:"sing-box-singboxgo",level:4},{value:"Xray-core (<code>xray.go</code>)",id:"xray-core-xraygo",level:4},{value:"MTProxy (<code>mtproxy.go</code>)",id:"mtproxy-mtproxygo",level:4},{value:"Psiphon (<code>psiphon.go</code>)",id:"psiphon-psiphongo",level:4},{value:"AdGuard Home (<code>adguard.go</code>)",id:"adguard-home-adguardgo",level:4},{value:"Generator Lifecycle (Provisioning Flow)",id:"generator-lifecycle-provisioning-flow",level:3},{value:"Cross-References",id:"cross-references",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"config-generation",children:"Config Generation"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["The config generation subsystem produces service-specific configuration files for each downloadable feature (Tor, sing-box, Xray-core, MTProxy, Psiphon, AdGuard Home). It follows a ",(0,s.jsx)(n.strong,{children:"strategy pattern"}),": a common ",(0,s.jsx)(n.code,{children:"Generator"})," interface, a shared ",(0,s.jsx)(n.code,{children:"BaseGenerator"})," with template/JSON rendering, and per-service concrete generators that embed ",(0,s.jsx)(n.code,{children:"BaseGenerator"})," and add service-specific logic."]}),"\n",(0,s.jsxs)(n.p,{children:["A thread-safe ",(0,s.jsx)(n.code,{children:"Registry"})," acts as the central lookup table, mapping service type strings to their generators. The orchestrator's lifecycle installer calls ",(0,s.jsx)(n.code,{children:"Registry.Generate"})," when provisioning a new service instance."]}),"\n",(0,s.jsxs)(n.p,{children:["All generators enforce a critical invariant: every service must bind to a specific VLAN IP address \u2014 ",(0,s.jsx)(n.code,{children:"0.0.0.0"})," and loopback addresses are rejected by the shared ",(0,s.jsx)(n.code,{children:"ValidateBindIP"})," validator."]}),"\n",(0,s.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502          Registry                \u2502\n                    \u2502  map[serviceType]Generator       \u2502\n                    \u2502  sync.RWMutex (thread-safe)      \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                    \u2502 Get / Generate / Validate\n                                    \u25bc\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502       Generator (interface)       \u2502\n                    \u2502  Generate(id, config, bindIP)     \u2502\n                    \u2502  Validate(config, bindIP)         \u2502\n                    \u2502  GetSchema() *Schema              \u2502\n                    \u2502  GetConfigFileName() string       \u2502\n                    \u2502  GetConfigFormat() string         \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                    \u2502 embedded by\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502         BaseGenerator             \u2502\n                    \u2502  serviceType, *Schema, *Template  \u2502\n                    \u2502  RenderTemplate(data) []byte      \u2502\n                    \u2502  RenderJSON(v) []byte             \u2502\n                    \u2502  ValidateConfig(config, bindIP)   \u2502\n                    \u2514\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2518\n                        \u2502     \u2502      \u2502    \u2502    \u2502   \u2502\n            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502      \u2502    \u2502    \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n            \u25bc                 \u25bc      \u25bc    \u25bc    \u25bc                  \u25bc\n     TorGenerator   SingboxGen XrayGen MTProxy Psiphon     AdguardGen\n     (torrc/text)  (json)     (json)  (json)  (json)      (yaml/text)\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"TemplateData (passed to RenderTemplate)\n  .InstanceID   string\n  .BindIP       string\n  .Config       map[string]interface{}\n  .GetString(key)    \u2192 string\n  .GetInt(key)       \u2192 int\n  .GetBool(key)      \u2192 bool\n  .GetStringSlice(key) \u2192 []string  (AdGuard extension)\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Schema\n  ServiceType  string\n  Version      string\n  Fields       []Field\n    .Name, .Type, .Required, .Default\n    .Min, .Max (int pointers)\n    .EnumValues []string\n    .Sensitive  bool        \u2190 masked in logs/API\n    .Placeholder string\n\nSchema methods:\n  MergeWithDefaults(config) map[string]interface{}\n  Validate(config, bindIP) error\n"})}),"\n",(0,s.jsx)(n.h2,{id:"package-reference",children:"Package Reference"}),"\n",(0,s.jsxs)(n.h3,{id:"internalconfig--core-types",children:[(0,s.jsx)(n.code,{children:"internal/config"})," \u2014 Core Types"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"generator.go"})})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'// Generator is the strategy interface every service generator implements.\ntype Generator interface {\n    Generate(instanceID string, config map[string]interface{}, bindIP string) ([]byte, error)\n    Validate(config map[string]interface{}, bindIP string) error\n    GetSchema() *Schema\n    GetConfigFileName() string\n    GetConfigFormat() string  // "text" | "json" | "yaml"\n}\n\n// BaseGenerator provides shared rendering and validation.\ntype BaseGenerator struct {\n    serviceType string\n    Schema      *Schema\n    tmpl        *template.Template  // nil for JSON generators\n}\n\nfunc (g *BaseGenerator) RenderTemplate(data *TemplateData) ([]byte, error)\nfunc (g *BaseGenerator) RenderJSON(v interface{}) ([]byte, error)          // json.MarshalIndent, 2-space\nfunc (g *BaseGenerator) ValidateConfig(config map[string]interface{}, bindIP string) error\nfunc (g *BaseGenerator) GetSchema() *Schema\n\n// TemplateData is passed into text/template execution.\ntype TemplateData struct {\n    InstanceID string\n    BindIP     string\n    Config     map[string]interface{}\n}\nfunc NewTemplateData(instanceID, bindIP string, config map[string]interface{}) *TemplateData\nfunc (d *TemplateData) GetString(key string) string\nfunc (d *TemplateData) GetInt(key string) int\nfunc (d *TemplateData) GetBool(key string) bool\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"registry.go"})})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:"// Registry is the central thread-safe store of all registered generators.\ntype Registry struct {\n    mu         sync.RWMutex\n    generators map[string]Generator\n}\n\nfunc NewRegistry() *Registry\nfunc (r *Registry) Register(serviceType string, gen Generator)\nfunc (r *Registry) Get(serviceType string) (Generator, bool)\nfunc (r *Registry) Has(serviceType string) bool\nfunc (r *Registry) List() []string\nfunc (r *Registry) Generate(serviceType, instanceID string, config map[string]interface{}, bindIP string) ([]byte, error)\nfunc (r *Registry) Validate(serviceType string, config map[string]interface{}, bindIP string) error\nfunc (r *Registry) GetSchema(serviceType string) (*Schema, error)\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"validators.go"})})," \u2014 shared field-level validators"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Function"}),(0,s.jsx)(n.th,{children:"Validates"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ValidateBindIP(ip)"})}),(0,s.jsx)(n.td,{children:"Non-empty, parseable, not 0.0.0.0/::, not loopback"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ValidatePort(port)"})}),(0,s.jsx)(n.td,{children:"1\u201365535"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ValidatePortString(s)"})}),(0,s.jsx)(n.td,{children:"String form of port, same range"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ValidateNonEmpty(name, val)"})}),(0,s.jsx)(n.td,{children:"Non-empty string"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ValidateEnum(name, val, allowed)"})}),(0,s.jsx)(n.td,{children:"Value in allowed list"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ValidateRange(name, val, min, max)"})}),(0,s.jsx)(n.td,{children:"Numeric within bounds"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ValidatePositive(name, val)"})}),(0,s.jsx)(n.td,{children:"val > 0"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ValidateDNSName(name)"})}),(0,s.jsx)(n.td,{children:"Non-empty, basic DNS rules"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ValidateURL(url)"})}),(0,s.jsxs)(n.td,{children:["Must start with ",(0,s.jsx)(n.code,{children:"http://"})," or ",(0,s.jsx)(n.code,{children:"https://"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ValidateEmail(email)"})}),(0,s.jsxs)(n.td,{children:["Must contain ",(0,s.jsx)(n.code,{children:"@"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ValidateStringLength(name, val, max)"})}),(0,s.jsx)(n.td,{children:"len(val) \u2264 max"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ValidateIPCIDR(cidr)"})}),(0,s.jsx)(n.td,{children:"Parseable CIDR"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ValidateIPRange(start, end)"})}),(0,s.jsx)(n.td,{children:"Both parseable IPs, start \u2264 end"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"ValidateBindIP"})," is the ",(0,s.jsx)(n.strong,{children:"VLAN isolation enforcement gate"})," \u2014 it prevents services from listening on the host network (0.0.0.0) or loopback, ensuring each instance is confined to its allocated VLAN interface."]}),"\n",(0,s.jsxs)(n.h3,{id:"internalconfigservices--concrete-generators",children:[(0,s.jsx)(n.code,{children:"internal/config/services"})," \u2014 Concrete Generators"]}),"\n",(0,s.jsxs)(n.h4,{id:"tor-torgo",children:["Tor (",(0,s.jsx)(n.code,{children:"tor.go"}),")"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Output file"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"torrc"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Format"}),(0,s.jsx)(n.td,{children:"text/template"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Constructor"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"NewTorGenerator()"})})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Config fields:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Notes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"nickname"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"MyTorRelay"})}),(0,s.jsx)(n.td,{children:"Alphanumeric, \u226419 chars"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"contact_info"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"admin@example.com"})}),(0,s.jsx)(n.td,{children:"Must be valid email"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"relay_type"})}),(0,s.jsx)(n.td,{children:"enum"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"relay"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"relay"})," | ",(0,s.jsx)(n.code,{children:"bridge"})," | ",(0,s.jsx)(n.code,{children:"exit"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"socks_port"})}),(0,s.jsx)(n.td,{children:"port"}),(0,s.jsx)(n.td,{children:"9050"}),(0,s.jsx)(n.td,{children:"SOCKS proxy"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"control_port"})}),(0,s.jsx)(n.td,{children:"port"}),(0,s.jsx)(n.td,{children:"9051"}),(0,s.jsx)(n.td,{children:"Controller"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"or_port"})}),(0,s.jsx)(n.td,{children:"port"}),(0,s.jsx)(n.td,{children:"9001"}),(0,s.jsx)(n.td,{children:"Onion Router port"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dir_port"})}),(0,s.jsx)(n.td,{children:"port"}),(0,s.jsx)(n.td,{children:"9030"}),(0,s.jsx)(n.td,{children:"Directory (optional)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bandwidth_rate"})}),(0,s.jsx)(n.td,{children:"int"}),(0,s.jsx)(n.td,{children:"1000"}),(0,s.jsx)(n.td,{children:"KB/s, 100\u2013102400"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bandwidth_burst"})}),(0,s.jsx)(n.td,{children:"int"}),(0,s.jsx)(n.td,{children:"2000"}),(0,s.jsx)(n.td,{children:"KB/s, 100\u2013204800"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"exit_policy"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"reject *:*"})}),(0,s.jsx)(n.td,{children:"Required when relay_type=exit"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Custom validation:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"nickname"})," \u2264 19 characters"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"contact_info"})," passes ",(0,s.jsx)(n.code,{children:"ValidateEmail"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"exit_policy"})," field must be present when ",(0,s.jsx)(n.code,{children:'relay_type == "exit"'})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Template conditional blocks:"})," ",(0,s.jsx)(n.code,{children:'{{if eq (.GetString "relay_type") "relay"}}'})," / ",(0,s.jsx)(n.code,{children:'"bridge"'})," / ",(0,s.jsx)(n.code,{children:'"exit"'})," \u2014 controls which ORPort, DirPort, and ExitPolicy directives appear."]}),"\n",(0,s.jsxs)(n.h4,{id:"sing-box-singboxgo",children:["sing-box (",(0,s.jsx)(n.code,{children:"singbox.go"}),")"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Output file"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"config.json"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Format"}),(0,s.jsx)(n.td,{children:"json (programmatic)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Constructor"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"NewSingboxGenerator()"})})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Config fields:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Notes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"listen_address"})}),(0,s.jsx)(n.td,{children:"ip"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsxs)(n.td,{children:["Defaults to ",(0,s.jsx)(n.code,{children:"bindIP"})," if absent"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"socks_port"})}),(0,s.jsx)(n.td,{children:"port"}),(0,s.jsx)(n.td,{children:"10808"}),(0,s.jsx)(n.td,{children:"SOCKS5 inbound"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"http_port"})}),(0,s.jsx)(n.td,{children:"port"}),(0,s.jsx)(n.td,{children:"10809"}),(0,s.jsx)(n.td,{children:"HTTP inbound"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"mixed_port"})}),(0,s.jsx)(n.td,{children:"port"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Optional mixed SOCKS/HTTP"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"log_level"})}),(0,s.jsx)(n.td,{children:"enum"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"info"})}),(0,s.jsx)(n.td,{children:"trace/debug/info/warn/error/fatal/panic"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dns_server"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"1.1.1.1"})}),(0,s.jsx)(n.td,{children:"DNS resolver"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"sniff_enabled"})}),(0,s.jsx)(n.td,{children:"bool"}),(0,s.jsx)(n.td,{children:"true"}),(0,s.jsx)(n.td,{children:"Traffic sniffing"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"JSON structure produced:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "log": { "level": "info" },\n  "dns": { "servers": ["1.1.1.1"] },\n  "inbounds": [\n    { "type": "socks", "tag": "socks-in", "listen": "<bindIP>", "port": 10808, "sniff": true },\n    { "type": "http",  "tag": "http-in",  "listen": "<bindIP>", "port": 10809, "sniff": true }\n    // + optional mixed inbound if mixed_port > 0\n  ],\n  "outbounds": [{ "type": "direct", "tag": "direct" }]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"getIntValue"})," helper handles both ",(0,s.jsx)(n.code,{children:"int"})," and ",(0,s.jsx)(n.code,{children:"float64"})," (JSON unmarshal produces float64)."]}),"\n",(0,s.jsxs)(n.h4,{id:"xray-core-xraygo",children:["Xray-core (",(0,s.jsx)(n.code,{children:"xray.go"}),")"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Output file"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"config.json"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Format"}),(0,s.jsx)(n.td,{children:"json (programmatic)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Constructor"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"NewXrayGenerator()"})})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Config fields:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Notes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"protocol"})}),(0,s.jsx)(n.td,{children:"enum"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"vless"})}),(0,s.jsx)(n.td,{children:"vless/vmess/trojan/shadowsocks"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"port"})}),(0,s.jsx)(n.td,{children:"port"}),(0,s.jsx)(n.td,{children:"10443"}),(0,s.jsx)(n.td,{children:"Inbound listen port"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"uuid"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Required, 36-char UUID"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"tls_enabled"})}),(0,s.jsx)(n.td,{children:"bool"}),(0,s.jsx)(n.td,{children:"false"}),(0,s.jsx)(n.td,{children:"Enable TLS on inbound"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"tls_cert_path"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Required when tls_enabled=true"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"tls_key_path"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Required when tls_enabled=true"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"fallback_port"})}),(0,s.jsx)(n.td,{children:"port"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Optional fallback destination"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"log_level"})}),(0,s.jsx)(n.td,{children:"enum"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"warning"})}),(0,s.jsx)(n.td,{children:"debug/info/warning/error/none"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Custom validation:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"uuid"})," must be exactly 36 characters"]}),"\n",(0,s.jsxs)(n.li,{children:["When ",(0,s.jsx)(n.code,{children:"tls_enabled=true"}),": both ",(0,s.jsx)(n.code,{children:"tls_cert_path"})," and ",(0,s.jsx)(n.code,{children:"tls_key_path"})," must be non-empty"]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"mtproxy-mtproxygo",children:["MTProxy (",(0,s.jsx)(n.code,{children:"mtproxy.go"}),")"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Output file"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"config.json"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Format"}),(0,s.jsx)(n.td,{children:"json (CLI args representation)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Constructor"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"NewMTProxyGenerator()"})})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Config fields:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Notes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"port"})}),(0,s.jsx)(n.td,{children:"port"}),(0,s.jsx)(n.td,{children:"8443"}),(0,s.jsx)(n.td,{children:"Proxy listen port"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"secret"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Required, 32-char hex (Sensitive)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"tag"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Optional Telegram proxy tag"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"workers"})}),(0,s.jsx)(n.td,{children:"int"}),(0,s.jsx)(n.td,{children:"2"}),(0,s.jsx)(n.td,{children:"Worker goroutines"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"max_connections"})}),(0,s.jsx)(n.td,{children:"int"}),(0,s.jsx)(n.td,{children:"60000"}),(0,s.jsx)(n.td,{children:"Max concurrent connections"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"stats_port"})}),(0,s.jsx)(n.td,{children:"port"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Optional stats HTTP port"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Custom validation:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"secret"})," must be exactly 32 characters matching ",(0,s.jsx)(n.code,{children:"[0-9a-fA-F]"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The JSON output represents CLI arguments (bind_ip, port, secret, workers, etc.) that the MTProxy process reads on startup."}),"\n",(0,s.jsxs)(n.h4,{id:"psiphon-psiphongo",children:["Psiphon (",(0,s.jsx)(n.code,{children:"psiphon.go"}),")"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Output file"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"config.json"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Format"}),(0,s.jsx)(n.td,{children:"json (programmatic)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Constructor"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"NewPsiphonGenerator()"})})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Config fields:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Notes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"socks_port"})}),(0,s.jsx)(n.td,{children:"port"}),(0,s.jsx)(n.td,{children:"1080"}),(0,s.jsx)(n.td,{children:"SOCKS proxy port"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"http_port"})}),(0,s.jsx)(n.td,{children:"port"}),(0,s.jsx)(n.td,{children:"8080"}),(0,s.jsx)(n.td,{children:"HTTP proxy port"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"server_entry_signature_public_key"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Optional, Sensitive"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"server_entry_tags"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'""'})}),(0,s.jsx)(n.td,{children:"Comma-separated tags"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"sponsor_id"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"00000000..."})}),(0,s.jsx)(n.td,{children:"32-char hex if custom"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"propagation_channel_id"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"00000000..."})}),(0,s.jsx)(n.td,{children:"32-char hex if custom"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"enable_split_tunnel"})}),(0,s.jsx)(n.td,{children:"bool"}),(0,s.jsx)(n.td,{children:"false"}),(0,s.jsx)(n.td,{children:"Split tunneling"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"upstream_proxy_url"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Optional upstream proxy"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"log_level"})}),(0,s.jsx)(n.td,{children:"enum"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"info"})}),(0,s.jsx)(n.td,{children:"debug/info/warning/error"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Custom validation:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Custom ",(0,s.jsx)(n.code,{children:"sponsor_id"})," (non-default): must be exactly 32 chars"]}),"\n",(0,s.jsxs)(n.li,{children:["Custom ",(0,s.jsx)(n.code,{children:"propagation_channel_id"}),": must be exactly 32 chars"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"upstream_proxy_url"})," if set: must pass ",(0,s.jsx)(n.code,{children:"ValidateURL"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"splitCommaSeparated"})," helper converts comma-separated ",(0,s.jsx)(n.code,{children:"server_entry_tags"})," string to ",(0,s.jsx)(n.code,{children:"[]string"})," for the Psiphon JSON."]}),"\n",(0,s.jsxs)(n.h4,{id:"adguard-home-adguardgo",children:["AdGuard Home (",(0,s.jsx)(n.code,{children:"adguard.go"}),")"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Output file"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"AdGuardHome.yaml"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Format"}),(0,s.jsx)(n.td,{children:"YAML (text/template)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Constructor"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"NewAdguardGenerator()"})})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Config fields:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Notes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"web_port"})}),(0,s.jsx)(n.td,{children:"port"}),(0,s.jsx)(n.td,{children:"3000"}),(0,s.jsx)(n.td,{children:"Web UI port"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dns_port"})}),(0,s.jsx)(n.td,{children:"port"}),(0,s.jsx)(n.td,{children:"53"}),(0,s.jsx)(n.td,{children:"DNS listen port"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"admin_user"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"admin"})}),(0,s.jsx)(n.td,{children:"Admin username"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"admin_password"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Required, Sensitive"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"upstream_dns"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"1.1.1.1,8.8.8.8"})}),(0,s.jsx)(n.td,{children:"CSV of upstream resolvers"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bootstrap_dns"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"1.1.1.1,8.8.8.8"})}),(0,s.jsx)(n.td,{children:"CSV for bootstrapping DoH/DoT"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"protection_enabled"})}),(0,s.jsx)(n.td,{children:"bool"}),(0,s.jsx)(n.td,{children:"true"}),(0,s.jsx)(n.td,{children:"DNS protection toggle"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"blocking_mode"})}),(0,s.jsx)(n.td,{children:"enum"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"default"})}),(0,s.jsx)(n.td,{children:"default/nxdomain/null_ip/refused"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"querylog_enabled"})}),(0,s.jsx)(n.td,{children:"bool"}),(0,s.jsx)(n.td,{children:"true"}),(0,s.jsx)(n.td,{children:"Query log toggle"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"querylog_interval"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"24h"})}),(0,s.jsx)(n.td,{children:"Retention duration"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"statistics_enabled"})}),(0,s.jsx)(n.td,{children:"bool"}),(0,s.jsx)(n.td,{children:"true"}),(0,s.jsx)(n.td,{children:"Stats collection"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"statistics_interval"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"24h"})}),(0,s.jsx)(n.td,{children:"Stats retention"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"AdguardTemplateData"})," extends ",(0,s.jsx)(n.code,{children:"TemplateData"})," and adds ",(0,s.jsx)(n.code,{children:"GetStringSlice(key)"})," which splits CSV config values (like ",(0,s.jsx)(n.code,{children:"upstream_dns"}),") into ",(0,s.jsx)(n.code,{children:"[]string"})," for YAML list rendering."]}),"\n",(0,s.jsx)(n.h3,{id:"generator-lifecycle-provisioning-flow",children:"Generator Lifecycle (Provisioning Flow)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"LifecycleInstaller.Install()\n    \u2502\n    \u251c\u2500 registry.Get(serviceType)          \u2192 Generator\n    \u251c\u2500 generator.Validate(config, bindIP) \u2192 error (pre-install check)\n    \u251c\u2500 generator.Generate(id, config, ip) \u2192 []byte (rendered config)\n    \u251c\u2500 write file to instanceDir/configFileName\n    \u2514\u2500 generator.GetConfigFileName()      \u2192 used to set file path\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The orchestrator calls ",(0,s.jsx)(n.code,{children:"Validate"})," before generating to surface config errors early. If ",(0,s.jsx)(n.code,{children:"Generate"})," succeeds, the output bytes are written directly to the service's working directory. The file name is determined by ",(0,s.jsx)(n.code,{children:"GetConfigFileName()"})," (e.g., ",(0,s.jsx)(n.code,{children:"torrc"}),", ",(0,s.jsx)(n.code,{children:"config.json"}),", ",(0,s.jsx)(n.code,{children:"AdGuardHome.yaml"}),")."]}),"\n",(0,s.jsx)(n.h2,{id:"cross-references",children:"Cross-References"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"[See: network-services.md \xa7Service Lifecycle] \u2014 how generators are invoked during install"}),"\n",(0,s.jsx)(n.li,{children:"[See: process-isolation.md \xa7Layer 1: IP Binding] \u2014 ValidateBindIP enforcement at pre-start"}),"\n",(0,s.jsx)(n.li,{children:"[See: feature-marketplace.md \xa7Manifests] \u2014 how schema fields are declared in JSON manifests"}),"\n",(0,s.jsx)(n.li,{children:"[See: router-services.md \xa7Port Allocation] \u2014 port conflict avoidance before generation"}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);