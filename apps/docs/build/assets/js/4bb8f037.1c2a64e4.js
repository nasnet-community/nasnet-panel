"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[89515],{59781:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>l,contentTitle:()=>c,default:()=>a,frontMatter:()=>d,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"stores/overview","title":"State Stores Overview","description":"A comprehensive catalog of all Zustand stores in the @nasnet/state/stores package. Organized by category with dependency graph and usage patterns.","source":"@site/../../libs/state/docs/stores/overview.md","sourceDirName":"stores","slug":"/stores/overview","permalink":"/docs/state/stores/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../../libs/state/docs/stores/overview.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"History & Undo/Redo Store","permalink":"/docs/state/stores/history-undo-redo"},"next":{"title":"UI Stores (Theme, Sidebar, UI, Modal, Notification, Help)","permalink":"/docs/state/stores/ui"}}');var n=t(31085),i=t(71184);const d={},c="State Stores Overview",l={},o=[{value:"Store Categories",id:"store-categories",level:2},{value:"Auth Stores",id:"auth-stores",level:3},{value:"Connection Stores",id:"connection-stores",level:3},{value:"UI Stores",id:"ui-stores",level:3},{value:"Domain UI Stores (Feature Pages)",id:"domain-ui-stores-feature-pages",level:3},{value:"Command &amp; Shortcut Stores",id:"command--shortcut-stores",level:3},{value:"Specialized Stores",id:"specialized-stores",level:3},{value:"Advanced Subsystems",id:"advanced-subsystems",level:3},{value:"Hooks &amp; Utilities",id:"hooks--utilities",level:3},{value:"Dependency Graph",id:"dependency-graph",level:2},{value:"Import Patterns",id:"import-patterns",level:2},{value:"Selector Usage Pattern",id:"selector-usage-pattern",level:2},{value:"Domain UI Store Pattern",id:"domain-ui-store-pattern",level:2},{value:"Persistence Strategy",id:"persistence-strategy",level:2},{value:"Fully Persisted",id:"fully-persisted",level:3},{value:"Partially Persisted",id:"partially-persisted",level:3},{value:"Not Persisted (Session-Only)",id:"not-persisted-session-only",level:3},{value:"Redux DevTools Integration",id:"redux-devtools-integration",level:2},{value:"Four-Layer State Architecture",id:"four-layer-state-architecture",level:2}];function h(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"state-stores-overview",children:"State Stores Overview"})}),"\n",(0,n.jsxs)(s.p,{children:["A comprehensive catalog of all Zustand stores in the ",(0,n.jsx)(s.code,{children:"@nasnet/state/stores"})," package. Organized by category with dependency graph and usage patterns."]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Source:"})," ",(0,n.jsx)(s.code,{children:"libs/state/stores/src/index.ts"})]}),"\n",(0,n.jsx)(s.h2,{id:"store-categories",children:"Store Categories"}),"\n",(0,n.jsx)(s.h3,{id:"auth-stores",children:"Auth Stores"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Store"}),(0,n.jsx)(s.th,{children:"File"}),(0,n.jsx)(s.th,{children:"Persisted"}),(0,n.jsx)(s.th,{children:"Purpose"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useAuthStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"auth/auth.store.ts"})}),(0,n.jsx)(s.td,{children:"\u2705 (partial)"}),(0,n.jsx)(s.td,{children:"JWT tokens, user session, authentication state"})]})})]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Selectors:"})," ",(0,n.jsx)(s.code,{children:"selectIsAuthenticated"}),", ",(0,n.jsx)(s.code,{children:"selectUser"}),", ",(0,n.jsx)(s.code,{children:"selectToken"}),", ",(0,n.jsx)(s.code,{children:"selectIsRefreshing"}),", ",(0,n.jsx)(s.code,{children:"selectRefreshAttempts"}),", ",(0,n.jsx)(s.code,{children:"selectMaxRefreshExceeded"}),", ",(0,n.jsx)(s.code,{children:"selectPermissions"}),", ",(0,n.jsx)(s.code,{children:"selectHasPermission"})]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Hooks:"})," ",(0,n.jsx)(s.code,{children:"useTokenRefresh"})," (auto-refresh 5min before expiry)"]}),"\n",(0,n.jsx)(s.h3,{id:"connection-stores",children:"Connection Stores"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Store"}),(0,n.jsx)(s.th,{children:"File"}),(0,n.jsx)(s.th,{children:"Persisted"}),(0,n.jsx)(s.th,{children:"Purpose"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useConnectionStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"connection/connection.store.ts"})}),(0,n.jsx)(s.td,{children:"\u2705 (activeRouterId)"}),(0,n.jsx)(s.td,{children:"WebSocket status, per-router connections, reconnection state"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useNetworkStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"connection/network.store.ts"})}),(0,n.jsx)(s.td,{children:"\u274c"}),(0,n.jsx)(s.td,{children:"Browser online status, backend reachability, network quality"})]})]})]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Selectors:"})," ",(0,n.jsx)(s.code,{children:"selectWsStatus"}),", ",(0,n.jsx)(s.code,{children:"selectIsConnected"}),", ",(0,n.jsx)(s.code,{children:"selectIsReconnecting"}),", ",(0,n.jsx)(s.code,{children:"selectActiveRouterId"}),", ",(0,n.jsx)(s.code,{children:"selectActiveRouterConnection"}),", ",(0,n.jsx)(s.code,{children:"selectReconnectAttempts"}),", ",(0,n.jsx)(s.code,{children:"selectHasExceededMaxAttempts"})]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Utilities:"})," ",(0,n.jsx)(s.code,{children:"createReconnectionManager"}),", ",(0,n.jsx)(s.code,{children:"createLatencyUpdater"}),", ",(0,n.jsx)(s.code,{children:"calculateBackoff"})]}),"\n",(0,n.jsx)(s.h3,{id:"ui-stores",children:"UI Stores"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Store"}),(0,n.jsx)(s.th,{children:"File"}),(0,n.jsx)(s.th,{children:"Persisted"}),(0,n.jsx)(s.th,{children:"Purpose"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useThemeStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"ui/theme.store.ts"})}),(0,n.jsx)(s.td,{children:"\u2705"}),(0,n.jsx)(s.td,{children:"Theme mode (light/dark/system) with system preference detection"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useSidebarStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"ui/sidebar.store.ts"})}),(0,n.jsx)(s.td,{children:"\u2705"}),(0,n.jsx)(s.td,{children:"Sidebar collapse state (desktop only)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useUIStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"ui/ui.store.ts"})}),(0,n.jsx)(s.td,{children:"\u2705 (partial)"}),(0,n.jsx)(s.td,{children:"General UI preferences (command palette, compact mode, animations)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useModalStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"ui/modal.store.ts"})}),(0,n.jsx)(s.td,{children:"\u274c"}),(0,n.jsx)(s.td,{children:"Modal state (single-modal paradigm)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useNotificationStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"ui/notification.store.ts"})}),(0,n.jsx)(s.td,{children:"\u274c"}),(0,n.jsx)(s.td,{children:"Toast/notification queue with deduplication and auto-dismiss"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useHelpModeStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"ui/help-mode.store.ts"})}),(0,n.jsx)(s.td,{children:"\u2705"}),(0,n.jsx)(s.td,{children:"Simple/Technical help mode toggle"})]})]})]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Selectors:"})," See ",(0,n.jsx)(s.code,{children:"ui/selectors.ts"})," for 20+ consolidated selectors and selector factories"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Helper Functions:"})," ",(0,n.jsx)(s.code,{children:"initThemeListener"}),", ",(0,n.jsx)(s.code,{children:"syncThemeToDOM"})]}),"\n",(0,n.jsx)(s.h3,{id:"domain-ui-stores-feature-pages",children:"Domain UI Stores (Feature Pages)"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Store"}),(0,n.jsx)(s.th,{children:"File"}),(0,n.jsx)(s.th,{children:"Persisted"}),(0,n.jsx)(s.th,{children:"Purpose"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useDHCPUIStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"dhcp-ui.store.ts"})}),(0,n.jsx)(s.td,{children:"\u274c"}),(0,n.jsx)(s.td,{children:"DHCP page filters, search, selection, wizard draft"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useServiceUIStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"service-ui.store.ts"})}),(0,n.jsx)(s.td,{children:"\u274c"}),(0,n.jsx)(s.td,{children:"Service page filters, search, selection, install wizard"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useMangleUIStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"mangle-ui.store.ts"})}),(0,n.jsx)(s.td,{children:"\u274c"}),(0,n.jsx)(s.td,{children:"Mangle rules page selected chain, expanded rules, filters"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useNATUIStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"nat-ui.store.ts"})}),(0,n.jsx)(s.td,{children:"\u274c"}),(0,n.jsx)(s.td,{children:"NAT page selected chain, expanded rules, filters"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useRawUIStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"raw-ui.store.ts"})}),(0,n.jsx)(s.td,{children:"\u274c"}),(0,n.jsx)(s.td,{children:"RAW rules page chain, perf section, filters, dialogs"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"usePortKnockUIStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"port-knock-ui.store.ts"})}),(0,n.jsx)(s.td,{children:"\u274c"}),(0,n.jsx)(s.td,{children:"Port knocking tabs, filters, dialogs"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useRateLimitingUIStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"rate-limiting-ui.store.ts"})}),(0,n.jsx)(s.td,{children:"\u274c"}),(0,n.jsx)(s.td,{children:"Rate limiting tabs, filters, rule editor, stats"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useFirewallLogUIStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"firewall-log-ui.store.ts"})}),(0,n.jsx)(s.td,{children:"\u274c"}),(0,n.jsx)(s.td,{children:"Firewall logs filters, auto-refresh, sort, stats"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useAlertRuleTemplateUIStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"alert-rule-template-ui.store.ts"})}),(0,n.jsx)(s.td,{children:"\u274c"}),(0,n.jsx)(s.td,{children:"Alert templates filters, view mode, selection, dialogs"})]})]})]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Pattern:"})," Each domain UI store manages transient page state (filters, selection, expanded sections) - NOT persisted, reset on page leave."]}),"\n",(0,n.jsx)(s.h3,{id:"command--shortcut-stores",children:"Command & Shortcut Stores"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Store"}),(0,n.jsx)(s.th,{children:"File"}),(0,n.jsx)(s.th,{children:"Persisted"}),(0,n.jsx)(s.th,{children:"Purpose"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useCommandRegistryStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"command/command-registry.store.ts"})}),(0,n.jsx)(s.td,{children:"\u274c"}),(0,n.jsx)(s.td,{children:"Command palette registry and execution"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useShortcutRegistryStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"command/shortcut-registry.store.ts"})}),(0,n.jsx)(s.td,{children:"\u2705"}),(0,n.jsx)(s.td,{children:"Keyboard shortcuts with custom bindings"})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"specialized-stores",children:"Specialized Stores"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Store"}),(0,n.jsx)(s.th,{children:"File"}),(0,n.jsx)(s.th,{children:"Persisted"}),(0,n.jsx)(s.th,{children:"Purpose"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useChangeSetStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"change-set/change-set.store.ts"})}),(0,n.jsx)(s.td,{children:"\u274c"}),(0,n.jsx)(s.td,{children:"Atomic multi-resource operations (Apply-Confirm-Merge flow)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useRouterStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"router/router.store.ts"})}),(0,n.jsx)(s.td,{children:"\u2705 (partial)"}),(0,n.jsx)(s.td,{children:"Router discovery and management state"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useAlertNotificationStore"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"alert-notification.store.ts"})}),(0,n.jsx)(s.td,{children:"\u2705"}),(0,n.jsx)(s.td,{children:"In-app alert notifications with persistence"})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"advanced-subsystems",children:"Advanced Subsystems"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"System"}),(0,n.jsx)(s.th,{children:"Files"}),(0,n.jsx)(s.th,{children:"Purpose"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Drift Detection"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"drift-detection/*.ts"})}),(0,n.jsx)(s.td,{children:"Configuration vs deployment layer drift comparison and resolution"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"History/Undo-Redo"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"history/*.ts"})}),(0,n.jsx)(s.td,{children:"Command pattern history with undo/redo support"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Accessibility (a11y)"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"a11y/a11y-provider.tsx"})}),(0,n.jsx)(s.td,{children:"Reduced motion, keyboard user detection, announcements"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Interface Statistics"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"interface-stats-store.ts"})}),(0,n.jsx)(s.td,{children:"Traffic statistics monitoring preferences"})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"hooks--utilities",children:"Hooks & Utilities"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Item"}),(0,n.jsx)(s.th,{children:"File"}),(0,n.jsx)(s.th,{children:"Purpose"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useTokenRefresh"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"hooks/useTokenRefresh.ts"})}),(0,n.jsx)(s.td,{children:"Proactive JWT refresh 5min before expiry"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useRouteGuard"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"hooks/useRouteGuard.ts"})}),(0,n.jsx)(s.td,{children:"Route protection based on auth state"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"reconnect.ts"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"utils/reconnect.ts"})}),(0,n.jsx)(s.td,{children:"Exponential backoff reconnection manager"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"recovery.ts"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"utils/recovery.ts"})}),(0,n.jsx)(s.td,{children:"Error recovery utilities"})]})]})]}),"\n",(0,n.jsx)(s.h2,{id:"dependency-graph",children:"Dependency Graph"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  Auth Layer                      \u2502\n\u2502  useAuthStore \u2192 useTokenRefresh \u2192 Apollo Auth   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                      \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502               Connection Layer                   \u2502\n\u2502  useConnectionStore \u2190 WebSocket Lifecycle       \u2502\n\u2502  useNetworkStore \u2190 Browser/Backend Status       \u2502\n\u2502  reconnect.ts \u2190 Exponential backoff logic       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                      \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                 UI Layer                         \u2502\n\u2502  useThemeStore, useSidebarStore, useUIStore    \u2502\n\u2502  useModalStore, useNotificationStore            \u2502\n\u2502  useHelpModeStore, selectors.ts                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                      \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          Feature/Domain Stores                   \u2502\n\u2502  useServiceUIStore, useNATUIStore, etc.        \u2502\n\u2502  useChangeSetStore, useDriftDetection          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,n.jsx)(s.h2,{id:"import-patterns",children:"Import Patterns"}),"\n",(0,n.jsx)(s.p,{children:"All stores are exported from the barrel export:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-typescript",children:"import {\n  useAuthStore,\n  useConnectionStore,\n  useNetworkStore,\n  useThemeStore,\n  useSidebarStore,\n  useUIStore,\n  useModalStore,\n  useNotificationStore,\n  useHelpModeStore,\n  useTokenRefresh,\n  createReconnectionManager,\n  // ... and 40+ more\n} from '@nasnet/state/stores';\n"})}),"\n",(0,n.jsx)(s.h2,{id:"selector-usage-pattern",children:"Selector Usage Pattern"}),"\n",(0,n.jsx)(s.p,{children:"Always use selectors for optimal performance and minimal re-renders:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-typescript",children:"// \u2705 GOOD: Only re-renders when isAuthenticated changes\nconst isAuthenticated = useAuthStore(state => state.isAuthenticated);\n\n// \u2705 GOOD: Select multiple with shallow comparison\nimport { shallow } from 'zustand/shallow';\nconst { user, token } = useAuthStore(\n  state => ({ user: state.user, token: state.token }),\n  shallow\n);\n\n// \u274c BAD: Re-renders on any store change\nconst { user, token, isRefreshing } = useAuthStore();\n"})}),"\n",(0,n.jsx)(s.h2,{id:"domain-ui-store-pattern",children:"Domain UI Store Pattern"}),"\n",(0,n.jsx)(s.p,{children:"Domain UI stores follow a consistent pattern for managing per-page state:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-typescript",children:"interface DomainUIState {\n  // Filters\n  filters: Record<string, unknown>;\n  setFilters: (filters: Partial<DomainUIState['filters']>) => void;\n\n  // Selection\n  selectedItems: string[];\n  setSelectedItems: (items: string[]) => void;\n\n  // Expansion\n  expandedSections: Record<string, boolean>;\n  toggleExpanded: (sectionId: string) => void;\n\n  // Reset (called on page leave)\n  reset: () => void;\n}\n"})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Key characteristics:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"NOT persisted (session-only)"}),"\n",(0,n.jsx)(s.li,{children:"Reset when user navigates away"}),"\n",(0,n.jsx)(s.li,{children:"Stores transient UI state only"}),"\n",(0,n.jsx)(s.li,{children:"No business logic or data fetching"}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"persistence-strategy",children:"Persistence Strategy"}),"\n",(0,n.jsx)(s.h3,{id:"fully-persisted",children:"Fully Persisted"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"useAuthStore"})," - Essential tokens only (token, tokenExpiry, refreshToken, user, isAuthenticated)"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"useThemeStore"})," - User theme preference"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"useSidebarStore"})," - Desktop sidebar collapse state"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"useUIStore"})," - User preferences (compact mode, animations)"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"useHelpModeStore"})," - Help mode preference"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"useShortcutRegistryStore"})," - Custom keyboard bindings"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"useAlertNotificationStore"})," - Alert persistence"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"useRouterStore"})," - Last active router"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"partially-persisted",children:"Partially Persisted"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"useConnectionStore"})," - Only activeRouterId (connection state resets on reload)"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"not-persisted-session-only",children:"Not Persisted (Session-Only)"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"useModalStore"})," - Modal state resets on reload"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"useNotificationStore"})," - Notifications reset on reload"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"useNetworkStore"})," - Network status resets on reload"]}),"\n",(0,n.jsx)(s.li,{children:"All domain UI stores - Page state resets on navigate"}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"useChangeSetStore"})," - Change sets reset on reload"]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"redux-devtools-integration",children:"Redux DevTools Integration"}),"\n",(0,n.jsx)(s.p,{children:"All stores are integrated with Redux DevTools (development mode only):"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-typescript",children:"// In Chrome DevTools: Redux DevTools extension\n// View all store actions and state mutations in real-time\n// Time-travel debugging supported\n"})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Store names for debugging:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"auth-store"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"connection-store"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"network-store"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"theme-store"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"ui-store"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"modal-store"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"notification-store"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"help-mode-store"})}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"four-layer-state-architecture",children:"Four-Layer State Architecture"}),"\n",(0,n.jsx)(s.p,{children:"Zustand stores implement Layer 2 (UI State) of NasNetConnect's state management:"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Server State"})," (Layer 1) - Apollo Client (GraphQL)"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"UI State"})," (Layer 2) - Zustand stores \u2190 You are here"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Form State"})," (Layer 3) - React Hook Form + Zod"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Complex Workflows"})," (Layer 4) - XState machines"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Decision Tree:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Data from router/backend \u2192 Apollo Client (Layer 1)"}),"\n",(0,n.jsx)(s.li,{children:"Complex multi-step workflow \u2192 XState (Layer 4)"}),"\n",(0,n.jsx)(s.li,{children:"Form validation \u2192 React Hook Form (Layer 3)"}),"\n",(0,n.jsx)(s.li,{children:"Theme, sidebar, notifications, modals \u2192 Zustand (Layer 2)"}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["See ",(0,n.jsx)(s.code,{children:"Docs/architecture/frontend-architecture.md"})," for full state architecture details."]})]})}function a(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},71184:(e,s,t)=>{t.d(s,{R:()=>d,x:()=>c});var r=t(14041);const n={},i=r.createContext(n);function d(e){const s=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:d(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);