"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[38793],{67047:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"operations/storybook","title":"Storybook Guide","description":"NasNetConnect runs three independent Storybook instances, one per library tier. All use Storybook 10.2.7 (ESM-only) with the @storybook/react-vite framework.","source":"@site/../connect/docs/operations/storybook.md","sourceDirName":"operations","slug":"/operations/storybook","permalink":"/docs/frontend/operations/storybook","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../connect/docs/operations/storybook.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Performance Guide","permalink":"/docs/frontend/operations/performance"},"next":{"title":"Apollo Client Configuration","permalink":"/docs/frontend/state-management/apollo-client"}}');var o=t(31085),r=t(71184);const i={},l="Storybook Guide",c={},a=[{value:"Storybook Instances",id:"storybook-instances",level:2},{value:"Running Storybook",id:"running-storybook",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Framework",id:"framework",level:3},{value:"Addons",id:"addons",level:3},{value:"Path Aliases",id:"path-aliases",level:3},{value:"Story Discovery",id:"story-discovery",level:3},{value:"Preview Configuration",id:"preview-configuration",level:2},{value:"Global Decorators (<code>apps/connect/.storybook/preview.tsx</code>)",id:"global-decorators-appsconnectstorybookpreviewtsx",level:3},{value:"Theme Switcher",id:"theme-switcher",level:3},{value:"Viewport Presets",id:"viewport-presets",level:3},{value:"Accessibility Checks",id:"accessibility-checks",level:3},{value:"Writing Stories (CSF3 Format)",id:"writing-stories-csf3-format",level:2},{value:"Minimal Story",id:"minimal-story",level:3},{value:"Story with Viewport Variants",id:"story-with-viewport-variants",level:3},{value:"Story with Documentation",id:"story-with-documentation",level:3},{value:"Route-Level Story (Skeleton)",id:"route-level-story-skeleton",level:3},{value:"Story Naming Conventions",id:"story-naming-conventions",level:3},{value:"Story File Location Conventions",id:"story-file-location-conventions",level:2},{value:"Building Static Storybook",id:"building-static-storybook",level:2},{value:"Interaction Tests",id:"interaction-tests",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"storybook-guide",children:"Storybook Guide"})}),"\n",(0,o.jsxs)(n.p,{children:["NasNetConnect runs three independent Storybook instances, one per library tier. All use ",(0,o.jsx)(n.strong,{children:"Storybook 10.2.7"})," (ESM-only) with the ",(0,o.jsx)(n.code,{children:"@storybook/react-vite"})," framework."]}),"\n",(0,o.jsx)(n.p,{children:"See also:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"/docs/frontend/ui-system/overview",children:"UI System Overview"})," \u2014 three-layer component architecture"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"/docs/frontend/getting-started/key-commands",children:"Key Commands"})," \u2014 all Storybook commands"]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"storybook-instances",children:"Storybook Instances"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Instance"}),(0,o.jsx)(n.th,{children:"Port"}),(0,o.jsx)(n.th,{children:"Covers"}),(0,o.jsx)(n.th,{children:"Config Location"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"ui-primitives"})}),(0,o.jsx)(n.td,{children:"4400"}),(0,o.jsx)(n.td,{children:"shadcn/Radix wrapper components"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"libs/ui/primitives/.storybook/"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"ui-patterns"})}),(0,o.jsx)(n.td,{children:"4401"}),(0,o.jsx)(n.td,{children:"Pattern components + feature components + app routes"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"libs/ui/patterns/.storybook/"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"connect"})}),(0,o.jsx)(n.td,{children:"4402"}),(0,o.jsx)(n.td,{children:"App-level skeletons, route-level stories"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"apps/connect/.storybook/"})})]})]})]}),"\n",(0,o.jsx)(n.h3,{id:"running-storybook",children:"Running Storybook"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Primitives library (port 4400)\nnpx nx run ui-primitives:storybook\n\n# Patterns library (port 4401) \u2014 includes feature and app stories\nnpx nx run ui-patterns:storybook\n\n# connect app (port 4402) \u2014 skeleton and route stories\nnpx nx run connect:storybook\n\n# Build static Storybook for all instances\nnpx nx run-many -t build-storybook\n# equivalent to:\nnpm run check:storybook\n\n# Health check\nnpx storybook doctor\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,o.jsx)(n.h3,{id:"framework",children:"Framework"}),"\n",(0,o.jsxs)(n.p,{children:["All three Storybook instances use ",(0,o.jsx)(n.code,{children:"@storybook/react-vite"}),", which delegates to the project's own Vite for bundling. This means stories see the same Vite plugins, path aliases, and optimisations as the production app."]}),"\n",(0,o.jsx)(n.h3,{id:"addons",children:"Addons"}),"\n",(0,o.jsx)(n.p,{children:"Both the primitives and patterns Storybook instances include:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"@storybook/addon-a11y"})," \u2014 accessibility checks (WCAG AAA contrast rule enabled)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"@storybook/addon-docs"})," \u2014 MDX documentation and auto-generated API tables"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"// libs/ui/primitives/.storybook/main.ts (same pattern for all three)\naddons: [\n  getAbsolutePath('@storybook/addon-a11y'),\n  getAbsolutePath('@storybook/addon-docs'),\n],\n"})}),"\n",(0,o.jsx)(n.h3,{id:"path-aliases",children:"Path Aliases"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"viteFinal"})," hook in each ",(0,o.jsx)(n.code,{children:"main.ts"})," mirrors the path aliases from ",(0,o.jsx)(n.code,{children:"apps/connect/vite.config.ts"}),". All 18 ",(0,o.jsx)(n.code,{children:"@nasnet/*"})," aliases are resolved so stories can import from any library:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"// apps/connect/.storybook/main.ts (abbreviated)\nviteFinal: async (config) => ({\n  ...config,\n  resolve: {\n    ...config.resolve,\n    alias: {\n      ...config.resolve?.alias,\n      '@': resolve(__dirname, '../src'),\n      '@nasnet/ui/primitives': resolve(root, 'libs/ui/primitives/src'),\n      '@nasnet/ui/patterns':   resolve(root, 'libs/ui/patterns/src'),\n      '@nasnet/api-client/queries': resolve(root, 'libs/api-client/queries/src'),\n      // ... all other aliases\n    },\n  },\n}),\n"})}),"\n",(0,o.jsx)(n.h3,{id:"story-discovery",children:"Story Discovery"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"ui-primitives"})})," (",(0,o.jsx)(n.code,{children:"libs/ui/primitives/.storybook/main.ts"}),"):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"stories: ['../src/**/*.stories.@(js|jsx|ts|tsx|mdx)'],\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"ui-patterns"})})," (",(0,o.jsx)(n.code,{children:"libs/ui/patterns/.storybook/main.ts"}),") \u2014 includes feature and app stories:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"stories: [\n  '../src/**/*.stories.@(js|jsx|ts|tsx|mdx)',\n  '../../../features/*/src/**/*.stories.@(js|jsx|ts|tsx|mdx)',\n  '../../layouts/src/**/*.stories.@(js|jsx|ts|tsx|mdx)',\n  '../../../../apps/connect/src/**/*.stories.@(js|jsx|ts|tsx|mdx)',\n],\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"connect"})})," (",(0,o.jsx)(n.code,{children:"apps/connect/.storybook/main.ts"}),"):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"stories: ['../src/**/*.stories.@(js|jsx|ts|tsx|mdx)'],\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Story files co-located with routes (e.g., ",(0,o.jsx)(n.code,{children:"src/routes/router/$id/dhcp.stories.tsx"}),") are excluded from the TanStack Router route tree via ",(0,o.jsx)(n.code,{children:"routeFileIgnorePattern: '\\\\.stories\\\\.'"})," in ",(0,o.jsx)(n.code,{children:"vite.config.ts"}),"."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"preview-configuration",children:"Preview Configuration"}),"\n",(0,o.jsxs)(n.h3,{id:"global-decorators-appsconnectstorybookpreviewtsx",children:["Global Decorators (",(0,o.jsx)(n.code,{children:"apps/connect/.storybook/preview.tsx"}),")"]}),"\n",(0,o.jsxs)(n.p,{children:["Every story in the ",(0,o.jsx)(n.code,{children:"connect"})," Storybook is wrapped in this provider stack:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"decorators: [\n  (Story, context) => {\n    const isDark = context.globals.theme === 'dark';\n    return (\n      <MockApolloProvider>\n        <QueryClientProvider client={queryClient}>\n          <I18nProvider>\n            <PlatformProvider>\n              <AnimationProvider>\n                <ToastProvider>\n                  <div className={isDark ? 'dark' : ''} data-theme={isDark ? 'dark' : 'light'}>\n                    <div className=\"p-4 min-h-screen bg-background text-foreground\">\n                      <Story />\n                    </div>\n                  </div>\n                </ToastProvider>\n              </AnimationProvider>\n            </PlatformProvider>\n          </I18nProvider>\n        </QueryClientProvider>\n      </MockApolloProvider>\n    );\n  },\n],\n"})}),"\n",(0,o.jsx)(n.p,{children:"This means stories automatically get:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["A ",(0,o.jsx)(n.code,{children:"MockApolloProvider"})," with zero retries (for predictable mock data)"]}),"\n",(0,o.jsxs)(n.li,{children:["A ",(0,o.jsx)(n.code,{children:"QueryClientProvider"})," (TanStack Query, also zero retries)"]}),"\n",(0,o.jsxs)(n.li,{children:["i18n context (",(0,o.jsx)(n.code,{children:"I18nProvider"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:["Platform detection (",(0,o.jsx)(n.code,{children:"PlatformProvider"}),")"]}),"\n",(0,o.jsx)(n.li,{children:"Animation context"}),"\n",(0,o.jsx)(n.li,{children:"Toast notifications"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"ui-primitives"})," decorator is simpler \u2014 it only wraps in the dark/light theme div, since primitives have no Apollo or routing dependencies."]}),"\n",(0,o.jsx)(n.h3,{id:"theme-switcher",children:"Theme Switcher"}),"\n",(0,o.jsxs)(n.p,{children:["A global ",(0,o.jsx)(n.strong,{children:"Theme"})," toolbar button (sun/moon) is registered in all three instances:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"globalTypes: {\n  theme: {\n    name: 'Theme',\n    defaultValue: 'light',\n    toolbar: {\n      icon: 'circlehollow',\n      items: [\n        { value: 'light', icon: 'sun', title: 'Light' },\n        { value: 'dark', icon: 'moon', title: 'Dark' },\n      ],\n    },\n  },\n},\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Switching theme applies/removes the ",(0,o.jsx)(n.code,{children:".dark"})," class, activating Tailwind dark-mode CSS variables. Background defaults to ",(0,o.jsx)(n.code,{children:"light"})," (",(0,o.jsx)(n.code,{children:"#F1F5F9"}),")."]}),"\n",(0,o.jsx)(n.h3,{id:"viewport-presets",children:"Viewport Presets"}),"\n",(0,o.jsx)(n.p,{children:"All three Storybook instances define the same three platform viewports:"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Preset"}),(0,o.jsx)(n.th,{children:"Width \xd7 Height"}),(0,o.jsx)(n.th,{children:"Use"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"mobile"})}),(0,o.jsx)(n.td,{children:"375 \xd7 667"}),(0,o.jsx)(n.td,{children:"iPhone SE / consumer mobile"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"tablet"})}),(0,o.jsx)(n.td,{children:"768 \xd7 1024"}),(0,o.jsx)(n.td,{children:"iPad / hybrid layout"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"desktop"})}),(0,o.jsx)(n.td,{children:"1280 \xd7 800"}),(0,o.jsx)(n.td,{children:"Pro desktop view"})]})]})]}),"\n",(0,o.jsxs)(n.p,{children:["These map directly to the three platform breakpoints (",(0,o.jsx)(n.code,{children:"<640px"}),", ",(0,o.jsx)(n.code,{children:"640-1024px"}),", ",(0,o.jsx)(n.code,{children:">1024px"}),") used by Platform Presenters."]}),"\n",(0,o.jsx)(n.h3,{id:"accessibility-checks",children:"Accessibility Checks"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"@storybook/addon-a11y"})," is configured with the enhanced colour-contrast rule:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"a11y: {\n  config: {\n    rules: [\n      { id: 'color-contrast-enhanced', enabled: true }, // WCAG AAA 7:1\n    ],\n  },\n},\n"})}),"\n",(0,o.jsx)(n.p,{children:"The accessibility panel appears below each story. Red failures are blocking \u2014 fix them before merging."}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"writing-stories-csf3-format",children:"Writing Stories (CSF3 Format)"}),"\n",(0,o.jsxs)(n.p,{children:["All stories use ",(0,o.jsx)(n.strong,{children:"Component Story Format 3 (CSF3)"}),". This is the standard format used throughout the codebase."]}),"\n",(0,o.jsx)(n.h3,{id:"minimal-story",children:"Minimal Story"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"// libs/ui/patterns/src/status-badge/StatusBadge.stories.tsx\nimport type { Meta, StoryObj } from '@storybook/react';\nimport { StatusBadge } from './StatusBadge';\n\nconst meta: Meta<typeof StatusBadge> = {\n  title: 'Patterns/StatusBadge',\n  component: StatusBadge,\n  tags: ['autodocs'],\n};\n\nexport default meta;\ntype Story = StoryObj<typeof StatusBadge>;\n\nexport const Online: Story = {\n  args: {\n    status: 'online',\n    label: 'Connected',\n  },\n};\n\nexport const Offline: Story = {\n  args: {\n    status: 'offline',\n    label: 'Disconnected',\n  },\n};\n"})}),"\n",(0,o.jsx)(n.h3,{id:"story-with-viewport-variants",children:"Story with Viewport Variants"}),"\n",(0,o.jsx)(n.p,{children:"For platform-aware components, add explicit viewport stories:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"export const Default: Story = {\n  args: { items: mockItems },\n};\n\nexport const Mobile: Story = {\n  args: { items: mockItems },\n  parameters: {\n    viewport: { defaultViewport: 'mobile' },\n  },\n};\n\nexport const Tablet: Story = {\n  args: { items: mockItems },\n  parameters: {\n    viewport: { defaultViewport: 'tablet' },\n  },\n};\n\nexport const Desktop: Story = {\n  args: { items: mockItems },\n  parameters: {\n    viewport: { defaultViewport: 'desktop' },\n  },\n};\n"})}),"\n",(0,o.jsx)(n.h3,{id:"story-with-documentation",children:"Story with Documentation"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"const meta: Meta<typeof DHCPPoolCard> = {\n  title: 'App/Router/DHCP/DHCPPoolCard',\n  component: DHCPPoolCard,\n  tags: ['autodocs'],\n  parameters: {\n    layout: 'fullscreen',\n    docs: {\n      description: {\n        component: 'Displays a single DHCP pool with address range and lease count.',\n      },\n    },\n  },\n};\n\nexport const WithLeases: Story = {\n  args: { pool: mockPool },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Shows the pool card when active leases are present.',\n      },\n    },\n  },\n};\n"})}),"\n",(0,o.jsx)(n.h3,{id:"route-level-story-skeleton",children:"Route-Level Story (Skeleton)"}),"\n",(0,o.jsx)(n.p,{children:"Route files with lazy-loaded tabs co-locate a story for the skeleton loading state:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"// apps/connect/src/routes/router/$id/dhcp.stories.tsx\nimport { Skeleton } from '@nasnet/ui/primitives';\nimport type { Meta, StoryObj } from '@storybook/react';\n\nfunction DHCPTabSkeleton() {\n  return (\n    <div className=\"space-y-4 p-4\">\n      <Skeleton className=\"h-8 w-48\" />\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <Skeleton className=\"h-40 w-full\" />\n        <Skeleton className=\"h-40 w-full\" />\n      </div>\n      <Skeleton className=\"h-64 w-full\" />\n    </div>\n  );\n}\n\nconst meta: Meta<typeof DHCPTabSkeleton> = {\n  title: 'App/Router/DHCPTab',\n  component: DHCPTabSkeleton,\n  tags: ['autodocs'],\n  parameters: {\n    layout: 'fullscreen',\n    docs: {\n      description: {\n        component: 'DHCP tab with lazy loading and skeleton fallback for optimal bundle size.',\n      },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof DHCPTabSkeleton>;\n\nexport const Loading: Story = { render: () => <DHCPTabSkeleton /> };\nexport const LoadingMobile: Story = {\n  render: () => <DHCPTabSkeleton />,\n  parameters: { viewport: { defaultViewport: 'mobile' } },\n};\n"})}),"\n",(0,o.jsx)(n.h3,{id:"story-naming-conventions",children:"Story Naming Conventions"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Pattern"}),(0,o.jsx)(n.th,{children:"Example Title"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Primitives"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"'Primitives/Button'"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Pattern components"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"'Patterns/DataTable'"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"App-level components"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"'App/AppHeader'"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Router panel tabs"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"'App/Router/FirewallTab'"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Feature components"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"'Features/Alerts/AlertList'"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Skeletons"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"'App/Skeletons/DashboardSkeleton'"})})]})]})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"story-file-location-conventions",children:"Story File Location Conventions"}),"\n",(0,o.jsx)(n.p,{children:"Stories are co-located with the component they document:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"libs/ui/patterns/src/status-badge/\n\u251c\u2500\u2500 StatusBadge.tsx\n\u251c\u2500\u2500 StatusBadge.mobile.tsx\n\u251c\u2500\u2500 StatusBadge.desktop.tsx\n\u251c\u2500\u2500 StatusBadge.stories.tsx    \u2190 co-located story\n\u2514\u2500\u2500 index.ts\n\napps/connect/src/routes/router/$id/\n\u251c\u2500\u2500 dhcp.tsx                   \u2190 route\n\u251c\u2500\u2500 dhcp.stories.tsx           \u2190 route story (skeleton)\n\u2514\u2500\u2500 ...\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"ui-patterns"})," Storybook scans ",(0,o.jsx)(n.code,{children:"../../../../apps/connect/src/**/*.stories.*"})," so all app stories are visible in the patterns Storybook (port 4401) alongside pattern library stories."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"building-static-storybook",children:"Building Static Storybook"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Build all Storybook instances\nnpx nx run-many -t build-storybook\n\n# Build a specific instance\nnpx nx run connect:build-storybook\nnpx nx run ui-patterns:build-storybook\nnpx nx run ui-primitives:build-storybook\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Output goes to ",(0,o.jsx)(n.code,{children:"dist/storybook/{connect,ui-patterns,ui-primitives}/"}),". Static Storybooks are deployed for PR review via Chromatic (see ",(0,o.jsx)(n.code,{children:"chromatic"})," in ",(0,o.jsx)(n.code,{children:"package.json"})," devDependencies)."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"interaction-tests",children:"Interaction Tests"}),"\n",(0,o.jsxs)(n.p,{children:["Storybook interaction tests (using ",(0,o.jsx)(n.code,{children:"@storybook/test"}),") can be added to any story to verify behaviour:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"import { expect, userEvent, within } from '@storybook/test';\n\nexport const SubmitsForm: Story = {\n  play: async ({ canvasElement }) => {\n    const canvas = within(canvasElement);\n    const input = canvas.getByLabelText('IP Address');\n    await userEvent.type(input, '192.168.1.1');\n    await userEvent.click(canvas.getByRole('button', { name: 'Save' }));\n    await expect(canvas.getByText('Saved')).toBeVisible();\n  },\n};\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Run interaction tests via the Storybook UI or ",(0,o.jsx)(n.code,{children:"npx nx run connect:test-storybook"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},71184:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var s=t(14041);const o={},r=s.createContext(o);function i(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);