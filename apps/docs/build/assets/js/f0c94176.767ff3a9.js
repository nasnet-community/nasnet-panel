"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[80591],{71184:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>l});var r=i(14041);const s={},t=r.createContext(s);function d(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(t.Provider,{value:n},e.children)}},77041:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"machines/hooks-reference","title":"Machine Hooks Reference","description":"Complete API reference for XState machine hooks in NasNet.","source":"@site/../../libs/state/docs/machines/hooks-reference.md","sourceDirName":"machines","slug":"/machines/hooks-reference","permalink":"/docs/state/machines/hooks-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../../libs/state/docs/machines/hooks-reference.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"title":"Machine Hooks Reference"},"sidebar":"sidebar","previous":{"title":"Cross-Feature Communication via Stores","permalink":"/docs/state/integrations/cross-feature-sharing"},"next":{"title":"Change Set Machine (Atomic Multi-Resource Operations)","permalink":"/docs/state/machines/change-set-machine"}}');var s=i(31085),t=i(71184);const d={sidebar_position:7,title:"Machine Hooks Reference"},l="Machine Hooks Reference",c={},o=[{value:"useWizard",id:"usewizard",level:2},{value:"Basic Variant",id:"basic-variant",level:3},{value:"Parameters",id:"parameters",level:3},{value:"Return Values",id:"return-values",level:3},{value:"Example",id:"example",level:3},{value:"Session Recovery Variant",id:"session-recovery-variant",level:3},{value:"useConfigPipeline",id:"useconfigpipeline",level:2},{value:"Basic Variant",id:"basic-variant-1",level:3},{value:"Parameters",id:"parameters-1",level:3},{value:"Return Values",id:"return-values-1",level:3},{value:"Example",id:"example-1",level:3},{value:"Quick Variant",id:"quick-variant",level:3},{value:"useResourceLifecycle",id:"useresourcelifecycle",level:2},{value:"Basic Variant",id:"basic-variant-2",level:3},{value:"Parameters",id:"parameters-2",level:3},{value:"Return Values",id:"return-values-2",level:3},{value:"Example",id:"example-2",level:3},{value:"Apollo Integration Variant",id:"apollo-integration-variant",level:3},{value:"Comparison Tables",id:"comparison-tables",level:2},{value:"Wizard vs. Config Pipeline",id:"wizard-vs-config-pipeline",level:3},{value:"Config Pipeline vs. Resource Lifecycle",id:"config-pipeline-vs-resource-lifecycle",level:3},{value:"Wizard Persistence Features",id:"wizard-persistence-features",level:3},{value:"State Diagrams",id:"state-diagrams",level:2},{value:"useWizard Flow",id:"usewizard-flow",level:3},{value:"useConfigPipeline Flow",id:"useconfigpipeline-flow",level:3},{value:"useResourceLifecycle Flow",id:"useresourcelifecycle-flow",level:3},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Pattern: Step-by-step with preview",id:"pattern-step-by-step-with-preview",level:3},{value:"Pattern: Safe config changes",id:"pattern-safe-config-changes",level:3},{value:"Pattern: Monitor resource health",id:"pattern-monitor-resource-health",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Performance Tips",id:"performance-tips",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"machine-hooks-reference",children:"Machine Hooks Reference"})}),"\n",(0,s.jsx)(n.p,{children:"Complete API reference for XState machine hooks in NasNet."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Source:"})," ",(0,s.jsx)(n.code,{children:"libs/state/machines/src/hooks/"})]}),"\n",(0,s.jsx)(n.p,{children:"All hooks provide TypeScript-first React integration with XState machines, handling persistence, async operations, and lifecycle management automatically."}),"\n",(0,s.jsx)(n.h2,{id:"usewizard",children:"useWizard"}),"\n",(0,s.jsx)(n.p,{children:"Multi-step form wizard for sequential workflows (setup, pairing, configuration)."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Source:"})," ",(0,s.jsx)(n.code,{children:"libs/state/machines/src/hooks/useWizard.ts"})]}),"\n",(0,s.jsx)(n.h3,{id:"basic-variant",children:"Basic Variant"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function useWizard<TData extends Record<string, unknown>>(\n  config: WizardConfig<TData>,\n  options?: UseWizardOptions\n): UseWizardReturn<TData>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"config"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"WizardConfig<TData>"})}),(0,s.jsx)(n.td,{children:"Required"}),(0,s.jsx)(n.td,{children:"Wizard configuration (see below)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"config.id"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Required"}),(0,s.jsx)(n.td,{children:"Unique machine ID for persistence"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"config.totalSteps"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"number"})}),(0,s.jsx)(n.td,{children:"Required"}),(0,s.jsx)(n.td,{children:"Total number of steps (1-indexed)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"config.validateStep"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"(step, data) => Promise<{valid, errors?}>"})}),(0,s.jsx)(n.td,{children:"Required"}),(0,s.jsx)(n.td,{children:"Validation function for each step"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"config.onSubmit"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"(data: TData) => Promise<void>"})}),(0,s.jsx)(n.td,{children:"Required"}),(0,s.jsx)(n.td,{children:"Handler when wizard completes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"config.initialData"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Partial<TData>"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{}"})}),(0,s.jsx)(n.td,{children:"Initial form data"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"options.autoPersist"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"true"})}),(0,s.jsx)(n.td,{children:"Auto-save state to localStorage"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"options.autoRestore"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"false"})}),(0,s.jsx)(n.td,{children:"Auto-restore on mount (vs. showing prompt)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"options.onRestore"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"() => void"})}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Callback when session restored"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"options.onComplete"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"() => void"})}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Callback when wizard completes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"options.onCancel"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"() => void"})}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Callback when wizard cancelled"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"return-values",children:"Return Values"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'interface UseWizardReturn<TData> {\n  // State\n  currentStep: number;                    // 1-indexed current step\n  totalSteps: number;                     // Total steps\n  data: Partial<TData>;                   // Collected form data\n  errors: Record<string, string>;         // Validation errors by field\n  sessionId: string;                      // Session ID for tracking\n  progress: number;                       // 0-100 progress percentage\n\n  // Status Flags\n  isValidating: boolean;                  // Currently validating step\n  isSubmitting: boolean;                  // Currently submitting form\n  isCompleted: boolean;                   // Wizard completed successfully\n  isCancelled: boolean;                   // Wizard was cancelled\n  isFirstStep: boolean;                   // On first step\n  isLastStep: boolean;                    // On last step\n  canRestore: boolean;                    // Session can be resumed\n  savedSessionAge: string | null;         // "2 hours ago" or null\n\n  // Actions\n  next: (data?: Partial<TData>) => void;        // Advance to next step\n  back: () => void;                             // Go to previous step\n  goToStep: (step: number) => void;             // Jump to specific step\n  setData: (data: Partial<TData>) => void;      // Update without advancing\n  clearErrors: () => void;                      // Clear validation errors\n  cancel: () => void;                           // Cancel wizard\n  restore: () => void;                          // Resume saved session\n  discardSession: () => void;                   // Discard saved session\n  canAccessStep: (step: number) => boolean;     // Check if step accessible\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface VPNSetupData {\n  provider: 'wireguard' | 'openvpn';\n  serverAddress: string;\n  credentials: { username: string; password: string };\n}\n\nfunction VPNWizard() {\n  const wizard = useWizard<VPNSetupData>(\n    {\n      id: 'vpn-setup',\n      totalSteps: 3,\n      validateStep: async (step, data) => {\n        if (step === 1 && !data.provider) {\n          return { valid: false, errors: { provider: 'Required' } };\n        }\n        return { valid: true };\n      },\n      onSubmit: async (data) => {\n        await api.createVPN(data);\n      },\n    },\n    {\n      autoPersist: true,\n      onComplete: () => toast.success('VPN created!'),\n    }\n  );\n\n  if (wizard.canRestore) {\n    return (\n      <ResumePrompt\n        age={wizard.savedSessionAge}\n        onResume={wizard.restore}\n        onDiscard={wizard.discardSession}\n      />\n    );\n  }\n\n  return (\n    <form>\n      <StepIndicator current={wizard.currentStep} total={wizard.totalSteps} />\n      <StepContent step={wizard.currentStep} errors={wizard.errors} />\n      <button onClick={() => wizard.next(formData)} disabled={wizard.isValidating}>\n        Next\n      </button>\n      <button onClick={wizard.back} disabled={wizard.isFirstStep}>\n        Back\n      </button>\n    </form>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"session-recovery-variant",children:"Session Recovery Variant"}),"\n",(0,s.jsxs)(n.p,{children:["Built-in session recovery with ",(0,s.jsx)(n.code,{children:"useWizardSession"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function useWizardSession(machineId: string): {\n  hasSavedSession: boolean;\n  sessionAge: string | null;\n  discardSession: () => void;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:'Use in navigation to show "Resume Setup" button:'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function AppNavigation() {\n  const session = useWizardSession('vpn-setup');\n\n  if (session.hasSavedSession) {\n    return (\n      <button onClick={() => navigate('/vpn-setup')}>\n        Resume Setup ({session.sessionAge})\n      </button>\n    );\n  }\n\n  return null;\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"useconfigpipeline",children:"useConfigPipeline"}),"\n",(0,s.jsx)(n.p,{children:"Configuration change pipeline with validation, preview, and rollback (edit \u2192 validate \u2192 preview \u2192 confirm \u2192 apply \u2192 verify)."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Source:"})," ",(0,s.jsx)(n.code,{children:"libs/state/machines/src/hooks/useConfigPipeline.ts"})]}),"\n",(0,s.jsx)(n.h3,{id:"basic-variant-1",children:"Basic Variant"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function useConfigPipeline<TConfig = unknown>(\n  pipelineConfig: ConfigPipelineConfig<TConfig>,\n  options: UseConfigPipelineOptions\n): UseConfigPipelineReturn<TConfig>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"parameters-1",children:"Parameters"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"pipelineConfig.runValidationPipeline"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"(config) => Promise<{errors, diff}>"})}),(0,s.jsx)(n.td,{children:"Required"}),(0,s.jsx)(n.td,{children:"Validation function"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"pipelineConfig.applyConfig"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"({resourceId, config}) => Promise<{rollbackData}>"})}),(0,s.jsx)(n.td,{children:"Required"}),(0,s.jsx)(n.td,{children:"Apply changes to router"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"pipelineConfig.verifyApplied"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"(resourceId) => Promise<void>"})}),(0,s.jsx)(n.td,{children:"Required"}),(0,s.jsx)(n.td,{children:"Verify changes took effect"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"pipelineConfig.executeRollback"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"(rollbackData) => Promise<void>"})}),(0,s.jsx)(n.td,{children:"Required"}),(0,s.jsx)(n.td,{children:"Rollback on error"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"options.resourceId"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Required"}),(0,s.jsx)(n.td,{children:"Resource being configured"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"options.originalConfig"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"unknown"})}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Original config (for diff)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"options.onSuccess"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"() => void"})}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Callback on successful apply"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"options.onRollback"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"() => void"})}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Callback after rollback"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"options.onError"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"(error) => void"})}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Callback on error"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"options.onValidationError"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"(errors) => void"})}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Callback on validation failure"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"options.onPreview"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"(diff) => void"})}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Callback when entering preview"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"return-values-1",children:"Return Values"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface UseConfigPipelineReturn<TConfig> {\n  // State\n  state: ConfigPipelineState;                    // Current pipeline state\n  stateDescription: string;                      // Human-readable description\n  resourceId: string | null;                     // Resource being configured\n  pendingConfig: TConfig | null;                 // Changes pending\n  validationErrors: ValidationError[];           // Validation failures\n  diff: ConfigDiff | null;                       // Change preview diff\n  errorMessage: string | null;                   // Error details\n\n  // Status Flags\n  isFinal: boolean;                              // Pipeline completed (any end state)\n  isCancellable: boolean;                        // Can cancel current operation\n  isProcessing: boolean;                         // Async operation in progress\n  isValidating: boolean;                         // Validating changes\n  isApplying: boolean;                           // Applying to router\n  isVerifying: boolean;                          // Verifying changes took effect\n  isRollingBack: boolean;                        // Rolling back changes\n  isError: boolean;                              // In error state\n  isHighRisk: boolean;                           // Requires manual acknowledgment\n  isSuccess: boolean;                            // Changes applied successfully\n  isRolledBack: boolean;                         // Changes were rolled back\n\n  // Actions\n  edit: (config: TConfig) => void;              // Start editing config\n  validate: () => void;                          // Trigger validation\n  confirm: () => void;                           // Confirm after preview\n  acknowledge: () => void;                       // Acknowledge high-risk operation\n  cancel: () => void;                            // Cancel pipeline\n  retry: () => void;                             // Retry from error\n  forceRollback: () => void;                     // Force rollback\n  reset: () => void;                             // Reset to idle\n  editAndValidate: (config: TConfig) => void;   // Edit + validate in one call\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"example-1",children:"Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface WireGuardConfig {\n  interface: string;\n  privateKey: string;\n  address: string;\n  port: number;\n}\n\nfunction WireGuardEditor({ resourceId }: Props) {\n  const pipeline = useConfigPipeline<WireGuardConfig>(\n    {\n      runValidationPipeline: async (config) => {\n        const { errors } = await api.validateWG(config);\n        const { diff } = await api.computeDiff(resourceId, config);\n        return { errors, diff };\n      },\n      applyConfig: async ({ config }) => {\n        const backup = await api.backupWG(resourceId);\n        await api.applyWG(resourceId, config);\n        return { rollbackData: backup };\n      },\n      verifyApplied: async () => {\n        const status = await api.getWGStatus(resourceId);\n        if (!status.running) throw new Error('Failed to start');\n      },\n      executeRollback: async (backup) => {\n        await api.restoreWG(resourceId, backup);\n      },\n    },\n    {\n      resourceId,\n      onSuccess: () => toast.success('Applied!'),\n      onRollback: () => toast.warning('Rolled back'),\n    }\n  );\n\n  if (pipeline.state === 'previewing') {\n    return (\n      <ConfigPreview\n        diff={pipeline.diff}\n        isHighRisk={pipeline.isHighRisk}\n        onConfirm={pipeline.confirm}\n        onCancel={pipeline.cancel}\n      />\n    );\n  }\n\n  if (pipeline.state === 'error') {\n    return (\n      <ErrorDialog\n        error={pipeline.errorMessage}\n        onRetry={pipeline.retry}\n        onRollback={pipeline.forceRollback}\n      />\n    );\n  }\n\n  return (\n    <ConfigForm\n      config={pipeline.pendingConfig}\n      errors={pipeline.validationErrors}\n      onSave={(config) => pipeline.editAndValidate(config)}\n      isLoading={pipeline.isProcessing}\n    />\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"quick-variant",children:"Quick Variant"}),"\n",(0,s.jsx)(n.p,{children:"Auto-skip preview for non-high-risk changes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function useQuickConfigPipeline<TConfig = unknown>(\n  pipelineConfig: ConfigPipelineConfig<TConfig>,\n  options: UseConfigPipelineOptions\n): UseConfigPipelineReturn<TConfig> & {\n  quickApply: (config: TConfig) => void;\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Difference:"})," Automatically transitions from preview \u2192 applying for non-high-risk changes."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const pipeline = useQuickConfigPipeline(config, options);\n\n// This will auto-advance through preview if not high-risk\npipeline.quickApply(formData);\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"useresourcelifecycle",children:"useResourceLifecycle"}),"\n",(0,s.jsx)(n.p,{children:"Resource lifecycle management (draft \u2192 validating \u2192 applying \u2192 active/failed/degraded)."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Source:"})," ",(0,s.jsx)(n.code,{children:"libs/state/machines/src/hooks/useResourceLifecycle.ts"})]}),"\n",(0,s.jsx)(n.h3,{id:"basic-variant-2",children:"Basic Variant"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function useResourceLifecycle<TConfig = unknown>(\n  options: UseResourceLifecycleOptions<TConfig>\n): UseResourceLifecycleResult<TConfig>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"parameters-2",children:"Parameters"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"options.id"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"'resourceLifecycle'"})}),(0,s.jsx)(n.td,{children:"Machine ID"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"options.initialResource"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Resource<TConfig>"})}),(0,s.jsx)(n.td,{children:"Required"}),(0,s.jsx)(n.td,{children:"Starting resource state"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"options.validateResource"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"(uuid) => Promise<ValidationResult>"})}),(0,s.jsx)(n.td,{children:"Required"}),(0,s.jsx)(n.td,{children:"Validation function"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"options.applyResource"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"(uuid, force?) => Promise<void>"})}),(0,s.jsx)(n.td,{children:"Required"}),(0,s.jsx)(n.td,{children:"Apply to router"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"options.syncResource"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"(uuid) => Promise<RuntimeState>"})}),(0,s.jsx)(n.td,{children:"Required"}),(0,s.jsx)(n.td,{children:"Sync from router"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"return-values-2",children:"Return Values"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface UseResourceLifecycleResult<TConfig> {\n  // State\n  state: ResourceLifecycleStateValue;                      // Current state\n  context: ResourceLifecycleContext<TConfig>;              // Full context\n  displayInfo: ReturnType<typeof getResourceStateDisplayInfo>;\n\n  // Predicates\n  isPending: boolean;                     // Async operation in progress\n  isActive: boolean;                      // Running on router\n  isEditable: boolean;                    // Can be edited\n  isAppliable: boolean;                   // Can be applied\n  hasError: boolean;                      // In error state\n  isDegraded: boolean;                    // Degraded (running but issues)\n\n  // Validation\n  validationErrors: ValidationError[];    // Errors from validation\n  validationWarnings: ValidationError[];  // Warnings from validation\n  isValid: boolean;                       // Can be applied\n\n  // Actions\n  edit: (configuration: TConfig) => void;\n  validate: () => void;\n  apply: (force?: boolean) => void;\n  updateRuntime: (runtime: RuntimeState) => void;\n  degrade: (reason: string) => void;\n  recover: () => void;\n  deprecate: () => void;\n  restore: () => void;\n  archive: () => void;\n  retry: () => void;\n  reset: () => void;\n  sync: () => void;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"example-2",children:"Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface WireGuardConfig {\n  address: string;\n  port: number;\n  privateKey: string;\n}\n\nfunction WireGuardResource({ uuid, resource }: Props) {\n  const lifecycle = useResourceLifecycle<WireGuardConfig>({\n    initialResource: resource,\n    validateResource: async (uuid) => {\n      const result = await api.validateWG(uuid);\n      return result;\n    },\n    applyResource: async (uuid) => {\n      await api.applyWG(uuid);\n    },\n    syncResource: async (uuid) => {\n      const runtime = await api.getWGRuntime(uuid);\n      return runtime;\n    },\n  });\n\n  return (\n    <div>\n      <StatusBadge\n        status={lifecycle.displayInfo.color}\n        label={lifecycle.displayInfo.label}\n        showSpinner={lifecycle.displayInfo.showSpinner}\n      />\n\n      {lifecycle.validationErrors.length > 0 && (\n        <ErrorList errors={lifecycle.validationErrors} />\n      )}\n\n      <ConfigForm\n        config={lifecycle.context.configuration}\n        onSubmit={(config) => {\n          lifecycle.edit(config);\n          lifecycle.validate();\n        }}\n        disabled={lifecycle.isPending}\n      />\n\n      {lifecycle.isAppliable && (\n        <button onClick={() => lifecycle.apply()} disabled={lifecycle.isPending}>\n          Apply to Router\n        </button>\n      )}\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"apollo-integration-variant",children:"Apollo Integration Variant"}),"\n",(0,s.jsx)(n.p,{children:"Wires up GraphQL mutations and subscriptions automatically:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function useResourceLifecycleWithApollo<TConfig = unknown>(\n  uuid: string,\n  options?: {\n    onStateChange?: (state: string, context) => void;\n    onError?: (error: string, code?: string) => void;\n  }\n): UseResourceLifecycleResult<TConfig>\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," Currently a placeholder. In full implementation, would use:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"useValidateResource"})," mutation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"useApplyResource"})," mutation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"useSyncResource"})," mutation"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"useResourceRuntimeSubscription"})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"comparison-tables",children:"Comparison Tables"}),"\n",(0,s.jsx)(n.h3,{id:"wizard-vs-config-pipeline",children:"Wizard vs. Config Pipeline"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Feature"}),(0,s.jsx)(n.th,{children:"useWizard"}),(0,s.jsx)(n.th,{children:"useConfigPipeline"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Purpose"})}),(0,s.jsx)(n.td,{children:"Multi-step form workflows"}),(0,s.jsx)(n.td,{children:"Single-resource config changes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Flow"})}),(0,s.jsx)(n.td,{children:"Step \u2192 Validate \u2192 Next Step"}),(0,s.jsx)(n.td,{children:"Edit \u2192 Validate \u2192 Preview \u2192 Apply \u2192 Verify"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Data Collection"})}),(0,s.jsx)(n.td,{children:"Across all steps"}),(0,s.jsx)(n.td,{children:"Single configuration"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"User Interaction"})}),(0,s.jsx)(n.td,{children:"Forward/backward navigation"}),(0,s.jsx)(n.td,{children:"Preview before apply"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Rollback"})}),(0,s.jsx)(n.td,{children:"Start over from step 1"}),(0,s.jsx)(n.td,{children:"Auto-rollback on apply failure"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Persistence"})}),(0,s.jsx)(n.td,{children:"Session save/restore"}),(0,s.jsx)(n.td,{children:"No persistence (state-only)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"High-Risk Ops"})}),(0,s.jsx)(n.td,{children:"Validation errors block"}),(0,s.jsx)(n.td,{children:"Manual acknowledgment required"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Example"})}),(0,s.jsx)(n.td,{children:"VPN setup, device pairing"}),(0,s.jsx)(n.td,{children:"WireGuard config, DHCP settings"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"config-pipeline-vs-resource-lifecycle",children:"Config Pipeline vs. Resource Lifecycle"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Feature"}),(0,s.jsx)(n.th,{children:"useConfigPipeline"}),(0,s.jsx)(n.th,{children:"useResourceLifecycle"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Purpose"})}),(0,s.jsx)(n.td,{children:"Atomic config change"}),(0,s.jsx)(n.td,{children:"Resource state management"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Scope"})}),(0,s.jsx)(n.td,{children:"Single resource at a time"}),(0,s.jsx)(n.td,{children:"Multiple resources, tracking"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Lifecycle States"})}),(0,s.jsx)(n.td,{children:"Edit/Validate/Preview/Apply"}),(0,s.jsx)(n.td,{children:"Draft/Active/Degraded/Archived"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Validation"})}),(0,s.jsx)(n.td,{children:"Per-change validation"}),(0,s.jsx)(n.td,{children:"Continuous validation"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Sync"})}),(0,s.jsx)(n.td,{children:"N/A"}),(0,s.jsx)(n.td,{children:"Sync from router"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Persistence"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Yes (resource state)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Degrade/Recover"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Best For"})}),(0,s.jsx)(n.td,{children:"Forms, config editors"}),(0,s.jsx)(n.td,{children:"Dashboard monitoring, status tracking"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"wizard-persistence-features",children:"Wizard Persistence Features"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Feature"}),(0,s.jsx)(n.th,{children:"Basic Wizard"}),(0,s.jsx)(n.th,{children:"With autoRestore"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Save"})}),(0,s.jsx)(n.td,{children:"Automatic to localStorage"}),(0,s.jsx)(n.td,{children:"Automatic to localStorage"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Restore Prompt"})}),(0,s.jsx)(n.td,{children:"Yes (user chooses)"}),(0,s.jsx)(n.td,{children:"No (auto-restore)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Session Age Display"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Discard Session"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Use Case"})}),(0,s.jsx)(n.td,{children:"Interruptible workflows"}),(0,s.jsx)(n.td,{children:"Critical wizards (setup, migration)"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"state-diagrams",children:"State Diagrams"}),"\n",(0,s.jsx)(n.h3,{id:"usewizard-flow",children:"useWizard Flow"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  STEP   \u2502\n\u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518\n     \u2502 NEXT (validate)\n     \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  VALIDATING  \u2502\n\u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n     \u2502\n  valid? invalid?\n     \u2502     \u2502\n     \u25bc     \u25bc\n   NEXT   STEP (errors)\n     \u2502\n  last? not last?\n     \u2502     \u2502\n     \u25bc     \u25bc\nSUBMIT   STEP (next)\n     \u2502\n     \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  COMPLETED   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nCANCEL \u2192 CANCELLED (any time)\nRESTORE \u2192 STEP (saved state)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"useconfigpipeline-flow",children:"useConfigPipeline Flow"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  EDIT    \u2502\n\u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518\n     \u2502 VALIDATE\n     \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     valid?\n\u2502  VALIDATING  \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2502         \u2502\n                     valid    invalid\n                        \u2502         \u2502\n                        \u25bc         \u25bc\n                   PREVIEW    INVALID\n                        \u2502         \u2502\n            highRisk? errors?    |\n                   \u2502    \u2502        |\n                   \u25bc    \u25bc        |\n              CONFIRM PENDING    |\n                   \u2502             |\n                   \u25bc             |\n               APPLY \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                   \u2502\n                   \u25bc\n              VERIFY\n                   \u2502\n            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n            \u2502             \u2502\n         success        error\n            \u2502             \u2502\n            \u25bc             \u25bc\n         ACTIVE    ROLLBACK \u2192 ROLLED_BACK\n"})}),"\n",(0,s.jsx)(n.h3,{id:"useresourcelifecycle-flow",children:"useResourceLifecycle Flow"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   DRAFT      \u2502 \u2190 initialResource\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502 EDIT\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  EDITING     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502 VALIDATE\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 VALIDATING   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n    valid?\n       \u2502\n    \u250c\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502                            \u2502\n    \u25bc                            \u25bc\n APPLY                      DEGRADED\n    \u2502                            \u2502\n    \u25bc                            \u25bc\nAPPLYING                      (issues)\n    \u2502\n    \u25bc\n  ACTIVE (running on router)\n    \u2502 (can EDIT, VALIDATE, DEGRADE, etc.)\n\nDEGRADED \u2192 RECOVER \u2192 ACTIVE\nDEPRECATED \u2190 DEPRECATE\nDEPRECATED \u2192 RESTORE \u2192 DRAFT\nARCHIVED \u2190 ARCHIVE\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,s.jsx)(n.h3,{id:"pattern-step-by-step-with-preview",children:"Pattern: Step-by-step with preview"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const wizard = useWizard(config);\n\n// Step 1: Collect data\nwizard.setData({ provider: 'wireguard' });\n\n// Step 2: Advance when ready\nconst handleNext = () => {\n  wizard.next(stepData);\n};\n\n// Step 3: Show progress\n<StepIndicator current={wizard.currentStep} total={wizard.totalSteps} />\n"})}),"\n",(0,s.jsx)(n.h3,{id:"pattern-safe-config-changes",children:"Pattern: Safe config changes"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const pipeline = useConfigPipeline(config);\n\n// Edit and see preview before applying\nconst handleSave = () => {\n  pipeline.editAndValidate(formData);\n};\n\n// User reviews diff\nif (pipeline.state === 'previewing') {\n  // Show diff, then confirm\n  pipeline.confirm();\n}\n\n// Auto-rollback on error\nif (pipeline.state === 'error') {\n  // Pipeline already rolling back\n  pipeline.retry();\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"pattern-monitor-resource-health",children:"Pattern: Monitor resource health"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const lifecycle = useResourceLifecycle({ initialResource });\n\n// Subscriptions update runtime\nuseEffect(() => {\n  const unsubscribe = subscribe(uuid, (runtime) => {\n    lifecycle.updateRuntime(runtime);\n  });\n  return unsubscribe;\n}, [uuid]);\n\n// React to state changes\nif (lifecycle.isDegraded) {\n  notifyUser('Resource degraded: ' + lifecycle.context.degradationReason);\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsx)(n.p,{children:"All hooks provide error messages:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Wizard\nif (wizard.errors.provider) {\n  <ErrorField message={wizard.errors.provider} />\n}\n\n// Config Pipeline\nif (pipeline.state === 'error') {\n  <ErrorAlert message={pipeline.errorMessage} />\n}\n\n// Resource Lifecycle\nif (lifecycle.hasError) {\n  <ErrorBoundary errors={lifecycle.validationErrors} />\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"performance-tips",children:"Performance Tips"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Memoize callbacks"})," - ",(0,s.jsx)(n.code,{children:"useCallback"})," for action handlers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use selectors"})," - Don't destructure whole return object"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Lazy validation"})," - Validate only on blur/submit"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Debounce edits"})," - Batch rapid ",(0,s.jsx)(n.code,{children:"setData"})," calls"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Limit subscribers"})," - Use ",(0,s.jsx)(n.code,{children:"useMachine"})," once per component"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Stop unused machines"})," - Call ",(0,s.jsx)(n.code,{children:"stop()"})," in cleanup"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Testing:"})," See ",(0,s.jsx)(n.code,{children:"../guides/testing.md"})," for complete test patterns"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Debugging:"})," See ",(0,s.jsx)(n.code,{children:"../guides/debugging.md"})," for troubleshooting"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Persistence:"})," See ",(0,s.jsx)(n.code,{children:"persistence.md"})," for session recovery"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Machines:"})," See individual machine docs (wizard.md, config-pipeline.md, etc.)"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);