"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[22119],{71184:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var i=s(14041);const r={},t=i.createContext(r);function o(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}},93693:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"architecture/build-system","title":"Build System","description":"The apps/connect frontend is built with Vite via the @nx/vite Nx executor. All Vite configuration lives in apps/connect/vite.config.ts.","source":"@site/../connect/docs/architecture/build-system.md","sourceDirName":"architecture","slug":"/architecture/build-system","permalink":"/docs/frontend/architecture/build-system","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../connect/docs/architecture/build-system.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Introduction","permalink":"/docs/frontend/intro"},"next":{"title":"Monorepo Library Dependency Graph","permalink":"/docs/frontend/architecture/library-dependencies"}}');var r=s(31085),t=s(71184);const o={},c="Build System",d={},l=[{value:"Quick Reference",id:"quick-reference",level:2},{value:"Vite Configuration",id:"vite-configuration",level:2},{value:"Path Aliases",id:"path-aliases",level:3},{value:"Dev Server",id:"dev-server",level:3},{value:"Preview Server",id:"preview-server",level:3},{value:"Plugins",id:"plugins",level:2},{value:"TanStackRouterVite",id:"tanstackroutervite",level:3},{value:"@vitejs/plugin-react",id:"vitejsplugin-react",level:3},{value:"designTokensHMR (custom plugin)",id:"designtokenshmr-custom-plugin",level:3},{value:"vite-plugin-checker",id:"vite-plugin-checker",level:3},{value:"Production Build",id:"production-build",level:2},{value:"Manual Chunk Splitting",id:"manual-chunk-splitting",level:2},{value:"Chunk Strategy",id:"chunk-strategy",level:3},{value:"Bundle Size Budget",id:"bundle-size-budget",level:2},{value:"TypeScript Configuration",id:"typescript-configuration",level:2},{value:"Running Type Checks",id:"running-type-checks",level:3},{value:"Tailwind CSS Configuration",id:"tailwind-css-configuration",level:2},{value:"Design Token Integration",id:"design-token-integration",level:3},{value:"Storybook",id:"storybook",level:2},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Related Documents",id:"related-documents",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"build-system",children:"Build System"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"apps/connect"})," frontend is built with ",(0,r.jsx)(n.strong,{children:"Vite"})," via the ",(0,r.jsx)(n.code,{children:"@nx/vite"})," Nx executor. All Vite configuration lives in ",(0,r.jsx)(n.code,{children:"apps/connect/vite.config.ts"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"quick-reference",children:"Quick Reference"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Command"}),(0,r.jsx)(n.th,{children:"What it does"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"npm run dev:frontend"})}),(0,r.jsx)(n.td,{children:"Start Vite dev server on port 5173 with HMR"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"npx nx build connect"})}),(0,r.jsxs)(n.td,{children:["Production build to ",(0,r.jsx)(n.code,{children:"dist/apps/connect/"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"npm run build:check"})}),(0,r.jsx)(n.td,{children:"Build + verify bundle size"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"npm run check:frontend"})}),(0,r.jsx)(n.td,{children:"Lint + typecheck + build"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"npx nx run connect:storybook"})}),(0,r.jsx)(n.td,{children:"Storybook on port 4402"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"vite-configuration",children:"Vite Configuration"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Source:"})," ",(0,r.jsx)(n.code,{children:"apps/connect/vite.config.ts"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export default defineConfig(({ mode }) => ({\n  root: import.meta.dirname,\n  cacheDir: '../../node_modules/.vite/apps/connect',\n  // ...\n}));\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The config is a function of ",(0,r.jsx)(n.code,{children:"mode"})," (",(0,r.jsx)(n.code,{children:'"development"'})," | ",(0,r.jsx)(n.code,{children:'"production"'}),") so that certain plugins and options are conditionally applied."]}),"\n",(0,r.jsx)(n.h3,{id:"path-aliases",children:"Path Aliases"}),"\n",(0,r.jsxs)(n.p,{children:["Defined under ",(0,r.jsx)(n.code,{children:"resolve.alias"}),". See ",(0,r.jsx)(n.a,{href:"/docs/frontend/architecture/library-dependencies",children:"Library Dependencies"})," for the full alias table. These aliases are resolved at build time by Vite and mirrored in ",(0,r.jsx)(n.code,{children:"tsconfig.app.json"})," for TypeScript."]}),"\n",(0,r.jsx)(n.h3,{id:"dev-server",children:"Dev Server"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"server: {\n  port: 5173,\n  host: true,        // binds to 0.0.0.0 (accessible from LAN)\n  strictPort: true,  // fails fast if port is occupied\n  open: true,        // opens browser on start\n  proxy: {\n    '/api': {\n      target: process.env.VITE_PROXY_URL || 'http://localhost:80',\n      changeOrigin: true,\n      secure: false,\n    },\n  },\n},\n"})}),"\n",(0,r.jsxs)(n.p,{children:["All ",(0,r.jsx)(n.code,{children:"/api/*"})," requests are proxied to the Go backend. The default target is ",(0,r.jsx)(n.code,{children:"http://localhost:80"})," (the production port inside Docker), overridable via ",(0,r.jsx)(n.code,{children:"VITE_PROXY_URL"})," in ",(0,r.jsx)(n.code,{children:".env.development"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"preview-server",children:"Preview Server"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"preview: {\n  port: 5173,\n  host: 'localhost',\n},\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"vite preview"})," serves the production build locally for final verification before Docker packaging."]}),"\n",(0,r.jsx)(n.h2,{id:"plugins",children:"Plugins"}),"\n",(0,r.jsx)(n.p,{children:"Plugins are applied conditionally by mode:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"plugins: [\n  TanStackRouterVite({ routeFileIgnorePattern: '\\\\.stories\\\\.' }),  // always\n  react(),                                                           // always\n  mode !== 'production' && designTokensHMR(),                        // dev only\n  mode !== 'production' && checker({ typescript: true }),            // dev only\n].filter(Boolean),\n"})}),"\n",(0,r.jsx)(n.h3,{id:"tanstackroutervite",children:"TanStackRouterVite"}),"\n",(0,r.jsxs)(n.p,{children:["Auto-generates ",(0,r.jsx)(n.code,{children:"src/routeTree.gen.ts"})," from the file system on every save. The ",(0,r.jsx)(n.code,{children:"routeFileIgnorePattern"})," excludes ",(0,r.jsx)(n.code,{children:".stories.tsx"})," files so Storybook story files co-located with routes are not registered as routes."]}),"\n",(0,r.jsx)(n.h3,{id:"vitejsplugin-react",children:"@vitejs/plugin-react"}),"\n",(0,r.jsx)(n.p,{children:"Standard React plugin: JSX transform, Fast Refresh (HMR for React components)."}),"\n",(0,r.jsx)(n.h3,{id:"designtokenshmr-custom-plugin",children:"designTokensHMR (custom plugin)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function designTokensHMR(): Plugin {\n  return {\n    name: 'design-tokens-hmr',\n    configureServer(server) {\n      const tokensPath = resolve(..., '../../libs/ui/tokens/src/tokens.json');\n      server.watcher.add(tokensPath);\n      server.watcher.on('change', async (path) => {\n        if (path.includes('tokens.json')) {\n          // 1. Run the token build script (Node.js)\n          spawn('node', ['libs/ui/tokens/build.js'], ...);\n          // 2. Invalidate the CSS module and trigger full-reload\n          server.ws.send({ type: 'full-reload' });\n        }\n      });\n    },\n  };\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"libs/ui/tokens/src/tokens.json"})," changes, this plugin:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Rebuilds the design token CSS (",(0,r.jsx)(n.code,{children:"libs/ui/tokens/dist/variables.css"}),") and Tailwind config"]}),"\n",(0,r.jsx)(n.li,{children:"Invalidates the CSS module in Vite's module graph"}),"\n",(0,r.jsx)(n.li,{children:"Triggers a full HMR reload so the new CSS custom properties take effect"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This enables live design-token editing without restarting the dev server."}),"\n",(0,r.jsx)(n.h3,{id:"vite-plugin-checker",children:"vite-plugin-checker"}),"\n",(0,r.jsxs)(n.p,{children:["Runs TypeScript type-checking in a background worker thread during development. Type errors appear as browser overlays and terminal output without blocking HMR. Disabled in production builds to avoid doubling compile time (CI runs ",(0,r.jsx)(n.code,{children:"tsc"})," separately)."]}),"\n",(0,r.jsx)(n.h2,{id:"production-build",children:"Production Build"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"build: {\n  outDir: '../../dist/apps/connect',\n  emptyOutDir: true,\n  target: 'es2020',\n  minify: 'terser',\n  sourcemap: mode !== 'production',   // source maps in dev/staging only\n  reportCompressedSize: true,\n  terserOptions: {\n    compress: {\n      drop_console: mode === 'production',   // strips console.log in prod\n      drop_debugger: true,\n    },\n  },\n},\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Target:"})," ES2020. MikroTik's CHR-based management browser is Chromium-based; ES2020 is safe."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Minifier:"})," Terser (more aggressive than esbuild's default minification)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Console stripping:"})," ",(0,r.jsx)(n.code,{children:"console.log"})," calls are removed in production builds"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sourcemaps:"})," Generated in development and staging, disabled in production to reduce output size"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Output directory:"})," ",(0,r.jsx)(n.code,{children:"dist/apps/connect/"})," \u2014 the Go backend embeds this directory at build time"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"manual-chunk-splitting",children:"Manual Chunk Splitting"}),"\n",(0,r.jsxs)(n.p,{children:["Rollup's ",(0,r.jsx)(n.code,{children:"manualChunks"})," is configured to split vendor code into stable named chunks. This maximises browser cache hit rates: when app code changes, vendor chunks are unchanged and remain cached."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"rollupOptions: {\n  output: {\n    manualChunks: {\n      'vendor-react':     ['react', 'react-dom', 'scheduler'],\n      'vendor-router':    ['@tanstack/react-router'],\n      'vendor-graphql':   ['@apollo/client', 'graphql'],\n      'vendor-state':     ['zustand', 'xstate', '@xstate/react'],\n      'vendor-animation': ['framer-motion'],\n      'vendor-ui': [\n        '@radix-ui/react-dialog',\n        '@radix-ui/react-tabs',\n        '@radix-ui/react-toast',\n        '@radix-ui/react-switch',\n        '@radix-ui/react-select',\n        '@radix-ui/react-dropdown-menu',\n        '@radix-ui/react-popover',\n      ],\n      'vendor-table':  ['@tanstack/react-table', '@tanstack/react-virtual'],\n      'vendor-forms':  ['react-hook-form', '@hookform/resolvers', 'zod'],\n      'vendor-i18n':   ['i18next', 'react-i18next', 'i18next-http-backend', 'i18next-browser-languagedetector'],\n    },\n  },\n},\n"})}),"\n",(0,r.jsx)(n.h3,{id:"chunk-strategy",children:"Chunk Strategy"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Chunk"}),(0,r.jsx)(n.th,{children:"Libraries"}),(0,r.jsx)(n.th,{children:"Reason"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"vendor-react"})}),(0,r.jsx)(n.td,{children:"react, react-dom, scheduler"}),(0,r.jsx)(n.td,{children:"Essential, loads first, never changes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"vendor-router"})}),(0,r.jsx)(n.td,{children:"@tanstack/react-router"}),(0,r.jsx)(n.td,{children:"Needed immediately for navigation"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"vendor-graphql"})}),(0,r.jsx)(n.td,{children:"@apollo/client, graphql"}),(0,r.jsx)(n.td,{children:"Needed for all data fetching"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"vendor-state"})}),(0,r.jsx)(n.td,{children:"zustand, xstate"}),(0,r.jsx)(n.td,{children:"UI and workflow state"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"vendor-animation"})}),(0,r.jsx)(n.td,{children:"framer-motion"}),(0,r.jsx)(n.td,{children:"Large library, isolated for caching"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"vendor-ui"})}),(0,r.jsx)(n.td,{children:"Radix UI components"}),(0,r.jsx)(n.td,{children:"Stable primitives"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"vendor-table"})}),(0,r.jsx)(n.td,{children:"react-table, react-virtual"}),(0,r.jsx)(n.td,{children:"Only needed on data-heavy pages"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"vendor-forms"})}),(0,r.jsx)(n.td,{children:"react-hook-form, zod"}),(0,r.jsx)(n.td,{children:"Only needed on form pages"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"vendor-i18n"})}),(0,r.jsx)(n.td,{children:"i18next stack"}),(0,r.jsx)(n.td,{children:"Loaded async after initial paint"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["Heavy tab components (Firewall, Logs, DHCP, DNS, VPN, PluginStore, Network) are further split by TanStack Router's lazy loading. See ",(0,r.jsx)(n.a,{href:"/docs/frontend/architecture/routing#lazy-loading-strategy",children:"Routing \u2014 Lazy Loading Strategy"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"bundle-size-budget",children:"Bundle Size Budget"}),"\n",(0,r.jsxs)(n.p,{children:["The project targets ",(0,r.jsx)(n.code,{children:"<3MB gzipped"})," for the frontend bundle. This constraint is enforced by the Docker image size limit of ",(0,r.jsx)(n.code,{children:"<10MB"})," (which embeds the frontend)."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"reportCompressedSize: true"})," in the Vite build config outputs gzipped sizes to the terminal after every build. The CI pipeline runs ",(0,r.jsx)(n.code,{children:"npm run build:check"})," to catch regressions."]}),"\n",(0,r.jsx)(n.h2,{id:"typescript-configuration",children:"TypeScript Configuration"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Source:"})," ",(0,r.jsx)(n.code,{children:"apps/connect/tsconfig.json"}),", ",(0,r.jsx)(n.code,{children:"apps/connect/tsconfig.app.json"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'// tsconfig.json \u2014 project references only\n{\n  "extends": "../../tsconfig.base.json",\n  "references": [\n    { "path": "./tsconfig.app.json" },\n    { "path": "./tsconfig.spec.json" },\n    { "path": "./tsconfig.storybook.json" }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'// tsconfig.app.json \u2014 source files\n{\n  "extends": "../../tsconfig.base.json",\n  "compilerOptions": {\n    "jsx": "react-jsx",\n    "lib": ["dom"],\n    "types": ["node", "@nx/react/typings/cssmodule.d.ts", "vite/client"],\n    "baseUrl": ".",\n    "paths": { /* all @nasnet/* aliases */ }\n  },\n  "include": ["src/**/*.{js,jsx,ts,tsx}"]\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["The project uses TypeScript ",(0,r.jsx)(n.strong,{children:"project references"}),": separate ",(0,r.jsx)(n.code,{children:"tsconfig.*.json"})," files for ",(0,r.jsx)(n.code,{children:"app"}),", ",(0,r.jsx)(n.code,{children:"spec"})," (tests), and ",(0,r.jsx)(n.code,{children:"storybook"})," code. This allows the type-checker to only re-check affected files."]}),"\n",(0,r.jsx)(n.h3,{id:"running-type-checks",children:"Running Type Checks"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check all four tsconfigs in parallel\nnpx nx run connect:typecheck\n\n# Or directly:\ntsc --noEmit --project apps/connect/tsconfig.app.json\ntsc --noEmit --project apps/connect/tsconfig.spec.json\ntsc --noEmit --project apps/connect/tsconfig.storybook.json\ntsc --noEmit --project apps/connect/.storybook/tsconfig.json\n"})}),"\n",(0,r.jsx)(n.h2,{id:"tailwind-css-configuration",children:"Tailwind CSS Configuration"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Source:"})," ",(0,r.jsx)(n.code,{children:"apps/connect/tailwind.config.js"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const tokenConfig = require('../../libs/ui/tokens/dist/tailwind.config.js');\n\nmodule.exports = {\n  darkMode: 'class',\n  content: [\n    join(__dirname, '{src,pages,components,app}/**/*!(*.stories|*.spec).{ts,tsx,html}'),\n    join(__dirname, '../../libs/**/*.{ts,tsx,html}'),\n    ...createGlobPatternsForDependencies(__dirname),\n  ],\n  theme: { extend: { /* merged token config */ } },\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key points:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"darkMode: 'class'"})," \u2014 dark mode is activated by adding ",(0,r.jsx)(n.code,{children:".dark"})," to ",(0,r.jsx)(n.code,{children:"<html>"})," (managed by ",(0,r.jsx)(n.code,{children:"ThemeProvider"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["Content scanning covers both ",(0,r.jsx)(n.code,{children:"apps/connect/src"})," and all ",(0,r.jsx)(n.code,{children:"libs/**"})," directories so utility classes in library components are included in the purge"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:".stories"})," and ",(0,r.jsx)(n.code,{children:".spec"})," files are excluded from content scanning to avoid Tailwind processing test/story-only classes"]}),"\n",(0,r.jsxs)(n.li,{children:["Token values are imported from the pre-compiled ",(0,r.jsx)(n.code,{children:"libs/ui/tokens/dist/tailwind.config.js"})," (output of the design token pipeline)"]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"createGlobPatternsForDependencies(__dirname)"})," call adds Nx-managed dependency paths automatically"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"design-token-integration",children:"Design Token Integration"}),"\n",(0,r.jsx)(n.p,{children:"Design tokens flow through Tailwind as CSS custom properties:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"libs/ui/tokens/src/tokens.json   (source of truth)\n         \u2502\n         \u25bc (npm run codegen or designTokensHMR plugin)\nlibs/ui/tokens/dist/variables.css     (CSS custom properties)\nlibs/ui/tokens/dist/tailwind.config.js (Tailwind color/spacing values)\n         \u2502\n         \u25bc (imported in tailwind.config.js)\nTailwind utility classes \u2192 compiled CSS\n"})}),"\n",(0,r.jsx)(n.p,{children:"Semantic token usage in components:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'// Good \u2014 semantic tokens\n<Button className="bg-primary text-primary-foreground">Connect</Button>\n\n// Bad \u2014 primitive colors (bypasses the token system)\n<Button className="bg-amber-500 text-white">Connect</Button>\n'})}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.code,{children:"Docs/design/DESIGN_TOKENS.md"})," for the complete token reference."]}),"\n",(0,r.jsx)(n.h2,{id:"storybook",children:"Storybook"}),"\n",(0,r.jsxs)(n.p,{children:["Storybook for ",(0,r.jsx)(n.code,{children:"apps/connect"})," runs on port ",(0,r.jsx)(n.strong,{children:"4402"}),". The config lives in ",(0,r.jsx)(n.code,{children:"apps/connect/.storybook/"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npx nx run connect:storybook        # dev server on port 4402\nnpx nx run connect:build-storybook  # static build to dist/storybook/connect/\nnpx nx run connect:typecheck:storybook  # typecheck storybook files only\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Story files (",(0,r.jsx)(n.code,{children:"*.stories.tsx"}),") are co-located with route and component files. The TanStack Router Vite plugin excludes them from the route tree via ",(0,r.jsx)(n.code,{children:"routeFileIgnorePattern: '\\\\.stories\\\\.'"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,r.jsxs)(n.p,{children:["Create ",(0,r.jsx)(n.code,{children:"apps/connect/.env.development"})," for local overrides:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-env",children:"VITE_API_URL=http://localhost:8080\nVITE_PROXY_URL=http://localhost:80\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"VITE_PROXY_URL"})," controls where the dev server proxies ",(0,r.jsx)(n.code,{children:"/api/*"})," requests. Prefix all app-visible environment variables with ",(0,r.jsx)(n.code,{children:"VITE_"})," so Vite includes them in the client bundle."]}),"\n",(0,r.jsx)(n.h2,{id:"related-documents",children:"Related Documents"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/frontend/architecture/overview",children:"Architecture Overview"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/frontend/architecture/library-dependencies",children:"Library Dependencies"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/frontend/architecture/routing#lazy-loading-strategy",children:"Routing \u2014 Lazy Loading Strategy"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/frontend/getting-started/environment-setup",children:"Getting Started \u2014 Development Setup"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);