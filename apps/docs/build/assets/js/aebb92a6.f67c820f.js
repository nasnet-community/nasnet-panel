"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[74201],{64778:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"forms-validation/form-utilities","title":"Form Utilities","description":"This document covers the core form utility hooks and functions in libs/core/forms/src/.","source":"@site/../connect/docs/forms-validation/form-utilities.md","sourceDirName":"forms-validation","slug":"/forms-validation/form-utilities","permalink":"/docs/frontend/forms-validation/form-utilities","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../connect/docs/forms-validation/form-utilities.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Wireless Feature Module","permalink":"/docs/frontend/feature-modules/wireless"},"next":{"title":"Network Validators","permalink":"/docs/frontend/forms-validation/network-validators"}}');var i=s(31085),t=s(71184);const d={},o="Form Utilities",c={},l=[{value:"useZodForm",id:"usezodform",level:2},{value:"Signature",id:"signature",level:3},{value:"Usage",id:"usage",level:3},{value:"Default Behaviour",id:"default-behaviour",level:3},{value:"useFormPersistence",id:"useformpersistence",level:2},{value:"Signature",id:"signature-1",level:3},{value:"Options",id:"options",level:3},{value:"Usage",id:"usage-1",level:3},{value:"Returned Methods",id:"returned-methods",level:3},{value:"Important: Clear on Completion",id:"important-clear-on-completion",level:3},{value:"useFormResourceSync",id:"useformresourcesync",level:2},{value:"Signature",id:"signature-2",level:3},{value:"Options",id:"options-1",level:3},{value:"Usage",id:"usage-2",level:3},{value:"State Layers",id:"state-layers",level:3},{value:"Actions",id:"actions",level:3},{value:"Backend Error Mapping",id:"backend-error-mapping",level:2},{value:"mapBackendErrorsToForm",id:"mapbackenderrorstoform",level:3},{value:"clearServerErrors",id:"clearservererrors",level:3},{value:"groupErrorsByField",id:"grouperrorsbyfield",level:3},{value:"combineFieldErrors",id:"combinefielderrors",level:3}];function a(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"form-utilities",children:"Form Utilities"})}),"\n",(0,i.jsxs)(r.p,{children:["This document covers the core form utility hooks and functions in ",(0,i.jsx)(r.code,{children:"libs/core/forms/src/"}),"."]}),"\n",(0,i.jsx)(r.h2,{id:"usezodform",children:"useZodForm"}),"\n",(0,i.jsxs)(r.p,{children:["File: ",(0,i.jsx)(r.code,{children:"libs/core/forms/src/useZodForm.ts"})]}),"\n",(0,i.jsxs)(r.p,{children:["A thin wrapper around ",(0,i.jsx)(r.code,{children:"useForm"})," from React Hook Form that automatically wires in a Zod schema via ",(0,i.jsx)(r.code,{children:"zodResolver"}),". The primary advantage over calling ",(0,i.jsx)(r.code,{children:"useForm"})," directly is that TypeScript infers form field types from the schema \u2014 no manual type annotation required."]}),"\n",(0,i.jsx)(r.h3,{id:"signature",children:"Signature"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"function useZodForm<T extends ZodSchema>(options: UseZodFormOptions<T>): UseFormReturn<z.infer<T>>\n\ninterface UseZodFormOptions<T extends ZodSchema> extends Omit<UseFormProps<z.infer<T>>, 'resolver'> {\n  schema: T;  // required\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"import { z } from 'zod';\nimport { useZodForm } from '@nasnet/core/forms';\nimport { ipv4, port } from '@nasnet/core/forms/network-validators';\n\nconst schema = z.object({\n  name: z.string().min(1, 'Name is required'),\n  address: ipv4,\n  listenPort: port,\n  enabled: z.boolean().default(true),\n});\n\nfunction MyForm() {\n  const form = useZodForm({\n    schema,\n    defaultValues: {\n      name: '',\n      address: '',\n      listenPort: 51820,\n      enabled: true,\n    },\n    mode: 'onBlur',  // 'onBlur' is the default\n  });\n\n  const onSubmit = form.handleSubmit(async (data) => {\n    // data is fully typed as z.infer<typeof schema>\n    await save(data);\n  });\n\n  return (\n    <form onSubmit={onSubmit}>\n      <input {...form.register('name')} />\n      {form.formState.errors.name && (\n        <p>{form.formState.errors.name.message}</p>\n      )}\n      <button disabled={form.formState.isSubmitting}>Save</button>\n    </form>\n  );\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"default-behaviour",children:"Default Behaviour"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Validation mode defaults to ",(0,i.jsx)(r.code,{children:"'onBlur'"})," (validates when a field loses focus)"]}),"\n",(0,i.jsx)(r.li,{children:"All other React Hook Form options pass through unchanged"}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"useformpersistence",children:"useFormPersistence"}),"\n",(0,i.jsxs)(r.p,{children:["File: ",(0,i.jsx)(r.code,{children:"libs/core/forms/src/useFormPersistence.ts"})]}),"\n",(0,i.jsxs)(r.p,{children:["Automatically saves form data to ",(0,i.jsx)(r.code,{children:"sessionStorage"})," (default) on every change and restores it on mount. Designed for long forms where the user might accidentally refresh or navigate away."]}),"\n",(0,i.jsx)(r.h3,{id:"signature-1",children:"Signature"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"function useFormPersistence<T extends FieldValues>(\n  options: UseFormPersistenceOptions<T>\n): UseFormPersistenceResult\n"})}),"\n",(0,i.jsx)(r.h3,{id:"options",children:"Options"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Option"}),(0,i.jsx)(r.th,{children:"Type"}),(0,i.jsx)(r.th,{children:"Default"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"form"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"UseFormReturn<T>"})}),(0,i.jsx)(r.td,{children:"required"}),(0,i.jsx)(r.td,{children:"React Hook Form instance"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"storageKey"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"string"})}),(0,i.jsx)(r.td,{children:"required"}),(0,i.jsx)(r.td,{children:"Unique key for storage"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"storage"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"Storage"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"sessionStorage"})}),(0,i.jsx)(r.td,{children:"Storage backend"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"debounceMs"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"number"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"1000"})}),(0,i.jsx)(r.td,{children:"Delay before writing (ms)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"excludeFields"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"(keyof T)[]"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"[]"})}),(0,i.jsx)(r.td,{children:"Fields to exclude from persistence"})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"usage-1",children:"Usage"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"import { useZodForm, useFormPersistence } from '@nasnet/core/forms';\n\nfunction WizardStep1() {\n  const form = useZodForm({ schema, defaultValues });\n\n  const { clearPersistence, hasSavedData, restore } = useFormPersistence({\n    form,\n    storageKey: 'vpn-wizard-step-1',\n    excludeFields: ['password'],  // never persist sensitive fields\n  });\n\n  return (\n    <>\n      {hasSavedData() && (\n        <Alert>Your previous progress has been restored.</Alert>\n      )}\n      <form>...</form>\n    </>\n  );\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"returned-methods",children:"Returned Methods"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Method"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"clearPersistence()"})}),(0,i.jsx)(r.td,{children:"Remove saved data from storage"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"hasSavedData()"})}),(0,i.jsxs)(r.td,{children:["Returns ",(0,i.jsx)(r.code,{children:"true"})," if saved data exists"]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"restore()"})}),(0,i.jsx)(r.td,{children:"Manually trigger restoration (called automatically on mount)"})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"important-clear-on-completion",children:"Important: Clear on Completion"}),"\n",(0,i.jsxs)(r.p,{children:["Always call ",(0,i.jsx)(r.code,{children:"clearPersistence()"})," when the form is successfully submitted to prevent stale data appearing on the next visit:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"const onSubmit = form.handleSubmit(async (data) => {\n  await save(data);\n  persistence.clearPersistence();  // clean up after success\n});\n"})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"useformresourcesync",children:"useFormResourceSync"}),"\n",(0,i.jsxs)(r.p,{children:["File: ",(0,i.jsx)(r.code,{children:"libs/core/forms/src/useFormResourceSync.ts"})]}),"\n",(0,i.jsx)(r.p,{children:"Bridges React Hook Form with the Universal State v2 8-layer model. Manages the Edit layer (form draft), Optimistic layer, Validation layer, and Error layer in a unified way."}),"\n",(0,i.jsx)(r.h3,{id:"signature-2",children:"Signature"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"function useFormResourceSync<T extends FieldValues>(\n  options: UseFormResourceSyncOptions<T> & { form: UseFormReturn<T> }\n): UseFormResourceSyncReturn<T>\n"})}),"\n",(0,i.jsx)(r.h3,{id:"options-1",children:"Options"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Option"}),(0,i.jsx)(r.th,{children:"Type"}),(0,i.jsx)(r.th,{children:"Default"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"form"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"UseFormReturn<T>"})}),(0,i.jsx)(r.td,{children:"required"}),(0,i.jsx)(r.td,{children:"React Hook Form instance"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"sourceData"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"T | null"})}),(0,i.jsx)(r.td,{children:"required"}),(0,i.jsx)(r.td,{children:"Server data to sync with"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"resourceId"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"string"})}),(0,i.jsx)(r.td,{children:"\u2014"}),(0,i.jsx)(r.td,{children:"For edit forms"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"resourceVersion"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"string"})}),(0,i.jsx)(r.td,{children:"\u2014"}),(0,i.jsx)(r.td,{children:"For conflict detection"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"onSave"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"(data: T) => Promise<void>"})}),(0,i.jsx)(r.td,{children:"\u2014"}),(0,i.jsx)(r.td,{children:"Mutation function"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"onSaveError"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"(error: Error) => void"})}),(0,i.jsx)(r.td,{children:"\u2014"}),(0,i.jsx)(r.td,{children:"Error callback"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"onSourceChange"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"(newSource: T) => void"})}),(0,i.jsx)(r.td,{children:"\u2014"}),(0,i.jsx)(r.td,{children:"Called if source updates while editing"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"autoReset"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"boolean"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"true"})}),(0,i.jsx)(r.td,{children:"Reset form when source changes"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"trackChanges"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"boolean"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"true"})}),(0,i.jsx)(r.td,{children:"Compute diff against source"})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"usage-2",children:"Usage"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"import { useFormResourceSync, useZodForm } from '@nasnet/core/forms';\nimport { useResourceQuery } from '@nasnet/api-client/queries';\n\nfunction EditWireGuardPeer({ peerId }: { peerId: string }) {\n  const { data: peer } = useResourceQuery(peerId);\n  const form = useZodForm({ schema, defaultValues: peer ?? {} });\n\n  const { state, actions, canSave, changedFields, conflict } = useFormResourceSync({\n    form,\n    sourceData: peer,\n    resourceId: peerId,\n    resourceVersion: peer?.version,\n    onSave: async (data) => {\n      await updatePeer(peerId, data);\n    },\n    onSaveError: (error) => {\n      toast.error(error.message);\n    },\n  });\n\n  return (\n    <form onSubmit={form.handleSubmit(() => actions.startSave())}>\n      {conflict.hasConflict && (\n        <Alert>\n          Source data changed while you were editing.\n          <Button onClick={() => actions.discardChanges()}>Discard my changes</Button>\n          <Button onClick={() => actions.mergeSourceChanges(myMerger)}>Merge</Button>\n        </Alert>\n      )}\n      {changedFields.length > 0 && (\n        <Badge>{changedFields.length} unsaved changes</Badge>\n      )}\n      <FormFields />\n      <Button type=\"submit\" disabled={!canSave || state.isSaving}>\n        {state.isSaving ? 'Saving...' : 'Save'}\n      </Button>\n    </form>\n  );\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"state-layers",children:"State Layers"}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(r.code,{children:"state"})," object exposes the Universal State v2 layers:"]}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Property"}),(0,i.jsx)(r.th,{children:"Layer"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"state.source"})}),(0,i.jsx)(r.td,{children:"Source"}),(0,i.jsx)(r.td,{children:"Last data from backend"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"state.optimistic"})}),(0,i.jsx)(r.td,{children:"Optimistic"}),(0,i.jsx)(r.td,{children:"Pending mutation response"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"state.edit"})}),(0,i.jsx)(r.td,{children:"Edit"}),(0,i.jsx)(r.td,{children:"Current form values"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"state.validation"})}),(0,i.jsx)(r.td,{children:"Validation"}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"isValid"}),", ",(0,i.jsx)(r.code,{children:"isValidating"}),", ",(0,i.jsx)(r.code,{children:"errors"})]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"state.error"})}),(0,i.jsx)(r.td,{children:"Error"}),(0,i.jsx)(r.td,{children:"Last mutation error"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"state.isDirty"})}),(0,i.jsx)(r.td,{children:"\u2014"}),(0,i.jsx)(r.td,{children:"Form has unsaved changes"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"state.isSaving"})}),(0,i.jsx)(r.td,{children:"\u2014"}),(0,i.jsx)(r.td,{children:"Mutation in flight"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"state.hasSourceChanged"})}),(0,i.jsx)(r.td,{children:"\u2014"}),(0,i.jsx)(r.td,{children:"Backend version changed during edit"})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"actions",children:"Actions"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Action"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"actions.startSave()"})}),(0,i.jsx)(r.td,{children:"Execute save with optimistic update"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"actions.completeSave()"})}),(0,i.jsx)(r.td,{children:"Mark save complete (source \u2192 current values)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"actions.handleSaveError(err)"})}),(0,i.jsx)(r.td,{children:"Handle failure (clears optimistic)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"actions.resetToSource()"})}),(0,i.jsx)(r.td,{children:"Reset form to last server data"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"actions.discardChanges()"})}),(0,i.jsx)(r.td,{children:"Reset and clear errors"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"actions.applyOptimistic(data)"})}),(0,i.jsx)(r.td,{children:"Manually apply optimistic state"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"actions.clearOptimistic()"})}),(0,i.jsx)(r.td,{children:"Remove optimistic state"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"actions.mergeSourceChanges(fn)"})}),(0,i.jsx)(r.td,{children:"Resolve conflict with custom merge function"})]})]})]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"backend-error-mapping",children:"Backend Error Mapping"}),"\n",(0,i.jsxs)(r.p,{children:["File: ",(0,i.jsx)(r.code,{children:"libs/core/forms/src/mapBackendErrors.ts"})]}),"\n",(0,i.jsx)(r.p,{children:"Utilities for translating backend validation errors into React Hook Form's error format."}),"\n",(0,i.jsx)(r.h3,{id:"mapbackenderrorstoform",children:"mapBackendErrorsToForm"}),"\n",(0,i.jsxs)(r.p,{children:["Maps ",(0,i.jsx)(r.code,{children:"ValidationError[]"})," (from the validation pipeline or a GraphQL response) to form field errors. Supports nested paths like ",(0,i.jsx)(r.code,{children:"peers.0.endpoint"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"import { mapBackendErrorsToForm } from '@nasnet/core/forms';\n\nconst result = await validateMutation({ variables: { data } });\nif (!result.isValid) {\n  mapBackendErrorsToForm(result.errors, form.setError);\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"clearservererrors",children:"clearServerErrors"}),"\n",(0,i.jsxs)(r.p,{children:["Removes all errors with ",(0,i.jsx)(r.code,{children:"type: 'server'"})," from the form. Call this before re-validating to remove stale errors."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"import { clearServerErrors } from '@nasnet/core/forms';\n\n// Before making a new API call\nclearServerErrors(form.formState.errors, form.clearErrors);\n"})}),"\n",(0,i.jsx)(r.h3,{id:"grouperrorsbyfield",children:"groupErrorsByField"}),"\n",(0,i.jsx)(r.p,{children:"Groups errors by field path for batch processing:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"import { groupErrorsByField } from '@nasnet/core/forms';\n\nconst grouped = groupErrorsByField(errors);\n// Map { 'address' => [...], 'name' => [...] }\n"})}),"\n",(0,i.jsx)(r.h3,{id:"combinefielderrors",children:"combineFieldErrors"}),"\n",(0,i.jsx)(r.p,{children:"Joins multiple error messages for the same field into a single string:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"import { combineFieldErrors } from '@nasnet/core/forms';\n\nconst message = combineFieldErrors(grouped.get('email') ?? []);\n// \"Already exists. Invalid domain\"\n"})})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},71184:(e,r,s)=>{s.d(r,{R:()=>d,x:()=>o});var n=s(14041);const i={},t=n.createContext(i);function d(e){const r=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),n.createElement(t.Provider,{value:r},e.children)}}}]);