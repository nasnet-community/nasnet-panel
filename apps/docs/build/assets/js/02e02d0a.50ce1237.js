"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[67869],{63137:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"feature-dashboard","title":"Feature: Dashboard (libs/features/dashboard)","description":"Overview","source":"@site/../../libs/features/docs/feature-dashboard.md","sourceDirName":".","slug":"/feature-dashboard","permalink":"/docs/features/feature-dashboard","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../../libs/features/docs/feature-dashboard.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Feature Module: Alerts (libs/features/alerts)","permalink":"/docs/features/feature-alerts"},"next":{"title":"Feature: Diagnostics (libs/features/diagnostics)","permalink":"/docs/features/feature-diagnostics"}}');var t=s(31085),i=s(71184);const d={},a="Feature: Dashboard (libs/features/dashboard)",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Directory Tree",id:"directory-tree",level:2},{value:"Public API",id:"public-api",level:2},{value:"Component Table",id:"component-table",level:2},{value:"DashboardPage",id:"dashboardpage",level:2},{value:"Bandwidth Chart",id:"bandwidth-chart",level:2},{value:"Platform Presenters",id:"platform-presenters",level:3},{value:"useBandwidthHistory Hook",id:"usebandwidthhistory-hook",level:3},{value:"CustomTooltip",id:"customtooltip",level:3},{value:"BandwidthDataTable",id:"bandwidthdatatable",level:3},{value:"Utilities",id:"utilities",level:3},{value:"Interface Grid",id:"interface-grid",level:2},{value:"Three-Platform Architecture",id:"three-platform-architecture",level:3},{value:"InterfaceStatusCard",id:"interfacestatuscard",level:3},{value:"useInterfaceStatusCard Hook",id:"useinterfacestatuscard-hook",level:3},{value:"InterfaceDetailSheet",id:"interfacedetailsheet",level:3},{value:"useInterfaces Hook",id:"useinterfaces-hook",level:3},{value:"Utilities",id:"utilities-1",level:3},{value:"Resource Gauges",id:"resource-gauges",level:2},{value:"ResourceGauges Component",id:"resourcegauges-component",level:3},{value:"CircularGauge Component",id:"circulargauge-component",level:3},{value:"CPUBreakdownModal",id:"cpubreakdownmodal",level:3},{value:"useResourceMetrics Hook",id:"useresourcemetrics-hook",level:3},{value:"Recent Logs Widget",id:"recent-logs-widget",level:2},{value:"RecentLogs Component",id:"recentlogs-component",level:3},{value:"useLogStream Hook",id:"uselogstream-hook",level:3},{value:"LogEntryItem Component",id:"logentryitem-component",level:3},{value:"TopicFilter Component",id:"topicfilter-component",level:3},{value:"Router Health Summary Card",id:"router-health-summary-card",level:2},{value:"RouterHealthSummaryCard",id:"routerhealthsummarycard",level:3},{value:"useRouterHealthCard Hook",id:"userouterhealthcard-hook",level:3},{value:"computeHealthStatus Function",id:"computehealthstatus-function",level:3},{value:"Desktop vs Mobile Presenters",id:"desktop-vs-mobile-presenters",level:3},{value:"Cached Data Badge",id:"cached-data-badge",level:2},{value:"Dashboard Layout",id:"dashboard-layout",level:2},{value:"LogViewer",id:"logviewer",level:2},{value:"State Stores",id:"state-stores",level:2},{value:"chart-preferences.store.ts",id:"chart-preferencesstorets",level:3},{value:"log-filter-preferences.store.ts",id:"log-filter-preferencesstorets",level:3},{value:"Real-Time Update Patterns",id:"real-time-update-patterns",level:2},{value:"GraphQL Subscriptions (Preferred)",id:"graphql-subscriptions-preferred",level:3},{value:"Polling Fallback",id:"polling-fallback",level:3},{value:"Testing",id:"testing",level:2},{value:"Storybook",id:"storybook",level:2},{value:"Cross-References",id:"cross-references",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsxs)(n.h1,{id:"feature-dashboard-libsfeaturesdashboard",children:["Feature: Dashboard (",(0,t.jsx)(n.code,{children:"libs/features/dashboard"}),")"]})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"The dashboard feature module is the primary real-time monitoring view of NasNetConnect. It provides\nrouter health summaries, CPU/memory/disk resource gauges, real-time bandwidth charts, network\ninterface grids, and a live log stream widget. All components follow the Headless + Platform\nPresenters pattern with Mobile, Tablet, and Desktop variants where applicable."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Epics:"})," 0.8 (System Logs), 5.1 (Dashboard Layout), 5.2 (Resource Gauges), 5.3 (Bandwidth Chart),\n5.4 (Connected Devices), 5.5 (Interface Grid), 5.6 (Recent Logs)"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Public import path:"})," ",(0,t.jsx)(n.code,{children:"@nasnet/features/dashboard"})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"directory-tree",children:"Directory Tree"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"libs/features/dashboard/src/\n\u251c\u2500\u2500 index.ts                         # Barrel export (public API)\n\u251c\u2500\u2500 pages/\n\u2502   \u2514\u2500\u2500 DashboardPage.tsx            # Top-level page component\n\u251c\u2500\u2500 logs/\n\u2502   \u2514\u2500\u2500 LogViewer.tsx                # Full-featured log viewer (Epic 0.8)\n\u251c\u2500\u2500 components/\n\u2502   \u251c\u2500\u2500 BandwidthChart/\n\u2502   \u2502   \u251c\u2500\u2500 BandwidthChart.tsx            # Platform auto-detect wrapper\n\u2502   \u2502   \u251c\u2500\u2500 BandwidthChartDesktop.tsx     # Desktop: 300px chart + full controls\n\u2502   \u2502   \u251c\u2500\u2500 BandwidthChartMobile.tsx      # Mobile: 200px chart, simplified\n\u2502   \u2502   \u251c\u2500\u2500 BandwidthChartSkeleton.tsx    # Loading state skeleton\n\u2502   \u2502   \u251c\u2500\u2500 BandwidthDataTable.tsx        # Screen-reader data table (WCAG AAA)\n\u2502   \u2502   \u251c\u2500\u2500 CustomTooltip.tsx             # Recharts tooltip with TX/RX values\n\u2502   \u2502   \u251c\u2500\u2500 InterfaceFilter.tsx           # Interface multi-select filter\n\u2502   \u2502   \u251c\u2500\u2500 TimeRangeSelector.tsx         # 5min / 1hr / 24hr selector\n\u2502   \u2502   \u251c\u2500\u2500 useBandwidthHistory.ts        # Headless data hook\n\u2502   \u2502   \u251c\u2500\u2500 graphql.ts                    # BANDWIDTH_HISTORY_QUERY + BANDWIDTH_SUBSCRIPTION\n\u2502   \u2502   \u251c\u2500\u2500 types.ts                      # BandwidthDataPoint, TimeRange, etc.\n\u2502   \u2502   \u251c\u2500\u2500 utils.ts                      # formatBitrate, downsampleData, etc.\n\u2502   \u2502   \u2514\u2500\u2500 index.ts\n\u2502   \u251c\u2500\u2500 InterfaceGrid/\n\u2502   \u2502   \u251c\u2500\u2500 InterfaceGrid.tsx             # Platform auto-detect (Mobile/Tablet/Desktop)\n\u2502   \u2502   \u251c\u2500\u2500 InterfaceGrid.Desktop.tsx     # Desktop: 4-col grid\n\u2502   \u2502   \u251c\u2500\u2500 InterfaceGrid.Tablet.tsx      # Tablet: 3-col grid\n\u2502   \u2502   \u251c\u2500\u2500 InterfaceGrid.Mobile.tsx      # Mobile: 2-col grid\n\u2502   \u2502   \u251c\u2500\u2500 InterfaceStatusCard.tsx       # Platform auto-detect card\n\u2502   \u2502   \u251c\u2500\u2500 InterfaceStatusCard.Desktop.tsx # Dense card with traffic sparkline\n\u2502   \u2502   \u251c\u2500\u2500 InterfaceStatusCard.Mobile.tsx  # Compact card, touch-friendly\n\u2502   \u2502   \u251c\u2500\u2500 InterfaceDetailSheet.tsx      # Slide-over detail panel\n\u2502   \u2502   \u251c\u2500\u2500 useInterfaces.ts              # Data fetching + subscription hook\n\u2502   \u2502   \u251c\u2500\u2500 useInterfaceStatusCard.ts     # Per-card headless logic\n\u2502   \u2502   \u251c\u2500\u2500 queries.ts                    # GraphQL query documents\n\u2502   \u2502   \u251c\u2500\u2500 types.ts                      # InterfaceGridData, InterfaceStatus, etc.\n\u2502   \u2502   \u251c\u2500\u2500 utils.ts                      # sortInterfacesByPriority, formatTrafficRate, etc.\n\u2502   \u2502   \u2514\u2500\u2500 index.ts\n\u2502   \u251c\u2500\u2500 RecentLogs/\n\u2502   \u2502   \u251c\u2500\u2500 RecentLogs.tsx                # Dashboard log widget\n\u2502   \u2502   \u251c\u2500\u2500 LogEntryItem.tsx              # Single log row component\n\u2502   \u2502   \u251c\u2500\u2500 RecentLogsSkeleton.tsx        # Loading skeleton\n\u2502   \u2502   \u251c\u2500\u2500 TopicFilter.tsx               # Topic multi-select pill filter\n\u2502   \u2502   \u251c\u2500\u2500 useLogStream.ts               # Polling log stream headless hook\n\u2502   \u2502   \u251c\u2500\u2500 constants.ts                  # MAX_VISIBLE_LOGS=10, POLLING_INTERVAL_MS=5000\n\u2502   \u2502   \u251c\u2500\u2500 types.ts                      # UseLogStreamConfig, UseLogStreamReturn\n\u2502   \u2502   \u251c\u2500\u2500 utils.ts                      # Severity color mapping\n\u2502   \u2502   \u2514\u2500\u2500 index.ts\n\u2502   \u251c\u2500\u2500 ResourceGauges/\n\u2502   \u2502   \u251c\u2500\u2500 ResourceGauges.tsx            # Three-gauge layout (CPU, Memory, Disk)\n\u2502   \u2502   \u251c\u2500\u2500 CircularGauge.tsx             # SVG-based circular progress indicator\n\u2502   \u2502   \u251c\u2500\u2500 CPUBreakdownModal.tsx         # Per-core CPU detail modal\n\u2502   \u2502   \u251c\u2500\u2500 useResourceMetrics.ts         # Metrics data hook\n\u2502   \u2502   \u2514\u2500\u2500 index.ts\n\u2502   \u251c\u2500\u2500 cached-data-badge/\n\u2502   \u2502   \u251c\u2500\u2500 CachedDataBadge.tsx           # Staleness indicator badge\n\u2502   \u2502   \u2514\u2500\u2500 index.ts\n\u2502   \u251c\u2500\u2500 dashboard-layout/\n\u2502   \u2502   \u251c\u2500\u2500 DashboardLayout.tsx           # Responsive CSS grid wrapper\n\u2502   \u2502   \u2514\u2500\u2500 index.ts\n\u2502   \u2514\u2500\u2500 router-health-summary-card/\n\u2502       \u251c\u2500\u2500 RouterHealthSummaryCard.tsx          # Platform auto-detect wrapper\n\u2502       \u251c\u2500\u2500 RouterHealthSummaryCard.Desktop.tsx  # Desktop: full metrics card\n\u2502       \u251c\u2500\u2500 RouterHealthSummaryCard.Mobile.tsx   # Mobile: compact status card\n\u2502       \u251c\u2500\u2500 useRouterHealthCard.ts               # Headless hook\n\u2502       \u251c\u2500\u2500 health-utils.ts                      # computeHealthStatus, formatUptime, getHealthColor\n\u2502       \u2514\u2500\u2500 index.ts\n\u251c\u2500\u2500 hooks/\n\u2502   \u251c\u2500\u2500 useRouterHealth.ts               # Apollo query for router health data\n\u2502   \u251c\u2500\u2500 useRouterStatusSubscription.ts   # GraphQL subscription for real-time status\n\u2502   \u2514\u2500\u2500 index.ts\n\u251c\u2500\u2500 stores/\n\u2502   \u251c\u2500\u2500 chart-preferences.store.ts       # Zustand: selected time range + visible interfaces\n\u2502   \u2514\u2500\u2500 log-filter-preferences.store.ts  # Zustand: selected log topics for widget\n\u251c\u2500\u2500 types/\n\u2502   \u2514\u2500\u2500 dashboard.types.ts               # RouterHealthData, HealthStatus, HealthThresholds, etc.\n\u2514\u2500\u2500 graphql/\n    \u251c\u2500\u2500 fragments/router-fields.graphql\n    \u251c\u2500\u2500 queries/router-health.graphql\n    \u2514\u2500\u2500 subscriptions/router-status.graphql\n"})}),"\n",(0,t.jsxs)(n.p,{children:["There is also a ",(0,t.jsx)(n.code,{children:"ConnectedDevices"})," component exported from the package root\n(",(0,t.jsx)(n.code,{children:"../components/ConnectedDevices"}),") and a ",(0,t.jsx)(n.code,{children:"useConnectedDevices"})," hook at\n",(0,t.jsx)(n.code,{children:"../hooks/useConnectedDevices"}),"."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"public-api",children:"Public API"}),"\n",(0,t.jsxs)(n.p,{children:["Exported from ",(0,t.jsx)(n.code,{children:"libs/features/dashboard/src/index.ts"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Epic 0.8 - System Logs\nexport { LogViewer } from './logs/LogViewer';\n\n// Page\nexport { DashboardPage } from './pages/DashboardPage';\n\n// Layout and cross-cutting\nexport { DashboardLayout } from './components/dashboard-layout';\nexport { CachedDataBadge } from './components/cached-data-badge';\n\n// GraphQL hooks\nexport { useRouterHealth, useRouterStatusSubscription } from './hooks';\n\n// Router Health Summary Card\nexport {\n  RouterHealthSummaryCard,\n  RouterHealthSummaryCardMobile,\n  RouterHealthSummaryCardDesktop,\n  useRouterHealthCard,\n  computeHealthStatus,\n  formatUptime,\n  getHealthColor,\n} from './components/router-health-summary-card';\n\n// Domain types\nexport type {\n  RouterHealthData,\n  RouterStatus,\n  HealthStatus,\n  HealthColor,\n  CacheStatus,\n} from './types/dashboard.types';\nexport { DEFAULT_HEALTH_THRESHOLDS } from './types/dashboard.types';\n\n// Resource Gauges\nexport { ResourceGauges, CircularGauge, useResourceMetrics } from './components/ResourceGauges';\n\n// Connected Devices (Story 5.4)\nexport { ConnectedDevices } from '../components/ConnectedDevices';\nexport { useConnectedDevices } from '../hooks/useConnectedDevices';\n\n// Recent Logs (Story 5.6)\nexport { RecentLogs } from './components/RecentLogs';\n\n// Bandwidth Chart (Story 5.3)\nexport {\n  BandwidthChart,\n  BandwidthChartDesktop,\n  BandwidthChartMobile,\n  useBandwidthHistory,\n  TimeRangeSelector,\n  InterfaceFilter,\n  CustomTooltip,\n  BandwidthDataTable,\n  BandwidthChartSkeleton,\n  formatBitrate,\n  formatBandwidthBytes,\n  formatXAxis,\n  formatYAxis,\n  downsampleData,\n  appendDataPoint,\n  TIME_RANGE_MAP,\n  AGGREGATION_MAP,\n  MAX_DATA_POINTS,\n  BANDWIDTH_HISTORY_QUERY,\n  BANDWIDTH_SUBSCRIPTION,\n} from './components/BandwidthChart';\n\n// Interface Grid (Story 5.5)\nexport {\n  InterfaceGrid,\n  InterfaceStatusCard,\n  InterfaceDetailSheet,\n  useInterfaces,\n  formatTrafficRate,\n  formatLinkSpeed,\n  sortInterfacesByPriority,\n} from './components/InterfaceGrid';\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"component-table",children:"Component Table"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Component"}),(0,t.jsx)(n.th,{children:"File"}),(0,t.jsx)(n.th,{children:"Platform"}),(0,t.jsx)(n.th,{children:"Purpose"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"DashboardPage"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"pages/DashboardPage.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"Main dashboard page"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LogViewer"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"logs/LogViewer.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"Full-featured log viewer"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"DashboardLayout"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/dashboard-layout/DashboardLayout.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"Responsive grid shell"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"CachedDataBadge"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/cached-data-badge/CachedDataBadge.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"Data freshness indicator"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RouterHealthSummaryCard"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"router-health-summary-card/RouterHealthSummaryCard.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"Auto-detect health card"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RouterHealthSummaryCardDesktop"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"router-health-summary-card/RouterHealthSummaryCard.Desktop.tsx"})}),(0,t.jsx)(n.td,{children:"Desktop"}),(0,t.jsx)(n.td,{children:"Full metrics display"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RouterHealthSummaryCardMobile"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"router-health-summary-card/RouterHealthSummaryCard.Mobile.tsx"})}),(0,t.jsx)(n.td,{children:"Mobile"}),(0,t.jsx)(n.td,{children:"Compact status card"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ResourceGauges"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/ResourceGauges/ResourceGauges.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"CPU/Memory/Disk display"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"CircularGauge"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/ResourceGauges/CircularGauge.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"SVG circular progress meter"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"CPUBreakdownModal"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/ResourceGauges/CPUBreakdownModal.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"Per-core detail modal"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RecentLogs"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/RecentLogs/RecentLogs.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"Log stream dashboard widget"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LogEntryItem"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/RecentLogs/LogEntryItem.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"Single log row"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RecentLogsSkeleton"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/RecentLogs/RecentLogsSkeleton.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"Loading placeholder"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"TopicFilter"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/RecentLogs/TopicFilter.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"Topic filter pills"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"BandwidthChart"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/BandwidthChart/BandwidthChart.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"Auto-detect traffic chart"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"BandwidthChartDesktop"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/BandwidthChart/BandwidthChartDesktop.tsx"})}),(0,t.jsx)(n.td,{children:"Desktop"}),(0,t.jsx)(n.td,{children:"300px chart + full controls"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"BandwidthChartMobile"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/BandwidthChart/BandwidthChartMobile.tsx"})}),(0,t.jsx)(n.td,{children:"Mobile"}),(0,t.jsx)(n.td,{children:"200px simplified chart"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"BandwidthChartSkeleton"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/BandwidthChart/BandwidthChartSkeleton.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"Loading skeleton"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"BandwidthDataTable"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/BandwidthChart/BandwidthDataTable.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"Screen-reader data table"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"CustomTooltip"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/BandwidthChart/CustomTooltip.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"Recharts hover tooltip"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"InterfaceFilter"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/BandwidthChart/InterfaceFilter.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"Interface multi-select"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"TimeRangeSelector"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/BandwidthChart/TimeRangeSelector.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"5min/1hr/24hr selector"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"InterfaceGrid"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/InterfaceGrid/InterfaceGrid.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"Auto-detect grid (3 platforms)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"InterfaceGrid.Desktop"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/InterfaceGrid/InterfaceGrid.Desktop.tsx"})}),(0,t.jsx)(n.td,{children:"Desktop"}),(0,t.jsx)(n.td,{children:"4-column grid"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"InterfaceGrid.Tablet"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/InterfaceGrid/InterfaceGrid.Tablet.tsx"})}),(0,t.jsx)(n.td,{children:"Tablet"}),(0,t.jsx)(n.td,{children:"3-column grid"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"InterfaceGrid.Mobile"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/InterfaceGrid/InterfaceGrid.Mobile.tsx"})}),(0,t.jsx)(n.td,{children:"Mobile"}),(0,t.jsx)(n.td,{children:"2-column grid"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"InterfaceStatusCard"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/InterfaceGrid/InterfaceStatusCard.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"Auto-detect status card"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"InterfaceStatusCard.Desktop"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/InterfaceGrid/InterfaceStatusCard.Desktop.tsx"})}),(0,t.jsx)(n.td,{children:"Desktop"}),(0,t.jsx)(n.td,{children:"Dense card with sparkline"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"InterfaceStatusCard.Mobile"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/InterfaceGrid/InterfaceStatusCard.Mobile.tsx"})}),(0,t.jsx)(n.td,{children:"Mobile"}),(0,t.jsx)(n.td,{children:"Compact touch-friendly card"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"InterfaceDetailSheet"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"components/InterfaceGrid/InterfaceDetailSheet.tsx"})}),(0,t.jsx)(n.td,{children:"Both"}),(0,t.jsx)(n.td,{children:"Interface slide-over details"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"dashboardpage",children:"DashboardPage"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"File:"})," ",(0,t.jsx)(n.code,{children:"pages/DashboardPage.tsx"})]}),"\n",(0,t.jsxs)(n.p,{children:["The top-level dashboard page component. Currently renders a grid of router health sections, each\ncontaining a ",(0,t.jsx)(n.code,{children:"RouterHealthSummaryCard"}),", ",(0,t.jsx)(n.code,{children:"ResourceGauges"}),", and ",(0,t.jsx)(n.code,{children:"RecentLogs"})," widget:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'export const DashboardPage = memo(function DashboardPage() {\n  const [lastRefresh, setLastRefresh] = useState<Date>(new Date());\n\n  return (\n    <DashboardLayout onRefresh={handleRefresh} showRefresh={true}>\n      {routerIds.map((routerId) => (\n        <div key={routerId} className="space-y-component-xl">\n          <RouterHealthSummaryCard\n            routerId={routerId}\n            enableSubscription={true}\n            pollInterval={10000}\n          />\n          <ResourceGauges deviceId={routerId} />\n          <RecentLogs deviceId={routerId} />\n        </div>\n      ))}\n    </DashboardLayout>\n  );\n});\n'})}),"\n",(0,t.jsx)(n.p,{children:"Update patterns used by the page:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RouterHealthSummaryCard"}),": GraphQL subscription (",(0,t.jsx)(n.code,{children:"useRouterStatusSubscription"}),") + 10-second\npolling fallback"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ResourceGauges"}),": ",(0,t.jsx)(n.code,{children:"useResourceMetrics"})," with polling interval"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RecentLogs"}),": ",(0,t.jsx)(n.code,{children:"useLogStream"})," with 5-second polling"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"bandwidth-chart",children:"Bandwidth Chart"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Files:"})," ",(0,t.jsx)(n.code,{children:"components/BandwidthChart/"})]}),"\n",(0,t.jsx)(n.p,{children:"Real-time network traffic visualization using Recharts. Displays TX (transmit) and RX (receive)\ntraffic rates for one or more network interfaces over a configurable time window."}),"\n",(0,t.jsx)(n.h3,{id:"platform-presenters",children:"Platform Presenters"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"BandwidthChart"})," auto-detects via ",(0,t.jsx)(n.code,{children:"usePlatform()"})," and renders one of:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Desktop"})," (",(0,t.jsx)(n.code,{children:"BandwidthChartDesktop"}),"): 300px chart height, full ",(0,t.jsx)(n.code,{children:"InterfaceFilter"})," toolbar,\n",(0,t.jsx)(n.code,{children:"TimeRangeSelector"})," tabs, and accessible ",(0,t.jsx)(n.code,{children:"BandwidthDataTable"})," hidden below the chart."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Mobile"})," (",(0,t.jsx)(n.code,{children:"BandwidthChartMobile"}),"): 200px chart height, simplified controls. Interface filter and\ntime range selector use compact dropdown variants."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"usebandwidthhistory-hook",children:"useBandwidthHistory Hook"}),"\n",(0,t.jsx)(n.p,{children:"Core data hook that manages chart state:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const {\n  dataPoints, // BandwidthDataPoint[] (downsampled to MAX_DATA_POINTS)\n  isLoading,\n  error,\n  timeRange, // '5min' | '1hr' | '24hr'\n  setTimeRange,\n  selectedInterfaces, // string[] - interfaces to show\n  setSelectedInterfaces,\n  availableInterfaces, // All interfaces with traffic data\n} = useBandwidthHistory({ deviceId });\n"})}),"\n",(0,t.jsx)(n.p,{children:"Internally:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Fetches initial historical data with ",(0,t.jsx)(n.code,{children:"BANDWIDTH_HISTORY_QUERY"})," (Apollo ",(0,t.jsx)(n.code,{children:"useQuery"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Subscribes to live updates via ",(0,t.jsx)(n.code,{children:"BANDWIDTH_SUBSCRIPTION"})," (Apollo ",(0,t.jsx)(n.code,{children:"useSubscription"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Appends new data points using ",(0,t.jsx)(n.code,{children:"appendDataPoint()"})," which also runs ",(0,t.jsx)(n.code,{children:"downsampleData()"})," to keep the\narray at ",(0,t.jsx)(n.code,{children:"MAX_DATA_POINTS"})," (300 by default)"]}),"\n",(0,t.jsx)(n.li,{children:"Time range selection changes the GraphQL query variable and clears existing data"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Time range mapping:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"export const TIME_RANGE_MAP: Record<TimeRange, GraphQLTimeRange> = {\n  '5min': 'LAST_5_MINUTES',\n  '1hr': 'LAST_1_HOUR',\n  '24hr': 'LAST_24_HOURS',\n};\n\nexport const AGGREGATION_MAP: Record<TimeRange, GraphQLAggregationType> = {\n  '5min': 'RAW', // No aggregation for 5-minute window\n  '1hr': 'MINUTE', // 1-minute buckets for 1-hour window\n  '24hr': 'HOUR', // 1-hour buckets for 24-hour window\n};\n"})}),"\n",(0,t.jsx)(n.h3,{id:"customtooltip",children:"CustomTooltip"}),"\n",(0,t.jsx)(n.p,{children:"Recharts custom tooltip showing TX and RX rates for all visible interfaces at the hovered time\npoint:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface CustomTooltipProps {\n  active?: boolean;\n  payload?: Array<{ name: string; value: number; color: string }>;\n  label?: string;\n  formatValue?: (bitsPerSecond: number) => string;\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Uses ",(0,t.jsx)(n.code,{children:"formatBitrate()"})," to display values as ",(0,t.jsx)(n.code,{children:"Kbps"}),", ",(0,t.jsx)(n.code,{children:"Mbps"}),", or ",(0,t.jsx)(n.code,{children:"Gbps"})," depending on magnitude."]}),"\n",(0,t.jsx)(n.h3,{id:"bandwidthdatatable",children:"BandwidthDataTable"}),"\n",(0,t.jsx)(n.p,{children:"Visually hidden screen-reader accessible table rendered below the chart. Contains all data points\nfor WCAG AAA compliance:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<table\n  class="sr-only"\n  role="table"\n  aria-label="Bandwidth history data"\n>\n  <caption>\n    TX/RX traffic data for selected time range\n  </caption>\n  <thead>\n    ...\n  </thead>\n  <tbody>\n    {dataPoints.map(point =>\n    <tr>\n      timestamp, tx_rate, rx_rate\n    </tr>\n    )}\n  </tbody>\n</table>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"utilities",children:"Utilities"}),"\n",(0,t.jsxs)(n.p,{children:["All exported from ",(0,t.jsx)(n.code,{children:"utils.ts"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"formatBitrate(bitsPerSecond)"})," \u2014 formats to ",(0,t.jsx)(n.code,{children:"Kbps"}),"/",(0,t.jsx)(n.code,{children:"Mbps"}),"/",(0,t.jsx)(n.code,{children:"Gbps"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"formatBytes(bytes)"})," \u2014 formats to ",(0,t.jsx)(n.code,{children:"KB"}),"/",(0,t.jsx)(n.code,{children:"MB"}),"/",(0,t.jsx)(n.code,{children:"GB"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"formatXAxis(timestamp, timeRange)"})," \u2014 formats x-axis labels relative to time range"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"formatYAxis(value)"})," \u2014 compact Y-axis labels (e.g., ",(0,t.jsx)(n.code,{children:"1.2M"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"downsampleData(points, maxPoints)"})," \u2014 LTTB (Largest-Triangle-Three-Buckets) downsampling"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"appendDataPoint(existing, newPoint, maxPoints)"})," \u2014 append + downsample in one call"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"interface-grid",children:"Interface Grid"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Files:"})," ",(0,t.jsx)(n.code,{children:"components/InterfaceGrid/"})]}),"\n",(0,t.jsx)(n.p,{children:"Displays all network interfaces detected on the router as a responsive grid of status cards.\nSupports three platform presenters (Mobile, Tablet, Desktop) using the full three-breakpoint\npattern."}),"\n",(0,t.jsx)(n.h3,{id:"three-platform-architecture",children:"Three-Platform Architecture"}),"\n",(0,t.jsx)(n.p,{children:"This is one of the few components that implements all three platform presenters:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"export const InterfaceGrid = memo(function InterfaceGrid(props: InterfaceGridProps) {\n  const platform = usePlatform();\n\n  switch (platform) {\n    case 'mobile':  return <InterfaceGridMobile {...props} />;\n    case 'tablet':  return <InterfaceGridTablet {...props} />;\n    default:        return <InterfaceGridDesktop {...props} />;\n  }\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Desktop"})," (",(0,t.jsx)(n.code,{children:"InterfaceGrid.Desktop"}),"): 4-column ",(0,t.jsx)(n.code,{children:"grid-cols-4"})," grid, dense\n",(0,t.jsx)(n.code,{children:"InterfaceStatusCard.Desktop"}),' cards, "Show all / Show less" toggle if more than 8 interfaces.']}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Tablet"})," (",(0,t.jsx)(n.code,{children:"InterfaceGrid.Tablet"}),"): 3-column grid, same Desktop status cards."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Mobile"})," (",(0,t.jsx)(n.code,{children:"InterfaceGrid.Mobile"}),"): 2-column grid, compact ",(0,t.jsx)(n.code,{children:"InterfaceStatusCard.Mobile"})," cards."]}),"\n",(0,t.jsx)(n.h3,{id:"interfacestatuscard",children:"InterfaceStatusCard"}),"\n",(0,t.jsx)(n.p,{children:"Cards display interface-level status information:"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Desktop card"})," (",(0,t.jsx)(n.code,{children:"InterfaceStatusCard.Desktop"}),"):"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Interface name and type icon"}),"\n",(0,t.jsx)(n.li,{children:"Link status indicator (green/amber/red)"}),"\n",(0,t.jsx)(n.li,{children:"Current TX/RX rate (formatted as Kbps/Mbps)"}),"\n",(0,t.jsx)(n.li,{children:"Small traffic sparkline (mini LineChart, 40px height)"}),"\n",(0,t.jsx)(n.li,{children:"IP addresses (one per line)"}),"\n",(0,t.jsxs)(n.li,{children:["Click opens ",(0,t.jsx)(n.code,{children:"InterfaceDetailSheet"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Mobile card"})," (",(0,t.jsx)(n.code,{children:"InterfaceStatusCard.Mobile"}),"):"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Interface name and link status indicator"}),"\n",(0,t.jsx)(n.li,{children:"Single-line TX/RX rates"}),"\n",(0,t.jsx)(n.li,{children:"44px minimum touch target (WCAG AAA)"}),"\n",(0,t.jsxs)(n.li,{children:["Tap opens ",(0,t.jsx)(n.code,{children:"InterfaceDetailSheet"})," as bottom drawer"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"useinterfacestatuscard-hook",children:"useInterfaceStatusCard Hook"}),"\n",(0,t.jsx)(n.p,{children:"Headless logic for each card:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const {\n  isOnline,\n  ipAddresses,\n  txRate,\n  rxRate,\n  sparklineData, // Last 10 data points for mini chart\n  interfaceType, // 'ethernet' | 'wireless' | 'vlan' | 'vpn' | 'bridge' | 'loopback'\n} = useInterfaceStatusCard({ interface: iface });\n"})}),"\n",(0,t.jsx)(n.h3,{id:"interfacedetailsheet",children:"InterfaceDetailSheet"}),"\n",(0,t.jsx)(n.p,{children:"Slide-over sheet (desktop) or bottom drawer (mobile) with full interface details:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Interface name, MAC address, type"}),"\n",(0,t.jsx)(n.li,{children:"IP addresses with network mask"}),"\n",(0,t.jsx)(n.li,{children:"Link speed and duplex"}),"\n",(0,t.jsx)(n.li,{children:"Total TX/RX bytes since last reboot"}),"\n",(0,t.jsx)(n.li,{children:"Current TX/RX rate"}),"\n",(0,t.jsx)(n.li,{children:"Interface comment"}),"\n",(0,t.jsx)(n.li,{children:"Actions: enable/disable, edit IP address"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"useinterfaces-hook",children:"useInterfaces Hook"}),"\n",(0,t.jsx)(n.p,{children:"Primary data hook:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const {\n  interfaces, // InterfaceGridData[] (sorted by sortInterfacesByPriority)\n  isLoading,\n  error,\n  refetch,\n} = useInterfaces({ deviceId });\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Uses Apollo ",(0,t.jsx)(n.code,{children:"useSubscription"})," for real-time updates. Falls back to polling if subscription is\nunavailable. Sorts interfaces using ",(0,t.jsx)(n.code,{children:"sortInterfacesByPriority()"})," which orders by type: ethernet >\nVLAN > bridge > wireless > VPN > loopback."]}),"\n",(0,t.jsx)(n.h3,{id:"utilities-1",children:"Utilities"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"sortInterfacesByPriority(interfaces)"}),": Type-based sort order using ",(0,t.jsx)(n.code,{children:"INTERFACE_TYPE_PRIORITY"})," map"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"formatTrafficRate(bytesPerSecond)"}),": Formats to human-readable rate string"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"formatLinkSpeed(speedMbps)"}),": Formats link speed (e.g., ",(0,t.jsx)(n.code,{children:"100 Mbps"}),", ",(0,t.jsx)(n.code,{children:"1 Gbps"}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"resource-gauges",children:"Resource Gauges"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Files:"})," ",(0,t.jsx)(n.code,{children:"components/ResourceGauges/"})]}),"\n",(0,t.jsxs)(n.p,{children:["Three circular gauge meters for CPU, memory, and disk utilization. Clicking the CPU gauge opens\n",(0,t.jsx)(n.code,{children:"CPUBreakdownModal"})," with per-core detail."]}),"\n",(0,t.jsx)(n.h3,{id:"resourcegauges-component",children:"ResourceGauges Component"}),"\n",(0,t.jsxs)(n.p,{children:["Renders three ",(0,t.jsx)(n.code,{children:"CircularGauge"})," components in a horizontal row:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface ResourceGaugesProps {\n  deviceId: string;\n  thresholds?: {\n    cpu: { warning: number; critical: number }; // Default: 70/90\n    memory: { warning: number; critical: number }; // Default: 80/95\n    disk: { warning: number; critical: number }; // Default: 70/90\n  };\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"circulargauge-component",children:"CircularGauge Component"}),"\n",(0,t.jsx)(n.p,{children:"SVG-based circular progress indicator with threshold-based semantic coloring:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'interface CircularGaugeProps {\n  value: number; // 0\u2013100 percentage\n  label: string; // "CPU", "Memory", "Disk"\n  sublabel?: string; // "4 cores", "4.2 / 8 GB"\n  thresholds?: GaugeThresholds; // { warning: 70, critical: 90 }\n  size?: \'sm\' | \'md\' | \'lg\'; // Default: \'md\' (120px)\n  onClick?: () => void;\n  className?: string;\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Threshold-based coloring (AC 5.2.3):"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"value < thresholds.warning"})," \u2192 ",(0,t.jsx)(n.code,{children:"stroke-success"})," (green)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"thresholds.warning <= value < thresholds.critical"})," \u2192 ",(0,t.jsx)(n.code,{children:"stroke-warning"})," (amber)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"value >= thresholds.critical"})," \u2192 ",(0,t.jsx)(n.code,{children:"stroke-error"})," (red)"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"SVG animation:"})," 500ms ",(0,t.jsx)(n.code,{children:"ease-out"})," transition on ",(0,t.jsx)(n.code,{children:"strokeDashoffset"}),". Respects\n",(0,t.jsx)(n.code,{children:"prefers-reduced-motion"})," via Tailwind's ",(0,t.jsx)(n.code,{children:"motion-safe:"})," variant."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Accessibility:"})," Rendered as ",(0,t.jsx)(n.code,{children:'role="meter"'})," with ",(0,t.jsx)(n.code,{children:"aria-valuenow"}),", ",(0,t.jsx)(n.code,{children:"aria-valuemin=0"}),", and\n",(0,t.jsx)(n.code,{children:"aria-valuemax=100"}),". When clickable, rendered as a ",(0,t.jsx)(n.code,{children:"<button>"})," with the meter role. All touch targets\nmeet 44px WCAG AAA minimum."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Size configurations:"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Size"}),(0,t.jsx)(n.th,{children:"Diameter"}),(0,t.jsx)(n.th,{children:"Stroke Width"}),(0,t.jsx)(n.th,{children:"Font Size"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"sm"})}),(0,t.jsx)(n.td,{children:"80px"}),(0,t.jsx)(n.td,{children:"6px"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"text-lg"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"md"})}),(0,t.jsx)(n.td,{children:"120px"}),(0,t.jsx)(n.td,{children:"8px"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"text-2xl"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"lg"})}),(0,t.jsx)(n.td,{children:"160px"}),(0,t.jsx)(n.td,{children:"10px"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"text-3xl"})})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"cpubreakdownmodal",children:"CPUBreakdownModal"}),"\n",(0,t.jsxs)(n.p,{children:["Opened by clicking the CPU gauge. Shows per-core utilization as individual ",(0,t.jsx)(n.code,{children:"CircularGauge"}),"\ncomponents (size ",(0,t.jsx)(n.code,{children:"sm"}),") in a grid layout. Also displays system load averages (1m/5m/15m) as text."]}),"\n",(0,t.jsx)(n.h3,{id:"useresourcemetrics-hook",children:"useResourceMetrics Hook"}),"\n",(0,t.jsx)(n.p,{children:"Fetches CPU, memory, and disk metrics:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const {\n  cpu: { usage, cores, loadAvg }, // usage: 0\u2013100\n  memory: { used, total, usagePercent }, // usagePercent: 0\u2013100\n  disk: { used, total, usagePercent },\n  isLoading,\n  error,\n} = useResourceMetrics({ deviceId });\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Returns ",(0,t.jsx)(n.code,{children:"FormattedResourceMetrics"})," with pre-formatted display strings (e.g., ",(0,t.jsx)(n.code,{children:'"4.2 / 8 GB"'}),")."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"recent-logs-widget",children:"Recent Logs Widget"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Files:"})," ",(0,t.jsx)(n.code,{children:"components/RecentLogs/"})]}),"\n",(0,t.jsxs)(n.p,{children:['A compact dashboard widget that shows the last N log entries (default 10) with real-time updates via\npolling. Provides topic filtering and a "View all logs" link to the full ',(0,t.jsx)(n.code,{children:"LogViewer"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"recentlogs-component",children:"RecentLogs Component"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface RecentLogsProps {\n  deviceId: string;\n  maxEntries?: number; // Default: 10\n  className?: string;\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Renders:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"TopicFilter"})," pills (firewall, system, dhcp, wireless, etc.)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RecentLogsSkeleton"})," during initial load"]}),"\n",(0,t.jsxs)(n.li,{children:["List of ",(0,t.jsx)(n.code,{children:"LogEntryItem"})," components (newest first)"]}),"\n",(0,t.jsxs)(n.li,{children:['"View all logs" link when ',(0,t.jsx)(n.code,{children:"hasMore"})," is true"]}),"\n",(0,t.jsx)(n.li,{children:"Error state with retry button"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"uselogstream-hook",children:"useLogStream Hook"}),"\n",(0,t.jsx)(n.p,{children:"Headless polling hook:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"export function useLogStream(config: UseLogStreamConfig): UseLogStreamReturn {\n  const { deviceId, topics, maxEntries = MAX_VISIBLE_LOGS } = config;\n  const routerIp = useConnectionStore(state => state.currentRouterIp) || deviceId;\n\n  const { data: logs, isLoading, error, refetch } = useSystemLogs(routerIp, {\n    topics: topics.length > 0 ? topics : undefined,\n    limit: maxEntries,\n    refetchInterval: POLLING_INTERVAL_MS,  // 5000ms\n  });\n\n  const sortedLogs = useMemo(\n    () => [...logs].sort((a, b) => ...).slice(0, maxEntries),\n    [logs, maxEntries]\n  );\n\n  return { logs: sortedLogs, loading, error, refetch, totalCount, hasMore };\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Constants in ",(0,t.jsx)(n.code,{children:"constants.ts"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"MAX_VISIBLE_LOGS = 10"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"POLLING_INTERVAL_MS = 5000"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"logentryitem-component",children:"LogEntryItem Component"}),"\n",(0,t.jsx)(n.p,{children:"Renders a single log entry row:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'Relative timestamp (e.g., "2 min ago")'}),"\n",(0,t.jsx)(n.li,{children:"Severity dot (color-coded: gray/blue/amber/red/red)"}),"\n",(0,t.jsx)(n.li,{children:"Topic badge"}),"\n",(0,t.jsxs)(n.li,{children:["Message text (truncated with ",(0,t.jsx)(n.code,{children:"text-ellipsis"})," on mobile)"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"topicfilter-component",children:"TopicFilter Component"}),"\n",(0,t.jsx)(n.p,{children:"Multi-select pill filter for log topics. Uses toggle-button pattern:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface TopicFilterProps {\n  selectedTopics: LogTopic[];\n  onChange: (topics: LogTopic[]) => void;\n  availableTopics?: LogTopic[]; // Defaults to all 10 topics\n}\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"router-health-summary-card",children:"Router Health Summary Card"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Files:"})," ",(0,t.jsx)(n.code,{children:"components/router-health-summary-card/"})]}),"\n",(0,t.jsx)(n.p,{children:"Top-level card displayed for each router in the dashboard. Shows connectivity status, uptime, and\nkey health indicators."}),"\n",(0,t.jsx)(n.h3,{id:"routerhealthsummarycard",children:"RouterHealthSummaryCard"}),"\n",(0,t.jsxs)(n.p,{children:["Auto-detects platform and renders ",(0,t.jsx)(n.code,{children:"RouterHealthSummaryCardDesktop"})," or\n",(0,t.jsx)(n.code,{children:"RouterHealthSummaryCardMobile"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface RouterHealthSummaryCardProps {\n  routerId: string;\n  onRefresh?: () => void;\n  enableSubscription?: boolean; // Default: true\n  pollInterval?: number; // Default: 30000ms (30 seconds)\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"userouterhealthcard-hook",children:"useRouterHealthCard Hook"}),"\n",(0,t.jsx)(n.p,{children:"Core headless logic:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const {\n  healthData, // RouterHealthData | null\n  healthStatus, // 'healthy' | 'degraded' | 'critical' | 'offline'\n  healthColor, // 'success' | 'warning' | 'error' | 'muted'\n  isLoading,\n  isStale, // true if data older than staleness threshold\n  lastUpdated, // Date of last successful update\n  uptime, // Formatted uptime string (e.g., \"3d 4h 22m\")\n  refetch,\n} = useRouterHealthCard({ routerId, enableSubscription, pollInterval });\n"})}),"\n",(0,t.jsx)(n.h3,{id:"computehealthstatus-function",children:"computeHealthStatus Function"}),"\n",(0,t.jsx)(n.p,{children:"Evaluates router health against configurable thresholds:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"function computeHealthStatus(\n  data: RouterHealthData,\n  thresholds: HealthThresholds = DEFAULT_HEALTH_THRESHOLDS\n): HealthStatus {\n  if (data.status === 'offline') return 'offline';\n  if (data.cpuUsage > thresholds.cpu.critical) return 'critical';\n  if (data.memoryUsage > thresholds.memory.critical) return 'critical';\n  if (data.cpuUsage > thresholds.cpu.warning) return 'degraded';\n  if (data.memoryUsage > thresholds.memory.warning) return 'degraded';\n  return 'healthy';\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Default thresholds (",(0,t.jsx)(n.code,{children:"DEFAULT_HEALTH_THRESHOLDS"}),"):"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"CPU: warning=70%, critical=90%"}),"\n",(0,t.jsx)(n.li,{children:"Memory: warning=80%, critical=95%"}),"\n",(0,t.jsx)(n.li,{children:"Staleness: 60 seconds"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"desktop-vs-mobile-presenters",children:"Desktop vs Mobile Presenters"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Desktop:"})," Full metrics card with:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Router name and IP in header"}),"\n",(0,t.jsxs)(n.li,{children:["Color-coded status badge (",(0,t.jsx)(n.code,{children:"healthy"})," / ",(0,t.jsx)(n.code,{children:"degraded"})," / ",(0,t.jsx)(n.code,{children:"critical"})," / ",(0,t.jsx)(n.code,{children:"offline"}),")"]}),"\n",(0,t.jsx)(n.li,{children:"Uptime, firmware version"}),"\n",(0,t.jsx)(n.li,{children:"CPU and memory usage percentages"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"CachedDataBadge"})," if data is stale"]}),"\n",(0,t.jsx)(n.li,{children:"Refresh button"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Mobile:"})," Compact horizontal card:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Router name"}),"\n",(0,t.jsx)(n.li,{children:"Status dot (color-coded)"}),"\n",(0,t.jsx)(n.li,{children:'Single-line summary: "Online \xb7 3d uptime \xb7 45% CPU"'}),"\n",(0,t.jsx)(n.li,{children:"Touch-optimized with 44px minimum height"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"cached-data-badge",children:"Cached Data Badge"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"File:"})," ",(0,t.jsx)(n.code,{children:"components/cached-data-badge/CachedDataBadge.tsx"})]}),"\n",(0,t.jsxs)(n.p,{children:["Subtle indicator shown when displayed data is stale (fetched more than ",(0,t.jsx)(n.code,{children:"staleDurationSeconds"})," ago):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface CachedDataBadgeProps {\n  lastUpdated: Date;\n  staleDurationSeconds?: number; // Default: 60\n  className?: string;\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Renders as a small amber badge with clock icon: ",(0,t.jsx)(n.code,{children:'"Cached \xb7 2m ago"'}),". Hidden when data is fresh. Used\nby ",(0,t.jsx)(n.code,{children:"RouterHealthSummaryCard"})," and can be used by any component displaying potentially stale data."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"dashboard-layout",children:"Dashboard Layout"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"File:"})," ",(0,t.jsx)(n.code,{children:"components/dashboard-layout/DashboardLayout.tsx"})]}),"\n",(0,t.jsx)(n.p,{children:"Responsive CSS Grid wrapper for the dashboard page:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface DashboardLayoutProps {\n  children: React.ReactNode;\n  onRefresh?: () => void;\n  showRefresh?: boolean;\n  className?: string;\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Grid configuration:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Mobile (",(0,t.jsx)(n.code,{children:"<640px"}),"): ",(0,t.jsx)(n.code,{children:"grid-cols-1"})]}),"\n",(0,t.jsxs)(n.li,{children:["Tablet (640\u20131024px): ",(0,t.jsx)(n.code,{children:"grid-cols-2"})]}),"\n",(0,t.jsxs)(n.li,{children:["Desktop (",(0,t.jsx)(n.code,{children:">1024px"}),"): ",(0,t.jsx)(n.code,{children:"grid-cols-3"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Includes a page header with title, last refresh timestamp, and manual refresh button. The refresh\nbutton triggers ",(0,t.jsx)(n.code,{children:"onRefresh"})," which propagates down to all child components."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"logviewer",children:"LogViewer"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"File:"})," ",(0,t.jsx)(n.code,{children:"logs/LogViewer.tsx"})]}),"\n",(0,t.jsxs)(n.p,{children:["The full-featured log viewer used in the router panel logs tab and exported for use in dedicated log\npages. Integrates all five enhanced log features from the ",(0,t.jsx)(n.code,{children:"@nasnet/features/logs"})," library:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import {\n  useLogBookmarks,\n  useLogCorrelation,\n  useLogAlerts,\n  useLogCache,\n  LogSettingsDialog,\n  AlertSettingsDialog,\n} from '@nasnet/features/logs';\n"})}),"\n",(0,t.jsx)(n.p,{children:"Features:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Search and filtering by topic and severity"}),"\n",(0,t.jsxs)(n.li,{children:["Log grouping by time window or topic (",(0,t.jsx)(n.code,{children:"useLogCorrelation"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Bookmark system (",(0,t.jsx)(n.code,{children:"useLogBookmarks"}),") with pin indicators"]}),"\n",(0,t.jsxs)(n.li,{children:["Real-time alert notifications (",(0,t.jsx)(n.code,{children:"useLogAlerts"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Offline caching (",(0,t.jsx)(n.code,{children:"useLogCache"}),") for viewing logs without connectivity"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"LogSettingsDialog"})," \u2014 configure RouterOS logging rules"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AlertSettingsDialog"})," \u2014 configure log-based alert rules"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"LogDetailPanel"})," pattern component for per-entry detail"]}),"\n",(0,t.jsx)(n.li,{children:"Auto-scroll to latest entry toggle"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"NewEntriesIndicator"})," \u2014 float-on-top indicator when new entries arrive while scrolled up"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface LogViewerProps {\n  className?: string;\n  limit?: number; // Max entries to fetch. Default: 100\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["For complete logs feature documentation, see ",(0,t.jsx)(n.a,{href:"/docs/features/feature-logs",children:"feature-logs.md"}),"."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"state-stores",children:"State Stores"}),"\n",(0,t.jsx)(n.h3,{id:"chart-preferencesstorets",children:"chart-preferences.store.ts"}),"\n",(0,t.jsx)(n.p,{children:"Zustand store for bandwidth chart preferences, persisted to localStorage:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface ChartPreferencesState {\n  selectedTimeRange: TimeRange; // '5min' | '1hr' | '24hr'\n  selectedInterfaces: string[]; // Empty = show all\n  setTimeRange: (range: TimeRange) => void;\n  setInterfaces: (interfaces: string[]) => void;\n  resetPreferences: () => void;\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"log-filter-preferencesstorets",children:"log-filter-preferences.store.ts"}),"\n",(0,t.jsxs)(n.p,{children:["Zustand store for the dashboard ",(0,t.jsx)(n.code,{children:"RecentLogs"})," widget topic filter:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface LogFilterPreferencesState {\n  selectedTopics: LogTopic[];\n  setTopics: (topics: LogTopic[]) => void;\n  clearTopics: () => void;\n}\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"real-time-update-patterns",children:"Real-Time Update Patterns"}),"\n",(0,t.jsx)(n.p,{children:"The dashboard uses two update strategies depending on the data type:"}),"\n",(0,t.jsx)(n.h3,{id:"graphql-subscriptions-preferred",children:"GraphQL Subscriptions (Preferred)"}),"\n",(0,t.jsx)(n.p,{children:"Used when the backend emits events:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"useRouterStatusSubscription"})," \u2014 router status changes"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"BandwidthChart"})," \u2014 live traffic data via ",(0,t.jsx)(n.code,{children:"BANDWIDTH_SUBSCRIPTION"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"InterfaceGrid"})," \u2014 interface status changes"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"RouterHealthSummaryCard"})," wraps subscription logic:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const { data: subscriptionData } = useRouterStatusSubscription({\n  routerId,\n  enabled: enableSubscription,\n  onError: () => {\n    /* fall back to polling */\n  },\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"polling-fallback",children:"Polling Fallback"}),"\n",(0,t.jsx)(n.p,{children:"Used for components without subscription support or as fallback:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RouterHealthSummaryCard"}),": 10-second polling via ",(0,t.jsx)(n.code,{children:"useRouterHealth"})," with ",(0,t.jsx)(n.code,{children:"pollInterval"})," option"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RecentLogs"})," widget: 5-second polling via ",(0,t.jsx)(n.code,{children:"useLogStream"})," with ",(0,t.jsx)(n.code,{children:"refetchInterval"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ResourceGauges"}),": polling via ",(0,t.jsx)(n.code,{children:"useResourceMetrics"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"When a subscription connection fails, components automatically fall back to polling without user\naction."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# All dashboard tests\nnpx nx test dashboard\n\n# Specific component tests\nnpx nx test dashboard --testPathPattern=BandwidthChart\nnpx nx test dashboard --testPathPattern=InterfaceGrid\nnpx nx test dashboard --testPathPattern=ResourceGauges\nnpx nx test dashboard --testPathPattern=CircularGauge\nnpx nx test dashboard --testPathPattern=LogViewer\n"})}),"\n",(0,t.jsx)(n.p,{children:"Test files co-located with source:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"BandwidthChart.test.tsx"})," \u2014 Chart rendering and interaction"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"BandwidthChart.perf.test.tsx"})," \u2014 Performance benchmarks for data downsampling"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"InterfaceGrid.test.tsx"})," \u2014 Grid rendering, platform switching"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"InterfaceStatusCard.test.tsx"})," \u2014 Card status display"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"InterfaceDetailSheet.test.tsx"})," \u2014 Sheet open/close behavior"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"CircularGauge.test.tsx"})," \u2014 SVG rendering, threshold colors, ARIA"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ResourceGauges.test.tsx"})," \u2014 Three-gauge layout"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RecentLogs.test.tsx"}),' \u2014 Polling, filtering, "hasMore" display']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"DashboardLayout.test.tsx"})," \u2014 Responsive grid rendering"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"LogViewer.test.tsx"})," \u2014 Full viewer integration"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"useInterfaces.test.tsx"})," \u2014 Interface data hook"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"useLogStream.test.tsx"})," \u2014 Polling hook"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"useResourceMetrics.test.ts"})," \u2014 Metrics hook"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"useBandwidthHistory.test.tsx"})," \u2014 History + subscription hook"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"health-utils.test.ts"})," \u2014 computeHealthStatus, formatUptime"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"chart-preferences.store.test.ts"})," \u2014 Zustand store operations"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"graphql.test.ts"})," \u2014 GraphQL document shape tests"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"utils.test.ts"})," \u2014 formatBitrate, downsampleData, etc."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"useRouterStatusSubscription.test.ts"})," \u2014 Subscription hook behavior"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"storybook",children:"Storybook"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx nx run dashboard:storybook\n"})}),"\n",(0,t.jsx)(n.p,{children:"Available story files:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"BandwidthChart.stories.tsx"})," \u2014 Time ranges, loading, empty states"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"BandwidthDataTable.stories.tsx"})," \u2014 Table data variants"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"CustomTooltip.stories.tsx"})," \u2014 Tooltip with various payload shapes"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"TimeRangeSelector.stories.tsx"})," \u2014 Selector state variants"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"InterfaceGrid.stories.tsx"})," \u2014 Grid platform variants"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"InterfaceStatusCard.stories.tsx"})," \u2014 All interface types and statuses"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"InterfaceDetailSheet.stories.tsx"})," \u2014 Sheet open with various interface types"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"CircularGauge.stories.tsx"})," \u2014 All sizes, threshold zones, clickable"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ResourceGauges.stories.tsx"})," \u2014 Normal, warning, critical states"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"CPUBreakdownModal.stories.tsx"})," \u2014 Per-core detail"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"LogEntryItem.stories.tsx"})," \u2014 All severity and topic variants"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RecentLogs.stories.tsx"})," \u2014 Loading, with data, empty, error"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RecentLogsSkeleton.stories.tsx"})," \u2014 Skeleton placeholder"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"TopicFilter.stories.tsx"})," \u2014 Filter interaction"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RouterHealthSummaryCard.stories.tsx"})," \u2014 All health states"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"CachedDataBadge.stories.tsx"})," \u2014 Fresh vs stale variants"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"DashboardLayout.stories.tsx"})," \u2014 Grid layout with mock content"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"DashboardPage.stories.tsx"})," \u2014 Full page composition"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"cross-references",children:"Cross-References"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Platform Presenters:"})," ",(0,t.jsx)(n.code,{children:"Docs/design/PLATFORM_PRESENTER_GUIDE.md"})," \u2014 Three-platform implementation\npattern"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Design Tokens:"})," ",(0,t.jsx)(n.code,{children:"Docs/design/DESIGN_TOKENS.md"})," \u2014 Semantic colors for health states"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"GraphQL Subscriptions:"})," ",(0,t.jsx)(n.code,{children:"Docs/architecture/api-contracts.md"})," \u2014 Subscription patterns"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"State Management:"})," ",(0,t.jsx)(n.code,{children:"Docs/architecture/frontend-architecture.md"})," \u2014 Apollo Client + Zustand"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Logs Feature:"})," ",(0,t.jsx)(n.a,{href:"/docs/features/feature-logs",children:"feature-logs.md"})," \u2014 Full logs feature (used by\n",(0,t.jsx)(n.code,{children:"LogViewer"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Diagnostics Feature:"})," ",(0,t.jsx)(n.a,{href:"/docs/features/feature-diagnostics",children:"feature-diagnostics.md"})," \u2014 Diagnostic\ntools"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},71184:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>a});var r=s(14041);const t={},i=r.createContext(t);function d(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);