"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[64946],{71184:(e,r,t)=>{t.d(r,{R:()=>i,x:()=>l});var s=t(14041);const n={},d=s.createContext(n);function i(e){const r=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),s.createElement(d.Provider,{value:r},e.children)}},99924:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>o,contentTitle:()=>l,default:()=>a,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"architecture/routing","title":"Routing \u2014 TanStack Router","description":"NasNetConnect uses TanStack Router v1 with file-based routing. Route files live in apps/connect/src/routes/ and the router tree is auto-generated into apps/connect/src/routeTree.gen.ts by the Vite plugin at build time.","source":"@site/../connect/docs/architecture/routing.md","sourceDirName":"architecture","slug":"/architecture/routing","permalink":"/docs/frontend/architecture/routing","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../connect/docs/architecture/routing.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Provider Stack Deep Dive","permalink":"/docs/frontend/architecture/provider-stack"},"next":{"title":"Alerts System","permalink":"/docs/frontend/cross-cutting-features/alerts-system"}}');var n=t(31085),d=t(71184);const i={},l="Routing \u2014 TanStack Router",o={},c=[{value:"Setup",id:"setup",level:2},{value:"Router Initialization (<code>main.tsx</code>)",id:"router-initialization-maintsx",level:3},{value:"Vite Plugin",id:"vite-plugin",level:3},{value:"File-Based Routing Convention",id:"file-based-routing-convention",level:2},{value:"Root Route (<code>__root.tsx</code>)",id:"root-route-__roottsx",level:2},{value:"Complete Route Tree",id:"complete-route-tree",level:2},{value:"Top-Level Routes",id:"top-level-routes",level:3},{value:"Dashboard Sub-Routes (flat file nesting)",id:"dashboard-sub-routes-flat-file-nesting",level:3},{value:"Settings Sub-Routes",id:"settings-sub-routes",level:3},{value:"Network Sub-Routes",id:"network-sub-routes",level:3},{value:"Router Panel \u2014 Layout Route",id:"router-panel--layout-route",level:3},{value:"Router Panel \u2014 Tab Routes",id:"router-panel--tab-routes",level:3},{value:"Router Panel \u2014 VPN Sub-Routes",id:"router-panel--vpn-sub-routes",level:3},{value:"Router Panel \u2014 WiFi Sub-Routes",id:"router-panel--wifi-sub-routes",level:3},{value:"Router Panel \u2014 Services Sub-Routes",id:"router-panel--services-sub-routes",level:3},{value:"Router Panel \u2014 Firewall Sub-Routes",id:"router-panel--firewall-sub-routes",level:3},{value:"Lazy Loading Strategy",id:"lazy-loading-strategy",level:2},{value:"Lazy-Loaded Tab Chunks",id:"lazy-loaded-tab-chunks",level:3},{value:"Eager-Loaded Tabs",id:"eager-loaded-tabs",level:3},{value:"Preload on Enter",id:"preload-on-enter",level:3},{value:"Route Guards / Auth Protection",id:"route-guards--auth-protection",level:2},{value:"Type Safety",id:"type-safety",level:2},{value:"Related Documents",id:"related-documents",level:2}];function h(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"routing--tanstack-router",children:"Routing \u2014 TanStack Router"})}),"\n",(0,n.jsxs)(r.p,{children:["NasNetConnect uses ",(0,n.jsx)(r.strong,{children:"TanStack Router v1"})," with file-based routing. Route files live in ",(0,n.jsx)(r.code,{children:"apps/connect/src/routes/"})," and the router tree is auto-generated into ",(0,n.jsx)(r.code,{children:"apps/connect/src/routeTree.gen.ts"})," by the Vite plugin at build time."]}),"\n",(0,n.jsx)(r.h2,{id:"setup",children:"Setup"}),"\n",(0,n.jsxs)(r.h3,{id:"router-initialization-maintsx",children:["Router Initialization (",(0,n.jsx)(r.code,{children:"main.tsx"}),")"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-tsx",children:"// apps/connect/src/main.tsx\nimport { RouterProvider, createRouter } from '@tanstack/react-router';\nimport { routeTree } from './routeTree.gen';\n\nconst router = createRouter({ routeTree });\n\n// Type registration \u2014 gives full type-safety to useParams, useSearch, etc.\ndeclare module '@tanstack/react-router' {\n  interface Register {\n    router: typeof router;\n  }\n}\n\nroot.render(\n  <StrictMode>\n    <RouterProvider router={router} />\n  </StrictMode>,\n);\n"})}),"\n",(0,n.jsxs)(r.p,{children:["The ",(0,n.jsx)(r.code,{children:"RouterProvider"})," is mounted at the very top level before the ",(0,n.jsx)(r.code,{children:"Providers"})," stack. The ",(0,n.jsx)(r.code,{children:"Providers"})," are applied inside the root route component (",(0,n.jsx)(r.code,{children:"__root.tsx"}),") rather than here, so providers have access to route context."]}),"\n",(0,n.jsx)(r.h3,{id:"vite-plugin",children:"Vite Plugin"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"// apps/connect/vite.config.ts\nTanStackRouterVite({ routeFileIgnorePattern: '\\\\.stories\\\\.' }),\n"})}),"\n",(0,n.jsxs)(r.p,{children:["The ",(0,n.jsx)(r.code,{children:"routeFileIgnorePattern"})," excludes Storybook story files (",(0,n.jsx)(r.code,{children:".stories.tsx"}),") from the generated route tree. This is important because story files live alongside route files in the same directories."]}),"\n",(0,n.jsx)(r.h2,{id:"file-based-routing-convention",children:"File-Based Routing Convention"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"File path"}),(0,n.jsx)(r.th,{children:"Route path"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/index.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/home.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/home"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/dashboard.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/dashboard"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/dashboard.network.tsx"})}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"/dashboard/network"})," (flat file = nested path)"]})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/route.tsx"})}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"/router/$id"})," (layout route)"]})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/firewall.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/$id/firewall"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/firewall/logs.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/$id/firewall/logs"})})]})]})]}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"Naming rules:"})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"$param"})," in a directory name becomes a dynamic path segment"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"."})," in a file name creates a nested path without a nested directory (flat file nesting)"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"route.tsx"})," at a directory level creates a layout route (renders ",(0,n.jsx)(r.code,{children:"<Outlet>"})," for children)"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"index.tsx"})," at a directory level creates the default child route"]}),"\n"]}),"\n",(0,n.jsxs)(r.h2,{id:"root-route-__roottsx",children:["Root Route (",(0,n.jsx)(r.code,{children:"__root.tsx"}),")"]}),"\n",(0,n.jsx)(r.p,{children:"The root route wraps every page in the application shell:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-tsx",children:'// apps/connect/src/routes/__root.tsx\n\nfunction RootComponent() {\n  return (\n    <Providers>       {/* 8-layer provider stack */}\n      <RootInner />\n      {import.meta.env.DEV && <TanStackRouterDevtools />}\n    </Providers>\n  );\n}\n\nfunction RootInner() {\n  // Global hooks \u2014 run on every page:\n  useConnectionToast();      // connection state \u2192 toast notifications\n  useConnectionHeartbeat();  // periodic ping to backend\n  useDefaultCommands();      // registers Cmd+K palette commands\n  useGlobalShortcuts();      // keyboard shortcuts (Cmd+K, ?)\n  useAlertNotifications();   // real-time alert subscription \u2192 toast + sound\n\n  return (\n    <ResponsiveShell\n      header={<AppHeader />}\n      sidebar={<AppSidebar />}\n      banner={<ConnectionBanner />}\n    >\n      <main id="main-content">\n        <Outlet />   {/* active route renders here */}\n      </main>\n      <Toaster />\n      <CommandPalette />\n      <ShortcutsOverlay />\n      <SearchFAB />          {/* mobile only */}\n    </ResponsiveShell>\n  );\n}\n\nexport const Route = createRootRoute({\n  component: RootComponent,\n  errorComponent: RootErrorComponent,\n  notFoundComponent: NotFoundComponent,\n});\n'})}),"\n",(0,n.jsx)(r.p,{children:"The root route also defines:"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"errorComponent"})," \u2014 renders a styled error card with stack trace in dev"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"notFoundComponent"})," \u2014 404 page with a home link"]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"complete-route-tree",children:"Complete Route Tree"}),"\n",(0,n.jsx)(r.h3,{id:"top-level-routes",children:"Top-Level Routes"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"File"}),(0,n.jsx)(r.th,{children:"Path"}),(0,n.jsx)(r.th,{children:"Component"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/index.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"RouterDiscoveryPage"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/home.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/home"})}),(0,n.jsx)(r.td,{children:"Home page"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/routers.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/routers"})}),(0,n.jsx)(r.td,{children:"Router list"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/discover.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/discover"})}),(0,n.jsx)(r.td,{children:"Network scanner"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/wifi.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/wifi"})}),(0,n.jsx)(r.td,{children:"WiFi overview"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/network.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/network"})}),(0,n.jsx)(r.td,{children:"Network section layout"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/dashboard.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/dashboard"})}),(0,n.jsx)(r.td,{children:"Dashboard layout"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/settings.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/settings"})}),(0,n.jsx)(r.td,{children:"Settings layout"})]})]})]}),"\n",(0,n.jsx)(r.h3,{id:"dashboard-sub-routes-flat-file-nesting",children:"Dashboard Sub-Routes (flat file nesting)"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"File"}),(0,n.jsx)(r.th,{children:"Path"}),(0,n.jsx)(r.th,{children:"Component"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/dashboard.network.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/dashboard/network"})}),(0,n.jsx)(r.td,{children:"Network dashboard"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/dashboard.routes.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/dashboard/routes"})}),(0,n.jsx)(r.td,{children:"Routes overview"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/dashboard.dns-lookup.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/dashboard/dns-lookup"})}),(0,n.jsx)(r.td,{children:"DNS lookup tool"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/dashboard.troubleshoot.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/dashboard/troubleshoot"})}),(0,n.jsx)(r.td,{children:"Troubleshooting"})]})]})]}),"\n",(0,n.jsx)(r.h3,{id:"settings-sub-routes",children:"Settings Sub-Routes"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"File"}),(0,n.jsx)(r.th,{children:"Path"}),(0,n.jsx)(r.th,{children:"Component"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/settings/notifications.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/settings/notifications"})}),(0,n.jsx)(r.td,{children:"Notification settings"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/settings/notifications/webhooks.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/settings/notifications/webhooks"})}),(0,n.jsx)(r.td,{children:"Webhook channels"})]})]})]}),"\n",(0,n.jsx)(r.h3,{id:"network-sub-routes",children:"Network Sub-Routes"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"File"}),(0,n.jsx)(r.th,{children:"Path"}),(0,n.jsx)(r.th,{children:"Component"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/network/dhcp/index.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/network/dhcp/"})}),(0,n.jsx)(r.td,{children:"DHCP index"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/network/dhcp/leases.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/network/dhcp/leases"})}),(0,n.jsx)(r.td,{children:"All DHCP leases"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/network/dhcp/new.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/network/dhcp/new"})}),(0,n.jsx)(r.td,{children:"Create DHCP server"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/network/dhcp/$serverId.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/network/dhcp/:serverId"})}),(0,n.jsx)(r.td,{children:"DHCP server detail"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/network/dns/diagnostics.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/network/dns/diagnostics"})}),(0,n.jsx)(r.td,{children:"DNS diagnostics"})]})]})]}),"\n",(0,n.jsx)(r.h3,{id:"router-panel--layout-route",children:"Router Panel \u2014 Layout Route"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"routes/router/$id/route.tsx"})," is a ",(0,n.jsx)(r.strong,{children:"layout route"})," for ",(0,n.jsx)(r.code,{children:"/router/:id"}),". It renders ",(0,n.jsx)(r.code,{children:"RouterPanel"})," as a wrapper and ",(0,n.jsx)(r.code,{children:"<Outlet>"})," for the active tab. All router-panel sub-routes share this shell."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-tsx",children:"// routes/router/$id/route.tsx\nexport const Route = createFileRoute('/router/$id')({\n  component: RouterPanelLayout,\n});\n\nfunction RouterPanelLayout() {\n  const { id } = Route.useParams();\n  return (\n    <RouterPanel routerId={id}>\n      <Outlet />\n    </RouterPanel>\n  );\n}\n"})}),"\n",(0,n.jsx)(r.h3,{id:"router-panel--tab-routes",children:"Router Panel \u2014 Tab Routes"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"File"}),(0,n.jsx)(r.th,{children:"Path"}),(0,n.jsx)(r.th,{children:"Tab"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/index.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/"})}),(0,n.jsx)(r.td,{children:"Overview"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/network.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/network"})}),(0,n.jsx)(r.td,{children:"Network"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/dhcp.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/dhcp"})}),(0,n.jsx)(r.td,{children:"DHCP"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/dns.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/dns"})}),(0,n.jsx)(r.td,{children:"DNS"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/firewall.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/firewall"})}),(0,n.jsx)(r.td,{children:"Firewall layout"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/logs.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/logs"})}),(0,n.jsx)(r.td,{children:"Logs"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/plugins.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/plugins"})}),(0,n.jsx)(r.td,{children:"Plugin Store"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/routing.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/routing"})}),(0,n.jsx)(r.td,{children:"Routing"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/vlans.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/vlans"})}),(0,n.jsx)(r.td,{children:"VLANs"})]})]})]}),"\n",(0,n.jsx)(r.h3,{id:"router-panel--vpn-sub-routes",children:"Router Panel \u2014 VPN Sub-Routes"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"File"}),(0,n.jsx)(r.th,{children:"Path"}),(0,n.jsx)(r.th,{children:"Component"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/vpn/index.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/vpn/"})}),(0,n.jsx)(r.td,{children:"VPN dashboard"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/vpn/clients.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/vpn/clients"})}),(0,n.jsx)(r.td,{children:"VPN clients"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/vpn/servers.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/vpn/servers"})}),(0,n.jsx)(r.td,{children:"VPN servers"})]})]})]}),"\n",(0,n.jsx)(r.h3,{id:"router-panel--wifi-sub-routes",children:"Router Panel \u2014 WiFi Sub-Routes"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"File"}),(0,n.jsx)(r.th,{children:"Path"}),(0,n.jsx)(r.th,{children:"Component"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/wifi/index.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/wifi/"})}),(0,n.jsx)(r.td,{children:"WiFi overview"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/wifi/$interfaceName.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/wifi/:interfaceName"})}),(0,n.jsx)(r.td,{children:"WiFi interface detail"})]})]})]}),"\n",(0,n.jsx)(r.h3,{id:"router-panel--services-sub-routes",children:"Router Panel \u2014 Services Sub-Routes"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"File"}),(0,n.jsx)(r.th,{children:"Path"}),(0,n.jsx)(r.th,{children:"Component"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/services/index.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/services/"})}),(0,n.jsx)(r.td,{children:"Services marketplace"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/services/templates.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/services/templates"})}),(0,n.jsx)(r.td,{children:"Service templates"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/services/$instanceId.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/services/:instanceId"})}),(0,n.jsx)(r.td,{children:"Service instance"})]})]})]}),"\n",(0,n.jsx)(r.h3,{id:"router-panel--firewall-sub-routes",children:"Router Panel \u2014 Firewall Sub-Routes"}),"\n",(0,n.jsxs)(r.p,{children:["The firewall route (",(0,n.jsx)(r.code,{children:"routes/router/$id/firewall.tsx"}),") is itself a layout route. Its sub-routes are the individual firewall sections:"]}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"File"}),(0,n.jsx)(r.th,{children:"Path"}),(0,n.jsx)(r.th,{children:"Section"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/firewall/address-lists.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/firewall/address-lists"})}),(0,n.jsx)(r.td,{children:"Address lists"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/firewall/connections.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/firewall/connections"})}),(0,n.jsx)(r.td,{children:"Active connections"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/firewall/logs.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/firewall/logs"})}),(0,n.jsx)(r.td,{children:"Firewall logs"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/firewall/mangle.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/firewall/mangle"})}),(0,n.jsx)(r.td,{children:"Mangle rules"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/firewall/port-knocking.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/firewall/port-knocking"})}),(0,n.jsx)(r.td,{children:"Port knocking"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/firewall/rate-limiting.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/firewall/rate-limiting"})}),(0,n.jsx)(r.td,{children:"Rate limiting"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/firewall/raw.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/firewall/raw"})}),(0,n.jsx)(r.td,{children:"Raw rules"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/firewall/service-ports.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/firewall/service-ports"})}),(0,n.jsx)(r.td,{children:"Service ports"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"routes/router/$id/firewall/templates.tsx"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"/router/:id/firewall/templates"})}),(0,n.jsx)(r.td,{children:"Firewall templates"})]})]})]}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"Total routes: 47"})}),"\n",(0,n.jsx)(r.h2,{id:"lazy-loading-strategy",children:"Lazy Loading Strategy"}),"\n",(0,n.jsxs)(r.p,{children:["Heavy tab components are code-split to keep the initial bundle small. The ",(0,n.jsx)(r.code,{children:"createLazyWithPreload"})," utility from ",(0,n.jsx)(r.code,{children:"@nasnet/ui/patterns"})," creates a lazy component with an imperative preload function."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"// apps/connect/src/app/routes/router-panel/tabs/lazy.ts\n\nexport const [LazyFirewallTab, preloadFirewallTab] = createLazyWithPreload(\n  () => import('./FirewallTab').then((m) => ({ default: m.FirewallTab }))\n);\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Route files use ",(0,n.jsx)(r.code,{children:"LazyBoundary"})," (from ",(0,n.jsx)(r.code,{children:"@nasnet/ui/patterns"}),") as the Suspense wrapper with a typed skeleton fallback:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-tsx",children:"// routes/router/$id/firewall.tsx\nexport const Route = createFileRoute('/router/$id/firewall')({\n  component: () => (\n    <LazyBoundary fallback={<FirewallTabSkeleton />}>\n      <LazyFirewallTab />\n    </LazyBoundary>\n  ),\n});\n"})}),"\n",(0,n.jsx)(r.h3,{id:"lazy-loaded-tab-chunks",children:"Lazy-Loaded Tab Chunks"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Tab"}),(0,n.jsx)(r.th,{children:"Estimated Chunk"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"FirewallTab"}),(0,n.jsx)(r.td,{children:"~50KB"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"VPNTab"}),(0,n.jsx)(r.td,{children:"~45KB"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"LogsTab"}),(0,n.jsx)(r.td,{children:"~40KB"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"DHCPTab"}),(0,n.jsx)(r.td,{children:"~35KB"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"DnsTab"}),(0,n.jsx)(r.td,{children:"~30KB"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"PluginStoreTab"}),(0,n.jsx)(r.td,{children:"~30KB"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"NetworkTab"}),(0,n.jsx)(r.td,{children:"~25KB"})]})]})]}),"\n",(0,n.jsx)(r.h3,{id:"eager-loaded-tabs",children:"Eager-Loaded Tabs"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"OverviewTab"})," and ",(0,n.jsx)(r.code,{children:"WiFiTab"})," are loaded eagerly because they are the most common entry points and are relatively lightweight."]}),"\n",(0,n.jsx)(r.h3,{id:"preload-on-enter",children:"Preload on Enter"}),"\n",(0,n.jsxs)(r.p,{children:["When a user navigates into the router panel, all heavy tabs are preloaded in the background via ",(0,n.jsx)(r.code,{children:"requestIdleCallback"})," (with a 3-second timeout fallback):"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"export function preloadAllHeavyTabs(): void {\n  const preload = () => {\n    preloadFirewallTab();\n    preloadLogsTab();\n    preloadDHCPTab();\n    preloadDnsTab();\n    preloadVPNTab();\n  };\n\n  if ('requestIdleCallback' in window) {\n    window.requestIdleCallback(preload, { timeout: 3000 });\n  } else {\n    setTimeout(preload, 1000);\n  }\n}\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Individual tabs can also be preloaded on hover by calling the preload function in ",(0,n.jsx)(r.code,{children:"onMouseEnter"}),"."]}),"\n",(0,n.jsx)(r.h2,{id:"route-guards--auth-protection",children:"Route Guards / Auth Protection"}),"\n",(0,n.jsxs)(r.p,{children:["Route-level authentication is enforced via the Apollo Client auth link (in ",(0,n.jsx)(r.code,{children:"libs/api-client/core/src"}),"), which intercepts 401 responses and triggers a logout. There are no explicit ",(0,n.jsx)(r.code,{children:"beforeLoad"})," guards in the route definitions at this time; protected routes rely on the backend returning 401/403 for unauthenticated requests, which the error link handles by redirecting to the login flow."]}),"\n",(0,n.jsx)(r.h2,{id:"type-safety",children:"Type Safety"}),"\n",(0,n.jsxs)(r.p,{children:["Because the router instance is registered via the module augmentation in ",(0,n.jsx)(r.code,{children:"main.tsx"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"declare module '@tanstack/react-router' {\n  interface Register {\n    router: typeof router;\n  }\n}\n"})}),"\n",(0,n.jsxs)(r.p,{children:["All ",(0,n.jsx)(r.code,{children:"useParams()"}),", ",(0,n.jsx)(r.code,{children:"useSearch()"}),", ",(0,n.jsx)(r.code,{children:"Link"}),", and ",(0,n.jsx)(r.code,{children:"navigate()"})," calls are fully type-safe. TypeScript will catch incorrect route paths and missing params at compile time."]}),"\n",(0,n.jsx)(r.h2,{id:"related-documents",children:"Related Documents"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"/docs/frontend/architecture/overview",children:"Architecture Overview"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"/docs/frontend/architecture/provider-stack",children:"Provider Stack"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"/docs/frontend/architecture/build-system",children:"Build System"})}),"\n"]})]})}function a(e={}){const{wrapper:r}={...(0,d.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}}}]);