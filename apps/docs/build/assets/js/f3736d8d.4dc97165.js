"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[33634],{29830:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"intro","title":"Introduction","description":"The @nasnet/state library provides Zustand stores and XState machines for managing application state beyond what Apollo Client handles.","source":"@site/../../libs/state/docs/intro.md","sourceDirName":".","slug":"/intro","permalink":"/docs/state/intro","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../../libs/state/docs/intro.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Introduction"},"sidebar":"sidebar","next":{"title":"Architecture","permalink":"/docs/state/architecture"}}');var r=s(31085),i=s(71184);const o={sidebar_position:1,title:"Introduction"},c="State Management Library",l={},d=[{value:"Four-Layer State Architecture",id:"four-layer-state-architecture",level:2},{value:"Store Inventory",id:"store-inventory",level:2},{value:"UI Stores (Theme, Sidebar, Notifications)",id:"ui-stores-theme-sidebar-notifications",level:3},{value:"Connection &amp; Auth Stores",id:"connection--auth-stores",level:3},{value:"Router &amp; Domain Stores",id:"router--domain-stores",level:3},{value:"Command &amp; Navigation Stores",id:"command--navigation-stores",level:3},{value:"Advanced Stores",id:"advanced-stores",level:3},{value:"Machine Inventory",id:"machine-inventory",level:2},{value:"Core Machines",id:"core-machines",level:3},{value:"Persistence Utilities",id:"persistence-utilities",level:3},{value:"React Hooks",id:"react-hooks",level:3},{value:"Selector Utilities",id:"selector-utilities",level:2},{value:"Decision Tree",id:"decision-tree",level:2},{value:"Documentation Structure",id:"documentation-structure",level:2},{value:"Architecture Highlights",id:"architecture-highlights",level:2},{value:"Zustand Pattern: Persist Middleware",id:"zustand-pattern-persist-middleware",level:3},{value:"Custom Storage Handlers",id:"custom-storage-handlers",level:3},{value:"XState v5 Pattern: Actor Model",id:"xstate-v5-pattern-actor-model",level:3},{value:"Outside React Access",id:"outside-react-access",level:2},{value:"Redux DevTools Integration",id:"redux-devtools-integration",level:2}];function a(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"state-management-library",children:"State Management Library"})}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"@nasnet/state"})})," library provides Zustand stores and XState machines for managing application state beyond what Apollo Client handles."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Import paths:"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"@nasnet/state/stores"})," - Zustand stores for UI state and domain state"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"@nasnet/state/machines"})," - XState machines for complex multi-step workflows"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"four-layer-state-architecture",children:"Four-Layer State Architecture"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Layer"}),(0,r.jsx)(t.th,{children:"Tool"}),(0,r.jsx)(t.th,{children:"Purpose"}),(0,r.jsx)(t.th,{children:"When to Use"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"Server State"})}),(0,r.jsx)(t.td,{children:"Apollo Client"}),(0,r.jsx)(t.td,{children:"Router config, VPN lists, logs, caching, real-time subscriptions"}),(0,r.jsx)(t.td,{children:"Data from backend/router API"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"UI State"})}),(0,r.jsx)(t.td,{children:"Zustand"}),(0,r.jsx)(t.td,{children:"Theme, sidebar, modals, notifications, connection status, domain UI state"}),(0,r.jsx)(t.td,{children:"Global UI preferences and transient state"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"Complex Flows"})}),(0,r.jsx)(t.td,{children:"XState"}),(0,r.jsx)(t.td,{children:"Multi-step wizards, config pipelines, VPN connection lifecycle, resource management"}),(0,r.jsx)(t.td,{children:"Multi-step workflows with side effects"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"Form State"})}),(0,r.jsx)(t.td,{children:"React Hook Form + Zod"}),(0,r.jsx)(t.td,{children:"Form validation, field-level errors, dirty tracking"}),(0,r.jsx)(t.td,{children:"Form-specific validation and submission"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"store-inventory",children:"Store Inventory"}),"\n",(0,r.jsx)(t.h3,{id:"ui-stores-theme-sidebar-notifications",children:"UI Stores (Theme, Sidebar, Notifications)"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useThemeStore"})," - Theme management (light/dark/system) with localStorage persistence"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useSidebarStore"})," - Sidebar collapse state for responsive layouts"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useUIStore"})," - Global UI preferences (command palette, compact mode, animations)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useModalStore"})," - Single-modal paradigm for component accessibility"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useNotificationStore"})," - Toast/notification queue with deduplication"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useHelpModeStore"})," - Help mode toggle (Simple/Technical)"]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"connection--auth-stores",children:"Connection & Auth Stores"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useConnectionStore"})," - Router connection state with WebSocket tracking"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useNetworkStore"})," - Network connectivity (online/offline detection)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useAuthStore"})," - JWT tokens, user sessions, token refresh with custom Date serialization"]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"router--domain-stores",children:"Router & Domain Stores"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useRouterStore"})," - Router discovery and management"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useDHCPUIStore"})," - DHCP UI state (filters, search, selection, wizard draft)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useServiceUIStore"})," - Service instance UI state (filters, search, selection, install wizard)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useMangleUIStore"})," - Mangle rules UI state (selected chain, expanded rules, filters)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useNATUIStore"})," - NAT rules UI state (selected chain, expanded rules, filters)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useRawUIStore"})," - RAW firewall rules UI state (selected chain, filters, dialogs)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"usePortKnockUIStore"})," - Port knocking UI state (tabs, filters, dialogs)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useRateLimitingUIStore"})," - Rate limiting UI state (tabs, filters, rule editor, statistics)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useFirewallLogUIStore"})," - Firewall log UI state (filters, auto-refresh, sort)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useAlertNotificationStore"})," - In-app alert notifications with persistence"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useAlertRuleTemplateUIStore"})," - Alert rule template UI state (filters, view mode, dialogs)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useInterfaceStatsStore"})," - Interface statistics monitoring preferences"]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"command--navigation-stores",children:"Command & Navigation Stores"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useCommandRegistry"})," - Command palette registry with search, ranking, usage tracking"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useShortcutRegistry"})," - Keyboard shortcuts with registration/execution"]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"advanced-stores",children:"Advanced Stores"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useHistoryStore"})," - Undo/redo history with command pattern (page vs global scope)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useDriftDetection"})," - Drift detection between configuration and deployment layers"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useChangeSetStore"})," - Atomic multi-resource operations with rollback support"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useA11yProvider"})," - Accessibility context (reduced motion, keyboard user, high contrast, announcements)"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"machine-inventory",children:"Machine Inventory"}),"\n",(0,r.jsx)(t.h3,{id:"core-machines",children:"Core Machines"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"createWizardMachine"})," - Multi-step wizard flows with validation and optional session recovery"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"createConfigPipelineMachine"})," - Safety-first configuration changes: Draft \u2192 Validate \u2192 Preview \u2192 Apply \u2192 Verify"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"createVPNConnectionMachine"})," - VPN lifecycle management with reconnection logic"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"createChangeSetMachine"})," - Atomic multi-resource operations with rollback support"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"createResourceLifecycleMachine"})," - Resource state machine (pending, active, editable, terminal states)"]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"persistence-utilities",children:"Persistence Utilities"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"persistMachineState"})," - Save machine context to localStorage"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"restoreMachineState"})," - Restore machine context from localStorage (with expiry)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"clearMachineState"})," - Clear saved session"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"cleanupStaleSessions"})," - Remove sessions older than 24 hours"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"hasSavedSession"})," - Check if valid session exists"]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"react-hooks",children:"React Hooks"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useWizard"})," - React hook for wizard machines with optional session recovery"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useConfigPipeline"})," - React hook for config pipeline with safety gates"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useResourceLifecycle"})," - React hook for resource lifecycle (with Apollo Client integration)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"useVPNConnection"})," - React hook for VPN connection management"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"selector-utilities",children:"Selector Utilities"}),"\n",(0,r.jsxs)(t.p,{children:["All stores use ",(0,r.jsx)(t.strong,{children:"selectors"})," for optimized re-renders:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"// \u2705 GOOD: Only re-renders when isAuthenticated changes\nconst isAuthenticated = useAuthStore(state => state.isAuthenticated);\n\n// \u2705 GOOD: Use shallow comparison for multiple fields\nimport { shallow } from 'zustand/shallow';\nconst { user, token } = useAuthStore(\n  state => ({ user: state.user, token: state.token }),\n  shallow\n);\n\n// \u274c BAD: Re-renders on ANY store change\nconst { user, token, isRefreshing } = useAuthStore();\n"})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Selector utilities available:"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"createMemoizedSelector"})," - Cache computed results based on dependency changes"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"createParameterizedSelector"})," - Parameterized selector factory with per-param caching"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"createCombinedSelector"})," - Combine multiple selectors with shallow comparison"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"selectResolvedTheme"}),", ",(0,r.jsx)(t.code,{children:"selectSidebarCollapsed"}),", ",(0,r.jsx)(t.code,{children:"selectNotifications"}),", etc. - Pre-built selectors"]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Source:"})," ",(0,r.jsx)(t.code,{children:"libs/state/stores/src/ui/selectors.ts"})]}),"\n",(0,r.jsx)(t.h2,{id:"decision-tree",children:"Decision Tree"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"Data from router/backend?\n  \u2193 Yes \u2192 Use Apollo Client (GraphQL queries/mutations/subscriptions)\n  \u2193 No\n        \u2193\nMulti-step workflow with side effects?\n  \u2193 Yes \u2192 Use XState Machine (wizard, config pipeline, VPN connection)\n  \u2193 No\n        \u2193\nForm-specific (validation, dirty tracking)?\n  \u2193 Yes \u2192 Use React Hook Form + Zod\n  \u2193 No\n        \u2193\nGlobal UI state (theme, sidebar, modal)?\n  \u2193 Yes \u2192 Use Zustand Store (with selectors)\n"})}),"\n",(0,r.jsx)(t.h2,{id:"documentation-structure",children:"Documentation Structure"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Document"}),(0,r.jsx)(t.th,{children:"Purpose"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"/docs/state/architecture",children:"Architecture"})})}),(0,r.jsx)(t.td,{children:"Four-layer model, Zustand patterns, XState v5 patterns, integration patterns"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"/docs/state/persistence",children:"Persistence"})})}),(0,r.jsx)(t.td,{children:"localStorage keys, custom storage handlers, Map serialization, hydration lifecycle"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"/docs/state/performance",children:"Performance"})})}),(0,r.jsx)(t.td,{children:"Selector patterns, memoization, re-render prevention, best practices"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"/docs/state/stores/auth",children:"Authentication Store"})})}),(0,r.jsx)(t.td,{children:"JWT tokens, user sessions, token refresh, security"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"/docs/state/stores/router",children:"Router Store"})})}),(0,r.jsx)(t.td,{children:"Router discovery, management, selection, config tracking"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"/docs/state/stores/hooks-utilities",children:"Hooks & Utilities"})})}),(0,r.jsx)(t.td,{children:"Route guards, token refresh, reconnection, error recovery"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"/docs/state/stores/overview",children:"Core Stores"})})}),(0,r.jsx)(t.td,{children:"Deep dive: UI, connection stores and their APIs"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"/docs/state/stores/overview",children:"Advanced Stores"})})}),(0,r.jsx)(t.td,{children:"Command registry, history, drift detection, change sets"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"/docs/state/guides/testing",children:"Testing Strategy"})})}),(0,r.jsx)(t.td,{children:"Unit tests, integration tests, testing patterns"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"/docs/state/machines/hooks-reference",children:"Machine Hooks Reference"})})}),(0,r.jsx)(t.td,{children:"useWizard, useConfigPipeline, useVPNConnection, useResourceLifecycle"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"/docs/state/stores/selectors-reference",children:"Advanced Selector API"})})}),(0,r.jsx)(t.td,{children:"Memoized selectors, parameterized selectors, combined selectors"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"/docs/state/machines/overview",children:"XState Machines"})})}),(0,r.jsx)(t.td,{children:"Wizard, config pipeline, VPN connection, resource lifecycle"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"/docs/state/integrations/apollo-integration",children:"Integration Patterns"})})}),(0,r.jsx)(t.td,{children:"Apollo Client + Zustand, XState + React, form integration"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"/docs/state/guides/quickstart",children:"Guides"})})}),(0,r.jsx)(t.td,{children:"Common patterns, troubleshooting, performance optimization"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"architecture-highlights",children:"Architecture Highlights"}),"\n",(0,r.jsx)(t.h3,{id:"zustand-pattern-persist-middleware",children:"Zustand Pattern: Persist Middleware"}),"\n",(0,r.jsxs)(t.p,{children:["Stores with localStorage persistence use the ",(0,r.jsx)(t.code,{children:"persist"})," middleware with custom config:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"export const useThemeStore = create<ThemeState & ThemeActions>()(\n  devtools(\n    persist(\n      (set, get) => ({ /* reducer logic */ }),\n      {\n        name: 'nasnet-theme',              // localStorage key\n        storage: createJSONStorage(() => localStorage),\n        partialize: (state) => ({ /* subset to persist */ }),\n      }\n    ),\n    { name: 'theme-store' }\n  )\n);\n"})}),"\n",(0,r.jsx)(t.h3,{id:"custom-storage-handlers",children:"Custom Storage Handlers"}),"\n",(0,r.jsx)(t.p,{children:"Some stores (auth, history, command-registry) use custom serialization:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Auth store"}),": Rehydrates ",(0,r.jsx)(t.code,{children:"Date"})," objects for ",(0,r.jsx)(t.code,{children:"tokenExpiry"})," and ",(0,r.jsx)(t.code,{children:"lastActivity"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"History store"}),": Converts functions to no-ops on rehydration (functions can't persist)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Command Registry"}),": Converts ",(0,r.jsx)(t.code,{children:"Map<string, number>"})," \u2194 ",(0,r.jsx)(t.code,{children:"Record<string, number>"})," for JSON serialization"]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Source:"})," ",(0,r.jsx)(t.code,{children:"libs/state/stores/src/auth/auth.store.ts"}),", ",(0,r.jsx)(t.code,{children:"libs/state/stores/src/history/history.store.ts"}),", ",(0,r.jsx)(t.code,{children:"libs/state/stores/src/command/command-registry.store.ts"})]}),"\n",(0,r.jsx)(t.h3,{id:"xstate-v5-pattern-actor-model",children:"XState v5 Pattern: Actor Model"}),"\n",(0,r.jsx)(t.p,{children:"Machines use XState v5 with the actor model for cleaner async handling:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"const machine = setup({\n  types: {\n    context: {} as WizardContext,\n    events: {} as WizardEvent,\n  },\n  actions: {\n    updateContext: assign({\n      field: ({ event }) => event.value,\n    }),\n  },\n}).createMachine({\n  // machine definition\n});\n"})}),"\n",(0,r.jsx)(t.h2,{id:"outside-react-access",children:"Outside React Access"}),"\n",(0,r.jsx)(t.p,{children:"All stores support access outside React components:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"// Get state without hook\nconst { token } = useAuthStore.getState();\n\n// Subscribe outside React\nconst unsubscribe = useAuthStore.subscribe(\n  (state) => state.isAuthenticated,\n  (isAuth) => console.log('Auth changed:', isAuth)\n);\n\n// Convenience functions\nimport { getAuthToken, isAuthenticated } from '@nasnet/state/stores';\nconst token = getAuthToken();  // Returns null if expired\n"})}),"\n",(0,r.jsx)(t.h2,{id:"redux-devtools-integration",children:"Redux DevTools Integration"}),"\n",(0,r.jsx)(t.p,{children:"All stores integrate with Redux DevTools (development mode only):"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Open Redux DevTools Chrome/Firefox extension"}),"\n",(0,r.jsx)(t.li,{children:'Select the store from the dropdown (e.g., "theme-store", "auth-store")'}),"\n",(0,r.jsx)(t.li,{children:"Inspect state, replay actions, time-travel debug"}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Note:"})," DevTools are disabled in production builds."]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Next Steps:"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Read ",(0,r.jsx)(t.a,{href:"/docs/state/architecture",children:"Architecture"})," to understand state flow and integration patterns"]}),"\n",(0,r.jsxs)(t.li,{children:["Read ",(0,r.jsx)(t.a,{href:"/docs/state/persistence",children:"Persistence"})," to see what's stored in localStorage"]}),"\n",(0,r.jsxs)(t.li,{children:["Read ",(0,r.jsx)(t.a,{href:"/docs/state/performance",children:"Performance"})," for selector patterns and re-render optimization"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},71184:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>c});var n=s(14041);const r={},i=n.createContext(r);function o(e){const t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);