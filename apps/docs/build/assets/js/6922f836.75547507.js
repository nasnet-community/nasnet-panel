"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[35117],{3655:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"sub-libraries/types","title":"Core Types Reference","description":"Complete documentation of all types exported from @nasnet/core/types. This library provides the complete type system for NasNetConnect, including the Universal State v2 model, resource management, and domain-specific types.","source":"@site/../../libs/core/docs/sub-libraries/types.md","sourceDirName":"sub-libraries","slug":"/sub-libraries/types","permalink":"/docs/core/sub-libraries/types","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../../libs/core/docs/sub-libraries/types.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Internationalization (i18n) Library Reference","permalink":"/docs/core/sub-libraries/i18n"},"next":{"title":"Core Utils Library Reference","permalink":"/docs/core/sub-libraries/utils"}}');var s=r(31085),a=r(71184);const o={},i="Core Types Reference",l={},c=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Resource Types (Universal State v2)",id:"resource-types-universal-state-v2",level:2},{value:"Core Resource Interface",id:"core-resource-interface",level:3},{value:"Resource Categories",id:"resource-categories",level:3},{value:"Resource Layers",id:"resource-layers",level:3},{value:"Resource List and Card Views",id:"resource-list-and-card-views",level:3},{value:"Resource References and Relationships",id:"resource-references-and-relationships",level:3},{value:"Layer Types (8-Layer Model)",id:"layer-types-8-layer-model",level:2},{value:"Layer 2: Validation Result",id:"layer-2-validation-result",level:3},{value:"Layer 3: Deployment State",id:"layer-3-deployment-state",level:3},{value:"Layer 4: Runtime State",id:"layer-4-runtime-state",level:3},{value:"Layer 5: Telemetry Data",id:"layer-5-telemetry-data",level:3},{value:"Layer 6: Resource Metadata",id:"layer-6-resource-metadata",level:3},{value:"Layer 8: Platform Info",id:"layer-8-platform-info",level:3},{value:"Lifecycle Types",id:"lifecycle-types",level:2},{value:"Resource Lifecycle States",id:"resource-lifecycle-states",level:3},{value:"Lifecycle Events and Transitions",id:"lifecycle-events-and-transitions",level:3},{value:"Lifecycle State Predicates",id:"lifecycle-state-predicates",level:3},{value:"Display Information",id:"display-information",level:3},{value:"Composite Resources",id:"composite-resources",level:2},{value:"Composite Resource Utility Functions",id:"composite-resource-utility-functions",level:3},{value:"Change Set Types",id:"change-set-types",level:2},{value:"Change Set Status and Operations",id:"change-set-status-and-operations",level:3},{value:"Change Set Items and Validation",id:"change-set-items-and-validation",level:3},{value:"Change Set Container",id:"change-set-container",level:3},{value:"Change Set Utility Functions",id:"change-set-utility-functions",level:3},{value:"API Types",id:"api-types",level:2},{value:"Request/Response Types",id:"requestresponse-types",level:3},{value:"Router Status and Information",id:"router-status-and-information",level:3},{value:"Configuration Operations",id:"configuration-operations",level:3},{value:"VPN Operations",id:"vpn-operations",level:3},{value:"Configuration Types",id:"configuration-types",level:2},{value:"Application Configuration",id:"application-configuration",level:3},{value:"Router Types",id:"router-types",level:2},{value:"Router Discovery",id:"router-discovery",level:3},{value:"Firewall Types",id:"firewall-types",level:2},{value:"Services Types",id:"services-types",level:2},{value:"Type Guards",id:"type-guards",level:2},{value:"Category Guards",id:"category-guards",level:3},{value:"Type-Specific Guards",id:"type-specific-guards",level:3},{value:"Layer Presence Guards",id:"layer-presence-guards",level:3},{value:"Composite Resource Guards",id:"composite-resource-guards",level:3},{value:"State Guards",id:"state-guards",level:3},{value:"Health Guards",id:"health-guards",level:3},{value:"Validation Guards",id:"validation-guards",level:3},{value:"Generic Object Guards",id:"generic-object-guards",level:3},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Creating and Validating a Resource",id:"creating-and-validating-a-resource",level:3},{value:"Working with Composite Resources",id:"working-with-composite-resources",level:3},{value:"Processing Change Sets",id:"processing-change-sets",level:3},{value:"Type Filtering and Guards",id:"type-filtering-and-guards",level:3},{value:"Related Documentation",id:"related-documentation",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"core-types-reference",children:"Core Types Reference"})}),"\n",(0,s.jsxs)(n.p,{children:["Complete documentation of all types exported from ",(0,s.jsx)(n.code,{children:"@nasnet/core/types"}),". This library provides the complete type system for NasNetConnect, including the Universal State v2 model, resource management, and domain-specific types."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Location:"})," ",(0,s.jsx)(n.code,{children:"libs/core/types/src/"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Import Path:"})," ",(0,s.jsx)(n.code,{children:"@nasnet/core/types"})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#resource-types-universal-state-v2",children:"Resource Types (Universal State v2)"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#layer-types-8-layer-model",children:"Layer Types (8-Layer Model)"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#lifecycle-types",children:"Lifecycle Types"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#composite-resources",children:"Composite Resources"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#change-set-types",children:"Change Set Types"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#api-types",children:"API Types"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#configuration-types",children:"Configuration Types"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#router-types",children:"Router Types"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#firewall-types",children:"Firewall Types"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#services-types",children:"Services Types"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#type-guards",children:"Type Guards"})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"resource-types-universal-state-v2",children:"Resource Types (Universal State v2)"}),"\n",(0,s.jsx)(n.h3,{id:"core-resource-interface",children:"Core Resource Interface"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"Resource<TConfig>"})," interface is the foundation of the Universal State v2 model. Every managed resource in NasNetConnect implements this interface with 8 independent layers."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface Resource<TConfig = unknown> {\n  // Identity\n  uuid: string;                    // Globally unique ULID identifier\n  id: string;                      // Scoped readable ID (e.g., 'vpn.wg.client:usa-vpn')\n  type: string;                    // Resource type (e.g., 'vpn.wireguard.client')\n  category: ResourceCategory;      // One of 6 categories\n\n  // 8-Layer Model\n  configuration: TConfig;          // Layer 1: User's desired config (mutable)\n  validation?: ValidationResult;   // Layer 2: Pre-flight check results\n  deployment?: DeploymentState;    // Layer 3: What's on router (after Apply-Confirm)\n  runtime?: RuntimeState;          // Layer 4: Live operational state (polled/streamed)\n  telemetry?: TelemetryData;       // Layer 5: Time-series metrics (historical)\n  metadata: ResourceMetadata;      // Layer 6: Lifecycle info, tags, ownership\n  relationships?: ResourceRelationships;  // Layer 7: Dependencies\n  platform?: PlatformInfo;         // Layer 8: Capabilities and field mappings\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"resource-categories",children:"Resource Categories"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type ResourceCategory =\n  | 'NETWORK'        // WAN links, LAN networks, VLANs, bridges, routing\n  | 'VPN'            // WireGuard, OpenVPN, IPsec\n  | 'INFRASTRUCTURE' // Certificates, NTP, DDNS\n  | 'APPLICATION'    // Port forwarding, game rules\n  | 'FEATURE'        // Marketplace features (Tor, AdGuard, sing-box)\n  | 'PLUGIN';        // Community extensions\n"})}),"\n",(0,s.jsx)(n.h3,{id:"resource-layers",children:"Resource Layers"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type ResourceLayer =\n  | 'CONFIGURATION'  // User's desired config\n  | 'VALIDATION'     // Pre-flight check results\n  | 'DEPLOYMENT'     // What's on router\n  | 'RUNTIME'        // Live operational state\n  | 'TELEMETRY'      // Time-series metrics\n  | 'METADATA'       // Lifecycle info\n  | 'RELATIONSHIPS'  // Dependencies\n  | 'PLATFORM';      // Capabilities\n"})}),"\n",(0,s.jsx)(n.h3,{id:"resource-list-and-card-views",children:"Resource List and Card Views"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface ResourceListItem {\n  uuid: string;\n  id: string;\n  type: string;\n  category: ResourceCategory;\n  readonly metadata: Pick<\n    ResourceMetadata,\n    'state' | 'tags' | 'updatedAt' | 'isFavorite'\n  >;\n  readonly runtime?: Pick<\n    RuntimeState,\n    'isRunning' | 'health' | 'lastUpdated'\n  > | null;\n}\n\ninterface ResourceCardData {\n  uuid: string;\n  id: string;\n  type: string;\n  category: ResourceCategory;\n  configuration: unknown;\n  readonly metadata: Pick<\n    ResourceMetadata,\n    'state' | 'version' | 'tags' | 'description' | 'isFavorite' | 'isPinned'\n  >;\n  readonly runtime?: Pick<\n    RuntimeState,\n    'isRunning' | 'health' | 'errorMessage' | 'activeConnections' | 'uptime'\n  > | null;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"resource-references-and-relationships",children:"Resource References and Relationships"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface ResourceReference {\n  readonly uuid: string;\n  readonly id: string;\n  readonly type: string;\n  readonly category: ResourceCategory;\n  readonly state: ResourceLifecycleState;\n}\n\ntype ResourceRelationshipType =\n  | 'DEPENDS_ON'     // Child depends on parent\n  | 'ROUTES_VIA'     // Traffic routes via this resource\n  | 'PARENT_CHILD'   // Parent-child hierarchy\n  | 'GROUP'          // Resources in the same group\n  | 'CUSTOM';        // Custom relationship\n\ninterface ResourceRelationshipEdge {\n  readonly from: string;        // Source resource UUID\n  readonly to: string;          // Target resource UUID\n  readonly type: ResourceRelationshipType;\n}\n\ninterface ResourceRelationships {\n  readonly dependsOn: readonly ResourceReference[];      // This depends on...\n  readonly dependents: readonly ResourceReference[];     // These depend on this\n  readonly routesVia?: ResourceReference | null;        // Routes traffic via...\n  readonly routedBy: readonly ResourceReference[];       // Traffic routed by...\n  readonly parent?: ResourceReference | null;           // Parent resource\n  readonly children: readonly ResourceReference[];       // Child resources\n  readonly custom?: unknown;                            // Domain-specific\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"layer-types-8-layer-model",children:"Layer Types (8-Layer Model)"}),"\n",(0,s.jsx)(n.h3,{id:"layer-2-validation-result",children:"Layer 2: Validation Result"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type ValidationStage =\n  | 'SCHEMA'        // Schema validation (Zod/GraphQL)\n  | 'SEMANTIC'      // Semantic validation (business rules)\n  | 'DEPENDENCY'    // Dependency validation (required resources exist)\n  | 'CONFLICT'      // Conflict detection (port/IP/route conflicts)\n  | 'PLATFORM'      // Platform validation (capability checks)\n  | 'QUOTA'         // Quota validation (resource limits)\n  | 'SIMULATION'    // Pre-flight simulation\n  | 'COMPLETE';     // All stages complete\n\ntype ValidationSeverity =\n  | 'ERROR'         // Blocks apply, must be fixed\n  | 'WARNING'       // Non-blocking, informational\n  | 'INFO';         // Informational notice\n\ninterface ValidationIssue {\n  readonly code: string;\n  readonly message: string;\n  readonly field?: string | null;          // e.g., \"config.ipAddress\"\n  readonly severity: ValidationSeverity;\n  readonly suggestedFix?: string | null;\n  readonly docsUrl?: string | null;\n}\n\ntype ConflictType =\n  | 'PORT'          // Port number conflict\n  | 'IP_ADDRESS'    // IP address conflict\n  | 'ROUTE'         // Route overlap\n  | 'INTERFACE'     // Interface conflict\n  | 'NAME'          // Name collision\n  | 'CONFIGURATION'; // Configuration incompatibility\n\ninterface ResourceConflict {\n  readonly type: ConflictType;\n  readonly conflictingResourceUuid: string;\n  readonly description: string;\n  readonly resolution?: string | null;\n}\n\ninterface DependencyStatus {\n  readonly resourceUuid: string;\n  readonly resourceType: string;\n  readonly isActive: boolean;\n  readonly state: ResourceLifecycleState;\n  readonly reason: string;\n}\n\ninterface ValidationResult {\n  readonly canApply: boolean;\n  readonly stage: ValidationStage;\n  readonly errors: readonly ValidationIssue[];\n  readonly warnings: readonly ValidationIssue[];\n  readonly conflicts: readonly ResourceConflict[];\n  readonly requiredDependencies: readonly DependencyStatus[];\n  readonly validatedAt: string;       // ISO 8601 timestamp\n  readonly validationDurationMs: number;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"layer-3-deployment-state",children:"Layer 3: Deployment State"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type DriftAction =\n  | 'REAPPLY'       // Re-apply configuration to router\n  | 'ACCEPT'        // Update configuration to match router\n  | 'REVIEW';       // Manual review required\n\ninterface DriftField {\n  readonly path: string;             // Dot-notation, e.g., \"config.ipAddress\"\n  readonly expected: unknown;\n  readonly actual: unknown;\n}\n\ninterface DriftInfo {\n  readonly detectedAt: string;       // ISO 8601 timestamp\n  readonly driftedFields: readonly DriftField[];\n  readonly suggestedAction: DriftAction;\n}\n\ninterface DeploymentState {\n  readonly routerResourceId?: string | null;\n  readonly appliedAt: string;        // ISO 8601 timestamp\n  readonly appliedBy?: string | null;\n  readonly routerVersion?: number | null;    // For optimistic locking\n  readonly generatedFields?: unknown;\n  readonly isInSync: boolean;\n  readonly drift?: DriftInfo | null;\n  readonly applyOperationId?: string | null;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"layer-4-runtime-state",children:"Layer 4: Runtime State"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type RuntimeHealth =\n  | 'HEALTHY'       // Operating normally\n  | 'WARNING'       // Running with warnings\n  | 'DEGRADED'      // Running but degraded\n  | 'CRITICAL'      // Critical state\n  | 'FAILED'        // Failed\n  | 'UNKNOWN';      // Unknown status\n\ninterface RuntimeMetrics {\n  readonly bytesIn?: number | null;\n  readonly bytesOut?: number | null;\n  readonly packetsIn?: number | null;\n  readonly packetsOut?: number | null;\n  readonly errors?: number | null;\n  readonly drops?: number | null;\n  readonly throughputIn?: number | null;   // Bytes/sec\n  readonly throughputOut?: number | null;  // Bytes/sec\n  readonly custom?: unknown;               // Vendor-specific\n}\n\ninterface RuntimeState {\n  readonly isRunning: boolean;\n  readonly health: RuntimeHealth;\n  readonly errorMessage?: string | null;\n  readonly metrics?: RuntimeMetrics | null;\n  readonly lastUpdated: string;          // ISO 8601 timestamp\n  readonly lastSuccessfulOperation?: string | null;\n  readonly activeConnections?: number | null;\n  readonly uptime?: string | null;       // ISO 8601 duration\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"layer-5-telemetry-data",children:"Layer 5: Telemetry Data"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface BandwidthDataPoint {\n  readonly timestamp: string;    // ISO 8601\n  readonly bytesIn: number;\n  readonly bytesOut: number;\n  readonly periodSeconds: number;\n}\n\ninterface UptimeDataPoint {\n  readonly timestamp: string;    // ISO 8601\n  readonly isUp: boolean;\n  readonly periodSeconds: number;\n}\n\ninterface HourlyStats {\n  readonly hour: string;         // ISO 8601\n  readonly totalBytesIn: number;\n  readonly totalBytesOut: number;\n  readonly uptimePercent: number;   // 0-100\n  readonly errorCount: number;\n}\n\ninterface DailyStats {\n  readonly date: string;         // UTC, ISO 8601\n  readonly totalBytesIn: number;\n  readonly totalBytesOut: number;\n  readonly uptimePercent: number;   // 0-100\n  readonly errorCount: number;\n  readonly peakThroughputIn: number;    // Bytes/sec\n  readonly peakThroughputOut: number;   // Bytes/sec\n}\n\ninterface TelemetryData {\n  readonly bandwidthHistory?: readonly BandwidthDataPoint[] | null;\n  readonly uptimeHistory?: readonly UptimeDataPoint[] | null;\n  readonly hourlyStats?: readonly HourlyStats[] | null;\n  readonly dailyStats?: readonly DailyStats[] | null;\n  readonly dataStartedAt?: string | null;\n  readonly lastUpdatedAt?: string | null;\n  readonly retentionDays: number;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"layer-6-resource-metadata",children:"Layer 6: Resource Metadata"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type ChangeType =\n  | 'CREATE'\n  | 'UPDATE'\n  | 'DELETE';\n\ninterface ChangeLogEntry {\n  readonly timestamp: string;\n  readonly user: string;\n  readonly changeType: ChangeType;\n  readonly changedFields: readonly string[];\n  readonly summary?: string | null;\n}\n\ninterface ResourceMetadata {\n  readonly createdAt: string;\n  readonly createdBy: string;\n  readonly updatedAt: string;\n  readonly updatedBy?: string | null;\n  readonly state: ResourceLifecycleState;\n  readonly version: number;           // For optimistic concurrency control\n  readonly tags: readonly string[];\n  readonly description?: string | null;\n  readonly isFavorite: boolean;\n  readonly isPinned: boolean;\n  readonly notes?: string | null;\n  readonly recentChanges?: readonly ChangeLogEntry[] | null;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"layer-8-platform-info",children:"Layer 8: Platform Info"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type RouterPlatform =\n  | 'MIKROTIK'\n  | 'OPENWRT'\n  | 'VYOS'\n  | 'GENERIC';\n\ntype CapabilityLevel =\n  | 'NONE'        // Not supported\n  | 'BASIC'       // Limited support\n  | 'ADVANCED'    // Full RouterOS native support\n  | 'FULL';       // Complete support with container features\n\ninterface PlatformCapabilities {\n  readonly isSupported: boolean;\n  readonly level: CapabilityLevel;\n  readonly minVersion?: string | null;\n  readonly requiredPackages?: readonly string[] | null;\n  readonly details?: unknown;\n}\n\ninterface PlatformLimitation {\n  readonly code: string;\n  readonly description: string;\n  readonly affectedFields?: readonly string[] | null;\n  readonly workaround?: string | null;\n}\n\ninterface PlatformFeature {\n  readonly id: string;\n  readonly name: string;\n  readonly enabled: boolean;\n  readonly description?: string | null;\n}\n\ninterface PlatformInfo {\n  readonly current: RouterPlatform;\n  readonly capabilities: PlatformCapabilities;\n  readonly fieldMappings?: unknown;\n  readonly limitations?: readonly PlatformLimitation[] | null;\n  readonly features?: readonly PlatformFeature[] | null;\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"lifecycle-types",children:"Lifecycle Types"}),"\n",(0,s.jsx)(n.h3,{id:"resource-lifecycle-states",children:"Resource Lifecycle States"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type ResourceLifecycleState =\n  | 'DRAFT'      // Initial creation, not yet validated\n  | 'VALIDATING' // Backend validation in progress\n  | 'VALID'      // Passed validation, ready to apply\n  | 'APPLYING'   // Being applied to router\n  | 'ACTIVE'     // Successfully applied and running\n  | 'DEGRADED'   // Running but with issues\n  | 'ERROR'      // Failed state (validation or apply)\n  | 'DEPRECATED' // Marked for removal\n  | 'ARCHIVED';  // Final state, no longer active\n"})}),"\n",(0,s.jsx)(n.h3,{id:"lifecycle-events-and-transitions",children:"Lifecycle Events and Transitions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type ResourceLifecycleEvent =\n  | 'VALIDATE'   // Start validation process\n  | 'APPLY'      // Apply resource to router\n  | 'CONFIRM'    // Confirm apply succeeded\n  | 'DEGRADE'    // Resource has degraded\n  | 'RECOVER'    // Recovered from degraded\n  | 'RETRY'      // Retry failed operation\n  | 'EDIT'       // Edit resource (go back to draft)\n  | 'DEPRECATE'  // Deprecate resource\n  | 'RESTORE'    // Restore deprecated resource\n  | 'ARCHIVE';   // Archive resource permanently\n\n// Valid transitions table\nconst LIFECYCLE_TRANSITIONS = {\n  DRAFT: { VALIDATE: VALIDATING },\n  VALIDATING: {},  // Transitions handled by validation result\n  VALID: { APPLY: APPLYING, EDIT: DRAFT },\n  APPLYING: {},    // Transitions handled by apply result\n  ACTIVE: { DEGRADE: DEGRADED, DEPRECATE: DEPRECATED, EDIT: DRAFT },\n  DEGRADED: { RECOVER: ACTIVE, DEPRECATE: DEPRECATED },\n  ERROR: { RETRY: VALIDATING, EDIT: DRAFT },\n  DEPRECATED: { ARCHIVE: ARCHIVED, RESTORE: ACTIVE },\n  ARCHIVED: {},    // Final state - no transitions\n};\n"})}),"\n",(0,s.jsx)(n.h3,{id:"lifecycle-state-predicates",children:"Lifecycle State Predicates"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// State categories\nconst ACTIVE_STATES = [ACTIVE, DEGRADED];           // Running on router\nconst EDITABLE_STATES = [DRAFT, VALID, ACTIVE, ERROR];\nconst PENDING_STATES = [VALIDATING, APPLYING];\nconst ERROR_STATES = [ERROR, DEGRADED];\nconst TERMINAL_STATES = [ARCHIVED];\n\n// Helper functions\nfunction isActiveOnRouter(state: ResourceLifecycleState): boolean;\nfunction isEditable(state: ResourceLifecycleState): boolean;\nfunction isPending(state: ResourceLifecycleState): boolean;\nfunction hasErrors(state: ResourceLifecycleState): boolean;\nfunction isTerminal(state: ResourceLifecycleState): boolean;\nfunction isValidTransition(currentState, event): boolean;\nfunction getNextState(currentState, event): ResourceLifecycleState | null;\nfunction getValidEvents(state): ResourceLifecycleEvent[];\n"})}),"\n",(0,s.jsx)(n.h3,{id:"display-information",children:"Display Information"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface StateDisplayInfo {\n  readonly label: string;          // e.g., \"Active\"\n  readonly description: string;    // e.g., \"Running on router\"\n  readonly color: 'gray' | 'blue' | 'green' | 'amber' | 'red';\n  readonly icon: 'draft' | 'spinner' | 'check' | 'warning' | 'error' | 'archive';\n  readonly showSpinner: boolean;\n}\n\nfunction getStateDisplayInfo(state: ResourceLifecycleState): StateDisplayInfo;\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"composite-resources",children:"Composite Resources"}),"\n",(0,s.jsx)(n.p,{children:"Composite resources aggregate a root resource with its sub-resources and relationship graph. Common patterns:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"WireGuard Server + Clients"}),"\n",(0,s.jsx)(n.li,{children:"LAN Network + DHCP Server + Leases"}),"\n",(0,s.jsx)(n.li,{children:"Bridge + Member Interfaces"}),"\n",(0,s.jsx)(n.li,{children:"Feature + Sub-resources"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface CompositeResource<TRoot extends Resource = Resource> {\n  readonly root: TRoot;\n  readonly children: readonly Resource[];\n  readonly relationships: readonly ResourceRelationshipEdge[];\n}\n\ninterface CompositeResourceStatus {\n  readonly totalCount: number;\n  readonly activeCount: number;\n  readonly errorCount: number;\n  readonly degradedCount: number;\n  readonly pendingCount: number;\n  readonly overallHealth: 'HEALTHY' | 'DEGRADED' | 'CRITICAL' | 'UNKNOWN';\n  readonly allRunning: boolean;\n  readonly hasDrift: boolean;\n  readonly isFullySynced: boolean;\n}\n\ninterface CompositeResourceNode {\n  readonly uuid: string;\n  readonly id: string;\n  readonly type: string;\n  readonly state: ResourceLifecycleState;\n  readonly isRunning: boolean;\n  readonly health: RuntimeState['health'];\n  readonly children: readonly CompositeResourceNode[];\n  readonly depth: number;\n}\n\ninterface DependencyOrder {\n  readonly roots: readonly string[];        // Resources with no dependencies\n  readonly ordered: readonly string[];       // Dependency sorted order\n  readonly circular: readonly string[];      // Circular dependencies\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"composite-resource-utility-functions",children:"Composite Resource Utility Functions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Building and tree operations\nfunction buildCompositeResource<TRoot extends Resource>(\n  root: TRoot,\n  subResources: Resource[]\n): CompositeResource<TRoot>;\n\nfunction resourceToReference(resource: Resource): ResourceReference;\nfunction buildResourceTree(composite: CompositeResource, maxDepth?: number): CompositeResourceNode;\nfunction flattenResourceTree(tree: CompositeResourceNode): CompositeResourceNode[];\nfunction findNodeInTree(tree: CompositeResourceNode, uuid: string): CompositeResourceNode | undefined;\n\n// Status aggregation\nfunction aggregateCompositeStatus(subResources: Resource[]): CompositeResourceStatus;\nfunction calculateHealthPercentage(status: CompositeResourceStatus): number;\n\n// Dependency resolution\nfunction resolveDependencyOrder(resources: Resource[]): DependencyOrder;\nfunction canSafelyDelete(\n  resource: Resource,\n  allResources: Resource[]\n): { readonly canDelete: boolean; readonly blockedBy: readonly ResourceReference[] };\n\n// Filtering and grouping\nfunction groupResourcesByType(resources: Resource[]): Map<string, Resource[]>;\nfunction groupResourcesByCategory(resources: Resource[]): Map<ResourceCategory, Resource[]>;\nfunction filterResourcesByState(resources: Resource[], states: ResourceLifecycleState[]): Resource[];\nfunction filterResourcesByHealth(resources: Resource[], health: RuntimeHealth[]): Resource[];\nfunction findDependents(resource: Resource, allResources: Resource[]): Resource[];\nfunction findDependencies(resource: Resource, allResources: Resource[]): Resource[];\n\n// Type guards\nfunction hasSubResources(resource: Resource): boolean;\nfunction isRootResource(resource: Resource): boolean;\nfunction isLeafResource(resource: Resource): boolean;\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"change-set-types",children:"Change Set Types"}),"\n",(0,s.jsx)(n.p,{children:"Change sets enable atomic multi-resource operations. All items in a change set either succeed together or rollback together."}),"\n",(0,s.jsx)(n.h3,{id:"change-set-status-and-operations",children:"Change Set Status and Operations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type ChangeSetStatus =\n  | 'DRAFT'           // Adding items, not yet validated\n  | 'VALIDATING'      // Running validation on all items\n  | 'READY'           // All items validated, ready to apply\n  | 'APPLYING'        // Applying resources in dependency order\n  | 'COMPLETED'       // All resources applied successfully\n  | 'FAILED'          // Apply failed, may have partial application\n  | 'ROLLING_BACK'    // Rolling back applied changes\n  | 'ROLLED_BACK'     // Rollback completed successfully\n  | 'PARTIAL_FAILURE' // Rollback partially failed\n  | 'CANCELLED';      // User cancelled the operation\n\ntype ChangeOperation =\n  | 'CREATE'          // Create a new resource\n  | 'UPDATE'          // Update an existing resource\n  | 'DELETE';         // Delete an existing resource\n\ntype ChangeSetItemStatus =\n  | 'PENDING'\n  | 'APPLYING'\n  | 'APPLIED'\n  | 'FAILED'\n  | 'ROLLED_BACK'\n  | 'ROLLBACK_FAILED'\n  | 'SKIPPED';        // Skipped due to dependency failure\n\ntype RollbackOperation =\n  | 'DELETE'          // Delete a created resource\n  | 'RESTORE'         // Restore a deleted resource\n  | 'REVERT';         // Revert an updated resource\n"})}),"\n",(0,s.jsx)(n.h3,{id:"change-set-items-and-validation",children:"Change Set Items and Validation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface ChangeSetItem<TConfig = Record<string, unknown>> {\n  readonly id: string;\n  readonly resourceType: string;\n  readonly resourceCategory: ResourceCategory;\n  readonly resourceUuid: string | null;    // null for create operations\n  readonly name: string;\n  readonly description?: string;\n  readonly operation: ChangeOperation;\n  readonly configuration: TConfig;\n  readonly previousState: TConfig | null;  // For rollback\n  readonly dependencies: readonly string[];\n  readonly status: ChangeSetItemStatus;\n  readonly error: string | null;\n  readonly applyStartedAt: Date | null;\n  readonly applyCompletedAt: Date | null;\n  readonly confirmedState: TConfig | null;\n  readonly applyOrder: number;\n}\n\ninterface RollbackStep<TConfig = Record<string, unknown>> {\n  readonly itemId: string;\n  readonly operation: RollbackOperation;\n  readonly restoreState: TConfig | null;\n  readonly resourceUuid: string | null;\n  readonly success: boolean;\n  readonly error: string | null;\n  readonly rollbackOrder: number;\n}\n\ninterface ChangeSetError {\n  readonly message: string;\n  readonly failedItemId: string;\n  readonly code?: string;\n  readonly partiallyAppliedItemIds: readonly string[];\n  readonly failedRollbackItemIds: readonly string[];\n  readonly requiresManualIntervention: boolean;\n  readonly stack?: string;   // Dev only\n}\n\ninterface ChangeSetValidationError {\n  readonly itemId: string;\n  readonly field: string;\n  readonly message: string;\n  readonly severity: 'error' | 'warning';\n  readonly code?: string;\n}\n\ninterface ChangeSetConflict {\n  readonly itemId1: string;\n  readonly itemId2OrResourceUuid: string;\n  readonly isExternalConflict: boolean;\n  readonly description: string;\n  readonly resolution?: string;\n}\n\ninterface ChangeSetValidationResult {\n  readonly canApply: boolean;\n  readonly errors: readonly ChangeSetValidationError[];\n  readonly warnings: readonly ChangeSetValidationError[];\n  readonly conflicts: readonly ChangeSetConflict[];\n  readonly missingDependencies: ReadonlyArray<{\n    readonly itemId: string;\n    readonly missingResourceType: string;\n    readonly missingResourceId: string;\n  }>;\n  readonly circularDependencies: ReadonlyArray<readonly string[]> | null;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"change-set-container",children:"Change Set Container"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface ChangeSet<TConfig = Record<string, unknown>> {\n  readonly id: string;           // ULID\n  readonly name: string;\n  readonly description?: string;\n  readonly routerId: string;\n  readonly items: readonly ChangeSetItem<TConfig>[];\n  readonly status: ChangeSetStatus;\n  readonly validation: ChangeSetValidationResult | null;\n  readonly rollbackPlan: readonly RollbackStep<TConfig>[];\n  readonly error: ChangeSetError | null;\n  readonly createdAt: Date;\n  readonly applyStartedAt: Date | null;\n  readonly completedAt: Date | null;\n  readonly createdBy?: string;\n  readonly source?: string;      // Originating wizard/feature\n  readonly version: number;      // For optimistic concurrency control\n}\n\ninterface ChangeSetSummary {\n  readonly id: string;\n  readonly name: string;\n  readonly status: ChangeSetStatus;\n  readonly operationCounts: {\n    readonly create: number;\n    readonly update: number;\n    readonly delete: number;\n  };\n  readonly totalItems: number;\n  readonly createdAt: Date;\n  readonly hasErrors: boolean;\n  readonly hasWarnings: boolean;\n}\n\ninterface ChangeSetProgressEvent {\n  readonly changeSetId: string;\n  readonly status: ChangeSetStatus;\n  readonly currentItem: {\n    readonly id: string;\n    readonly name: string;\n    readonly operation: ChangeOperation;\n    readonly status: ChangeSetItemStatus;\n  } | null;\n  readonly appliedCount: number;\n  readonly totalCount: number;\n  readonly progressPercent: number;\n  readonly estimatedRemainingMs: number | null;\n  readonly error: ChangeSetError | null;\n  readonly timestamp: Date;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"change-set-utility-functions",children:"Change Set Utility Functions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function isChangeSetPending(status: ChangeSetStatus): boolean;\nfunction isChangeSetProcessing(status: ChangeSetStatus): boolean;\nfunction isChangeSetFinal(status: ChangeSetStatus): boolean;\nfunction isChangeSetCancellable(status: ChangeSetStatus): boolean;\nfunction requiresManualIntervention(status: ChangeSetStatus): boolean;\nfunction getChangeSetStatusDisplayInfo(status: ChangeSetStatus): ChangeSetStatusDisplayInfo;\nfunction getOperationColor(operation: ChangeOperation): 'green' | 'amber' | 'red';\nfunction getOperationLabel(operation: ChangeOperation): string;\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"api-types",children:"API Types"}),"\n",(0,s.jsx)(n.h3,{id:"requestresponse-types",children:"Request/Response Types"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface ApiResponse<T> {\n  success: true;\n  data: T;\n  meta?: {\n    page?: number;\n    total?: number;\n    pageSize?: number;\n  };\n}\n\ninterface ApiError {\n  success: false;\n  error: {\n    code: string;\n    message: string;\n    details?: Record<string, unknown>;\n  };\n}\n\ntype ApiResult<T> = ApiResponse<T> | ApiError;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"router-status-and-information",children:"Router Status and Information"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'interface RouterStatusResponse {\n  isOnline: boolean;\n  uptime: number;                  // Seconds\n  cpuUsage: number;                // 0-100\n  memoryUsage: number;             // 0-100\n  diskUsage: number;               // 0-100\n  timestamp: Date;\n}\n\ninterface RouterInfoResponse {\n  model: string;                   // e.g., "CCR2216-1G-12XS"\n  routerOSVersion: string;         // e.g., "7.10.1"\n  architecture: string;            // e.g., "arm64"\n  serialNumber?: string;\n  firmwareVersion?: string;\n  hardwareRevision?: string;\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"configuration-operations",children:"Configuration Operations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface ConfigApplyRequest {\n  config: Record<string, unknown>;\n  dryRun?: boolean;                // Validate without applying\n}\n\ninterface ConfigApplyResponse {\n  success: boolean;\n  appliedAt: Date;\n  snapshotId?: string;             // For rollback\n  readonly changes: readonly string[];\n}\n\ninterface ConfigRollbackRequest {\n  snapshotId: string;\n}\n\ninterface ConfigRollbackResponse {\n  success: boolean;\n  rolledBackAt: Date;\n  previousConfig?: Record<string, unknown>;\n}\n\ninterface ConfigHistoryEntry {\n  id: string;\n  timestamp: Date;\n  action: 'apply' | 'rollback';\n  status: 'success' | 'failed' | 'rolled_back';\n  readonly changes?: readonly string[];\n  errorMessage?: string;\n  snapshotId?: string;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"vpn-operations",children:"VPN Operations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface VPNConnectRequest {\n  connectionId: string;\n}\n\ninterface VPNConnectResponse {\n  connectionId: string;\n  status: 'connected' | 'connecting' | 'error';\n  connectedAt?: Date;\n  error?: string;\n}\n\ninterface VPNListResponse {\n  readonly connections: ReadonlyArray<{\n    id: string;\n    name: string;\n    protocol: string;\n    status: 'connected' | 'disconnected' | 'connecting';\n    lastConnectedAt?: Date;\n  }>;\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"configuration-types",children:"Configuration Types"}),"\n",(0,s.jsx)(n.h3,{id:"application-configuration",children:"Application Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type ThemeMode = 'light' | 'dark' | 'system';\n\ninterface AppConfig {\n  api: {\n    baseUrl: string;\n    timeout: number;               // Milliseconds\n  };\n  ui: {\n    theme: ThemeMode;\n    language: string;              // e.g., 'en', 'es'\n  };\n  router: {\n    defaultPort: number;           // RouterOS API port\n    retryAttempts: number;\n    retryDelay: number;            // Milliseconds\n  };\n  features: {\n    isWireGuardVPNEnabled: boolean;\n    isDHCPMonitoringEnabled: boolean;\n    isFirewallViewerEnabled: boolean;\n    isSafetyPipelineEnabled: boolean;\n  };\n}\n\ninterface RouterConnectionConfig {\n  address: string;\n  port: number;\n  username: string;\n  password: string;\n  useTLS: boolean;\n  verifyCertificate: boolean;\n  timeout: number;                 // Milliseconds\n}\n\ninterface ApplicationState {\n  currentRouter?: RouterConnectionConfig;\n  readonly savedRouters: readonly RouterConnectionConfig[];\n  userPreferences: {\n    theme: ThemeMode;\n    language: string;\n    autoRefreshInterval: number;   // Milliseconds, 0 to disable\n  };\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"router-types",children:"Router Types"}),"\n",(0,s.jsx)(n.h3,{id:"router-discovery",children:"Router Discovery"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type RouterConnectionStatus =\n  | 'online'      // Reachable and authenticated\n  | 'offline'     // Previously connected, now unreachable\n  | 'unknown'     // Never connected or untested\n  | 'connecting'; // Authentication in progress\n\ntype RouterDiscoveryMethod =\n  | 'scan'        // Auto-discovered via network scan\n  | 'manual';     // Manually added by user\n\ninterface Router {\n  id: string;                          // UUID\n  ipAddress: string;\n  name?: string;\n  model?: string;                      // e.g., \"RB5009\"\n  routerOsVersion?: string;            // e.g., \"7.16\"\n  connectionStatus: RouterConnectionStatus;\n  lastConnected?: Date;\n  discoveryMethod: RouterDiscoveryMethod;\n  createdAt: Date;\n  macAddress?: string;\n}\n\ninterface RouterCredentials {\n  username: string;                    // Default: \"admin\"\n  password: string;\n}\n\ninterface ScanResult {\n  ipAddress: string;\n  isReachable: boolean;\n  responseTime?: number;               // Milliseconds\n  httpPort?: number;                   // 80 or 443\n  model?: string;\n  routerOsVersion?: string;\n  macAddress?: string;\n}\n\ninterface ScanProgress {\n  totalHosts: number;\n  scannedHosts: number;\n  foundRouters: number;\n  currentIp: string;\n  isScanning: boolean;\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"firewall-types",children:"Firewall Types"}),"\n",(0,s.jsxs)(n.p,{children:["Firewall types are partially shown here. See ",(0,s.jsx)(n.code,{children:"libs/core/types/src/firewall/"})," for complete firewall definitions including:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Filter Rules (input, forward, output chains)"}),"\n",(0,s.jsx)(n.li,{children:"NAT Rules (source/destination NAT)"}),"\n",(0,s.jsx)(n.li,{children:"Mangle Rules (connection marking, packet modification)"}),"\n",(0,s.jsx)(n.li,{children:"Raw Rules (connection tracking)"}),"\n",(0,s.jsx)(n.li,{children:"Service Ports (well-known port definitions)"}),"\n",(0,s.jsx)(n.li,{children:"Port Knocking (sequence-based access)"}),"\n",(0,s.jsx)(n.li,{children:"Rate Limiting (bandwidth throttling)"}),"\n",(0,s.jsx)(n.li,{children:"Templates (reusable rule sets)"}),"\n",(0,s.jsx)(n.li,{children:"Firewall Logs (traffic audit trail)"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type FilterChain = 'input' | 'forward' | 'output';\ntype FilterAction = 'accept' | 'drop' | 'reject' | 'log' | 'jump' | 'tarpit' | 'passthrough';\ntype FilterProtocol = 'tcp' | 'udp' | 'icmp' | 'ipv6-icmp' | 'all';\n\ninterface FilterRule {\n  // Identity and chain\n  id?: string;\n  chain: FilterChain;\n  action: FilterAction;\n  order?: number;\n\n  // Basic matchers\n  protocol?: FilterProtocol;\n  srcAddress?: string;               // IP or CIDR\n  dstAddress?: string;               // IP or CIDR\n  srcPort?: string;                  // Port or range\n  dstPort?: string;                  // Port or range\n\n  // Address lists\n  srcAddressList?: string;\n  dstAddressList?: string;\n\n  // ... additional fields (see firewall types file)\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"services-types",children:"Services Types"}),"\n",(0,s.jsx)(n.p,{children:"Services types include:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Schedule types (service scheduling/automation)"}),"\n",(0,s.jsx)(n.li,{children:"Update stage types (update progression)"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.code,{children:"libs/core/types/src/services/"})," for complete definitions."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"type-guards",children:"Type Guards"}),"\n",(0,s.jsx)(n.p,{children:"The library provides comprehensive type guards for runtime type checking."}),"\n",(0,s.jsx)(n.h3,{id:"category-guards",children:"Category Guards"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function isVPNResource(resource: Resource): boolean;\nfunction isNetworkResource(resource: Resource): boolean;\nfunction isInfrastructureResource(resource: Resource): boolean;\nfunction isApplicationResource(resource: Resource): boolean;\nfunction isFeatureResource(resource: Resource): boolean;\nfunction isPluginResource(resource: Resource): boolean;\nfunction isResourceCategory(resource: Resource, category: ResourceCategory): boolean;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"type-specific-guards",children:"Type-Specific Guards"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function isWireGuardClient(resource: Resource): boolean;\nfunction isWireGuardServer(resource: Resource): boolean;\nfunction isLANNetwork(resource: Resource): boolean;\nfunction isWANLink(resource: Resource): boolean;\nfunction isFirewallRule(resource: Resource): boolean;\nfunction isDHCPServer(resource: Resource): boolean;\nfunction isBridge(resource: Resource): boolean;\nfunction isRoute(resource: Resource): boolean;\nfunction hasResourceTypePrefix(resource: Resource, prefix: string): boolean;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"layer-presence-guards",children:"Layer Presence Guards"}),"\n",(0,s.jsx)(n.p,{children:"These are type predicates that narrow the resource type to include optional layers:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function hasValidation(resource: Resource): resource is Resource & { validation: ValidationResult };\nfunction hasDeployment(resource: Resource): resource is Resource & { deployment: DeploymentState };\nfunction hasRuntime(resource: Resource): resource is Resource & { runtime: RuntimeState };\nfunction hasTelemetry(resource: Resource): resource is Resource & { telemetry: TelemetryData };\nfunction hasRelationships(resource: Resource): resource is Resource & { relationships: ResourceRelationships };\nfunction hasPlatform(resource: Resource): resource is Resource & { platform: PlatformInfo };\n"})}),"\n",(0,s.jsx)(n.h3,{id:"composite-resource-guards",children:"Composite Resource Guards"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function isCompositeResource(value: unknown): value is CompositeResource;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"state-guards",children:"State Guards"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Specific states\nfunction isDraft(resource: Resource): boolean;\nfunction isValidating(resource: Resource): boolean;\nfunction isValid(resource: Resource): boolean;\nfunction isApplying(resource: Resource): boolean;\nfunction isActive(resource: Resource): boolean;\nfunction isDegraded(resource: Resource): boolean;\nfunction isError(resource: Resource): boolean;\nfunction isDeprecated(resource: Resource): boolean;\nfunction isArchived(resource: Resource): boolean;\n\n// Generic\nfunction isInState(resource: Resource, state: ResourceLifecycleState): boolean;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"health-guards",children:"Health Guards"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function isHealthy(resource: Resource): boolean;\nfunction isRunning(resource: Resource): boolean;\nfunction hasDrift(resource: Resource): boolean;\nfunction isInSync(resource: Resource): boolean;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"validation-guards",children:"Validation Guards"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function canApply(resource: Resource): boolean;\nfunction hasValidationErrors(resource: Resource): boolean;\nfunction hasValidationWarnings(resource: Resource): boolean;\nfunction hasConflicts(resource: Resource): boolean;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"generic-object-guards",children:"Generic Object Guards"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function isResource(value: unknown): value is Resource;\nfunction isResourceMetadata(value: unknown): value is ResourceMetadata;\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,s.jsx)(n.h3,{id:"creating-and-validating-a-resource",children:"Creating and Validating a Resource"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import type { Resource } from '@nasnet/core/types';\nimport { hasValidation, canApply } from '@nasnet/core/types';\n\nasync function configureResource(resource: Resource<VPNConfig>) {\n  // Check if validation data is available\n  if (hasValidation(resource)) {\n    if (!canApply(resource)) {\n      console.error('Resource has validation errors:', resource.validation.errors);\n      return;\n    }\n  }\n\n  // Safe to apply\n  await applyResource(resource);\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"working-with-composite-resources",children:"Working with Composite Resources"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { buildCompositeResource, aggregateCompositeStatus } from '@nasnet/core/types';\n\nasync function manageWireGuardServer(server: Resource, clients: Resource[]) {\n  const composite = buildCompositeResource(server, clients);\n  const status = aggregateCompositeStatus(clients);\n\n  if (status.overallHealth === 'CRITICAL') {\n    console.warn('Some clients are unhealthy');\n  }\n\n  console.log(`Health: ${status.activeCount}/${status.totalCount} active`);\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"processing-change-sets",children:"Processing Change Sets"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import type { ChangeSet, ChangeSetStatus } from '@nasnet/core/types';\nimport { isChangeSetProcessing, isChangeSetFinal } from '@nasnet/core/types';\n\nfunction handleChangeSetUpdate(changeSet: ChangeSet) {\n  if (isChangeSetProcessing(changeSet.status)) {\n    showProgressSpinner();\n  } else if (isChangeSetFinal(changeSet.status)) {\n    showResults();\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"type-filtering-and-guards",children:"Type Filtering and Guards"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { isVPNResource, isActive, filterResourcesByState } from '@nasnet/core/types';\n\nfunction getActiveVPNResources(resources: Resource[]) {\n  return resources\n    .filter(isVPNResource)\n    .filter(isActive);\n}\n\n// Or using the functional filter\nfunction getAllActiveResources(resources: Resource[]) {\n  return filterResourcesByState(resources, ['ACTIVE']);\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Universal State v2:"})," See ",(0,s.jsx)(n.code,{children:"Docs/architecture/data-architecture.md"})," for the complete 8-layer model design"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ADR-012:"})," See ",(0,s.jsx)(n.code,{children:"Docs/architecture/adrs/012-universal-state-v2.md"})," for architecture decision record"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"GraphQL Contracts:"})," See ",(0,s.jsx)(n.code,{children:"Docs/architecture/api-contracts.md"})," for GraphQL schema patterns"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Change Sets:"})," See feature requirements for atomic multi-resource operations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type Validation:"})," Zod schemas are co-located with type definitions (",(0,s.jsx)(n.code,{children:".ts"})," files)"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"@nasnet/core/types"})," library provides:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Universal State v2 Model"})," - 8-layer resource architecture for complete state management"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type Safety"})," - Comprehensive TypeScript types for all domains"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type Guards"})," - Runtime validation predicates for safe type narrowing"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Lifecycle Management"})," - Complete state machine with valid transitions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Relationship Modeling"})," - Rich dependency and relationship types"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Change Sets"})," - Atomic multi-resource operations with rollback"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Domain-Specific Types"})," - Router, firewall, VPN, DHCP, and service types"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"API Contracts"})," - Request/response types for backend communication"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"All types are immutable (readonly) where appropriate, strictly typed, and designed for frontend-backend type safety across GraphQL and REST APIs."})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},71184:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>i});var t=r(14041);const s={},a=t.createContext(s);function o(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);