"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[26463],{63268:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"forms-validation/network-validators","title":"Network Validators","description":"File: libs/core/forms/src/network-validators.ts","source":"@site/../connect/docs/forms-validation/network-validators.md","sourceDirName":"forms-validation","slug":"/forms-validation/network-validators","permalink":"/docs/frontend/forms-validation/network-validators","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../connect/docs/forms-validation/network-validators.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Form Utilities","permalink":"/docs/frontend/forms-validation/form-utilities"},"next":{"title":"Forms and Validation Overview","permalink":"/docs/frontend/forms-validation/overview"}}');var r=i(31085),d=i(71184);const s={},l="Network Validators",t={},c=[{value:"Import",id:"import",level:2},{value:"IP Address Validators",id:"ip-address-validators",level:2},{value:"<code>ipv4</code>",id:"ipv4",level:3},{value:"<code>ipv6</code>",id:"ipv6",level:3},{value:"<code>ipAddress</code>",id:"ipaddress",level:3},{value:"<code>privateIp</code>",id:"privateip",level:3},{value:"<code>publicIp</code>",id:"publicip",level:3},{value:"<code>multicastIp</code>",id:"multicastip",level:3},{value:"<code>loopbackIp</code>",id:"loopbackip",level:3},{value:"CIDR / Subnet Validators",id:"cidr--subnet-validators",level:2},{value:"<code>cidr</code>",id:"cidr",level:3},{value:"<code>cidr6</code>",id:"cidr6",level:3},{value:"<code>subnetMask</code>",id:"subnetmask",level:3},{value:"IP Range and Port Validators",id:"ip-range-and-port-validators",level:2},{value:"<code>ipRange</code>",id:"iprange",level:3},{value:"<code>ipWithPort</code>",id:"ipwithport",level:3},{value:"<code>port</code>",id:"port",level:3},{value:"<code>portString</code>",id:"portstring",level:3},{value:"<code>portRange</code>",id:"portrange",level:3},{value:"<code>multiPort</code>",id:"multiport",level:3},{value:"Network Identifier Validators",id:"network-identifier-validators",level:2},{value:"<code>mac</code>",id:"mac",level:3},{value:"<code>hostname</code>",id:"hostname",level:3},{value:"<code>domain</code>",id:"domain",level:3},{value:"<code>vlanId</code>",id:"vlanid",level:3},{value:"<code>vlanIdString</code>",id:"vlanidstring",level:3},{value:"MikroTik-Specific Validators",id:"mikrotik-specific-validators",level:2},{value:"<code>interfaceName</code>",id:"interfacename",level:3},{value:"<code>comment</code>",id:"comment",level:3},{value:"<code>duration</code>",id:"duration",level:3},{value:"<code>bandwidth</code>",id:"bandwidth",level:3},{value:"<code>wgKey</code>",id:"wgkey",level:3},{value:"Complete Validator Collection",id:"complete-validator-collection",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"network-validators",children:"Network Validators"})}),"\n",(0,r.jsxs)(n.p,{children:["File: ",(0,r.jsx)(n.code,{children:"libs/core/forms/src/network-validators.ts"})]}),"\n",(0,r.jsxs)(n.p,{children:["All network-specific Zod schemas live in one file and are available under ",(0,r.jsx)(n.code,{children:"@nasnet/core/forms/network-validators"}),". They are used directly in form schemas and by GraphQL codegen for input type validation."]}),"\n",(0,r.jsx)(n.h2,{id:"import",children:"Import"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Import individual validators\nimport { ipv4, cidr, port, mac, wgKey } from '@nasnet/core/forms/network-validators';\n\n// Or import the collection object\nimport { networkValidators } from '@nasnet/core/forms/network-validators';\n\nconst schema = z.object({\n  address: networkValidators.ipv4,\n  subnet: networkValidators.cidr,\n  port: networkValidators.port,\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ip-address-validators",children:"IP Address Validators"}),"\n",(0,r.jsx)(n.h3,{id:"ipv4",children:(0,r.jsx)(n.code,{children:"ipv4"})}),"\n",(0,r.jsx)(n.p,{children:"IPv4 address with octet range checking. Rejects leading zeros."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export const ipv4 = z.string().refine(...)\n  // message: 'Invalid IPv4 address (format: 192.168.1.1)'\n\nipv4.parse('192.168.1.1');    // Valid\nipv4.parse('10.0.0.1');       // Valid\nipv4.parse('256.1.1.1');      // Invalid - octet > 255\nipv4.parse('192.168.001.1');  // Invalid - leading zero\nipv4.parse('192.168.1');      // Invalid - missing octet\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ipv6",children:(0,r.jsx)(n.code,{children:"ipv6"})}),"\n",(0,r.jsx)(n.p,{children:"IPv6 address using Zod's built-in IP validation."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export const ipv6 = z.string().ip({ version: 'v6' })\n\nipv6.parse('2001:db8::1');  // Valid\nipv6.parse('::1');          // Valid (loopback)\nipv6.parse('192.168.1.1'); // Invalid - IPv4\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ipaddress",children:(0,r.jsx)(n.code,{children:"ipAddress"})}),"\n",(0,r.jsx)(n.p,{children:"Accepts either IPv4 or IPv6."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export const ipAddress = z.union([ipv4, ipv6])\n"})}),"\n",(0,r.jsx)(n.h3,{id:"privateip",children:(0,r.jsx)(n.code,{children:"privateIp"})}),"\n",(0,r.jsxs)(n.p,{children:["Validates RFC 1918 private ranges: ",(0,r.jsx)(n.code,{children:"10.0.0.0/8"}),", ",(0,r.jsx)(n.code,{children:"172.16.0.0/12"}),", ",(0,r.jsx)(n.code,{children:"192.168.0.0/16"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"privateIp.parse('192.168.1.1');  // Valid\nprivateIp.parse('10.0.0.1');     // Valid\nprivateIp.parse('8.8.8.8');      // Invalid - public IP\n"})}),"\n",(0,r.jsx)(n.h3,{id:"publicip",children:(0,r.jsx)(n.code,{children:"publicIp"})}),"\n",(0,r.jsx)(n.p,{children:"Validates that the IP is NOT private, loopback, link-local, multicast, or reserved."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"publicIp.parse('8.8.8.8');      // Valid\npublicIp.parse('1.1.1.1');      // Valid\npublicIp.parse('192.168.1.1'); // Invalid - private\npublicIp.parse('127.0.0.1');   // Invalid - loopback\n"})}),"\n",(0,r.jsx)(n.h3,{id:"multicastip",children:(0,r.jsx)(n.code,{children:"multicastIp"})}),"\n",(0,r.jsxs)(n.p,{children:["Multicast range: ",(0,r.jsx)(n.code,{children:"224.0.0.0 \u2013 239.255.255.255"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"loopbackip",children:(0,r.jsx)(n.code,{children:"loopbackIp"})}),"\n",(0,r.jsxs)(n.p,{children:["Loopback range: ",(0,r.jsx)(n.code,{children:"127.0.0.0/8"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"cidr--subnet-validators",children:"CIDR / Subnet Validators"}),"\n",(0,r.jsx)(n.h3,{id:"cidr",children:(0,r.jsx)(n.code,{children:"cidr"})}),"\n",(0,r.jsx)(n.p,{children:"IPv4 CIDR notation. Validates both the IP address and the prefix length (0\u201332)."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"cidr.parse('192.168.1.0/24');  // Valid\ncidr.parse('10.0.0.0/8');      // Valid\ncidr.parse('192.168.1.0');     // Invalid - no prefix\ncidr.parse('192.168.1.0/33'); // Invalid - prefix > 32\ncidr.parse('256.1.1.1/24');   // Invalid - octet out of range\n"})}),"\n",(0,r.jsx)(n.h3,{id:"cidr6",children:(0,r.jsx)(n.code,{children:"cidr6"})}),"\n",(0,r.jsx)(n.p,{children:"IPv6 CIDR notation. Prefix length 0\u2013128."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"cidr6.parse('2001:db8::/32');  // Valid\ncidr6.parse('::1/128');        // Valid\ncidr6.parse('2001:db8::/129'); // Invalid - prefix > 128\n"})}),"\n",(0,r.jsx)(n.h3,{id:"subnetmask",children:(0,r.jsx)(n.code,{children:"subnetMask"})}),"\n",(0,r.jsx)(n.p,{children:"Dotted decimal subnet mask. Validates that the binary representation has contiguous 1-bits followed by contiguous 0-bits."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"subnetMask.parse('255.255.255.0');  // Valid (/24)\nsubnetMask.parse('255.255.128.0'); // Valid (/17)\nsubnetMask.parse('255.0.255.0');   // Invalid - non-contiguous\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ip-range-and-port-validators",children:"IP Range and Port Validators"}),"\n",(0,r.jsx)(n.h3,{id:"iprange",children:(0,r.jsx)(n.code,{children:"ipRange"})}),"\n",(0,r.jsxs)(n.p,{children:["Two IPv4 addresses separated by ",(0,r.jsx)(n.code,{children:"-"}),". Validates that start \u2264 end."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"ipRange.parse('192.168.1.1-192.168.1.100');  // Valid\nipRange.parse('10.0.0.1-10.0.0.254');        // Valid\nipRange.parse('192.168.1.100-192.168.1.1'); // Invalid - start > end\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ipwithport",children:(0,r.jsx)(n.code,{children:"ipWithPort"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"<IPv4>:<port>"})," format."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"ipWithPort.parse('192.168.1.1:8080');  // Valid\nipWithPort.parse('10.0.0.1:443');      // Valid\nipWithPort.parse('192.168.1.1');       // Invalid - no port\n"})}),"\n",(0,r.jsx)(n.h3,{id:"port",children:(0,r.jsx)(n.code,{children:"port"})}),"\n",(0,r.jsx)(n.p,{children:"Integer port number 1\u201365535."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export const port = z.number().int().min(1).max(65535)\n\nport.parse(8080);   // Valid\nport.parse(0);      // Invalid\nport.parse(65536);  // Invalid\n"})}),"\n",(0,r.jsx)(n.h3,{id:"portstring",children:(0,r.jsx)(n.code,{children:"portString"})}),"\n",(0,r.jsx)(n.p,{children:"Port number as a string (for text input fields)."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"portString.parse('8080');  // Valid\nportString.parse('443');   // Valid\nportString.parse('abc');   // Invalid\n"})}),"\n",(0,r.jsx)(n.h3,{id:"portrange",children:(0,r.jsx)(n.code,{children:"portRange"})}),"\n",(0,r.jsxs)(n.p,{children:["Single port or range (",(0,r.jsx)(n.code,{children:"80-443"}),"). Validates both bounds are 1\u201365535 and start \u2264 end."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"portRange.parse('8080');    // Valid - single port\nportRange.parse('80-443');  // Valid - range\nportRange.parse('443-80');  // Invalid - start > end\n"})}),"\n",(0,r.jsx)(n.h3,{id:"multiport",children:(0,r.jsx)(n.code,{children:"multiPort"})}),"\n",(0,r.jsx)(n.p,{children:"Comma-separated list of port numbers."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"multiPort.parse('80,443,8080');   // Valid\nmultiPort.parse('22, 80, 443');  // Valid (spaces allowed)\nmultiPort.parse('80,65536');     // Invalid\n"})}),"\n",(0,r.jsx)(n.h2,{id:"network-identifier-validators",children:"Network Identifier Validators"}),"\n",(0,r.jsx)(n.h3,{id:"mac",children:(0,r.jsx)(n.code,{children:"mac"})}),"\n",(0,r.jsxs)(n.p,{children:["MAC address with ",(0,r.jsx)(n.code,{children:":"})," or ",(0,r.jsx)(n.code,{children:"-"})," separators."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"mac.parse('00:1A:2B:3C:4D:5E');  // Valid (colon)\nmac.parse('00-1A-2B-3C-4D-5E');  // Valid (hyphen)\nmac.parse('001A2B3C4D5E');       // Invalid - no separators\n"})}),"\n",(0,r.jsx)(n.h3,{id:"hostname",children:(0,r.jsx)(n.code,{children:"hostname"})}),"\n",(0,r.jsx)(n.p,{children:"RFC 1123 hostname. Letters, digits, hyphens, dots. Must start and end with alphanumeric. Max 253 characters."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"hostname.parse('router');            // Valid\nhostname.parse('my-router.local');  // Valid\nhostname.parse('-invalid');         // Invalid - starts with hyphen\n"})}),"\n",(0,r.jsx)(n.h3,{id:"domain",children:(0,r.jsx)(n.code,{children:"domain"})}),"\n",(0,r.jsx)(n.p,{children:"Domain name with at least one dot and a TLD of 2+ alphabetic characters."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"domain.parse('example.com');        // Valid\ndomain.parse('sub.example.co.uk'); // Valid\ndomain.parse('localhost');          // Invalid - no TLD\n"})}),"\n",(0,r.jsx)(n.h3,{id:"vlanid",children:(0,r.jsx)(n.code,{children:"vlanId"})}),"\n",(0,r.jsx)(n.p,{children:"VLAN ID per IEEE 802.1Q: 1\u20134094 (excludes reserved 0 and 4095)."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"vlanId.parse(100);   // Valid\nvlanId.parse(4094);  // Valid (maximum)\nvlanId.parse(0);     // Invalid - reserved\nvlanId.parse(4095);  // Invalid - reserved\n"})}),"\n",(0,r.jsx)(n.h3,{id:"vlanidstring",children:(0,r.jsx)(n.code,{children:"vlanIdString"})}),"\n",(0,r.jsx)(n.p,{children:"VLAN ID as string input."}),"\n",(0,r.jsx)(n.h2,{id:"mikrotik-specific-validators",children:"MikroTik-Specific Validators"}),"\n",(0,r.jsx)(n.h3,{id:"interfacename",children:(0,r.jsx)(n.code,{children:"interfaceName"})}),"\n",(0,r.jsxs)(n.p,{children:["MikroTik interface name. Characters: ",(0,r.jsx)(n.code,{children:"[a-zA-Z0-9._-]"}),". Must start with alphanumeric. Max 64 characters."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interfaceName.parse('ether1');    // Valid\ninterfaceName.parse('vlan.100'); // Valid\ninterfaceName.parse('bridge-1'); // Valid\ninterfaceName.parse('_invalid'); // Invalid - starts with underscore\n"})}),"\n",(0,r.jsx)(n.h3,{id:"comment",children:(0,r.jsx)(n.code,{children:"comment"})}),"\n",(0,r.jsx)(n.p,{children:"MikroTik comment field. Max 255 characters. No control characters (ASCII 0\u201331 and 127)."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"comment.parse('This is a valid comment');  // Valid\ncomment.parse('a'.repeat(256));            // Invalid - too long\ncomment.parse('has\\nnewline');             // Invalid - control char\n"})}),"\n",(0,r.jsx)(n.h3,{id:"duration",children:(0,r.jsx)(n.code,{children:"duration"})}),"\n",(0,r.jsxs)(n.p,{children:["RouterOS duration string. Numeric value followed by ",(0,r.jsx)(n.code,{children:"s"}),", ",(0,r.jsx)(n.code,{children:"m"}),", ",(0,r.jsx)(n.code,{children:"h"}),", or ",(0,r.jsx)(n.code,{children:"d"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"duration.parse('30s');  // Valid - 30 seconds\nduration.parse('5m');   // Valid - 5 minutes\nduration.parse('2h');   // Valid - 2 hours\nduration.parse('7d');   // Valid - 7 days\nduration.parse('30');   // Invalid - missing unit\n"})}),"\n",(0,r.jsx)(n.h3,{id:"bandwidth",children:(0,r.jsx)(n.code,{children:"bandwidth"})}),"\n",(0,r.jsxs)(n.p,{children:["RouterOS bandwidth string. Numeric with optional unit ",(0,r.jsx)(n.code,{children:"k"}),", ",(0,r.jsx)(n.code,{children:"m"}),", ",(0,r.jsx)(n.code,{children:"g"})," (case-insensitive)."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"bandwidth.parse('100');   // Valid - 100 bps\nbandwidth.parse('100k');  // Valid - 100 Kbps\nbandwidth.parse('1.5m'); // Valid - 1.5 Mbps\nbandwidth.parse('1G');   // Valid - 1 Gbps\nbandwidth.parse('100x'); // Invalid - unknown unit\n"})}),"\n",(0,r.jsx)(n.h3,{id:"wgkey",children:(0,r.jsx)(n.code,{children:"wgKey"})}),"\n",(0,r.jsxs)(n.p,{children:["WireGuard public/private key. Base64 encoded, exactly 44 characters ending with ",(0,r.jsx)(n.code,{children:"="}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"wgKey.parse('jI6DYlg34+z6Q+q6d8YB5ibQwQAawamJBcht5xF24mE=');  // Valid\nwgKey.parse('AAAA');                                             // Invalid - too short\nwgKey.parse('jI6DYlg34+z6Q+q6d8YB5ibQwQAawamJBcht5xF24mE');   // Invalid - missing =\n"})}),"\n",(0,r.jsx)(n.h2,{id:"complete-validator-collection",children:"Complete Validator Collection"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"networkValidators"})," object exports all validators for convenient bulk import:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { networkValidators } from '@nasnet/core/forms/network-validators';\n\nconst { ipv4, ipv6, ipAddress, mac, cidr, cidr6, port, portString,\n        portRange, multiPort, vlanId, vlanIdString, wgKey, hostname,\n        domain, interfaceName, comment, duration, bandwidth,\n        subnetMask, ipWithPort, ipRange, privateIp, publicIp,\n        multicastIp, loopbackIp } = networkValidators;\n"})})]})}function p(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},71184:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>l});var a=i(14041);const r={},d=a.createContext(r);function s(e){const n=a.useContext(d);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(d.Provider,{value:n},e.children)}}}]);