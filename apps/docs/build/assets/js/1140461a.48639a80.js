"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[40233],{71184:(e,r,n)=>{n.d(r,{R:()=>d,x:()=>c});var s=n(14041);const t={},i=s.createContext(t);function d(e){const r=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),s.createElement(i.Provider,{value:r},e.children)}},91391:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"index","title":"NasNet Backend \u2014 Master Index","description":"A Go service that manages MikroTik routers, orchestrates downloadable network features, and","source":"@site/../backend/docs/index.md","sourceDirName":".","slug":"/","permalink":"/docs/backend/","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../backend/docs/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"GraphQL API Layer","permalink":"/docs/backend/graphql-api"},"next":{"title":"Network Services","permalink":"/docs/backend/network-services"}}');var t=n(31085),i=n(71184);const d={},c="NasNet Backend \u2014 Master Index",l={},a=[{value:"System Map",id:"system-map",level:2},{value:"Package Dependency Diagram",id:"package-dependency-diagram",level:2},{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Getting Started &amp; Architecture",id:"getting-started--architecture",level:3},{value:"Core Systems",id:"core-systems",level:3},{value:"Infrastructure",id:"infrastructure",level:3},{value:"Internal Systems (Phase 2)",id:"internal-systems-phase-2",level:3},{value:"Operational",id:"operational",level:3},{value:"Flow Diagrams",id:"flow-diagrams",level:3},{value:"Glossary",id:"glossary",level:2},{value:"Reading Paths",id:"reading-paths",level:2},{value:"New Backend Developer",id:"new-backend-developer",level:3},{value:"Frontend Developer (GraphQL consumer)",id:"frontend-developer-graphql-consumer",level:3},{value:"Ops / Deployment",id:"ops--deployment",level:3},{value:"Feature / Plugin Developer",id:"feature--plugin-developer",level:3},{value:"Router Integration Developer",id:"router-integration-developer",level:3},{value:"Cross-References Format",id:"cross-references-format",level:2}];function o(e){const r={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"nasnet-backend--master-index",children:"NasNet Backend \u2014 Master Index"})}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsx)(r.p,{children:"A Go service that manages MikroTik routers, orchestrates downloadable network features, and\nexposes a unified GraphQL API \u2014 all from a single container running on the router itself."}),"\n"]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"system-map",children:"System Map"}),"\n",(0,t.jsx)(r.mermaid,{value:'flowchart TD\n    subgraph Server["HTTP Server (Echo v4)<br/>Middleware: RequestID, Auth, CORS<br/>:80 prod | :8080 dev"]\n        REST["REST Handlers<br/>\u2022 /scan<br/>\u2022 /proxy<br/>\u2022 /batch<br/>\u2022 /oui"]\n    end\n\n    subgraph GraphQL["GraphQL Layer<br/>schema/ \u2192 graph/generated.go \u2192 graph/resolver/<br/>DataLoaders \xb7 Directives \xb7 Complexity Calculator"]\n    end\n\n    subgraph Services["Internal Services"]\n        A["auth"]\n        B["scanner"]\n        C["capability/detector"]\n        D["router"]\n        E["vif"]\n        F["orchestrator"]\n        G["alerts"]\n        H["features"]\n        I["provisioning"]\n        J["firewall"]\n        K["dns"]\n        L["notifications"]\n        M["config/generator"]\n        N["isolation/verifier"]\n        O["services/* 10+<br/>wan/vpn/monitoring"]\n    end\n\n    subgraph Infrastructure["Infrastructure Layer"]\n        P["Event Bus<br/>Watermill"]\n        Q["SQLite DB<br/>ent ORM"]\n        R["Router Adapter<br/>SSH/REST/Telnet"]\n        S["Connection Pool<br/>Circuit Breaker"]\n        T["apperrors/logger/zap"]\n        U["Translator<br/>field map/parsers"]\n    end\n\n    REST --\x3e|REST /api/*| REST\n    Server --\x3e|GraphQL| GraphQL\n    GraphQL --\x3e|Service calls| Services\n    Services --\x3e Infrastructure\n    R <--\x3e|translates| U\n\n    style Server fill:#e3f2fd\n    style GraphQL fill:#f3e5f5\n    style Services fill:#e8f5e9\n    style Infrastructure fill:#fff3e0'}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"package-dependency-diagram",children:"Package Dependency Diagram"}),"\n",(0,t.jsx)(r.mermaid,{value:'flowchart TD\n    Main["cmd/nnc<br/>entry point"]\n\n    Bootstrap["internal/bootstrap<br/>Wires everything together"]\n    Server["internal/server<br/>Echo HTTP server<br/>middleware, static serving"]\n    Database["internal/database"]\n    Events["internal/events"]\n    Auth["internal/auth"]\n    Alerts["internal/alerts"]\n    VIF["internal/vif"]\n    Orchestrator["internal/orchestrator/*"]\n    OrchIsolation["internal/orchestrator/isolation<br/>Process isolation verifier"]\n    Features["internal/features"]\n    Storage["internal/storage"]\n    Config["internal/config<br/>Config generation registry<br/>6 service generators"]\n    Services["internal/services<br/>10+ router sub-services<br/>WAN, VPN, monitoring, etc."]\n\n    GraphQL["graph/resolver<br/>GraphQL resolvers"]\n    GraphQLServices["internal/services<br/>domain services"]\n\n    Router["internal/router<br/>MikroTik protocol adapters"]\n    Connection["internal/connection<br/>Pool, CircuitBreaker<br/>reconnection"]\n    Translator["internal/translator<br/>Field mapping, type parsers<br/>formatters"]\n    Capability["internal/capability<br/>Router hardware/software<br/>detection"]\n\n    Errors["internal/apperrors<br/>Error types, presenter<br/>redactor"]\n    Logger["internal/logger<br/>Structured zap logging"]\n    Network["internal/network<br/>Port registry<br/>VLAN allocator"]\n    Health["internal/common/health<br/>Liveness/readiness probes"]\n    Ent["generated/ent<br/>Type-safe DB access<br/>generated"]\n\n    Main --\x3e Bootstrap\n    Bootstrap --\x3e Server\n    Bootstrap --\x3e Database\n    Bootstrap --\x3e Events\n    Bootstrap --\x3e Auth\n    Bootstrap --\x3e Alerts\n    Bootstrap --\x3e VIF\n    Bootstrap --\x3e Orchestrator\n    Orchestrator --\x3e OrchIsolation\n    Bootstrap --\x3e Features\n    Bootstrap --\x3e Storage\n    Bootstrap --\x3e Config\n    Bootstrap --\x3e Services\n\n    Main --\x3e GraphQL\n    GraphQL --\x3e GraphQLServices\n\n    Main --\x3e Router\n    Router --\x3e Connection\n    Router --\x3e Translator\n    Router --\x3e Capability\n\n    Main --\x3e Errors\n    Main --\x3e Logger\n    Main --\x3e Network\n    Main --\x3e Health\n    Main --\x3e Ent\n\n    Services -.->|widely used| Errors\n    Services -.->|widely used| Logger\n    Ent -.->|widely imported| Services\n\n    style Bootstrap fill:#fff3e0\n    style Main fill:#e8f5e9\n    style Errors fill:#ffebee\n    style Logger fill:#ffebee\n    style Ent fill:#e0f2f1'}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Key rules:"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"internal/*"})," never imports ",(0,t.jsx)(r.code,{children:"cmd/*"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"graph/resolver"})," imports ",(0,t.jsx)(r.code,{children:"internal/*"})," only (not ",(0,t.jsx)(r.code,{children:"cmd/*"}),")"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"internal/bootstrap"})," is the only package allowed to import everything"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"generated/ent"})," is imported widely (it is a pure data layer)"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"internal/apperrors"})," + ",(0,t.jsx)(r.code,{children:"internal/logger"})," are imported widely (cross-cutting)"]}),"\n"]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,t.jsx)(r.h3,{id:"getting-started--architecture",children:"Getting Started & Architecture"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Document"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/getting-started",children:"getting-started.md"})}),(0,t.jsx)(r.td,{children:"Dev environment, build tags, common commands"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/application-bootstrap",children:"application-bootstrap.md"})}),(0,t.jsx)(r.td,{children:"Boot sequence, service wiring, shutdown"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/graphql-api",children:"graphql-api.md"})}),(0,t.jsx)(r.td,{children:"Schema-first GraphQL, resolvers, directives"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/router-communication",children:"router-communication.md"})}),(0,t.jsx)(r.td,{children:"MikroTik adapters (SSH/REST/API/Telnet)"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/event-system",children:"event-system.md"})}),(0,t.jsx)(r.td,{children:"Watermill event bus, publishers, subscribers"})]})]})]}),"\n",(0,t.jsx)(r.h3,{id:"core-systems",children:"Core Systems"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Document"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/service-orchestrator",children:"service-orchestrator.md"})}),(0,t.jsx)(r.td,{children:"Feature lifecycle, ProcessSupervisor, boot sequence"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/virtual-interface-factory",children:"virtual-interface-factory.md"})}),(0,t.jsx)(r.td,{children:"VIF, VLAN allocator, kill switch, ingress"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/provisioning-engine",children:"provisioning-engine.md"})}),(0,t.jsx)(r.td,{children:"8-phase provisioning with rollback"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/alert-system",children:"alert-system.md"})}),(0,t.jsx)(r.td,{children:"Alert rules, escalation, digest, channels"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/feature-marketplace",children:"feature-marketplace.md"})}),(0,t.jsx)(r.td,{children:"Download, verify, install features"})]})]})]}),"\n",(0,t.jsx)(r.h3,{id:"infrastructure",children:"Infrastructure"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Document"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/data-layer",children:"data-layer.md"})}),(0,t.jsx)(r.td,{children:"SQLite, ent ORM, repositories, migrations"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/security",children:"security.md"})}),(0,t.jsx)(r.td,{children:"Auth, JWT, encryption, middleware"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/network-services",children:"network-services.md"})}),(0,t.jsx)(r.td,{children:"Firewall, DNS, scanner, diagnostics"})]})]})]}),"\n",(0,t.jsx)(r.h3,{id:"internal-systems-phase-2",children:"Internal Systems (Phase 2)"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Document"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/error-handling",children:"error-handling.md"})}),(0,t.jsx)(r.td,{children:"Error types, presenter, redactor, structured logging (zap)"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/connection-management",children:"connection-management.md"})}),(0,t.jsx)(r.td,{children:"Connection pool, circuit breaker, reconnection, capability detection"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/translator-layer",children:"translator-layer.md"})}),(0,t.jsx)(r.td,{children:"Field mapping, type parsers, SSH response translation, formatters"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/validation-pipeline",children:"validation-pipeline.md"})}),(0,t.jsx)(r.td,{children:"Multi-domain validation (config, router, scanner, manifest)"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/config-generation",children:"config-generation.md"})}),(0,t.jsx)(r.td,{children:"Config registry, 6 service generators (Tor/sing-box/Xray/MTProxy/Psiphon/AdGuard)"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/process-isolation",children:"process-isolation.md"})}),(0,t.jsx)(r.td,{children:"Isolation verifier, HTTP server, middleware stack, health probes"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/router-services",children:"router-services.md"})}),(0,t.jsx)(r.td,{children:"10+ router sub-services, port registry, VLAN allocator"})]})]})]}),"\n",(0,t.jsx)(r.h3,{id:"operational",children:"Operational"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Document"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsx)(r.tbody,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/build-and-deploy",children:"build-and-deploy.md"})}),(0,t.jsxs)(r.td,{children:["5-stage Dockerfile, multi-arch, UPX, ",(0,t.jsx)(r.code,{children:"<10MB"})," image, runtime tuning"]})]})})]}),"\n",(0,t.jsx)(r.h3,{id:"flow-diagrams",children:"Flow Diagrams"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Document"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/flows/service-installation-flow",children:"flows/service-installation-flow.md"})}),(0,t.jsx)(r.td,{children:"End-to-end feature installation"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/flows/router-connection-flow",children:"flows/router-connection-flow.md"})}),(0,t.jsx)(r.td,{children:"Router connect/disconnect lifecycle"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/flows/alert-lifecycle-flow",children:"flows/alert-lifecycle-flow.md"})}),(0,t.jsx)(r.td,{children:"Alert creation through delivery"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/flows/config-provisioning-flow",children:"flows/config-provisioning-flow.md"})}),(0,t.jsx)(r.td,{children:"Config apply with rollback"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/flows/device-routing-chain-flow",children:"flows/device-routing-chain-flow.md"})}),(0,t.jsx)(r.td,{children:"PBR chain routing decisions"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/flows/service-update-flow",children:"flows/service-update-flow.md"})}),(0,t.jsx)(r.td,{children:"Feature binary update sequence"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"/docs/backend/flows/graphql-request-lifecycle",children:"flows/graphql-request-lifecycle.md"})}),(0,t.jsx)(r.td,{children:"Full request path: HTTP \u2192 middleware \u2192 GraphQL \u2192 router \u2192 response"})]})]})]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"glossary",children:"Glossary"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Term"}),(0,t.jsx)(r.th,{children:"Definition"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"VIF"})}),(0,t.jsx)(r.td,{children:"Virtual Interface Factory \u2014 the subsystem that creates VLAN-isolated network interfaces on the MikroTik router for each running service instance"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"PBR"})}),(0,t.jsx)(r.td,{children:"Policy-Based Routing \u2014 routing rules that direct traffic from specific sources through specific chains (e.g., Tor, Xray), implemented via MikroTik mangle + routing tables"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Feature"})}),(0,t.jsx)(r.td,{children:"A downloadable network service (Tor, sing-box, Xray-core, MTProxy, Psiphon, AdGuard Home) described by a manifest file"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Service Instance"})}),(0,t.jsx)(r.td,{children:"A running instance of a Feature \u2014 one Feature can have multiple Instances with different configs"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Changeset"})}),(0,t.jsx)(r.td,{children:"A set of pending router configuration changes batched for atomic apply/rollback"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Kill Switch"})}),(0,t.jsx)(r.td,{children:"An isolation mechanism that drops all traffic from a service instance if its primary tunnel fails, preventing data leaks"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Boot Sequence"})}),(0,t.jsx)(r.td,{children:"The ordered startup of auto-start service instances after system reboot, respecting dependency ordering"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"ent"})}),(0,t.jsxs)(r.td,{children:["The type-safe Go ORM used for SQLite access, with schema defined in ",(0,t.jsx)(r.code,{children:"internal/ent-schema/schema/"})," and generated code in ",(0,t.jsx)(r.code,{children:"generated/ent/"})]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"gqlgen"})}),(0,t.jsxs)(r.td,{children:["Code-generation tool that turns ",(0,t.jsx)(r.code,{children:"schema/*.graphql"})," files into Go resolver interfaces and a full GraphQL server"]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"EventBus"})}),(0,t.jsx)(r.td,{children:"The Watermill-based publish/subscribe bus used for decoupled communication between internal services"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Resolver"})}),(0,t.jsx)(r.td,{children:"A gqlgen GraphQL resolver function that executes business logic for a query, mutation, or subscription field"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Adapter"})}),(0,t.jsxs)(r.td,{children:["A hexagonal architecture adapter that translates between the domain port interface and an external technology (e.g., ",(0,t.jsx)(r.code,{children:"MikroTikSSHAdapter"})," implements ",(0,t.jsx)(r.code,{children:"RouterPort"}),")"]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Port"})}),(0,t.jsxs)(r.td,{children:["A hexagonal architecture interface that defines how the domain interacts with external services (e.g., ",(0,t.jsx)(r.code,{children:"RouterPort"}),", ",(0,t.jsx)(r.code,{children:"PathResolverPort"}),")"]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"DataLoader"})}),(0,t.jsx)(r.td,{children:"A batching + caching mechanism (graph-gophers/dataloader) that prevents N+1 queries in GraphQL resolvers"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"ProcessSupervisor"})}),(0,t.jsx)(r.td,{children:"The component that spawns, monitors, and auto-restarts OS-level processes for service instances"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"MockAdapter"})}),(0,t.jsxs)(r.td,{children:["The current placeholder ",(0,t.jsx)(r.code,{children:"router.MockAdapter"})," used during development while ",(0,t.jsx)(r.code,{children:"ClientFactory"})," is being implemented"]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"RuntimeConfig"})}),(0,t.jsxs)(r.td,{children:["Go runtime tuning: ",(0,t.jsx)(r.code,{children:"GOMAXPROCS=1"}),", ",(0,t.jsx)(r.code,{children:"GCPercent=10"}),", ",(0,t.jsx)(r.code,{children:"MemoryLimit=32MB"})," \u2014 tuned for ",(0,t.jsx)(r.code,{children:"<50MB"})," RAM constraint"]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"CircuitBreaker"})}),(0,t.jsx)(r.td,{children:"A gobreaker-based resilience pattern that opens after consecutive failures, preventing cascading errors to a router connection"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"ConnectionPool"})}),(0,t.jsx)(r.td,{children:"Thread-safe map of active router connections keyed by router ID, with optional size limits and bulk close"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Translator"})}),(0,t.jsx)(r.td,{children:"The field mapping layer that converts between GraphQL camelCase field names and RouterOS kebab-case properties, with type parsing"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"FieldMappingRegistry"})}),(0,t.jsx)(r.td,{children:"Bidirectional lookup table mapping GraphQL field names to RouterOS property names for each resource path"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"ConfigGenerator"})}),(0,t.jsx)(r.td,{children:"Interface implemented by each service (Tor, sing-box, etc.) to produce service-specific configuration files from validated inputs"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"IsolationVerifier"})}),(0,t.jsx)(r.td,{children:"4-layer verification system ensuring services run with proper IP binding, network namespace, and UID separation"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"PortRegistry"})}),(0,t.jsx)(r.td,{children:"Allocation service that manages TCP/UDP port assignments for service instances, preventing conflicts with reserved system ports"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"VLANAllocator"})}),(0,t.jsx)(r.td,{children:"IEEE 802.1Q VLAN ID pool manager with automatic orphan reclaim, used by VIF to isolate service network traffic"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"CapabilityDetector"})}),(0,t.jsx)(r.td,{children:"5-step detection pipeline that probes router hardware, software, container support, and version feature gates"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"ErrorPresenter"})}),(0,t.jsx)(r.td,{children:"gqlgen hook that transforms internal errors into structured GraphQL error responses with redaction and suggestions"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"UPX"})}),(0,t.jsx)(r.td,{children:"Ultimate Packer for eXecutables \u2014 used to compress the Go binary from ~20MB to ~5MB in the Docker build"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"FallbackChain"})}),(0,t.jsx)(r.td,{children:"Ordered list of router protocol adapters (SSH \u2192 REST \u2192 API \u2192 Telnet) tried sequentially until one succeeds"})]})]})]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"reading-paths",children:"Reading Paths"}),"\n",(0,t.jsx)(r.h3,{id:"new-backend-developer",children:"New Backend Developer"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/getting-started",children:"getting-started.md"})," \u2014 Set up your environment"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/application-bootstrap",children:"application-bootstrap.md"})," \u2014 Understand how the app starts"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/graphql-api",children:"graphql-api.md"})," \u2014 Learn how resolvers work"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/error-handling",children:"error-handling.md"})," \u2014 Error types, logging, and error presentation"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/data-layer",children:"data-layer.md"})," \u2014 Understand ent ORM patterns"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/event-system",children:"event-system.md"})," \u2014 Learn event-driven patterns"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/flows/graphql-request-lifecycle",children:"flows/graphql-request-lifecycle.md"})," \u2014 Trace a full\nrequest end-to-end"]}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"frontend-developer-graphql-consumer",children:"Frontend Developer (GraphQL consumer)"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/graphql-api",children:"graphql-api.md"})," \u2014 Schema design and conventions"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/flows/graphql-request-lifecycle",children:"flows/graphql-request-lifecycle.md"})," \u2014 Full request\nlifecycle"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/flows/router-connection-flow",children:"flows/router-connection-flow.md"})," \u2014 Connection lifecycle"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/flows/alert-lifecycle-flow",children:"flows/alert-lifecycle-flow.md"})," \u2014 Alert subscriptions"]}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"ops--deployment",children:"Ops / Deployment"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/build-and-deploy",children:"build-and-deploy.md"})," \u2014 Docker build, multi-arch, image size"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/getting-started",children:"getting-started.md"})," \u2014 Build commands and dev setup"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/application-bootstrap",children:"application-bootstrap.md"})," \u2014 Environment variables"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/process-isolation",children:"process-isolation.md"})," \u2014 HTTP server, health probes, middleware"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/security",children:"security.md"})," \u2014 Auth and encryption setup"]}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"feature--plugin-developer",children:"Feature / Plugin Developer"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/feature-marketplace",children:"feature-marketplace.md"})," \u2014 Manifest format"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/config-generation",children:"config-generation.md"})," \u2014 Config generators per service"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/validation-pipeline",children:"validation-pipeline.md"})," \u2014 Validation rules for configs and\nmanifests"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/service-orchestrator",children:"service-orchestrator.md"})," \u2014 Lifecycle hooks"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/virtual-interface-factory",children:"virtual-interface-factory.md"})," \u2014 VIF and isolation"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/flows/service-installation-flow",children:"flows/service-installation-flow.md"})," \u2014 Install\nsequence"]}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"router-integration-developer",children:"Router Integration Developer"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/router-communication",children:"router-communication.md"})," \u2014 Protocol adapters"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/connection-management",children:"connection-management.md"})," \u2014 Pool, circuit breaker,\nreconnection"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/translator-layer",children:"translator-layer.md"})," \u2014 Field mapping and response parsing"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/backend/router-services",children:"router-services.md"})," \u2014 Service layer above RouterPort"]}),"\n"]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"cross-references-format",children:"Cross-References Format"}),"\n",(0,t.jsx)(r.p,{children:"Throughout these docs, cross-references use this format:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"[See: graphql-api.md \xa7Resolvers]\n[See: service-orchestrator.md \xa7ProcessSupervisor]\n"})}),"\n",(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"\xa7Section"})," fragment links to the named heading within the target document."]})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);