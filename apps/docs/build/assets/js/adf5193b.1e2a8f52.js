"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[80446],{57882:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"cross-cutting-features/router-connection","title":"Router Connection","description":"The router connection system handles discovering routers on the network, validating credentials, establishing connections, and maintaining them over time with heartbeat monitoring and automatic reconnection.","source":"@site/../connect/docs/cross-cutting-features/router-connection.md","sourceDirName":"cross-cutting-features","slug":"/cross-cutting-features/router-connection","permalink":"/docs/frontend/cross-cutting-features/router-connection","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../connect/docs/cross-cutting-features/router-connection.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Drift Detection Feature","permalink":"/docs/frontend/cross-cutting-features/drift-detection-feature"},"next":{"title":"Service Marketplace","permalink":"/docs/frontend/cross-cutting-features/service-marketplace"}}');var r=t(31085),o=t(71184);const c={},i="Router Connection",l={},a=[{value:"Router Discovery",id:"router-discovery",level:2},{value:"Automatic: Network Scanning",id:"automatic-network-scanning",level:3},{value:"Manual: Direct Entry",id:"manual-direct-entry",level:3},{value:"Router List",id:"router-list",level:3},{value:"Credential Flow",id:"credential-flow",level:2},{value:"Credential Validation",id:"credential-validation",level:3},{value:"Connection State Store",id:"connection-state-store",level:2},{value:"State Shape",id:"state-shape",level:3},{value:"Persistence",id:"persistence",level:3},{value:"Key Actions",id:"key-actions",level:3},{value:"Selector Usage (Performance Critical)",id:"selector-usage-performance-critical",level:3},{value:"WebSocket Lifecycle",id:"websocket-lifecycle",level:2},{value:"Heartbeat Monitoring",id:"heartbeat-monitoring",level:2},{value:"Connection Status Toast",id:"connection-status-toast",level:2},{value:"Reconnection Strategy",id:"reconnection-strategy",level:2},{value:"Protocol Selection",id:"protocol-selection",level:2},{value:"Connection Status Indicators",id:"connection-status-indicators",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"router-connection",children:"Router Connection"})}),"\n",(0,r.jsx)(n.p,{children:"The router connection system handles discovering routers on the network, validating credentials, establishing connections, and maintaining them over time with heartbeat monitoring and automatic reconnection."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key files:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"libs/features/router-discovery/src/"})," \u2014 discovery UI components and services"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"libs/state/stores/src/connection/connection.store.ts"})," \u2014 connection state (Zustand)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"libs/state/stores/src/router/router.store.ts"})," \u2014 router list and metadata"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"apps/connect/src/app/hooks/useConnectionHeartbeat.ts"})," \u2014 heartbeat monitoring"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"apps/connect/src/app/hooks/useConnectionToast.tsx"})," \u2014 connection status toasts"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"libs/api-client/queries/src/discovery/useTestConnection.ts"})," \u2014 credential validation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"libs/api-client/core/"})," \u2014 Apollo client with auth links"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Cross-references:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["See ",(0,r.jsx)(n.code,{children:"../state-management/zustand-stores.md"})," for store patterns"]}),"\n",(0,r.jsxs)(n.li,{children:["See ",(0,r.jsx)(n.code,{children:"../data-fetching/graphql-hooks.md"})," for Apollo client setup"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"router-discovery",children:"Router Discovery"}),"\n",(0,r.jsx)(n.p,{children:"Before connecting to a router, users must find it. There are two methods:"}),"\n",(0,r.jsx)(n.h3,{id:"automatic-network-scanning",children:"Automatic: Network Scanning"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"libs/features/router-discovery/src/components/NetworkScanner.tsx"})}),"\n",(0,r.jsx)(n.p,{children:"Scans a subnet to find MikroTik routers:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface NetworkScannerProps {\n  onScanComplete?: (results: ScanResult[]) => void;\n  onRouterSelect?: (result: ScanResult) => void;\n  defaultSubnet?: string;\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"The scanner:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Validates the subnet string via ",(0,r.jsx)(n.code,{children:"validateSubnet()"})]}),"\n",(0,r.jsxs)(n.li,{children:["Gets the default subnet via ",(0,r.jsx)(n.code,{children:"getDefaultSubnet()"})," (from browser network info or fallback to ",(0,r.jsx)(n.code,{children:"192.168.88.0/24"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["Calls ",(0,r.jsx)(n.code,{children:"startNetworkScan(subnet)"})," from ",(0,r.jsx)(n.code,{children:"scanService"})]}),"\n",(0,r.jsx)(n.li,{children:"The backend scans the subnet by sending ARP/ICMP probes and checking for RouterOS API on port 8728"}),"\n",(0,r.jsxs)(n.li,{children:["Returns ",(0,r.jsx)(n.code,{children:"ScanResult[]"})," with IP address, MAC, hostname, and RouterOS version when detected"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Progress is shown with animated feedback (",(0,r.jsx)(n.code,{children:"framer-motion"}),") during the scan, with a cancel button."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface ScanResult {\n  ipAddress: string;\n  macAddress?: string;\n  hostname?: string;\n  routerOsVersion?: string;\n  isReachable: boolean;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"manual-direct-entry",children:"Manual: Direct Entry"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"libs/features/router-discovery/src/components/ManualRouterEntry.tsx"})}),"\n",(0,r.jsx)(n.p,{children:"For routers on a different subnet or when scanning isn't possible:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface ManualRouterEntryProps {\n  onRouterAdd?: (ipAddress: string) => void;\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Validates the IP address format before submitting."}),"\n",(0,r.jsx)(n.h3,{id:"router-list",children:"Router List"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"libs/features/router-discovery/src/components/RouterList.tsx"})}),"\n",(0,r.jsx)(n.p,{children:"Displays discovered/saved routers with connection status indicator. Used on the router selection page."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"libs/features/router-discovery/src/components/RouterCard.tsx"})}),"\n",(0,r.jsx)(n.p,{children:"Per-router card showing:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Router IP and hostname"}),"\n",(0,r.jsx)(n.li,{children:"RouterOS version (if discovered)"}),"\n",(0,r.jsx)(n.li,{children:"Connection status badge (connected/disconnected)"}),"\n",(0,r.jsx)(n.li,{children:"Last connected timestamp"}),"\n",(0,r.jsx)(n.li,{children:"Connect button"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"credential-flow",children:"Credential Flow"}),"\n",(0,r.jsx)(n.p,{children:"After selecting a router (discovered or manually entered), the user enters credentials."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"libs/features/router-discovery/src/components/CredentialDialog.tsx"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface CredentialDialogProps {\n  isOpen: boolean;\n  routerIp: string;\n  routerName?: string;\n  isValidating?: boolean;\n  validationError?: string;\n  onSubmit?: (credentials: RouterCredentials, saveCredentials: boolean) => void;\n  onCancel?: () => void;\n  initialCredentials?: RouterCredentials;\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Default credentials auto-fill from ",(0,r.jsx)(n.code,{children:"DEFAULT_CREDENTIALS"})," (username: ",(0,r.jsx)(n.code,{children:"admin"}),", password: empty string) \u2014 the MikroTik factory default."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"saveCredentials"})," flag controls whether credentials are stored in the router store for future connections."]}),"\n",(0,r.jsx)(n.h3,{id:"credential-validation",children:"Credential Validation"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"libs/api-client/queries/src/discovery/useTestConnection.ts"})}),"\n",(0,r.jsx)(n.p,{children:"Uses React Query (not Apollo) for the credential validation mutation:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const testConnection = useTestConnection();\n\ntestConnection.mutate(\n  { ipAddress: '192.168.88.1', credentials: { username: 'admin', password: '' } },\n  {\n    onSuccess: (result) => {\n      if (result.isValid) {\n        // result.routerInfo.identity \u2014 router name\n        // result.routerInfo.version  \u2014 RouterOS version\n        proceed();\n      } else {\n        setError(result.error); // 'Invalid credentials', 'Connection refused', etc.\n      }\n    },\n  }\n);\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The validation calls the backend which attempts to connect to the RouterOS API (",(0,r.jsx)(n.code,{children:"/rest/system/identity"}),") and returns the router identity on success."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"connection-state-store",children:"Connection State Store"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"libs/state/stores/src/connection/connection.store.ts"})}),"\n",(0,r.jsx)(n.p,{children:"Manages WebSocket status, per-router connections, and reconnection state."}),"\n",(0,r.jsx)(n.h3,{id:"state-shape",children:"State Shape"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface ConnectionState {\n  // Global WebSocket status\n  wsStatus: 'connecting' | 'connected' | 'disconnected' | 'error';\n  wsError: string | null;\n\n  // Per-router connection info\n  routers: Record<string, RouterConnection>;\n  activeRouterId: string | null;\n\n  // Reconnection tracking\n  reconnectAttempts: number;\n  maxReconnectAttempts: number;  // Default: 10\n  isReconnecting: boolean;\n\n  // Legacy compatibility fields (deprecated but present)\n  state: 'connected' | 'disconnected' | 'reconnecting';\n  currentRouterId: string | null;\n  currentRouterIp: string | null;\n}\n\ninterface RouterConnection {\n  routerId: string;\n  status: 'connecting' | 'connected' | 'disconnected' | 'error';\n  protocol: 'rest' | 'api' | 'ssh';\n  latencyMs: number | null;\n  lastConnected: Date | null;\n  lastError: string | null;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"persistence",children:"Persistence"}),"\n",(0,r.jsxs)(n.p,{children:["Only ",(0,r.jsx)(n.code,{children:"activeRouterId"})," persists to localStorage. All connection status resets on page reload (forces a fresh connection check)."]}),"\n",(0,r.jsx)(n.h3,{id:"key-actions",children:"Key Actions"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const store = useConnectionStore();\n\n// Update WebSocket status\nstore.setWsStatus('connected');\nstore.setWsStatus('error', 'Connection refused');\n\n// Register/update a router connection\nstore.setRouterConnection('router-123', {\n  status: 'connected',\n  protocol: 'rest',\n  latencyMs: 12,\n  lastConnected: new Date(),\n});\n\n// Set active router\nstore.setActiveRouter('router-123');\n\n// Update latency (debounced internally)\nstore.updateLatency('router-123', 15);\n\n// Reconnection tracking\nstore.incrementReconnectAttempts();\nstore.resetReconnection();\nconst exceeded = store.hasExceededMaxAttempts(); // boolean\n"})}),"\n",(0,r.jsx)(n.h3,{id:"selector-usage-performance-critical",children:"Selector Usage (Performance Critical)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// \u2705 GOOD: Only re-renders when wsStatus changes\nconst wsStatus = useConnectionStore(state => state.wsStatus);\n\n// \u2705 GOOD: Multiple fields with shallow comparison\nimport { shallow } from 'zustand/shallow';\nconst { wsStatus, isReconnecting } = useConnectionStore(\n  state => ({ wsStatus: state.wsStatus, isReconnecting: state.isReconnecting }),\n  shallow\n);\n\n// \u274c BAD: Re-renders on ANY store change\nconst store = useConnectionStore();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"websocket-lifecycle",children:"WebSocket Lifecycle"}),"\n",(0,r.jsx)(n.p,{children:"NasNet uses Apollo Client's WebSocket link for GraphQL subscriptions (real-time router data). The connection lifecycle:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Page load \u2192 Apollo initializes WS link\n                \u2502\n                \u25bc\n        [wsStatus: 'connecting']\n                \u2502\n                \u251c\u2500 success \u2500\u2500\u25ba [wsStatus: 'connected']\n                \u2502               \u2502\n                \u2502               \u2514\u2500 heartbeat active\n                \u2502\n                \u2514\u2500 failure \u2500\u2500\u25ba [wsStatus: 'error']\n                                \u2502\n                                \u25bc\n                        exponential backoff reconnect\n                        (attempts: 1, 2, ... max 10)\n                                \u2502\n                        [wsStatus: 'connecting']\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The Apollo WebSocket link is configured in ",(0,r.jsx)(n.code,{children:"libs/api-client/core/"})," with subscription support. When the WS connects, it's used for all GraphQL subscriptions. REST queries fall back to HTTP."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"heartbeat-monitoring",children:"Heartbeat Monitoring"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"apps/connect/src/app/hooks/useConnectionHeartbeat.ts"})}),"\n",(0,r.jsx)(n.p,{children:"Periodically validates the connection by pinging the router:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Mount once at app level\nfunction App() {\n  useConnectionHeartbeat();\n  return <Router />;\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Behavior:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Runs every ",(0,r.jsx)(n.strong,{children:"30 seconds"})," (when ",(0,r.jsx)(n.code,{children:"currentRouterIp"})," is set)"]}),"\n",(0,r.jsxs)(n.li,{children:["Sends ",(0,r.jsx)(n.code,{children:"GET /system/identity"})," to RouterOS REST API with a 5-second timeout"]}),"\n",(0,r.jsxs)(n.li,{children:["On success: calls ",(0,r.jsx)(n.code,{children:"store.setConnected()"})," if not already connected"]}),"\n",(0,r.jsxs)(n.li,{children:["On failure: calls ",(0,r.jsx)(n.code,{children:"store.setDisconnected()"})," if not already disconnected"]}),"\n",(0,r.jsx)(n.li,{children:"Cleans up interval on unmount or when router IP changes"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const HEARTBEAT_CONFIG = {\n  interval: 30_000,  // 30 seconds\n  timeout: 5000,     // 5 second request timeout\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"For manual one-off checks:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { testConnection } from '@/app/hooks/useConnectionHeartbeat';\n\nconst isConnected = await testConnection('192.168.88.1');\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"connection-status-toast",children:"Connection Status Toast"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"apps/connect/src/app/hooks/useConnectionToast.tsx"})}),"\n",(0,r.jsxs)(n.p,{children:["Watches ",(0,r.jsx)(n.code,{children:"wsStatus"})," and shows toast notifications on status changes:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"'connected'"})," \u2192 shows success toast (if previously disconnected)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"'disconnected'"}),' \u2192 shows warning toast "Connection lost to router"']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"'error'"})," \u2192 shows error toast with reason"]}),"\n",(0,r.jsx)(n.li,{children:"Suppresses duplicate toasts (debounced)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Mount once in the app layout:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"function AppLayout() {\n  useConnectionToast();\n  return <Outlet />;\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"reconnection-strategy",children:"Reconnection Strategy"}),"\n",(0,r.jsx)(n.p,{children:"The connection store tracks reconnection attempts with exponential backoff:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Disconnect detected \u2192 ",(0,r.jsx)(n.code,{children:"reconnectAttempts"})," increments"]}),"\n",(0,r.jsx)(n.li,{children:"Apollo WS link attempts reconnect (uses its own backoff internally)"}),"\n",(0,r.jsx)(n.li,{children:"Store tracks attempt count for UI feedback"}),"\n",(0,r.jsxs)(n.li,{children:["After 10 failed attempts (",(0,r.jsx)(n.code,{children:"maxReconnectAttempts"}),"): ",(0,r.jsx)(n.code,{children:"hasExceededMaxAttempts()"})," returns true"]}),"\n",(0,r.jsx)(n.li,{children:'UI shows "Manual retry" button instead of auto-reconnecting'}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["On successful reconnect: ",(0,r.jsx)(n.code,{children:"resetReconnection()"})," clears attempt counter."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"protocol-selection",children:"Protocol Selection"}),"\n",(0,r.jsx)(n.p,{children:"When a router is connected, the backend selects the communication protocol based on what's available:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Protocol"}),(0,r.jsx)(n.th,{children:"Port"}),(0,r.jsx)(n.th,{children:"Usage"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"REST"}),(0,r.jsx)(n.td,{children:"443/80"}),(0,r.jsx)(n.td,{children:"Primary (RouterOS 7+)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"RouterOS API"}),(0,r.jsx)(n.td,{children:"8728/8729"}),(0,r.jsx)(n.td,{children:"Fallback (RouterOS 6)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"SSH"}),(0,r.jsx)(n.td,{children:"22"}),(0,r.jsx)(n.td,{children:"Command-level operations"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["The active protocol is stored in ",(0,r.jsx)(n.code,{children:"RouterConnection.protocol"}),". The ",(0,r.jsx)(n.code,{children:"ProtocolSelector"})," component (in ",(0,r.jsx)(n.code,{children:"libs/features/configuration-import/src/components/ProtocolSelector.tsx"}),") is used in the configuration import wizard to let users choose which protocol to use for bulk command execution."]}),"\n",(0,r.jsx)(n.p,{children:"Available protocols are fetched via:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const { api, ssh, telnet, isLoading } = useEnabledProtocols(routerIp);\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"connection-status-indicators",children:"Connection Status Indicators"}),"\n",(0,r.jsx)(n.p,{children:"The UI exposes connection status through:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"AppHeader"})," \u2014 global WS status indicator (green dot / red dot)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"RouterCard"})," \u2014 per-router status in the router list"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"RouterHeader"})," (in ",(0,r.jsx)(n.code,{children:"apps/connect/src/app/routes/router-panel/components/RouterHeader.tsx"}),") \u2014 active router status in the panel header"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Status display mapping:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"wsStatus"}),(0,r.jsx)(n.th,{children:"Indicator"}),(0,r.jsx)(n.th,{children:"Label"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"connected"}),(0,r.jsx)(n.td,{children:"Green dot"}),(0,r.jsx)(n.td,{children:'"Connected"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"connecting"}),(0,r.jsx)(n.td,{children:"Amber pulse"}),(0,r.jsx)(n.td,{children:'"Connecting..."'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"disconnected"}),(0,r.jsx)(n.td,{children:"Gray dot"}),(0,r.jsx)(n.td,{children:'"Disconnected"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"error"}),(0,r.jsx)(n.td,{children:"Red dot"}),(0,r.jsx)(n.td,{children:"Error message"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},71184:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>i});var s=t(14041);const r={},o=s.createContext(r);function c(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);