"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[14824],{51224:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"ui-system/platform-presenters","title":"Platform Presenters Pattern","description":"NasNetConnect uses a Headless + Platform Presenters architecture as the core responsive design strategy. This is not standard CSS-only responsive design \u2014 it is a deliberate component architecture that separates business logic from rendering, then renders entirely different component trees per platform.","source":"@site/../connect/docs/ui-system/platform-presenters.md","sourceDirName":"ui-system","slug":"/ui-system/platform-presenters","permalink":"/docs/frontend/ui-system/platform-presenters","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../connect/docs/ui-system/platform-presenters.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Patterns Catalog","permalink":"/docs/frontend/ui-system/patterns-catalog"},"next":{"title":"Primitives Catalog","permalink":"/docs/frontend/ui-system/primitives-catalog"}}');var t=s(31085),o=s(71184);const l={},i="Platform Presenters Pattern",d={},a=[{value:"Why This Pattern",id:"why-this-pattern",level:2},{value:"Three Platform Targets",id:"three-platform-targets",level:2},{value:"Breakpoint System",id:"breakpoint-system",level:2},{value:"The usePlatform() Hook",id:"the-useplatform-hook",level:2},{value:"Additional Platform Hooks",id:"additional-platform-hooks",level:3},{value:"usePlatformConfig",id:"useplatformconfig",level:3},{value:"PlatformProvider",id:"platformprovider",level:2},{value:"Context Access",id:"context-access",level:3},{value:"PlatformSwitch Component",id:"platformswitch-component",level:3},{value:"PlatformDebugger",id:"platformdebugger",level:3},{value:"Implementing a Platform Presenter Pattern",id:"implementing-a-platform-presenter-pattern",level:2},{value:"Step 1: Define the headless hook",id:"step-1-define-the-headless-hook",level:3},{value:"Step 2: Create platform-specific presenters",id:"step-2-create-platform-specific-presenters",level:3},{value:"Step 3: Create the adapter component",id:"step-3-create-the-adapter-component",level:3},{value:"Layout-Level Platform Adaptation",id:"layout-level-platform-adaptation",level:2},{value:"Mobile Layout Details",id:"mobile-layout-details",level:2},{value:"Desktop Sidebar Details",id:"desktop-sidebar-details",level:2},{value:"Wiring Sidebar State",id:"wiring-sidebar-state",level:2},{value:"Testing Platform Presenters",id:"testing-platform-presenters",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"platform-presenters-pattern",children:"Platform Presenters Pattern"})}),"\n",(0,t.jsxs)(n.p,{children:["NasNetConnect uses a ",(0,t.jsx)(n.strong,{children:"Headless + Platform Presenters"})," architecture as the core responsive design strategy. This is not standard CSS-only responsive design \u2014 it is a deliberate component architecture that separates business logic from rendering, then renders entirely different component trees per platform."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Authoritative reference:"})," ",(0,t.jsx)(n.code,{children:"Docs/design/PLATFORM_PRESENTER_GUIDE.md"}),"\n",(0,t.jsx)(n.strong,{children:"ADR reference:"})," ADR-018 (Headless Platform Presenters)"]}),"\n",(0,t.jsx)(n.h2,{id:"why-this-pattern",children:"Why This Pattern"}),"\n",(0,t.jsx)(n.p,{children:"MikroTik administrators use the app in very different contexts:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"In server rooms on mobile"})," \u2014 needs large touch targets, simplified flows, bottom navigation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"At a desk on desktop"})," \u2014 needs dense data tables, keyboard shortcuts, collapsible sidebars"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"A single CSS-responsive component cannot adequately serve both. Instead, the architecture provides entirely separate presenter components per platform, sharing only the business logic layer."}),"\n",(0,t.jsx)(n.h2,{id:"three-platform-targets",children:"Three Platform Targets"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Platform"}),(0,t.jsx)(n.th,{children:"Viewport"}),(0,t.jsx)(n.th,{children:"Breakpoints"}),(0,t.jsx)(n.th,{children:"UX Paradigm"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Mobile"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"<640px"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"xs"})}),(0,t.jsx)(n.td,{children:"Consumer-grade simplicity, bottom tab bar, 44px touch targets, swipe gestures"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Tablet"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"640\u20131024px"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"sm"}),", ",(0,t.jsx)(n.code,{children:"md"})]}),(0,t.jsx)(n.td,{children:"Hybrid, collapsible sidebar, balanced density"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Desktop"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:">1024px"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"lg"}),", ",(0,t.jsx)(n.code,{children:"xl"})]}),(0,t.jsx)(n.td,{children:"Pro-grade power user, dense data tables, keyboard shortcuts, fixed sidebar"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"breakpoint-system",children:"Breakpoint System"}),"\n",(0,t.jsxs)(n.p,{children:["Defined in ",(0,t.jsx)(n.code,{children:"libs/ui/layouts/src/responsive-shell/useBreakpoint.ts"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"xs  < 640px    \u2192 mobile\nsm  640-767px  \u2192 tablet\nmd  768-1023px \u2192 tablet\nlg  1024-1279px \u2192 desktop\nxl  1280px+    \u2192 desktop\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"useBreakpoint()"})," hook uses ",(0,t.jsx)(n.code,{children:"ResizeObserver"})," on ",(0,t.jsx)(n.code,{children:"document.documentElement"})," (more efficient than ",(0,t.jsx)(n.code,{children:"window.resize"}),") with 100ms debounce to prevent excessive re-renders."]}),"\n",(0,t.jsx)(n.h2,{id:"the-useplatform-hook",children:"The usePlatform() Hook"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source:"})," ",(0,t.jsx)(n.code,{children:"libs/ui/layouts/src/responsive-shell/usePlatform.ts"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"usePlatform()"})," is the primary hook for platform detection in components."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { usePlatform } from '@nasnet/ui/layouts';\n\nexport function ResourceCard<T>(props: ResourceCardProps<T>) {\n  const platform = usePlatform();\n\n  switch (platform) {\n    case 'mobile':\n      return <ResourceCardMobile {...props} />;\n    case 'tablet':\n      return <ResourceCardTablet {...props} />;\n    case 'desktop':\n      return <ResourceCardDesktop {...props} />;\n  }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"The hook maps breakpoints to platforms:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"xs"})," \u2192 ",(0,t.jsx)(n.code,{children:"'mobile'"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"sm"}),", ",(0,t.jsx)(n.code,{children:"md"})," \u2192 ",(0,t.jsx)(n.code,{children:"'tablet'"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"lg"}),", ",(0,t.jsx)(n.code,{children:"xl"})," \u2192 ",(0,t.jsx)(n.code,{children:"'desktop'"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["It is SSR-compatible: defaults to ",(0,t.jsx)(n.code,{children:"'desktop'"})," (1024px) when ",(0,t.jsx)(n.code,{children:"window"})," is undefined."]}),"\n",(0,t.jsx)(n.h3,{id:"additional-platform-hooks",children:"Additional Platform Hooks"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Hook"}),(0,t.jsx)(n.th,{children:"Returns"}),(0,t.jsx)(n.th,{children:"Use Case"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"usePlatform()"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"'mobile' | 'tablet' | 'desktop'"})}),(0,t.jsx)(n.td,{children:"Primary platform detection"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"usePlatformWithBreakpoint()"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"{ platform, breakpoint }"})}),(0,t.jsx)(n.td,{children:"Need both coarse and fine-grained info"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"useIsMobile()"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"boolean"})}),(0,t.jsx)(n.td,{children:"Simple mobile check"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"useIsTablet()"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"boolean"})}),(0,t.jsx)(n.td,{children:"Simple tablet check"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"useIsDesktop()"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"boolean"})}),(0,t.jsx)(n.td,{children:"Simple desktop check"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"useIsTouchPlatform()"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"boolean"})}),(0,t.jsx)(n.td,{children:"True for mobile and tablet"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"usePlatformConfig(config)"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"T"})}),(0,t.jsx)(n.td,{children:"Select config object by platform"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"useBreakpoint()"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"'xs' | 'sm' | 'md' | 'lg' | 'xl'"})}),(0,t.jsx)(n.td,{children:"Fine-grained breakpoint"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"useplatformconfig",children:"usePlatformConfig"}),"\n",(0,t.jsx)(n.p,{children:"For components that change configuration rather than entire rendering trees:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"const layout = usePlatformConfig({\n  mobile:  { columns: 1, gap: 'sm', compact: true },\n  tablet:  { columns: 2, gap: 'md', compact: false },\n  desktop: { columns: 3, gap: 'lg', compact: false },\n});\n\nreturn <Grid columns={layout.columns} gap={layout.gap} />;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"platformprovider",children:"PlatformProvider"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source:"})," ",(0,t.jsx)(n.code,{children:"libs/ui/layouts/src/responsive-shell/PlatformProvider.tsx"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"PlatformProvider"})," wraps the application to supply platform detection via React Context. It supports manual override for testing or previewing specific platform layouts."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// Root of the app (apps/connect/src/app/providers/index.tsx)\n<PlatformProvider>\n  <App />\n</PlatformProvider>\n\n// With override for testing\n<PlatformProvider initialPlatform="mobile">\n  <StorybookPreview />\n</PlatformProvider>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"context-access",children:"Context Access"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"// Full context with override control\nconst { platform, isOverridden, setOverride, clearOverride } = usePlatformContext();\n\n// Platform only (with fallback to direct detection if no Provider)\nconst platform = usePlatformFromContext();\n"})}),"\n",(0,t.jsx)(n.h3,{id:"platformswitch-component",children:"PlatformSwitch Component"}),"\n",(0,t.jsx)(n.p,{children:"Declarative rendering based on platform:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"<PlatformSwitch\n  mobile={<MobileView />}\n  tablet={<TabletView />}\n  desktop={<DesktopView />}\n/>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"platformdebugger",children:"PlatformDebugger"}),"\n",(0,t.jsxs)(n.p,{children:["Development-only overlay showing current platform with override buttons. Only visible when ",(0,t.jsx)(n.code,{children:"NODE_ENV === 'development'"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"<PlatformProvider>\n  <App />\n  <PlatformDebugger />  {/* Shows M/T/D buttons in bottom-right corner */}\n</PlatformProvider>\n"})}),"\n",(0,t.jsx)(n.h2,{id:"implementing-a-platform-presenter-pattern",children:"Implementing a Platform Presenter Pattern"}),"\n",(0,t.jsx)(n.p,{children:"The standard pattern for Layer 2 pattern components:"}),"\n",(0,t.jsx)(n.h3,{id:"step-1-define-the-headless-hook",children:"Step 1: Define the headless hook"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"// useResourceCard.ts \u2014 shared business logic\nexport function useResourceCard<T>(props: ResourceCardProps<T>) {\n  const { item, onSelect, onDelete } = props;\n\n  const handleSelect = useCallback(() => onSelect?.(item), [item, onSelect]);\n  const handleDelete = useCallback(() => onDelete?.(item), [item, onDelete]);\n\n  return { item, handleSelect, handleDelete };\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-2-create-platform-specific-presenters",children:"Step 2: Create platform-specific presenters"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// ResourceCardMobile.tsx \u2014 touch-optimized\nexport function ResourceCardMobile<T>(props: ResourceCardProps<T>) {\n  const { item, handleSelect, handleDelete } = useResourceCard(props);\n  return (\n    <div className="p-4 min-h-[44px]" onClick={handleSelect}>\n      {/* Simplified mobile layout */}\n    </div>\n  );\n}\n\n// ResourceCardDesktop.tsx \u2014 dense data layout\nexport function ResourceCardDesktop<T>(props: ResourceCardProps<T>) {\n  const { item, handleSelect, handleDelete } = useResourceCard(props);\n  return (\n    <div className="p-2 hover:bg-muted cursor-pointer" onClick={handleSelect}>\n      {/* Dense desktop layout with more columns */}\n    </div>\n  );\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"step-3-create-the-adapter-component",children:"Step 3: Create the adapter component"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"// ResourceCard.tsx \u2014 platform adapter\nexport function ResourceCard<T>(props: ResourceCardProps<T>) {\n  const platform = usePlatform();\n\n  switch (platform) {\n    case 'mobile':\n      return <ResourceCardMobile {...props} />;\n    case 'tablet':\n      return <ResourceCardTablet {...props} />;\n    case 'desktop':\n    default:\n      return <ResourceCardDesktop {...props} />;\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"layout-level-platform-adaptation",children:"Layout-Level Platform Adaptation"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"ResponsiveShell"})," in ",(0,t.jsx)(n.code,{children:"libs/ui/layouts/src/responsive-shell/ResponsiveShell.tsx"})," is the top-level layout adapter. It selects between two fundamentally different layout shells:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'Mobile (<640px):\n  MobileAppShell\n  \u251c\u2500\u2500 StatusLayout (optional status banner at top)\n  \u251c\u2500\u2500 MobileHeader (compact header with hamburger/title)\n  \u251c\u2500\u2500 <main> (scrollable content, pb-16 for bottom nav clearance)\n  \u2514\u2500\u2500 BottomNavigation (fixed bottom tab bar)\n\nTablet/Desktop (640px+):\n  AppShell\n  \u251c\u2500\u2500 <header> (sticky, h-[--nav-height])\n  \u251c\u2500\u2500 Banner slot (optional ConnectionBanner)\n  \u251c\u2500\u2500 <aside> (sidebar: w-64 expanded, w-16 collapsed; hidden on mobile)\n  \u2514\u2500\u2500 <main id="main-content"> (flex-1 scrollable)\n'})}),"\n",(0,t.jsx)(n.p,{children:"Desktop sidebar behavior:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Tablet:"})," Always expanded (ignores collapse state)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Desktop:"})," Respects ",(0,t.jsx)(n.code,{children:"sidebarCollapsed"})," prop (persisted in Zustand store)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Keyboard shortcut:"})," ",(0,t.jsx)(n.code,{children:"Cmd+B"})," / ",(0,t.jsx)(n.code,{children:"Ctrl+B"})," toggles sidebar"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"mobile-layout-details",children:"Mobile Layout Details"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source:"})," ",(0,t.jsx)(n.code,{children:"libs/ui/layouts/src/mobile-app-shell/mobile-app-shell.tsx"})]}),"\n",(0,t.jsx)(n.p,{children:"Key mobile-specific behaviors:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"pb-16"})," on ",(0,t.jsx)(n.code,{children:"<main>"})," reserves space for the 64px bottom navigation bar"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"safe-area-inset-bottom"})," support for notched devices (iOS)"]}),"\n",(0,t.jsx)(n.li,{children:"44px minimum touch targets on all interactive elements"}),"\n",(0,t.jsx)(n.li,{children:"No hover states (touch-only interaction)"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source:"})," ",(0,t.jsx)(n.code,{children:"libs/ui/layouts/src/bottom-navigation/"})]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"BottomNavigation"})," component renders a fixed bottom tab bar (the primary navigation on mobile). Navigation items use icons with optional labels."]}),"\n",(0,t.jsx)(n.h2,{id:"desktop-sidebar-details",children:"Desktop Sidebar Details"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source:"})," ",(0,t.jsx)(n.code,{children:"libs/ui/layouts/src/sidebar/CollapsibleSidebar.tsx"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Expanded:  w-64 (256px) \u2014 shows icons + labels\nCollapsed: w-16 (64px)  \u2014 shows icons only\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Width transitions use CSS ",(0,t.jsx)(n.code,{children:"transition-all"})," with duration from ",(0,t.jsx)(n.code,{children:"ANIMATION_DURATIONS.SIDEBAR"}),". Reduced motion is respected: ",(0,t.jsx)(n.code,{children:"prefersReducedMotion ? '0ms' : durationMs"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"CollapsibleSidebarContext"})," provides ",(0,t.jsx)(n.code,{children:"isCollapsed"})," to child components so navigation items can hide their labels:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'function NavItem({ icon, label }) {\n  const { isCollapsed } = useCollapsibleSidebarContext();\n  return (\n    <div className="flex items-center gap-2">\n      {icon}\n      {!isCollapsed && <span>{label}</span>}\n    </div>\n  );\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"wiring-sidebar-state",children:"Wiring Sidebar State"}),"\n",(0,t.jsxs)(n.p,{children:["The sidebar state is managed in a Zustand store at ",(0,t.jsx)(n.code,{children:"libs/state/stores/"}),". The ",(0,t.jsx)(n.code,{children:"ui/layouts"})," library cannot import from ",(0,t.jsx)(n.code,{children:"state/"})," (violates library boundaries), so state is passed via props:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"// apps/connect \u2014 wires Zustand store to ResponsiveShell\nfunction AppLayout({ children }) {\n  const { desktopCollapsed, toggle } = useSidebarStore();\n\n  return (\n    <ResponsiveShell\n      sidebar={<NavigationSidebar />}\n      sidebarCollapsed={desktopCollapsed}\n      onSidebarToggle={toggle}\n    >\n      {children}\n    </ResponsiveShell>\n  );\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"testing-platform-presenters",children:"Testing Platform Presenters"}),"\n",(0,t.jsxs)(n.p,{children:["For Storybook stories, use ",(0,t.jsx)(n.code,{children:"PlatformProvider"})," with ",(0,t.jsx)(n.code,{children:"initialPlatform"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'export const MobileView: Story = {\n  decorators: [\n    (Story) => (\n      <PlatformProvider initialPlatform="mobile">\n        <Story />\n      </PlatformProvider>\n    ),\n  ],\n};\n\nexport const DesktopView: Story = {\n  decorators: [\n    (Story) => (\n      <PlatformProvider initialPlatform="desktop">\n        <Story />\n      </PlatformProvider>\n    ),\n  ],\n};\n'})}),"\n",(0,t.jsxs)(n.p,{children:["For unit tests, pass ",(0,t.jsx)(n.code,{children:"forcePlatform"})," prop directly to ",(0,t.jsx)(n.code,{children:"ResponsiveShell"}),", or use ",(0,t.jsx)(n.code,{children:"PlatformProvider initialPlatform"})," in RTL renders."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},71184:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>i});var r=s(14041);const t={},o=r.createContext(t);function l(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);