"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[21130],{66174:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"patterns-forms-and-inputs","title":"Form System, Network Inputs & Steppers (Layer 2)","description":"This document covers all Layer 2 pattern components related to forms, specialized inputs, and multi-step flows. These components live in libs/ui/patterns/src/ and are exported from @nasnet/ui/patterns.","source":"@site/../../libs/ui/docs/patterns-forms-and-inputs.md","sourceDirName":".","slug":"/patterns-forms-and-inputs","permalink":"/docs/ui/patterns-forms-and-inputs","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../../libs/ui/docs/patterns-forms-and-inputs.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Domain-Specific Pattern Components (Layer 2)","permalink":"/docs/ui/patterns-domain-components"},"next":{"title":"Status & Data Display Patterns (Layer 2)","permalink":"/docs/ui/patterns-status-and-data"}}');var s=r(31085),i=r(71184);const o={},l="Form System, Network Inputs & Steppers (Layer 2)",a={},d=[{value:"Form Architecture",id:"form-architecture",level:2},{value:"Layer 1 Foundation",id:"layer-1-foundation",level:3},{value:"Layer 2 Patterns",id:"layer-2-patterns",level:3},{value:"React Hook Form + Zod Integration Pattern",id:"react-hook-form--zod-integration-pattern",level:3},{value:"RHFFormField System",id:"rhfformfield-system",level:2},{value:"RHFFormField",id:"rhfformfield",level:3},{value:"FormFieldError",id:"formfielderror",level:3},{value:"FormFieldDescription",id:"formfielddescription",level:3},{value:"FormSubmitButton",id:"formsubmitbutton",level:3},{value:"FormArrayField",id:"formarrayfield",level:3},{value:"FormField (Standalone Wrapper)",id:"formfield-standalone-wrapper",level:2},{value:"FormSection",id:"formsection",level:2},{value:"Network Inputs",id:"network-inputs",level:2},{value:"IPInput",id:"ipinput",level:3},{value:"SubnetInput",id:"subnetinput",level:3},{value:"MACInput",id:"macinput",level:3},{value:"PortInput",id:"portinput",level:3},{value:"InterfaceSelector",id:"interfaceselector",level:3},{value:"Firewall Rule Editors",id:"firewall-rule-editors",level:2},{value:"FilterRuleEditor",id:"filterruleeditor",level:3},{value:"MangleRuleEditor",id:"mangleruleeditor",level:3},{value:"RawRuleEditor",id:"rawruleeditor",level:3},{value:"RateLimitRuleEditor",id:"ratelimitruleeditor",level:3},{value:"Schedule Editor",id:"schedule-editor",level:2},{value:"Port Knock Sequence Form",id:"port-knock-sequence-form",level:2},{value:"FileUploadZone",id:"fileuploadzone",level:2},{value:"Stepper System",id:"stepper-system",level:2},{value:"Overview of pieces",id:"overview-of-pieces",level:3},{value:"useStepper",id:"usestepper",level:3},{value:"useStepperKeyboard",id:"usestepperkeyboard",level:3},{value:"Stepper Context",id:"stepper-context",level:3},{value:"ARIA Helpers",id:"aria-helpers",level:3},{value:"Layout Variants",id:"layout-variants",level:3},{value:"VStepper (Vertical \u2014 Desktop Sidebar)",id:"vstepper-vertical--desktop-sidebar",level:4},{value:"HStepper (Horizontal \u2014 Tablet Header)",id:"hstepper-horizontal--tablet-header",level:4},{value:"CStepper (Content \u2014 Desktop Three-Column)",id:"cstepper-content--desktop-three-column",level:4},{value:"MiniStepper (Mobile)",id:"ministepper-mobile",level:4},{value:"Complete Stepper Example",id:"complete-stepper-example",level:3},{value:"ValidationProgress",id:"validationprogress",level:2},{value:"Types",id:"types",level:3},{value:"ValidationProgress Component",id:"validationprogress-component",level:3},{value:"useValidationProgress Hook",id:"usevalidationprogress-hook",level:3},{value:"Usage in Apply-Confirm-Merge Flow",id:"usage-in-apply-confirm-merge-flow",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"form-system-network-inputs--steppers-layer-2",children:"Form System, Network Inputs & Steppers (Layer 2)"})}),"\n",(0,s.jsxs)(n.p,{children:["This document covers all Layer 2 pattern components related to forms, specialized inputs, and multi-step flows. These components live in ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/"})," and are exported from ",(0,s.jsx)(n.code,{children:"@nasnet/ui/patterns"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Cross-references:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["See ",(0,s.jsx)(n.code,{children:"primitives-reference.md"})," for the base ",(0,s.jsx)(n.code,{children:"Form"}),", ",(0,s.jsx)(n.code,{children:"FormItem"}),", ",(0,s.jsx)(n.code,{children:"FormLabel"}),", ",(0,s.jsx)(n.code,{children:"FormControl"}),", ",(0,s.jsx)(n.code,{children:"FormMessage"})," primitives from ",(0,s.jsx)(n.code,{children:"@nasnet/ui/primitives"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["See ",(0,s.jsx)(n.code,{children:"multi-package-flows.md"})," for the full Apply-Confirm-Merge configuration pipeline where ",(0,s.jsx)(n.code,{children:"ValidationProgress"})," is used end-to-end."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"form-architecture",children:"Form Architecture"}),"\n",(0,s.jsx)(n.h3,{id:"layer-1-foundation",children:"Layer 1 Foundation"}),"\n",(0,s.jsxs)(n.p,{children:["The primitives package (",(0,s.jsx)(n.code,{children:"@nasnet/ui/primitives"}),") provides unstyled, Radix-based form primitives:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Form"}),", ",(0,s.jsx)(n.code,{children:"FormItem"}),", ",(0,s.jsx)(n.code,{children:"FormLabel"}),", ",(0,s.jsx)(n.code,{children:"FormControl"}),", ",(0,s.jsx)(n.code,{children:"FormDescription"}),", ",(0,s.jsx)(n.code,{children:"FormMessage"})," \u2014 shadcn/ui form wrappers built on ",(0,s.jsx)(n.code,{children:"@hookform/resolvers"})," context."]}),"\n",(0,s.jsx)(n.li,{children:"These give you the raw semantic structure (label linkage, error regions, ARIA attributes) but carry no business logic."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Use Layer 1 primitives directly only when building entirely custom field layouts that do not need RHF integration helpers."}),"\n",(0,s.jsx)(n.h3,{id:"layer-2-patterns",children:"Layer 2 Patterns"}),"\n",(0,s.jsx)(n.p,{children:"The patterns package adds two things on top of the primitives:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"RHF-integrated field wrappers"})," (",(0,s.jsx)(n.code,{children:"RHFFormField"}),", ",(0,s.jsx)(n.code,{children:"FormArrayField"}),", ",(0,s.jsx)(n.code,{children:"FormSubmitButton"}),", ",(0,s.jsx)(n.code,{children:"FormFieldError"}),", ",(0,s.jsx)(n.code,{children:"FormFieldDescription"}),") \u2014 components that connect to ",(0,s.jsx)(n.code,{children:"useFormContext()"})," and own the Controller boilerplate."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Structural components"})," (",(0,s.jsx)(n.code,{children:"FormField"}),", ",(0,s.jsx)(n.code,{children:"FormSection"}),") \u2014 layout wrappers for consistent spacing, collapsibility, and section-level error summaries."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"react-hook-form--zod-integration-pattern",children:"React Hook Form + Zod Integration Pattern"}),"\n",(0,s.jsx)(n.p,{children:"Every form in the codebase follows this pattern:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { useForm, FormProvider } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport {\n  RHFFormField,\n  FormSubmitButton,\n  FormSection,\n} from '@nasnet/ui/patterns';\n\nconst schema = z.object({\n  hostname: z.string().min(1, 'Required'),\n  ipAddress: z.string().ip('Must be a valid IP'),\n});\n\ntype FormValues = z.infer<typeof schema>;\n\nfunction RouterForm() {\n  const form = useForm<FormValues>({\n    resolver: zodResolver(schema),\n    defaultValues: { hostname: '', ipAddress: '' },\n  });\n\n  return (\n    <FormProvider {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)}>\n        <FormSection title=\"Router Identity\">\n          <RHFFormField name=\"hostname\" label=\"Hostname\" required />\n          <RHFFormField name=\"ipAddress\" label=\"IP Address\" type=\"text\" />\n        </FormSection>\n        <FormSubmitButton loadingText=\"Saving...\">Save</FormSubmitButton>\n      </form>\n    </FormProvider>\n  );\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"FormProvider"})," wraps everything so that ",(0,s.jsx)(n.code,{children:"RHFFormField"})," and ",(0,s.jsx)(n.code,{children:"FormSubmitButton"})," can call ",(0,s.jsx)(n.code,{children:"useFormContext()"})," internally without needing ",(0,s.jsx)(n.code,{children:"control"})," passed as a prop every time."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"rhfformfield-system",children:"RHFFormField System"}),"\n",(0,s.jsx)(n.h3,{id:"rhfformfield",children:"RHFFormField"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/rhf-form-field/RHFFormField.tsx"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Import:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { RHFFormField, type RHFFormFieldProps, type FieldMode } from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export type FieldMode = 'editable' | 'readonly' | 'hidden' | 'computed';\n\nexport interface RHFFormFieldProps<TFieldValues extends FieldValues = FieldValues> {\n  /** Field name matching the form schema */\n  name: Path<TFieldValues>;\n  /** Label text */\n  label: string;\n  /** Help text/description \u2014 shown below input when no error */\n  description?: string;\n  /** Whether the field is required \u2014 shows asterisk */\n  required?: boolean;\n  /** Field display mode (default: 'editable') */\n  mode?: FieldMode;\n  /** Compute value from other fields when mode='computed' */\n  computeFn?: (values: TFieldValues) => string | number;\n  /** Input placeholder */\n  placeholder?: string;\n  /** Input type (default: 'text') */\n  type?: 'text' | 'email' | 'password' | 'number' | 'tel' | 'url';\n  /** Additional CSS classes for the container */\n  className?: string;\n  /** Additional CSS classes for the input element */\n  inputClassName?: string;\n  /** Custom render function \u2014 receives field, error, fieldId, mode */\n  renderInput?: (props: {\n    field: ControllerRenderProps<TFieldValues, Path<TFieldValues>>;\n    error: string | undefined;\n    fieldId: string;\n    mode: FieldMode;\n  }) => React.ReactNode;\n  /** Children as alternative to renderInput */\n  children?: React.ReactNode;\n  /** Explicit RHF control instance (uses useFormContext by default) */\n  control?: Control<TFieldValues>;\n  /** Pre-resolved error string (overrides form state error) */\n  error?: string;\n  /** Hint text below field \u2014 shown when no error and no description */\n  hint?: string;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Field Modes:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Mode"}),(0,s.jsx)(n.th,{children:"Behavior"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"'editable'"})}),(0,s.jsx)(n.td,{children:"Normal interactive input"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"'readonly'"})}),(0,s.jsx)(n.td,{children:"Input rendered as disabled/muted, cannot be edited"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"'hidden'"})}),(0,s.jsxs)(n.td,{children:["Component renders ",(0,s.jsx)(n.code,{children:"null"})," \u2014 field is invisible"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"'computed'"})}),(0,s.jsxs)(n.td,{children:["Value derived from ",(0,s.jsx)(n.code,{children:"computeFn(values)"}),", shown in muted italic style"]})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Usage Examples:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'// Standard text field\n<RHFFormField\n  name="username"\n  label="Username"\n  description="Lowercase letters and numbers only"\n  required\n/>\n\n// Custom input rendering (e.g., Select)\n<RHFFormField\n  name="protocol"\n  label="Protocol"\n  renderInput={({ field }) => (\n    <Select onValueChange={field.onChange} value={field.value}>\n      <SelectTrigger><SelectValue placeholder="Select protocol" /></SelectTrigger>\n      <SelectContent>\n        <SelectItem value="tcp">TCP</SelectItem>\n        <SelectItem value="udp">UDP</SelectItem>\n      </SelectContent>\n    </Select>\n  )}\n/>\n\n// Computed field derived from other values\n<RHFFormField\n  name="displayName"\n  label="Display Name"\n  mode="computed"\n  computeFn={(values) => `${values.firstName} ${values.lastName}`}\n/>\n\n// Read-only field (shows but cannot edit)\n<RHFFormField\n  name="routerId"\n  label="Router ID"\n  mode="readonly"\n/>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The component generates unique IDs internally via ",(0,s.jsx)(n.code,{children:"React.useId()"})," and links label, description, and error via ",(0,s.jsx)(n.code,{children:"aria-describedby"})," and ",(0,s.jsx)(n.code,{children:"htmlFor"}),". Errors are extracted from ",(0,s.jsx)(n.code,{children:"formState.errors"})," using dot-notation path traversal to support nested fields."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"formfielderror",children:"FormFieldError"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/rhf-form-field/FormFieldError.tsx"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Import:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { FormFieldError, type FormFieldErrorProps } from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface FormFieldErrorProps {\n  message?: string;\n  id?: string;\n  className?: string;\n  showIcon?: boolean; // default: true\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Renders an ",(0,s.jsx)(n.code,{children:"AlertCircle"})," icon and error text with ",(0,s.jsx)(n.code,{children:'role="alert"'})," and ",(0,s.jsx)(n.code,{children:'aria-live="polite"'}),". Returns ",(0,s.jsx)(n.code,{children:"null"})," when ",(0,s.jsx)(n.code,{children:"message"})," is undefined or empty. Used internally by ",(0,s.jsx)(n.code,{children:"RHFFormField"})," but can be used standalone for custom field implementations."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"formfielddescription",children:"FormFieldDescription"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/rhf-form-field/FormFieldDescription.tsx"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Import:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { FormFieldDescription, type FormFieldDescriptionProps } from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface FormFieldDescriptionProps {\n  children: React.ReactNode;\n  id?: string;\n  className?: string;\n  showIcon?: boolean; // default: false \u2014 shows HelpCircle when true\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Renders muted help text below a form field. Link it to the input via ",(0,s.jsx)(n.code,{children:"aria-describedby={id}"})," for accessibility. Used internally by ",(0,s.jsx)(n.code,{children:"RHFFormField"})," but available for standalone use in custom field implementations."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"formsubmitbutton",children:"FormSubmitButton"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/rhf-form-field/FormSubmitButton.tsx"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Import:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { FormSubmitButton, type FormSubmitButtonProps } from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface FormSubmitButtonProps extends Omit<ButtonProps, 'type'> {\n  loadingText?: string;       // default: 'Submitting...'\n  disableOnInvalid?: boolean; // default: false\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Reads ",(0,s.jsx)(n.code,{children:"isSubmitting"})," and ",(0,s.jsx)(n.code,{children:"isValid"})," from ",(0,s.jsx)(n.code,{children:"useFormContext()"}),". The button is automatically:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Disabled when ",(0,s.jsx)(n.code,{children:"isSubmitting"})," is true (prevents double submission)."]}),"\n",(0,s.jsxs)(n.li,{children:["Shows a spinning ",(0,s.jsx)(n.code,{children:"Loader2"})," icon with ",(0,s.jsx)(n.code,{children:"loadingText"})," while submitting."]}),"\n",(0,s.jsxs)(n.li,{children:["Optionally disabled when the form has validation errors if ",(0,s.jsx)(n.code,{children:"disableOnInvalid"})," is set."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'<FormSubmitButton loadingText="Applying changes..." disableOnInvalid>\n  Apply Configuration\n</FormSubmitButton>\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"formarrayfield",children:"FormArrayField"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/rhf-form-field/FormArrayField.tsx"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Import:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { FormArrayField, type FormArrayFieldProps } from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface FormArrayFieldProps<TFieldValues extends FieldValues = FieldValues> {\n  name: ArrayPath<TFieldValues>;\n  label: string;\n  description?: string;\n  defaultItem: FieldArray<TFieldValues, ArrayPath<TFieldValues>>;\n  maxItems?: number;          // default: 100\n  minItems?: number;          // default: 0\n  addButtonText?: string;     // default: 'Add'\n  renderItem: (props: {\n    index: number;\n    remove: () => void;\n    canRemove: boolean;\n    fieldPrefix: string;\n  }) => React.ReactNode;\n  className?: string;\n  emptyMessage?: string;\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Wraps ",(0,s.jsx)(n.code,{children:"useFieldArray"})," with a UI for adding and removing dynamic items. The ",(0,s.jsx)(n.code,{children:"renderItem"})," function receives ",(0,s.jsx)(n.code,{children:"fieldPrefix"})," (e.g., ",(0,s.jsx)(n.code,{children:'"peers.0"'}),") so nested ",(0,s.jsx)(n.code,{children:"RHFFormField"})," components can use it directly:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'<FormArrayField\n  name="peers"\n  label="WireGuard Peers"\n  defaultItem={{ publicKey: \'\', allowedIPs: \'\', endpoint: \'\' }}\n  maxItems={10}\n  addButtonText="Add Peer"\n  renderItem={({ index, remove, canRemove, fieldPrefix }) => (\n    <div className="space-y-2">\n      <RHFFormField\n        name={`${fieldPrefix}.publicKey` as any}\n        label={`Peer ${index + 1} Public Key`}\n        required\n      />\n      <RHFFormField\n        name={`${fieldPrefix}.allowedIPs` as any}\n        label="Allowed IPs"\n        placeholder="0.0.0.0/0"\n      />\n      {canRemove && (\n        <Button variant="ghost" size="sm" onClick={remove}>Remove</Button>\n      )}\n    </div>\n  )}\n/>\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"formfield-standalone-wrapper",children:"FormField (Standalone Wrapper)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/form-field/form-field.tsx"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Import:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { FormField, type FormFieldProps } from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface FormFieldProps {\n  label: string;\n  description?: string;\n  error?: string;\n  required?: boolean;\n  children: React.ReactNode;\n  className?: string;\n  id?: string;\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"FormField"})," is the non-RHF version. It clones its single child element and injects ",(0,s.jsx)(n.code,{children:"id"}),", ",(0,s.jsx)(n.code,{children:"aria-describedby"}),", and ",(0,s.jsx)(n.code,{children:"aria-invalid"})," automatically. Use it when you control validation state yourself (e.g., with raw ",(0,s.jsx)(n.code,{children:"useState"})," or a custom form library):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'<FormField\n  label="API Key"\n  description="Found in your router settings"\n  error={apiKeyError}\n  required\n>\n  <Input\n    value={apiKey}\n    onChange={(e) => setApiKey(e.target.value)}\n  />\n</FormField>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Note: When the child is not a single React element (e.g., you pass a fragment or multiple elements), ",(0,s.jsx)(n.code,{children:"FormField"})," will render the children without ID injection. Pass ",(0,s.jsx)(n.code,{children:"id"})," explicitly to the child in that case."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"formsection",children:"FormSection"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/form-section/FormSection.tsx"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Import:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { FormSection, type FormSectionProps } from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface FormSectionProps {\n  title: string;\n  description?: string;\n  collapsible?: boolean;      // default: false\n  defaultOpen?: boolean;      // default: true (when collapsible)\n  children: React.ReactNode;\n  errors?: string[];          // Section-level error messages\n  storageKey?: string;        // localStorage key for collapse state persistence\n  helpId?: string;            // Help system integration\n  className?: string;\n  asFieldset?: boolean;       // Use fieldset/legend HTML (default: true for non-collapsible)\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Groups related form fields under a titled section. When ",(0,s.jsx)(n.code,{children:"collapsible"})," is true, an animated expand/collapse toggle is shown. Collapse state persists across navigations via ",(0,s.jsx)(n.code,{children:"localStorage"})," when ",(0,s.jsx)(n.code,{children:"storageKey"})," is provided (defaults to a slugified version of ",(0,s.jsx)(n.code,{children:"title"}),")."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"errors"})," array renders a ",(0,s.jsx)(n.code,{children:"FormSectionErrors"})," summary block above the fields \u2014 useful for section-level cross-field validation errors that do not belong to a specific field."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'<FormSection\n  title="Network Settings"\n  description="Configure the router\'s IP addressing"\n  collapsible\n  defaultOpen\n  errors={networkErrors}\n>\n  <RHFFormField name="ipAddress" label="IP Address" required />\n  <RHFFormField name="gateway" label="Default Gateway" />\n  <RHFFormField name="dns" label="DNS Server" />\n</FormSection>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"useFormSection"})," hook drives collapse logic internally:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// Used internally \u2014 not normally called from feature code\nimport { useFormSection } from '@nasnet/ui/patterns';\n\nconst { isExpanded, toggle, expand, collapse } = useFormSection({\n  storageKey: 'network-settings',\n  defaultOpen: true,\n  collapsible: true,\n});\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"network-inputs",children:"Network Inputs"}),"\n",(0,s.jsxs)(n.p,{children:["All five network input components follow the same pattern: a headless hook containing all business logic, plus platform-specific presenters for Mobile and Desktop. The platform wrapper auto-detects breakpoint with ",(0,s.jsx)(n.code,{children:"useMediaQuery"})," and renders the correct presenter."]}),"\n",(0,s.jsxs)(n.p,{children:["Each is exported from ",(0,s.jsx)(n.code,{children:"@nasnet/ui/patterns"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import {\n  IPInput, useIPInput,\n  SubnetInput, useSubnetInput,\n  MACInput, useMACInput,\n  PortInput, usePortInput,\n  InterfaceSelector, useInterfaceSelector,\n} from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsxs)(n.p,{children:["All network inputs live under ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"ipinput",children:"IPInput"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Files:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/ip-input/ip-input.types.ts"})," \u2014 types"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/ip-input/use-ip-input.ts"})," \u2014 headless hook"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/ip-input/ip-input.tsx"})," \u2014 platform wrapper"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/ip-input/ip-input-desktop.tsx"})," \u2014 desktop presenter"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/ip-input/ip-input-mobile.tsx"})," \u2014 mobile presenter"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Component Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface IPInputProps {\n  value?: string;\n  onChange?: (value: string) => void;\n  /** IP version: 'v4' (default), 'v6', or 'both' for auto-detect */\n  version?: 'v4' | 'v6' | 'both';\n  /** Show IP type badge (Private, Public, Loopback, etc.) */\n  showType?: boolean;\n  /** Allow CIDR suffix (e.g., 192.168.1.0/24) */\n  allowCIDR?: boolean;\n  disabled?: boolean;\n  error?: string;\n  placeholder?: string;\n  className?: string;\n  name?: string;\n  required?: boolean;\n  onBlur?: () => void;\n  onFocus?: () => void;\n  id?: string;\n  'aria-describedby'?: string;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Headless Hook Signature:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"function useIPInput(config?: UseIPInputConfig): UseIPInputReturn\n\ninterface UseIPInputConfig {\n  value?: string;\n  onChange?: (value: string) => void;\n  version?: 'v4' | 'v6' | 'both'; // default: 'v4'\n  allowCIDR?: boolean;\n}\n\ninterface UseIPInputReturn {\n  value: string;             // Complete IP string\n  segments: string[];        // 4 segments (IPv4) or 8 (IPv6)\n  isValid: boolean;\n  error: string | null;\n  ipType: IPType | null;     // 'private' | 'public' | 'loopback' | 'link-local' | 'multicast' | 'broadcast' | 'unspecified'\n  cidrPrefix: string;\n  detectedVersion: 'v4' | 'v6' | null;\n  segmentRefs: RefObject<HTMLInputElement | null>[];\n  cidrRef: RefObject<HTMLInputElement | null>;\n  setSegment: (index: number, value: string) => void;\n  setCidrPrefix: (value: string) => void;\n  setValue: (value: string) => void;\n  handlePaste: (text: string, segmentIndex?: number) => void;\n  handleKeyDown: (index: number, event: React.KeyboardEvent) => void;\n  handleCidrKeyDown: (event: React.KeyboardEvent) => void;\n  focusSegment: (index: number) => void;\n  focusCidr: () => void;\n  handleSegmentChange: (index: number, value: string, cursorPosition?: number) => void;\n  segmentCount: number;      // 4 for IPv4, 8 for IPv6\n  separator: string;         // '.' for IPv4, ':' for IPv6\n  maxSegmentLength: number;  // 3 for IPv4, 4 for IPv6\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Validation rules:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"IPv4 octets: 0\u2013255, no leading zeros."}),"\n",(0,s.jsx)(n.li,{children:"IPv6 segments: up to 4 hex characters per segment."}),"\n",(0,s.jsxs)(n.li,{children:["Auto-advances focus on separator key (",(0,s.jsx)(n.code,{children:"."})," or ",(0,s.jsx)(n.code,{children:":"}),") or when segment reaches max length."]}),"\n",(0,s.jsxs)(n.li,{children:["Keyboard navigation: Arrow Left/Right moves between segments, Backspace moves back when empty, Home/End jump to first/last segment, ",(0,s.jsx)(n.code,{children:"/"})," jumps to CIDR field."]}),"\n",(0,s.jsxs)(n.li,{children:["Paste detection: extracts a full IP from pasted text (e.g., pasting ",(0,s.jsx)(n.code,{children:"192.168.1.100/24"})," populates all segments and CIDR)."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Desktop vs Mobile:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Desktop: Renders individual segment inputs separated by dots/colons, CIDR field appended with ",(0,s.jsx)(n.code,{children:"/"})," separator."]}),"\n",(0,s.jsx)(n.li,{children:"Mobile: Single text input with real-time normalization and validation feedback."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Usage:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'// In a regular form\n<IPInput\n  value={ipValue}\n  onChange={setIpValue}\n  showType\n  allowCIDR={false}\n/>\n\n// Inside RHFFormField\n<RHFFormField\n  name="serverIp"\n  label="Server IP"\n  renderInput={({ field }) => (\n    <IPInput\n      value={field.value}\n      onChange={field.onChange}\n      onBlur={field.onBlur}\n      version="v4"\n    />\n  )}\n/>\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"subnetinput",children:"SubnetInput"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Files:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/subnet-input/subnet-input.types.ts"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/subnet-input/use-subnet-input.ts"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/subnet-input/subnet-input.tsx"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/subnet-input/subnet-input-desktop.tsx"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/subnet-input/subnet-input-mobile.tsx"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Component Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface SubnetInputProps {\n  value?: string;             // Full CIDR: '192.168.1.0/24'\n  onChange?: (value: string) => void;\n  showCalculations?: boolean; // Show host count, network addr, broadcast\n  checkOverlap?: (cidr: string) => OverlapResult | null;\n  disabled?: boolean;\n  error?: string;\n  label?: string;\n  helpText?: string;\n  placeholder?: string;\n  required?: boolean;\n  id?: string;\n  name?: string;\n  className?: string;\n  onBlur?: () => void;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Headless Hook Return:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"interface UseSubnetInputReturn {\n  value: string;             // Full CIDR (e.g., '192.168.1.0/24')\n  ipPart: string;            // IP address portion\n  prefixPart: number;        // Prefix length (0-32)\n  isValid: boolean;\n  error: string | null;\n  networkInfo: SubnetInfo | null; // Calculated subnet info\n  overlap: OverlapResult | null;  // Conflict detection result\n  setIP: (ip: string) => void;\n  setPrefix: (prefix: number) => void;\n  setValue: (cidr: string) => void;\n  clear: () => void;\n  prefixOptions: PrefixOption[]; // Common prefixes for dropdown\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"SubnetInfo"})," structure returned in ",(0,s.jsx)(n.code,{children:"networkInfo"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"interface SubnetInfo {\n  network: string;       // e.g., '192.168.1.0'\n  firstHost: string | null;\n  lastHost: string | null;\n  broadcast: string;\n  hostCount: number;\n  prefix: number;\n  mask: string;          // e.g., '255.255.255.0'\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Pass a ",(0,s.jsx)(n.code,{children:"checkOverlap"})," callback to enable real-time conflict detection against existing subnets:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"<SubnetInput\n  value={subnet}\n  onChange={setSubnet}\n  showCalculations\n  checkOverlap={(cidr) => detectConflictWith(existingSubnets, cidr)}\n/>\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Desktop vs Mobile:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Desktop: IP input with prefix dropdown showing mask and host count. Collapsible calculations panel below."}),"\n",(0,s.jsx)(n.li,{children:"Mobile: Stacked layout, prefix shown as a numeric spinner. Calculations hidden behind a toggle."}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"macinput",children:"MACInput"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Files:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/mac-input/mac-input.types.ts"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/mac-input/use-mac-input.ts"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/mac-input/mac-input.tsx"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/mac-input/mac-input-desktop.tsx"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/mac-input/mac-input-mobile.tsx"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Component Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface MACInputProps {\n  value?: string;\n  onChange?: (value: string) => void;\n  /** Output format: 'colon' (AA:BB:CC:DD:EE:FF), 'dash' (AA-BB-CC-DD-EE-FF), 'dot' (AABB.CCDD.EEFF) */\n  format?: 'colon' | 'dash' | 'dot'; // default: 'colon'\n  /** Show vendor name from OUI prefix lookup */\n  showVendor?: boolean;\n  disabled?: boolean;\n  error?: string;\n  label?: string;\n  placeholder?: string;\n  className?: string;\n  name?: string;\n  required?: boolean;\n  onBlur?: () => void;\n  onFocus?: () => void;\n  id?: string;\n  'aria-describedby'?: string;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Headless Hook Return:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"interface UseMACInputReturn {\n  value: string;         // Normalized MAC (in chosen format)\n  isValid: boolean;\n  error: string | null;\n  vendor: string | null; // OUI vendor name when showVendor is true\n  handleChange: (input: string) => void;\n  setValue: (value: string) => void;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Validation rules:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Accepts colon, dash, and dotted formats as input and normalizes to the configured output format."}),"\n",(0,s.jsx)(n.li,{children:"Valid MAC: 6 hex octets, each 0\u2013FF."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Desktop vs Mobile:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Desktop: Segmented hex octets separated by the chosen delimiter, vendor badge in corner."}),"\n",(0,s.jsx)(n.li,{children:"Mobile: Single normalized input with live vendor badge displayed below."}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"portinput",children:"PortInput"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Files:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/port-input/port-input.types.ts"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/port-input/use-port-input.ts"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/port-input/port-input.tsx"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/port-input/port-input-desktop.tsx"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/port-input/port-input-mobile.tsx"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Component Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface PortInputProps {\n  value?: number | string;\n  onChange?: (value: number | string | null) => void;\n  /** 'single' (default), 'range' (start-end), 'multi' (comma-separated) */\n  mode?: 'single' | 'range' | 'multi';\n  protocol?: 'tcp' | 'udp' | 'both';\n  /** Show well-known service name for the port */\n  showService?: boolean;\n  /** Show autocomplete dropdown with common ports */\n  showSuggestions?: boolean;\n  serviceGroups?: ServiceGroup[];\n  disabled?: boolean;\n  error?: string;\n  label?: string;\n  placeholder?: string;\n  helpText?: string;\n  min?: number;    // default: 1\n  max?: number;    // default: 65535\n  className?: string;\n  name?: string;\n  required?: boolean;\n  onBlur?: () => void;\n  onFocus?: () => void;\n  id?: string;\n  'aria-describedby'?: string;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Headless Hook Return (abbreviated):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"interface UsePortInputReturn {\n  port: number | null;             // Parsed single port\n  portRange: PortRange | null;     // { start, end } in range mode\n  ports: number[];                 // Array in multi mode\n  inputValue: string;\n  rangeStartValue: string;\n  rangeEndValue: string;\n  displayValue: string;\n  portCount: number;\n  isValid: boolean;\n  error: string | null;\n  serviceName: string | null;      // Well-known service name\n  protocol: 'tcp' | 'udp' | 'both';\n  handleChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  handleRangeStartChange: (value: string) => void;\n  handleRangeEndChange: (value: string) => void;\n  handleAddPort: (port: number) => void;\n  handleRemovePort: (port: number) => void;\n  handleKeyDown: (e: React.KeyboardEvent<HTMLInputElement>) => void;\n  clear: () => void;\n  handleBlur: () => void;\n  handleFocus: () => void;\n  suggestions: PortSuggestion[];\n  showSuggestionsDropdown: boolean;\n  selectedSuggestionIndex: number;\n  handleSelectSuggestion: (port: number) => void;\n  handleSelectServiceGroup: (group: ServiceGroup) => void;\n  setShowSuggestionsDropdown: (show: boolean) => void;\n  navigateSuggestion: (direction: 'up' | 'down') => void;\n  inputRef: React.RefObject<HTMLInputElement | null>;\n  rangeStartRef: React.RefObject<HTMLInputElement | null>;\n  rangeEndRef: React.RefObject<HTMLInputElement | null>;\n  suggestionsRef: React.RefObject<HTMLDivElement | null>;\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Suggestion categories:"})," ",(0,s.jsx)(n.code,{children:"web"}),", ",(0,s.jsx)(n.code,{children:"secure"}),", ",(0,s.jsx)(n.code,{children:"database"}),", ",(0,s.jsx)(n.code,{children:"messaging"}),", ",(0,s.jsx)(n.code,{children:"mail"}),", ",(0,s.jsx)(n.code,{children:"network"}),", ",(0,s.jsx)(n.code,{children:"system"}),", ",(0,s.jsx)(n.code,{children:"containers"}),", ",(0,s.jsx)(n.code,{children:"mikrotik"}),", ",(0,s.jsx)(n.code,{children:"recent"}),", ",(0,s.jsx)(n.code,{children:"group"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Desktop vs Mobile:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Desktop: Full autocomplete dropdown with categorized suggestions, range shown as two adjacent fields."}),"\n",(0,s.jsx)(n.li,{children:"Mobile: Simplified input with a bottom sheet for suggestion browsing; range mode uses a spinner pair."}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"interfaceselector",children:"InterfaceSelector"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Files:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/interface-selector/interface-selector.types.ts"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/interface-selector/use-interface-selector.ts"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/interface-selector/interface-selector.tsx"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/interface-selector/interface-selector-desktop.tsx"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/network-inputs/interface-selector/interface-selector-mobile.tsx"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Component Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface InterfaceSelectorProps {\n  routerId: string;\n  value?: string | string[];    // Single ID or array for multi-select\n  onChange?: (value: string | string[]) => void;\n  multiple?: boolean;\n  /** Restrict to specific interface types */\n  types?: ('ethernet' | 'bridge' | 'vlan' | 'wireless' | 'vpn' | 'tunnel' | 'loopback')[];\n  showStatus?: boolean;         // default: true\n  showIP?: boolean;             // default: true\n  excludeUsed?: boolean;        // Hide interfaces already in use\n  disabled?: boolean;\n  error?: string;\n  placeholder?: string;\n  label?: string;\n  className?: string;\n  id?: string;\n  'aria-describedby'?: string;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Headless Hook Return:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"interface UseInterfaceSelectorReturn {\n  interfaces: RouterInterface[];\n  filteredInterfaces: RouterInterface[];\n  selectedValues: string[];\n  isLoading: boolean;\n  error: Error | null;\n  searchQuery: string;\n  typeFilter: InterfaceType | 'all';\n  isOpen: boolean;\n  setSearchQuery: (query: string) => void;\n  setTypeFilter: (type: InterfaceType | 'all') => void;\n  setIsOpen: (open: boolean) => void;\n  toggleSelection: (id: string) => void;\n  clearSelection: () => void;\n  getInterfaceById: (id: string) => RouterInterface | undefined;\n  getDisplayValue: () => string;\n  retry: () => void;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Desktop vs Mobile:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Desktop: Searchable combobox dropdown with type-filter tabs and status indicators."}),"\n",(0,s.jsx)(n.li,{children:"Mobile: Full-screen bottom sheet with search, type filter pills, and item list."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// Single interface selection\n<InterfaceSelector\n  routerId={routerId}\n  value={selectedInterface}\n  onChange={setSelectedInterface}\n  types={['ethernet', 'bridge']}\n  showStatus\n/>\n\n// Multi-select\n<InterfaceSelector\n  routerId={routerId}\n  value={selectedInterfaces}\n  onChange={setSelectedInterfaces}\n  multiple\n  excludeUsed\n/>\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"firewall-rule-editors",children:"Firewall Rule Editors"}),"\n",(0,s.jsx)(n.p,{children:"All rule editors follow the same pattern: a platform-aware wrapper rendering a Desktop or Mobile presenter, backed by a headless hook. They open as dialog sheets over the current page."}),"\n",(0,s.jsx)(n.h3,{id:"filterruleeditor",children:"FilterRuleEditor"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/filter-rule-editor/FilterRuleEditor.tsx"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Import:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { FilterRuleEditor, type FilterRuleEditorProps } from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface FilterRuleEditorProps {\n  routerId: string;\n  initialRule?: Partial<FilterRule>;\n  open: boolean;\n  onClose: () => void;\n  onSave: (rule: FilterRuleInput) => void | Promise<void>;\n  onDelete?: () => void | Promise<void>;\n  isSaving?: boolean;\n  isDeleting?: boolean;\n  mode?: 'create' | 'edit';  // default: 'create'\n  showChainDiagram?: boolean;\n  addressLists?: string[];\n  interfaceLists?: string[];\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Key fields: chain (forward/input/output), action (accept/drop/reject/log), protocol, source/destination IP, source/destination port, in/out interface, connection state, comment. When ",(0,s.jsx)(n.code,{children:"showChainDiagram"})," is true, the chain selector includes a visual packet-flow diagram."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'<FilterRuleEditor\n  routerId={routerId}\n  open={isEditorOpen}\n  onClose={() => setEditorOpen(false)}\n  onSave={handleSaveFilterRule}\n  mode="create"\n  showChainDiagram\n  addressLists={addressListNames}\n/>\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"mangleruleeditor",children:"MangleRuleEditor"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/mangle-rule-editor/MangleRuleEditor.tsx"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Import:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { MangleRuleEditor, type MangleRuleEditorProps } from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface MangleRuleEditorProps {\n  routerId: string;\n  initialRule?: Partial<MangleRule>;\n  open: boolean;\n  onClose: () => void;\n  onSave: (rule: MangleRuleInput) => void | Promise<void>;\n  onDelete?: () => void | Promise<void>;\n  isSaving?: boolean;\n  isDeleting?: boolean;\n  mode?: 'create' | 'edit';\n  showChainDiagram?: boolean;\n  addressLists?: string[];\n  interfaceLists?: string[];\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Key fields shared with FilterRuleEditor plus: action (mark-connection, mark-packet, mark-routing), new-connection-mark, new-packet-mark, new-routing-mark, DSCP value (with a ",(0,s.jsx)(n.code,{children:"DscpSelectorProps"}),"-driven UI showing common use cases)."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"rawruleeditor",children:"RawRuleEditor"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/raw-rule-editor/RawRuleEditor.tsx"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Import:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { RawRuleEditor, type RawRuleEditorProps } from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface RawRuleEditorProps {\n  routerId: string;\n  initialRule?: Partial<RawRule>;\n  open: boolean;\n  onClose: () => void;\n  onSave: (rule: RawRuleInput) => void | Promise<void>;\n  onDelete?: () => void | Promise<void>;\n  isSaving?: boolean;\n  isDeleting?: boolean;\n  mode?: 'create' | 'edit';\n  /** Show performance optimization tips */\n  showPerformanceTips?: boolean;\n  addressLists?: string[];\n  interfaceLists?: string[];\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Used for rules in the RAW table (pre-routing/output chains that bypass connection tracking). Chains are limited to ",(0,s.jsx)(n.code,{children:"prerouting"})," and ",(0,s.jsx)(n.code,{children:"output"}),". When ",(0,s.jsx)(n.code,{children:"showPerformanceTips"})," is true, inline tips explain the connection-tracking bypass benefit."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"ratelimitruleeditor",children:"RateLimitRuleEditor"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/rate-limit-rule-editor/RateLimitRuleEditor.tsx"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Import:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { RateLimitRuleEditor, type RateLimitRuleEditorProps } from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface RateLimitRuleEditorProps {\n  routerId: string;\n  initialRule?: Partial<RateLimitRule>;\n  open: boolean;\n  onClose: () => void;\n  onSave: (rule: RateLimitRuleInput) => void | Promise<void>;\n  onDelete?: () => void | Promise<void>;\n  isSaving?: boolean;\n  isDeleting?: boolean;\n  mode?: 'create' | 'edit';\n  addressLists?: string[];\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Key fields: target address list, max rate (with unit selector: bps/kbps/Mbps), burst limit, burst threshold, burst time, comment. No chain diagram (rate limiting is address-list based, not chain-based)."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"schedule-editor",children:"Schedule Editor"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/schedule-editor/ScheduleEditor.tsx"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Import:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { ScheduleEditor, type ScheduleEditorProps } from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface ScheduleEditorProps {\n  routingID: string;\n  initialSchedule?: Partial<ScheduleInput>;\n  open: boolean;\n  onClose: () => void;\n  onSave: (schedule: ScheduleInput) => void | Promise<void>;\n  onDelete?: () => void | Promise<void>;\n  isSaving?: boolean;\n  isDeleting?: boolean;\n  mode?: 'create' | 'edit';\n  defaultTimezone?: string; // defaults to browser timezone\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Backed by ",(0,s.jsx)(n.code,{children:"useScheduleEditor"})," hook which integrates RHF + Zod validation. Supports cron expressions, recurring schedules (daily/weekly/monthly), one-time schedules, and timezone selection. The Desktop presenter shows a cron preview and a visual time-picker; the Mobile presenter uses a segmented picker with a bottom sheet for timezone."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'<ScheduleEditor\n  routingID={routingId}\n  open={isOpen}\n  onClose={() => setOpen(false)}\n  onSave={handleSaveSchedule}\n  defaultTimezone="America/New_York"\n/>\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"port-knock-sequence-form",children:"Port Knock Sequence Form"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Files:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/port-knock-sequence-form/PortKnockSequenceForm.tsx"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/port-knock-sequence-form/use-port-knock-sequence-form.ts"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/port-knock-sequence-form/PortKnockSequenceFormDesktop.tsx"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/port-knock-sequence-form/PortKnockSequenceFormMobile.tsx"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Import:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import {\n  PortKnockSequenceForm,\n  type PortKnockSequenceFormProps,\n  usePortKnockSequenceForm,\n  type UsePortKnockSequenceFormReturn,\n} from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Component Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface PortKnockSequenceFormProps {\n  formState: UsePortKnockSequenceFormReturn;\n  isEditMode?: boolean;    // default: false\n  isSubmitting?: boolean;  // default: false\n  className?: string;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Hook Return:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface UsePortKnockSequenceFormReturn {\n  form: ReturnType<typeof useForm<PortKnockSequenceInput>>;\n  knockPorts: KnockPort[];\n  addKnockPort: () => void;\n  removeKnockPort: (index: number) => void;\n  reorderKnockPorts: (fromIndex: number, toIndex: number) => void;\n  preview: RulePreview[];    // Generated firewall rule preview\n  isLockoutRisk: boolean;    // True when sequence protects port 22 (SSH)\n  onSubmit: (data: PortKnockSequenceInput) => void | Promise<void>;\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The headless hook integrates RHF with ",(0,s.jsx)(n.code,{children:"PortKnockSequenceSchema"})," from ",(0,s.jsx)(n.code,{children:"@nasnet/core/types"}),". It detects SSH lockout risk when port 22 is included in the knock sequence and shows a warning in both presenters."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Desktop vs Mobile:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Desktop: Two-column layout. Left: drag-and-drop sortable port list. Right: live firewall rule preview."}),"\n",(0,s.jsx)(n.li,{children:"Mobile: Card-based list with long-press reordering (no drag-and-drop). Preview behind a toggle."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"function PortKnockingPage({ routerId }: { routerId: string }) {\n  const formState = usePortKnockSequenceForm({\n    onSubmit: async (data) => {\n      await savePortKnockSequence(routerId, data);\n    },\n  });\n\n  return (\n    <form onSubmit={formState.form.handleSubmit(formState.onSubmit)}>\n      <PortKnockSequenceForm formState={formState} />\n    </form>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"fileuploadzone",children:"FileUploadZone"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/file-upload-zone/FileUploadZone.tsx"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Import:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { FileUploadZone, type FileUploadZoneProps } from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface FileUploadZoneProps {\n  /** Accepted file extensions (e.g., ['.conf', '.json', '.rsc']) */\n  accept?: string[];\n  /** Called with the selected/dropped File object */\n  onFile: (file: File) => void;\n  isLoading?: boolean;\n  error?: string;\n  maxSize?: number;   // bytes, default: 10MB (10 * 1024 * 1024)\n  className?: string;\n  disabled?: boolean;\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Provides both drag-and-drop and click-to-browse file upload. Validates file type (against ",(0,s.jsx)(n.code,{children:"accept"})," extension list) and file size (against ",(0,s.jsx)(n.code,{children:"maxSize"}),") before calling ",(0,s.jsx)(n.code,{children:"onFile"}),". Invalid files are silently rejected \u2014 show a validation message in the parent if needed."]}),"\n",(0,s.jsx)(n.p,{children:"States: default, drag-over (border highlights with primary color), loading (spinner), error (red border and error text)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"<FileUploadZone\n  accept={['.rsc', '.conf', '.backup']}\n  maxSize={5 * 1024 * 1024}  // 5MB\n  onFile={async (file) => {\n    const text = await file.text();\n    parseConfig(text);\n  }}\n  isLoading={isUploading}\n  error={uploadError}\n/>\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"stepper-system",children:"Stepper System"}),"\n",(0,s.jsxs)(n.p,{children:["The stepper system is a complete headless + presenter architecture for multi-step wizards. All pieces are exported from ",(0,s.jsx)(n.code,{children:"@nasnet/ui/patterns"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"overview-of-pieces",children:"Overview of pieces"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Export"}),(0,s.jsx)(n.th,{children:"Role"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"useStepper"})}),(0,s.jsx)(n.td,{children:"Core headless hook \u2014 all state and navigation"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"useStepperKeyboard"})}),(0,s.jsx)(n.td,{children:"Keyboard navigation side-effect hook"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"StepperProvider"})," / ",(0,s.jsx)(n.code,{children:"useStepperContext"})]}),(0,s.jsx)(n.td,{children:"Context for sharing stepper state without prop drilling"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"getStepperAriaProps"})," / ",(0,s.jsx)(n.code,{children:"getStepAriaProps"})," / ",(0,s.jsx)(n.code,{children:"getStepPanelAriaProps"})]}),(0,s.jsx)(n.td,{children:"ARIA attribute generators"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"getStepAccessibleLabel"})," / ",(0,s.jsx)(n.code,{children:"getStepChangeAnnouncement"})]}),(0,s.jsx)(n.td,{children:"Screen reader text helpers"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"VStepper"})}),(0,s.jsx)(n.td,{children:"Vertical sidebar layout (desktop)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"HStepper"})}),(0,s.jsx)(n.td,{children:"Horizontal header layout (tablet)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"CStepper"})}),(0,s.jsx)(n.td,{children:"Three-column content wizard (desktop with live preview)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"MiniStepper"})}),(0,s.jsx)(n.td,{children:"Mobile bottom-navigation layout"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"usestepper",children:"useStepper"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/stepper/hooks/use-stepper.ts"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Import:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import {\n  useStepper,\n  type StepConfig,\n  type StepperConfig,\n  type UseStepperReturn,\n  type StepStatus,\n  type StepErrors,\n} from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Configuration:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"interface StepConfig {\n  id: string;\n  title: string;\n  description?: string;\n  validate?: (data: unknown) => Promise<ValidationResult>; // { valid: boolean; errors?: Record<string, string> }\n  canSkip?: boolean;\n  icon?: string;     // icon name for presenters\n  metadata?: Record<string, unknown>;\n}\n\ninterface StepperConfig {\n  steps: StepConfig[];\n  onComplete?: (stepData: Map<string, unknown>) => void | Promise<void>;\n  onStepChange?: (fromIndex: number, toIndex: number) => void;\n  validateOnChange?: boolean; // default: true\n  initialStep?: number;       // default: 0\n  initialStepData?: Map<string, unknown>;\n  freeNavigation?: boolean;   // default: false \u2014 allow jumping to any step\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return value:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"interface UseStepperReturn {\n  // Current state\n  currentStep: StepConfig;\n  currentIndex: number;\n  steps: StepConfig[];\n  completedSteps: Set<string>;\n  skippedSteps: Set<string>;\n  stepStates: Map<string, StepState>;\n\n  // Navigation\n  next: () => Promise<boolean>;   // validates then advances\n  prev: () => void;               // goes back without validating\n  goTo: (index: number) => Promise<boolean>;\n  skip: () => boolean;            // only works if step.canSkip is true\n\n  // Status flags\n  isFirst: boolean;\n  isLast: boolean;\n  canProceed: boolean;\n  isValidating: boolean;\n  isCompleted: boolean;\n\n  // Validation\n  errors: StepErrors;             // errors for current step\n  stepsWithErrors: string[];\n  setStepErrors: (stepId: string, errors: StepErrors) => void;\n  clearErrors: () => void;\n  validate: () => Promise<boolean>;\n\n  // Step data\n  getStepData: <T = unknown>(stepId: string) => T | undefined;\n  setStepData: (data: unknown) => void;\n  getAllStepData: () => Map<string, unknown>;\n\n  // Progress\n  progress: number;      // 0-100\n  completedCount: number;\n  totalSteps: number;\n\n  // Utilities\n  canAccessStep: (index: number) => boolean;\n  isStepCompleted: (stepId: string) => boolean;\n  getStepStatus: (stepId: string) => StepStatus; // 'pending' | 'active' | 'completed' | 'error' | 'skipped'\n  reset: () => void;\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"usestepperkeyboard",children:"useStepperKeyboard"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/stepper/hooks/use-stepper-keyboard.ts"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Import:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { useStepperKeyboard, getStepperKeyboardHints } from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Signature:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"function useStepperKeyboard(\n  stepper: UseStepperReturn,\n  options?: {\n    enabled?: boolean;\n    containerRef?: React.RefObject<HTMLElement>;\n  }\n): void\n"})}),"\n",(0,s.jsx)(n.p,{children:"Attaches keydown event listeners. Bindings:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ArrowLeft"})," / ",(0,s.jsx)(n.code,{children:"ArrowUp"})," \u2014 previous step"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ArrowRight"})," / ",(0,s.jsx)(n.code,{children:"ArrowDown"})," \u2014 next step (if accessible)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Enter"})," \u2014 call ",(0,s.jsx)(n.code,{children:"stepper.next()"})," (validates)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Home"})," \u2014 go to first step"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"End"})," \u2014 go to last accessible step"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"1"}),"\u2013",(0,s.jsx)(n.code,{children:"9"})," \u2014 jump to step by number"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Escape"})," \u2014 clear current step errors"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["When ",(0,s.jsx)(n.code,{children:"containerRef"})," is provided, events are scoped to that element; otherwise they are bound to ",(0,s.jsx)(n.code,{children:"document"}),". Input fields within the container are not intercepted."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"stepper-context",children:"Stepper Context"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/stepper/stepper-context.tsx"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Import:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import {\n  StepperProvider,\n  useStepperContext,\n  useOptionalStepperContext,\n} from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// Wrap your stepper UI in StepperProvider\nconst stepper = useStepper(config);\n\n<StepperProvider stepper={stepper}>\n  <StepList />\n  <StepContent />\n  <StepNavigation />\n</StepperProvider>\n\n// Read stepper from context in any child\nfunction StepNavigation() {\n  const stepper = useStepperContext(); // throws if not in provider\n  return (\n    <div>\n      <Button onClick={stepper.prev} disabled={stepper.isFirst}>Back</Button>\n      <Button onClick={() => stepper.next()} disabled={stepper.isValidating}>\n        {stepper.isLast ? 'Finish' : 'Next'}\n      </Button>\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"useOptionalStepperContext()"})," returns ",(0,s.jsx)(n.code,{children:"null"})," instead of throwing when used outside a provider \u2014 useful for components that can be used inside or outside a wizard."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"aria-helpers",children:"ARIA Helpers"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/stepper/hooks/use-stepper-aria.ts"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import {\n  getStepperAriaProps,\n  getStepAriaProps,\n  getStepPanelAriaProps,\n  getStepAccessibleLabel,\n  getStepChangeAnnouncement,\n  getNavigationButtonAriaProps,\n} from '@nasnet/ui/patterns';\n\n// Container (tablist role)\nconst listProps = getStepperAriaProps(stepper, {\n  id: 'setup-wizard',\n  orientation: 'vertical',\n  label: 'Setup steps',\n});\n// Returns: { role: 'tablist', 'aria-label': 'Setup steps', 'aria-orientation': 'vertical' }\n\n// Individual step tab\nconst stepProps = getStepAriaProps(stepper, index, { stepperId: 'setup-wizard' });\n// Returns: { role: 'tab', id: '...', 'aria-selected': boolean, ... }\n\n// Step content panel\nconst panelProps = getStepPanelAriaProps(stepper, index, { stepperId: 'setup-wizard' });\n// Returns: { role: 'tabpanel', id: '...', 'aria-labelledby': '...', tabIndex: ... }\n\n// Screen reader label: \"Step 2 of 3: LAN Setup, current step\"\nconst label = getStepAccessibleLabel(stepper, index);\n\n// Live region text: \"Now on step 2 of 3: LAN Setup\"\nconst announcement = getStepChangeAnnouncement(stepper);\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"layout-variants",children:"Layout Variants"}),"\n",(0,s.jsx)(n.h4,{id:"vstepper-vertical--desktop-sidebar",children:"VStepper (Vertical \u2014 Desktop Sidebar)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/stepper/components/v-stepper/"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"interface VStepperProps {\n  stepper: UseStepperReturn;\n  className?: string;\n  width?: string | number;       // default: '256px'\n  showDescriptions?: boolean;    // default: true\n  showErrorCount?: boolean;      // default: false\n  'aria-label'?: string;\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Vertical step list with connector lines between items. Each item shows step number/icon, title, description, and status indicator. Clickable for completed steps. Used as the left panel of ",(0,s.jsx)(n.code,{children:"CStepper"}),"."]}),"\n",(0,s.jsx)(n.h4,{id:"hstepper-horizontal--tablet-header",children:"HStepper (Horizontal \u2014 Tablet Header)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/stepper/components/h-stepper/"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"interface HStepperProps {\n  stepper: UseStepperReturn;\n  className?: string;\n  showTitles?: boolean;    // default: true\n  useIcons?: boolean;      // default: true\n  sticky?: boolean;        // default: true\n  stickyOffset?: string;   // default: '0'\n  allowSkipSteps?: boolean;\n  onMenuClick?: () => void;\n  showBackButton?: boolean; // default: true\n  'aria-label'?: string;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Horizontal step indicator row. Steps shown as numbered circles connected by a progress bar. Collapses step titles on narrow viewports. Supports sticky positioning for wizard headers."}),"\n",(0,s.jsx)(n.h4,{id:"cstepper-content--desktop-three-column",children:"CStepper (Content \u2014 Desktop Three-Column)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/stepper/components/c-stepper/"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"interface CStepperProps {\n  stepper: UseStepperReturn;\n  stepContent: React.ReactNode;    // Form fields for current step\n  previewContent?: React.ReactNode; // Live config preview (right panel)\n  className?: string;\n  previewTitle?: string;           // default: 'Preview'\n  defaultShowPreview?: boolean;    // default: true (auto-collapses below 1280px)\n  'aria-label'?: string;\n  onPreviewToggle?: (visible: boolean) => void;\n  sidebarWidth?: string | number;  // default: 280px\n  previewWidth?: string | number;  // default: 320px\n  showStepDescriptions?: boolean;  // default: true\n  customNavigation?: React.ReactNode;\n  navigationLabels?: {\n    previous?: string;\n    next?: string;\n    complete?: string;\n  };\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Three-column layout: left sidebar (VStepper, 280px) + center content area (flexible) + right preview panel (320px, collapsible with Alt+P shortcut)."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"CStepperPreview"})," is exported as a standalone panel for custom embedding:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"interface CStepperPreviewProps {\n  children: React.ReactNode;\n  title?: string;    // default: 'Preview'\n  onClose: () => void;\n  className?: string;\n  width?: string | number;\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"ministepper-mobile",children:"MiniStepper (Mobile)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/stepper/components/mini-stepper/"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"interface MiniStepperProps {\n  stepper: UseStepperReturn;\n  stepContent: React.ReactNode;\n  className?: string;\n  onStepChange?: (step: StepConfig, index: number) => void;\n  disableSwipe?: boolean;  // default: false\n  'aria-label'?: string;\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Mobile-optimized layout: top progress bar + current step title, full-width content area, fixed bottom bar with Back/Next buttons (44px height for touch targets). Supports swipe gestures to navigate (disable for forms with text inputs via ",(0,s.jsx)(n.code,{children:"disableSwipe"}),")."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"complete-stepper-example",children:"Complete Stepper Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import {\n  useStepper,\n  useStepperKeyboard,\n  StepperProvider,\n  CStepper,\n  MiniStepper,\n  type StepConfig,\n} from '@nasnet/ui/patterns';\nimport { useRef } from 'react';\n\n// Step validation with Zod\nasync function validateWAN(data: unknown) {\n  const result = wanSchema.safeParse(data);\n  if (!result.success) {\n    const errors: Record<string, string> = {};\n    result.error.errors.forEach((e) => {\n      errors[e.path.join('.')] = e.message;\n    });\n    return { valid: false, errors };\n  }\n  return { valid: true };\n}\n\nconst steps: StepConfig[] = [\n  {\n    id: 'wan',\n    title: 'WAN Configuration',\n    description: 'Set up your internet connection',\n    icon: 'globe',\n    validate: validateWAN,\n  },\n  {\n    id: 'lan',\n    title: 'LAN Setup',\n    description: 'Configure local network',\n    icon: 'network',\n  },\n  {\n    id: 'dns',\n    title: 'DNS Settings',\n    description: 'Configure name resolution',\n    icon: 'search',\n    canSkip: true,\n  },\n  {\n    id: 'review',\n    title: 'Review & Apply',\n    description: 'Review your configuration',\n    icon: 'check',\n  },\n];\n\nfunction SetupWizard() {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const isMobile = useMediaQuery('(max-width: 640px)');\n\n  const stepper = useStepper({\n    steps,\n    validateOnChange: true,\n    onComplete: async (allData) => {\n      const config = Object.fromEntries(allData);\n      await applyConfiguration(config);\n    },\n    onStepChange: (from, to) => {\n      analytics.track('wizard_step', { from, to });\n    },\n  });\n\n  useStepperKeyboard(stepper, { containerRef });\n\n  const stepContent = (\n    <div>\n      {stepper.currentStep.id === 'wan' && <WANForm stepper={stepper} />}\n      {stepper.currentStep.id === 'lan' && <LANForm stepper={stepper} />}\n      {stepper.currentStep.id === 'dns' && <DNSForm stepper={stepper} />}\n      {stepper.currentStep.id === 'review' && <ReviewStep stepper={stepper} />}\n    </div>\n  );\n\n  return (\n    <StepperProvider stepper={stepper}>\n      <div ref={containerRef} tabIndex={-1}>\n        {isMobile ? (\n          <MiniStepper stepper={stepper} stepContent={stepContent} />\n        ) : (\n          <CStepper\n            stepper={stepper}\n            stepContent={stepContent}\n            previewContent={<ConfigPreview stepper={stepper} />}\n            previewTitle=\"RouterOS Script\"\n            navigationLabels={{ complete: 'Apply Configuration' }}\n          />\n        )}\n      </div>\n    </StepperProvider>\n  );\n}\n\n// Step component reading data via context\nfunction WANForm({ stepper }: { stepper: UseStepperReturn }) {\n  const form = useForm({ resolver: zodResolver(wanSchema) });\n\n  // Save form data into stepper on change\n  useEffect(() => {\n    const sub = form.watch((values) => stepper.setStepData(values));\n    return () => sub.unsubscribe();\n  }, [form, stepper]);\n\n  return (\n    <FormProvider {...form}>\n      <RHFFormField name=\"type\" label=\"Connection Type\" required />\n      {stepper.errors['type'] && (\n        <FormFieldError message={stepper.errors['type']} />\n      )}\n    </FormProvider>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"validationprogress",children:"ValidationProgress"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Files:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/validation-progress/ValidationProgress.tsx"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/validation-progress/ValidationStage.tsx"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/validation-progress/types.ts"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Import:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import {\n  ValidationProgress,\n  ValidationStage,\n  useValidationProgress,\n  type ValidationProgressProps,\n  type ValidationStageName,\n  type ValidationStageStatus,\n  type ValidationStageResult,\n  type ValidationError,\n  type ValidationWarning,\n  type ValidationResult,\n} from '@nasnet/ui/patterns';\n"})}),"\n",(0,s.jsx)(n.h3,{id:"types",children:"Types"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// The 7 stages in order\ntype ValidationStageName =\n  | 'schema'          // 1. JSON schema / type validation\n  | 'syntax'          // 2. RouterOS syntax checks\n  | 'cross-resource'  // 3. Reference integrity across resources\n  | 'dependencies'    // 4. Dependency ordering and cycles\n  | 'network'         // 5. IP conflicts and subnet overlaps\n  | 'platform'        // 6. RouterOS version capability checks\n  | 'dry-run';        // 7. Simulated apply on test target\n\ntype ValidationStageStatus = 'pending' | 'running' | 'passed' | 'failed' | 'skipped';\n\ninterface ValidationError {\n  code: string;\n  message: string;\n  fieldPath?: string;       // e.g., 'interfaces.0.address'\n  resourceUuid?: string;    // UUID of conflicting resource\n  suggestedFix?: string;\n}\n\ninterface ValidationWarning {\n  code: string;\n  message: string;\n  fieldPath?: string;\n}\n\ninterface ValidationStageResult {\n  stage: ValidationStageName;\n  status: ValidationStageStatus;\n  errors: ValidationError[];\n  warnings: ValidationWarning[];\n  durationMs?: number;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"validationprogress-component",children:"ValidationProgress Component"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Props:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface ValidationProgressProps {\n  stages?: ValidationStageResult[];\n  /** Stages to show (defaults to all 7 in order) */\n  visibleStages?: ValidationStageName[];\n  /** Index of currently running stage (0-based) */\n  currentStage?: number;\n  isComplete?: boolean;\n  isValid?: boolean;\n  totalDurationMs?: number;\n  /** Auto-expand failed stages on completion (default: true) */\n  autoExpandFailed?: boolean;\n  className?: string;\n  compact?: boolean;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"The component:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Renders a header with animated status (spinning loader while running, check/X when complete)."}),"\n",(0,s.jsx)(n.li,{children:"Shows an animated progress bar tracking stages passed / total."}),"\n",(0,s.jsx)(n.li,{children:"Lists all 7 stages with status icons; each stage row is clickable to expand error/warning details."}),"\n",(0,s.jsxs)(n.li,{children:["Auto-expands failed stages when ",(0,s.jsx)(n.code,{children:"autoExpandFailed"})," is true."]}),"\n",(0,s.jsxs)(n.li,{children:["Includes a ",(0,s.jsx)(n.code,{children:'role="status" aria-live="polite"'})," region for screen reader announcements."]}),"\n",(0,s.jsxs)(n.li,{children:["Uses semantic tokens: ",(0,s.jsx)(n.code,{children:"text-success"})," / ",(0,s.jsx)(n.code,{children:"bg-error-light"})," / ",(0,s.jsx)(n.code,{children:"border-error/20"})," \u2014 no hardcoded colors."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"usevalidationprogress-hook",children:"useValidationProgress Hook"}),"\n",(0,s.jsx)(n.p,{children:"Returns state and imperatively-driven update functions:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"const {\n  stages,\n  currentStageIndex,\n  isComplete,\n  isValid,\n  totalDurationMs,\n  reset,\n  startStage,    // marks a stage as 'running' and increments index\n  completeStage, // sets final result for a stage\n  finish,        // marks pipeline complete with pass/fail\n} = useValidationProgress();\n"})}),"\n",(0,s.jsx)(n.h3,{id:"usage-in-apply-confirm-merge-flow",children:"Usage in Apply-Confirm-Merge Flow"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"function ApplyConfigDialog({ onConfirm }: { onConfirm: () => void }) {\n  const {\n    stages, currentStageIndex, isComplete, isValid, totalDurationMs,\n    reset, startStage, completeStage, finish,\n  } = useValidationProgress();\n  const [isRunning, setIsRunning] = useState(false);\n\n  async function runValidation() {\n    reset();\n    setIsRunning(true);\n    const start = Date.now();\n\n    const pipeline: ValidationStageName[] = [\n      'schema', 'syntax', 'cross-resource', 'dependencies', 'network', 'platform', 'dry-run',\n    ];\n\n    for (const stageName of pipeline) {\n      startStage(stageName);\n      try {\n        const result = await validateStage(stageName, pendingChangeset);\n        completeStage({\n          stage: stageName,\n          status: result.passed ? 'passed' : 'failed',\n          errors: result.errors ?? [],\n          warnings: result.warnings ?? [],\n          durationMs: result.durationMs,\n        });\n        if (!result.passed) {\n          finish(false, Date.now() - start);\n          setIsRunning(false);\n          return;\n        }\n      } catch (err) {\n        completeStage({\n          stage: stageName,\n          status: 'failed',\n          errors: [{ code: 'UNEXPECTED', message: String(err) }],\n          warnings: [],\n        });\n        finish(false, Date.now() - start);\n        setIsRunning(false);\n        return;\n      }\n    }\n\n    finish(true, Date.now() - start);\n    setIsRunning(false);\n  }\n\n  return (\n    <Dialog open>\n      <DialogContent className=\"max-w-lg\">\n        <DialogHeader>\n          <DialogTitle>Validate & Apply Configuration</DialogTitle>\n        </DialogHeader>\n\n        <ValidationProgress\n          stages={stages}\n          currentStage={currentStageIndex}\n          isComplete={isComplete}\n          isValid={isValid}\n          totalDurationMs={totalDurationMs}\n          autoExpandFailed\n        />\n\n        <DialogFooter className=\"gap-2\">\n          {!isRunning && !isComplete && (\n            <Button onClick={runValidation}>Run Validation</Button>\n          )}\n          {isComplete && isValid && (\n            <Button onClick={onConfirm}>Apply Changes</Button>\n          )}\n          {isComplete && !isValid && (\n            <Button variant=\"outline\" onClick={reset}>Fix Errors & Retry</Button>\n          )}\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.code,{children:"multi-package-flows.md"})," for the complete Apply-Confirm-Merge flow that uses this component across the configuration pipeline."]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},71184:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>l});var t=r(14041);const s={},i=t.createContext(s);function o(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);