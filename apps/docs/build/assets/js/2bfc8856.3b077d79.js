"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[93327],{71184:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>a});var t=r(14041);const s={},o=t.createContext(s);function i(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(o.Provider,{value:n},e.children)}},86312:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"routing-and-navigation","title":"Routing and Navigation Architecture","description":"Document Status: Comprehensive reference","source":"@site/../../libs/features/docs/routing-and-navigation.md","sourceDirName":".","slug":"/routing-and-navigation","permalink":"/docs/features/routing-and-navigation","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../../libs/features/docs/routing-and-navigation.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Feature Library Documentation","permalink":"/docs/features/"},"next":{"title":"State Management Guide","permalink":"/docs/features/state-management"}}');var s=r(31085),o=r(71184);const i={},a="Routing and Navigation Architecture",l={},d=[{value:"1. Overview",id:"1-overview",level:2},{value:"2. Complete Route Tree",id:"2-complete-route-tree",level:2},{value:"Routing Conventions",id:"routing-conventions",level:3},{value:"3. File-Based Routing Convention",id:"3-file-based-routing-convention",level:2},{value:"Creating a New Route",id:"creating-a-new-route",level:3},{value:"4. Root Layout (<code>__root.tsx</code>)",id:"4-root-layout-__roottsx",level:2},{value:"Root Layout Structure",id:"root-layout-structure",level:3},{value:"App-Level Hooks in Root",id:"app-level-hooks-in-root",level:3},{value:"UI Components in Root",id:"ui-components-in-root",level:3},{value:"5. Router Panel Layout (<code>router/$id/route.tsx</code>)",id:"5-router-panel-layout-routeridroutetsx",level:2},{value:"How <code>$id</code> Flows to Child Routes",id:"how-id-flows-to-child-routes",level:3},{value:"6. Code Splitting &amp; Lazy Loading",id:"6-code-splitting--lazy-loading",level:2},{value:"LazyBoundary Component",id:"lazyboundary-component",level:3},{value:"Example: DHCP Route",id:"example-dhcp-route",level:3},{value:"Lazy Loading Utilities",id:"lazy-loading-utilities",level:3},{value:"SuspenseBoundary Component",id:"suspenseboundary-component",level:3},{value:"Preloading Strategy",id:"preloading-strategy",level:3},{value:"7. Route Guards &amp; Authentication",id:"7-route-guards--authentication",level:2},{value:"TanStack Router Guards",id:"tanstack-router-guards",level:3},{value:"Component-Level Auth Checks",id:"component-level-auth-checks",level:3},{value:"8. Token Refresh Hook",id:"8-token-refresh-hook",level:2},{value:"9. Error Handling at Route Level",id:"9-error-handling-at-route-level",level:2},{value:"Root Error Handling",id:"root-error-handling",level:3},{value:"Per-Route Error Boundaries",id:"per-route-error-boundaries",level:3},{value:"Lazy Loading Error Handling",id:"lazy-loading-error-handling",level:3},{value:"10. App-Level Hooks",id:"10-app-level-hooks",level:2},{value:"useConnectionHeartbeat()",id:"useconnectionheartbeat",level:3},{value:"useConnectionToast()",id:"useconnectiontoast",level:3},{value:"useDefaultCommands()",id:"usedefaultcommands",level:3},{value:"useGlobalShortcuts()",id:"useglobalshortcuts",level:3},{value:"useAlertNotifications()",id:"usealertnotifications",level:3},{value:"11. Navigation Patterns",id:"11-navigation-patterns",level:2},{value:"Link Navigation",id:"link-navigation",level:3},{value:"Programmatic Navigation",id:"programmatic-navigation",level:3},{value:"Route Params",id:"route-params",level:3},{value:"Route Preloading",id:"route-preloading",level:3},{value:"Navigation History",id:"navigation-history",level:3},{value:"12. Cross-References",id:"12-cross-references",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"routing-and-navigation-architecture",children:"Routing and Navigation Architecture"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Document Status:"})," Comprehensive reference\n",(0,s.jsx)(n.strong,{children:"Last Updated:"})," 2026-02\n",(0,s.jsx)(n.strong,{children:"Scope:"})," TanStack Router file-based routing, code splitting, lazy loading, guards, error handling, app-level hooks"]}),"\n",(0,s.jsx)(n.h2,{id:"1-overview",children:"1. Overview"}),"\n",(0,s.jsxs)(n.p,{children:["NasNetConnect uses ",(0,s.jsx)(n.strong,{children:"TanStack Router"})," with a ",(0,s.jsx)(n.strong,{children:"file-based routing convention"}),". Every route is defined as a file in ",(0,s.jsx)(n.code,{children:"apps/connect/src/routes/"})," that exports a route configuration. The router automatically discovers and registers all routes, providing type-safe navigation, code splitting by default, and nested route hierarchies."]}),"\n",(0,s.jsx)(n.p,{children:"Key architecture principles:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"File-based routing"})," \u2014 Files map to routes automatically (no route registry)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Code splitting by default"})," \u2014 Heavy route components are lazy-loaded with skeleton fallbacks"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Nested layouts"})," \u2014 Parent routes can wrap child routes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type-safe params"})," \u2014 Dynamic route params are type-checked (",(0,s.jsx)(n.code,{children:"$id"}),", ",(0,s.jsx)(n.code,{children:"$serverId"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"App-level integration"})," \u2014 Global hooks manage heartbeat, authentication, notifications, shortcuts"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"2-complete-route-tree",children:"2. Complete Route Tree"}),"\n",(0,s.jsx)(n.p,{children:"The application has 40+ routes organized into five main categories:"}),"\n",(0,s.jsx)(n.mermaid,{value:'graph TD\n    root["/ Root Layout (__root.tsx)"]\n\n    root --\x3e home["/ Home / Discovery (index.tsx)"]\n    root --\x3e dashboard["\ud83c\udfe0 /dashboard Dashboard (dashboard.tsx)"]\n    dashboard --\x3e db_network["\ud83d\udcca /dashboard?tab=network Dashboard Network Tab"]\n    dashboard --\x3e db_routes["\ud83d\udee3\ufe0f /dashboard?tab=routes Dashboard Routes Tab"]\n    dashboard --\x3e db_dns["\ud83d\udd0d /dashboard?tab=dns-lookup Dashboard DNS Lookup"]\n    dashboard --\x3e db_troubleshoot["\ud83d\udd27 /dashboard?tab=troubleshoot Dashboard Troubleshoot"]\n\n    root --\x3e discover["\ud83d\udd0e /discover Router Discovery (discover.tsx)"]\n    root --\x3e routers["\ud83d\udccb /routers Router List (routers.tsx)"]\n\n    root --\x3e network["\ud83c\udf10 /network Network Hub (network.tsx)"]\n    network --\x3e dhcp["\ud83d\udce1 /network/dhcp"]\n    dhcp --\x3e dhcp_overview["\ud83d\udce1 /network/dhcp/ DHCP Overview (index.tsx)"]\n    dhcp --\x3e dhcp_leases["\ud83c\udff7\ufe0f /network/dhcp/leases DHCP Leases (leases.tsx)"]\n    dhcp --\x3e dhcp_server["\u2699\ufe0f /network/dhcp/$serverId DHCP Server Detail"]\n    dhcp --\x3e dhcp_new["\u2795 /network/dhcp/new Create DHCP Server (new.tsx)"]\n\n    network --\x3e dns["\ud83c\udf0d /network/dns"]\n    dns --\x3e dns_diag["\ud83d\udd0d /network/dns/diagnostics DNS Diagnostics (diagnostics.tsx)"]\n\n    root --\x3e wifi["\ud83d\udcf6 /wifi WiFi Hub (wifi.tsx)"]\n\n    root --\x3e settings["\u2699\ufe0f /settings Settings Layout (settings.tsx)"]\n    settings --\x3e notif["\ud83d\udd14 /settings/notifications Notification Settings (notifications.tsx)"]\n    notif --\x3e webhooks["\ud83e\ude9d /settings/notifications/webhooks Webhooks (webhooks.tsx)"]\n\n    root --\x3e router["\ud83d\udda5\ufe0f /router/$id Router Panel Layout (route.tsx)"]\n\n    router --\x3e router_overview["\ud83d\udcca /router/$id/ Overview Tab (index.tsx)"]\n    router --\x3e router_network["\ud83c\udf10 /router/$id/network Network Tab (network.tsx)"]\n    router --\x3e router_dhcp["\ud83d\udce1 /router/$id/dhcp DHCP Tab (dhcp.tsx)"]\n    router --\x3e router_dns["\ud83c\udf0d /router/$id/dns DNS Tab (dns.tsx)"]\n    router --\x3e router_logs["\ud83d\udcdd /router/$id/logs Logs Tab (logs.tsx)"]\n    router --\x3e router_plugins["\ud83d\udd0c /router/$id/plugins Plugins Tab (plugins.tsx)"]\n    router --\x3e router_routing["\ud83d\udee3\ufe0f /router/$id/routing Routing Tab (routing.tsx)"]\n    router --\x3e router_vlans["\ud83c\udff7\ufe0f /router/$id/vlans VLANs Tab (vlans.tsx)"]\n\n    router --\x3e firewall["\ud83d\udea8 /router/$id/firewall Firewall Parent (firewall.tsx)"]\n    firewall --\x3e fw_addrlists["\ud83d\udccb /router/$id/firewall/address-lists Address Lists"]\n    firewall --\x3e fw_conn["\ud83d\udd17 /router/$id/firewall/connections Connections"]\n    firewall --\x3e fw_logs["\ud83d\udcdd /router/$id/firewall/logs Firewall Logs"]\n    firewall --\x3e fw_mangle["\ud83d\udce6 /router/$id/firewall/mangle Mangle Rules"]\n    firewall --\x3e fw_pk["\ud83d\udd10 /router/$id/firewall/port-knocking Port Knocking"]\n    firewall --\x3e fw_rate["\u23f1\ufe0f /router/$id/firewall/rate-limiting Rate Limiting"]\n    firewall --\x3e fw_raw["\ud83d\udd27 /router/$id/firewall/raw Raw Rules"]\n    firewall --\x3e fw_sport["\ud83d\udd0c /router/$id/firewall/service-ports Service Ports"]\n    firewall --\x3e fw_templates["\ud83d\udccb /router/$id/firewall/templates Templates"]\n\n    router --\x3e vpn["\ud83d\udd12 /router/$id/vpn VPN Parent (index.tsx)"]\n    vpn --\x3e vpn_clients["\ud83d\udc65 /router/$id/vpn/clients VPN Clients (clients.tsx)"]\n    vpn --\x3e vpn_servers["\ud83d\udda5\ufe0f /router/$id/vpn/servers VPN Servers (servers.tsx)"]\n\n    router --\x3e wifi_panel["\ud83d\udcf6 /router/$id/wifi WiFi Parent (index.tsx)"]\n    wifi_panel --\x3e wifi_detail["\ud83d\udcf6 /router/$id/wifi/$interfaceName WiFi Detail"]\n\n    router --\x3e services["\ud83d\udee0\ufe0f /router/$id/services Services Parent (index.tsx)"]\n    services --\x3e svc_templates["\ud83d\udccb /router/$id/services/templates Service Templates"]\n    services --\x3e svc_detail["\u2699\ufe0f /router/$id/services/$instanceId Service Detail"]\n\n    style root fill:#7c3aed,color:#fff\n    style dashboard fill:#2563eb,color:#fff\n    style network fill:#2563eb,color:#fff\n    style settings fill:#2563eb,color:#fff\n    style router fill:#7c3aed,color:#fff'}),"\n",(0,s.jsx)(n.h3,{id:"routing-conventions",children:"Routing Conventions"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Flat routes (dashboard.*):"})," Multiple routes at root level using dot notation"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"dashboard.tsx"})," \u2192 ",(0,s.jsx)(n.code,{children:"/dashboard"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"dashboard.network.tsx"})," \u2192 ",(0,s.jsx)(n.code,{children:"/dashboard?tab=network"})," or nested route"]}),"\n",(0,s.jsx)(n.li,{children:"These keep the root level clean while grouping related pages"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Nested directories (router/$id/*):"})," Deep nesting for contextual hierarchies"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Parent routes use ",(0,s.jsx)(n.code,{children:"route.tsx"})," to define the layout"]}),"\n",(0,s.jsx)(n.li,{children:"Child routes inherit the parent's layout wrapper"}),"\n",(0,s.jsxs)(n.li,{children:["Dynamic segments use ",(0,s.jsx)(n.code,{children:"$name"})," convention"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Dynamic params:"})," Enclosed in ",(0,s.jsx)(n.code,{children:"$"})," for automatic type inference"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"$id"})," \u2014 Router ID param (e.g., ",(0,s.jsx)(n.code,{children:"/router/abc123"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"$serverId"})," \u2014 DHCP server ID"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"$interfaceName"})," \u2014 WiFi interface name"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"$instanceId"})," \u2014 Service instance ID"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"3-file-based-routing-convention",children:"3. File-Based Routing Convention"}),"\n",(0,s.jsx)(n.p,{children:"TanStack Router automatically maps files to routes using these rules:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"File Name"}),(0,s.jsx)(n.th,{children:"Route"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"index.tsx"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"/"})," or parent path"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dashboard.tsx"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/dashboard"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dashboard.network.tsx"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"/dashboard/network"})," (nested)"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"router/$id/index.tsx"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/router/:id"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"router/$id/dhcp.tsx"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/router/:id/dhcp"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"router/$id/firewall/logs.tsx"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/router/:id/firewall/logs"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"$id.tsx"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"/:id"})," (dynamic param)"]})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key patterns:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Dot notation creates nested groups"})," \u2014 ",(0,s.jsx)(n.code,{children:"dashboard.network.tsx"})," creates a logical grouping without deep nesting"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.code,{children:"route.tsx"})," is a layout file"]})," \u2014 Defines parent layout without its own route"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Dynamic params with ",(0,s.jsx)(n.code,{children:"$"})]})," \u2014 ",(0,s.jsx)(n.code,{children:"$id"}),", ",(0,s.jsx)(n.code,{children:"$name"})," are automatically typed"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Index files define default child"})," \u2014 ",(0,s.jsx)(n.code,{children:"router/$id/index.tsx"})," renders when no child tab is active"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"creating-a-new-route",children:"Creating a New Route"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Simple page route:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// apps/connect/src/routes/mypage.tsx\nimport { createFileRoute } from '@tanstack/react-router';\n\nexport const Route = createFileRoute('/mypage')({\n  component: MyPage,\n});\n\nfunction MyPage() {\n  return <div>My Page Content</div>;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Route with dynamic param:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// apps/connect/src/routes/items/$id.tsx\nimport { createFileRoute } from '@tanstack/react-router';\n\nexport const Route = createFileRoute('/items/$id')({\n  component: ItemDetail,\n});\n\nfunction ItemDetail() {\n  const { id } = Route.useParams(); // Typed as string | undefined\n  return <div>Item {id}</div>;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Nested layout route:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// apps/connect/src/routes/admin/route.tsx\nimport { createFileRoute, Outlet } from '@tanstack/react-router';\n\nexport const Route = createFileRoute('/admin')({\n  component: AdminLayout,\n});\n\nfunction AdminLayout() {\n  return (\n    <div className=\"admin-sidebar\">\n      <Outlet /> {/* Child routes render here */}\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"4-root-layout-__roottsx",children:["4. Root Layout (",(0,s.jsx)(n.code,{children:"__root.tsx"}),")"]}),"\n",(0,s.jsx)(n.p,{children:"The root layout wraps the entire application. It provides:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Providers"})," \u2014 All context providers (Apollo Client, Zustand stores, theme)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ResponsiveShell"})," \u2014 App shell with header, sidebar, banner"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"App-level hooks"})," \u2014 Heartbeat, notifications, shortcuts, auth"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Error/NotFound components"})," \u2014 Fallbacks for errors and 404s"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"root-layout-structure",children:"Root Layout Structure"}),"\n",(0,s.jsxs)(n.p,{children:["From ",(0,s.jsx)(n.code,{children:"apps/connect/src/routes/__root.tsx"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'function RootInner() {\n  const { t } = useTranslation(\'common\');\n  const { desktopCollapsed, toggle } = useSidebarStore();\n\n  // Enable connection toast notifications\n  useConnectionToast();\n\n  // Enable connection heartbeat monitoring\n  useConnectionHeartbeat();\n\n  // Register default commands and shortcuts\n  useDefaultCommands();\n\n  // Enable global keyboard shortcuts (Cmd+K, ?, etc.)\n  useGlobalShortcuts();\n\n  // Enable alert notifications subscription with toast + sound playback\n  useAlertNotifications();\n\n  return (\n    <ResponsiveShell\n      header={<AppHeader />}\n      banner={<ConnectionBanner />}\n      sidebar={\n        <CollapsibleSidebarProvider isCollapsed={desktopCollapsed} toggle={toggle}>\n          <AppSidebar />\n        </CollapsibleSidebarProvider>\n      }\n      sidebarCollapsed={desktopCollapsed}\n      onSidebarToggle={toggle}\n    >\n      {/* Skip to main content link for keyboard/screen reader users */}\n      <a href="#main-content" className="sr-only focus:not-sr-only ...">\n        {t(\'a11y.skipToMainContent\')}\n      </a>\n      <main id="main-content" className="animate-fade-in-up ...">\n        <Outlet /> {/* Child routes render here */}\n      </main>\n      <Toaster />\n      <CommandPalette />\n      <ShortcutsOverlay />\n      <SearchFAB />\n    </ResponsiveShell>\n  );\n}\n\nfunction RootComponent() {\n  return (\n    <Providers>\n      <RootInner />\n      {import.meta.env.DEV && <TanStackRouterDevtools position="bottom-right" />}\n    </Providers>\n  );\n}\n\n// Root-level error boundary\nfunction RootErrorComponent({ error }: { error: Error }) {\n  // Centered error card with reload button + stack trace (dev only)\n  return <div>Application Error: {error.message}</div>;\n}\n\n// 404 Not Found component\nfunction NotFoundComponent() {\n  // Centered "page not found" message with home button\n  return <div>Page Not Found</div>;\n}\n\nexport const Route = createRootRoute({\n  component: RootComponent,\n  errorComponent: RootErrorComponent,\n  notFoundComponent: NotFoundComponent,\n});\n'})}),"\n",(0,s.jsx)(n.h3,{id:"app-level-hooks-in-root",children:"App-Level Hooks in Root"}),"\n",(0,s.jsxs)(n.p,{children:["All of these hooks are called in ",(0,s.jsx)(n.code,{children:"RootInner()"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"useConnectionToast()"})})," \u2014 Shows reconnection toast notifications"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"useConnectionHeartbeat()"})})," \u2014 Monitors router connection every 30 seconds"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"useDefaultCommands()"})})," \u2014 Registers navigation + action + resource commands"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"useGlobalShortcuts()"})})," \u2014 Enables Cmd+K (command palette) and ? (shortcuts help)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"useAlertNotifications()"})})," \u2014 Subscribes to alert notifications with toast + sound"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"These run exactly once (on mount) and manage their own cleanup."}),"\n",(0,s.jsx)(n.h3,{id:"ui-components-in-root",children:"UI Components in Root"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Component"}),(0,s.jsx)(n.th,{children:"Purpose"}),(0,s.jsx)(n.th,{children:"File"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ResponsiveShell"})}),(0,s.jsx)(n.td,{children:"App layout shell (header/sidebar/main)"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"@nasnet/ui/layouts"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"AppHeader"})}),(0,s.jsx)(n.td,{children:"Header with user menu, status"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"apps/connect/src/app/components/AppHeader.tsx"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"AppSidebar"})}),(0,s.jsx)(n.td,{children:"Navigation sidebar"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"apps/connect/src/app/components/AppSidebar.tsx"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ConnectionBanner"})}),(0,s.jsx)(n.td,{children:"Connection status banner"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"@nasnet/ui/patterns"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"CommandPalette"})}),(0,s.jsx)(n.td,{children:"Cmd+K command palette"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"@nasnet/ui/patterns"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ShortcutsOverlay"})}),(0,s.jsx)(n.td,{children:"? key shortcuts help overlay"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"@nasnet/ui/patterns"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"SearchFAB"})}),(0,s.jsx)(n.td,{children:"Mobile search floating action button"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"@nasnet/ui/patterns"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Toaster"})}),(0,s.jsx)(n.td,{children:"Toast notification container"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"@nasnet/ui/primitives"})})]})]})]}),"\n",(0,s.jsxs)(n.h2,{id:"5-router-panel-layout-routeridroutetsx",children:["5. Router Panel Layout (",(0,s.jsx)(n.code,{children:"router/$id/route.tsx"}),")"]}),"\n",(0,s.jsx)(n.p,{children:"The router panel is the main container for all router-specific management. It uses a parent layout pattern:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// apps/connect/src/routes/router/$id/route.tsx\nimport { createFileRoute, Outlet } from '@tanstack/react-router';\nimport { RouterPanel } from '@/app/routes/router-panel/RouterPanel';\n\nexport const Route = createFileRoute('/router/$id')({\n  component: RouterPanelLayout,\n});\n\nfunction RouterPanelLayout() {\n  const { id } = Route.useParams();\n\n  return (\n    <RouterPanel routerId={id}>\n      <Outlet /> {/* Child routes (dhcp, firewall, etc.) render here */}\n    </RouterPanel>\n  );\n}\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"how-id-flows-to-child-routes",children:["How ",(0,s.jsx)(n.code,{children:"$id"})," Flows to Child Routes"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Parent route defines dynamic param ",(0,s.jsx)(n.code,{children:"$id"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Route.useParams()"})," accesses it: ",(0,s.jsx)(n.code,{children:"{ id: string }"})]}),"\n",(0,s.jsxs)(n.li,{children:["RouterPanel receives ",(0,s.jsx)(n.code,{children:"routerId={id}"})," and manages:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Router connection context"}),"\n",(0,s.jsx)(n.li,{children:"Tab navigation state"}),"\n",(0,s.jsx)(n.li,{children:"Breadcrumbs"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Child routes (like ",(0,s.jsx)(n.code,{children:"/router/$id/dhcp.tsx"}),") can also call ",(0,s.jsx)(n.code,{children:"Route.useParams()"})," to access ",(0,s.jsx)(n.code,{children:"$id"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["All child routes at ",(0,s.jsx)(n.code,{children:"/router/$id/*"})," automatically inherit the parent layout."]}),"\n",(0,s.jsx)(n.h2,{id:"6-code-splitting--lazy-loading",children:"6. Code Splitting & Lazy Loading"}),"\n",(0,s.jsxs)(n.p,{children:["NasNetConnect uses ",(0,s.jsx)(n.strong,{children:"code splitting by default"})," for route components. Heavy components like firewalls and DHCP management are split into separate bundles and loaded on-demand."]}),"\n",(0,s.jsx)(n.h3,{id:"lazyboundary-component",children:"LazyBoundary Component"}),"\n",(0,s.jsxs)(n.p,{children:["Located at ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/suspense/LazyBoundary.tsx"}),", it provides:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Suspense fallback"})," \u2014 Custom skeleton UI during load"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Error boundary"})," \u2014 Catches component errors, shows retry button"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Auto-skeleton"})," \u2014 Default skeleton variants (lines, card, table, chart)"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// Usage in a route\nimport { LazyBoundary } from '@nasnet/ui/patterns';\n\nexport const Route = createFileRoute('/router/$id/dhcp')({\n  component: () => (\n    <LazyBoundary fallback={<DHCPTabSkeleton />}>\n      <LazyDHCPTab />\n    </LazyBoundary>\n  ),\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"example-dhcp-route",children:"Example: DHCP Route"}),"\n",(0,s.jsxs)(n.p,{children:["From ",(0,s.jsx)(n.code,{children:"apps/connect/src/routes/router/$id/dhcp.tsx"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { createFileRoute } from \'@tanstack/react-router\';\nimport { LazyBoundary } from \'@nasnet/ui/patterns\';\nimport { LazyDHCPTab } from \'@/app/routes/router-panel/tabs/lazy\';\n\nfunction DHCPTabSkeleton() {\n  return (\n    <div className="space-y-4 p-4 md:p-6 animate-fade-in-up"\n         aria-busy="true"\n         aria-label="Loading DHCP configuration">\n      {/* Header skeleton */}\n      <div className="flex items-center gap-3 pb-2 border-b">\n        <div className="h-8 w-1 rounded bg-dhcp" />\n        <Skeleton className="h-6 w-40" />\n      </div>\n\n      {/* Pool config grids */}\n      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">\n        <div className="space-y-2">\n          <Skeleton className="h-4 w-20" />\n          <Skeleton className="h-40 w-full" />\n        </div>\n        {/* ... more skeleton rows */}\n      </div>\n\n      {/* Leases table skeleton */}\n      <div className="space-y-2">\n        <Skeleton className="h-4 w-32" />\n        <Skeleton className="h-64 w-full" />\n      </div>\n    </div>\n  );\n}\n\nexport const Route = createFileRoute(\'/router/$id/dhcp\')({\n  component: () => (\n    <LazyBoundary fallback={<DHCPTabSkeleton />}>\n      <LazyDHCPTab />\n    </LazyBoundary>\n  ),\n});\n'})}),"\n",(0,s.jsx)(n.h3,{id:"lazy-loading-utilities",children:"Lazy Loading Utilities"}),"\n",(0,s.jsxs)(n.p,{children:["From ",(0,s.jsx)(n.code,{children:"libs/ui/patterns/src/suspense/LazyRoute.tsx"}),":"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"createLazyRoute()"})})," \u2014 Creates lazy route config with preload"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"const dashboardRoute = createLazyRoute({\n  importFn: () => import('./pages/Dashboard'),\n  skeleton: <DashboardSkeleton />,\n});\n\n// Returns: { Component, pendingComponent, preload }\nexport const Route = createFileRoute('/dashboard')({\n  component: dashboardRoute.Component,\n  pendingComponent: dashboardRoute.pendingComponent,\n});\n\n// Preload on hover: <Link ... onMouseEnter={dashboardRoute.preload} />\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"preloadRoutes()"})})," \u2014 Preload multiple routes after initial render"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"useEffect(() => {\n  preloadRoutes([\n    () => import('./pages/Dashboard'),\n    () => import('./pages/Settings'),\n    () => import('./pages/Network'),\n  ]);\n}, []);\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"createPreloadHandlers()"})})," \u2014 Create hover/focus preload handlers"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"const preloadHandlers = createPreloadHandlers(() => import('./pages/Settings'));\n\n<Link to=\"/settings\" {...preloadHandlers}>\n  Settings\n</Link>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"suspenseboundary-component",children:"SuspenseBoundary Component"}),"\n",(0,s.jsx)(n.p,{children:"Route-level Suspense wrapper with integrated error boundary:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { SuspenseBoundary } from '@nasnet/ui/patterns';\n\nexport const Route = createFileRoute('/firewall')({\n  component: () => (\n    <SuspenseBoundary\n      name=\"Firewall\"\n      fallback={<FirewallSkeleton />}\n      errorFallback={(error, reset) => (\n        <div>\n          <p>Failed to load firewall: {error?.message}</p>\n          <button onClick={reset}>Retry</button>\n        </div>\n      )}\n    >\n      <LazyFirewall />\n    </SuspenseBoundary>\n  ),\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"preloading-strategy",children:"Preloading Strategy"}),"\n",(0,s.jsxs)(n.p,{children:["Routes are preloaded ",(0,s.jsx)(n.strong,{children:"on hover"})," in the sidebar navigation:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:'User hovers over "DHCP" in sidebar'}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"onMouseEnter"})," handler calls ",(0,s.jsx)(n.code,{children:"preloadDHCPTab()"})]}),"\n",(0,s.jsx)(n.li,{children:"DHCP component bundle starts downloading in background"}),"\n",(0,s.jsx)(n.li,{children:"User clicks DHCP \u2192 component is already loaded (or loading)"}),"\n",(0,s.jsx)(n.li,{children:"Skeleton appears while Suspense resolves"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This provides near-instant navigation without blocking the UI."}),"\n",(0,s.jsx)(n.h2,{id:"7-route-guards--authentication",children:"7. Route Guards & Authentication"}),"\n",(0,s.jsxs)(n.p,{children:["Route guards protect routes from unauthorized access using ",(0,s.jsx)(n.code,{children:"beforeLoad"})," hooks."]}),"\n",(0,s.jsx)(n.h3,{id:"tanstack-router-guards",children:"TanStack Router Guards"}),"\n",(0,s.jsxs)(n.p,{children:["From ",(0,s.jsx)(n.code,{children:"libs/state/stores/src/hooks/useRouteGuard.ts"}),":"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"requireAuth()"})})," \u2014 Protects authenticated-only routes"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// In route definition\nexport const dashboardRoute = createFileRoute('/dashboard')({\n  beforeLoad: requireAuth,\n  component: Dashboard,\n});\n\n// What happens:\n// - If authenticated with valid token \u2192 route loads\n// - If not authenticated \u2192 redirects to /login?redirect=/dashboard\n// - If token expired \u2192 redirects to /login\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"requirePermission(permission)"})})," \u2014 Checks specific permissions"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export const adminRoute = createFileRoute('/admin')({\n  beforeLoad: requirePermission('admin'),\n  component: AdminPanel,\n});\n\n// Redirects to /unauthorized if permission missing\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"requireGuest()"})})," \u2014 Login/signup routes (redirects away if already authenticated)"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export const loginRoute = createFileRoute('/login')({\n  beforeLoad: requireGuest,\n  component: LoginPage,\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"component-level-auth-checks",children:"Component-Level Auth Checks"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"useRequireAuth()"})})," \u2014 Check auth status in component"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'function ProtectedContent() {\n  const { isAuthenticated, isExpired, isExpiringSoon } = useRequireAuth();\n\n  if (!isAuthenticated) {\n    return <Navigate to="/login" />;\n  }\n\n  if (isExpiringSoon) {\n    return <SessionExpiringDialog />;\n  }\n\n  return <Content />;\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"useHasPermission(permission)"})})," \u2014 Check specific permission"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"function AdminButton() {\n  const hasAdminAccess = useHasPermission('admin');\n  if (!hasAdminAccess) return null;\n  return <Button>Admin Panel</Button>;\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"useCurrentUser()"})})," \u2014 Get user info"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"function Profile() {\n  const user = useCurrentUser();\n  return <div>Welcome, {user?.username}!</div>;\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"useAuthActions()"})})," \u2014 Login/logout functions"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"function LogoutButton() {\n  const { logout } = useAuthActions();\n  return <Button onClick={logout}>Logout</Button>;\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"8-token-refresh-hook",children:"8. Token Refresh Hook"}),"\n",(0,s.jsxs)(n.p,{children:["From ",(0,s.jsx)(n.code,{children:"libs/state/stores/src/hooks/useTokenRefresh.ts"}),":"]}),"\n",(0,s.jsxs)(n.p,{children:["Proactively refreshes JWT tokens ",(0,s.jsx)(n.strong,{children:"5 minutes before expiry"})," to maintain seamless user sessions."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"/**\n * Monitors token expiry and auto-refreshes every minute:\n * - If token expires in < 5 minutes \u2192 attempt refresh\n * - Max 3 refresh attempts before re-auth required\n * - Proactive refresh prevents session drops\n */\nexport function useTokenRefresh(options: UseTokenRefreshOptions): void {\n  const {\n    refreshTokenFn,        // Callback to refresh token\n    onReauthRequired,      // Callback if refresh fails 3x\n    showNotifications,     // Show error toasts (default: true)\n    checkInterval,         // Check every 60s (default)\n  } = options;\n\n  // Runs every 60 seconds\n  // If token expires in < 5 minutes, calls refreshTokenFn()\n  // Updates store with new token\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Usage in app:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"useTokenRefresh({\n  refreshTokenFn: async () => {\n    const response = await apolloClient.mutate({\n      mutation: REFRESH_TOKEN_MUTATION,\n    });\n    return {\n      token: response.data.token,\n      expiresAt: new Date(response.data.expiresAt),\n    };\n  },\n  onReauthRequired: () => {\n    navigate({ to: '/login' });\n  },\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:"Key behavior:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Checks every 60 seconds (configurable)"}),"\n",(0,s.jsx)(n.li,{children:"Refreshes 5 minutes before expiry (proactive)"}),"\n",(0,s.jsx)(n.li,{children:"Retries up to 3 times on failure"}),"\n",(0,s.jsx)(n.li,{children:"Shows notification + calls re-auth callback if 3 attempts fail"}),"\n",(0,s.jsx)(n.li,{children:"Prevents token from ever expiring mid-session"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"9-error-handling-at-route-level",children:"9. Error Handling at Route Level"}),"\n",(0,s.jsx)(n.p,{children:"TanStack Router provides error boundaries at route and root level."}),"\n",(0,s.jsx)(n.h3,{id:"root-error-handling",children:"Root Error Handling"}),"\n",(0,s.jsxs)(n.p,{children:["From ",(0,s.jsx)(n.code,{children:"__root.tsx"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'function RootErrorComponent({ error }: { error: Error }) {\n  const { t } = useTranslation(\'common\');\n\n  return (\n    <div className="min-h-screen flex items-center justify-center bg-background"\n         role="alert" aria-live="assertive">\n      <div className="max-w-md p-8 bg-card rounded-lg shadow-lg border border-border">\n        <h1 className="text-2xl font-bold text-error mb-4">\n          {t(\'errors.applicationError\')}\n        </h1>\n        <p className="text-muted-foreground mb-4">{error.message}</p>\n        <button onClick={() => window.location.reload()} className="min-h-[44px] ...">\n          {t(\'actions.reloadApplication\')}\n        </button>\n        {import.meta.env.DEV && (\n          <pre className="mt-4 p-4 bg-muted rounded text-xs overflow-auto">\n            {error.stack}\n          </pre>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction NotFoundComponent() {\n  const { t } = useTranslation(\'common\');\n  return (\n    <div className="min-h-screen flex items-center justify-center">\n      <div className="text-center">\n        <h1 className="text-6xl font-bold text-muted">{t(\'errors.notFound\')}</h1>\n        <p className="text-xl text-muted-foreground mt-4">\n          {t(\'errors.pageNotFound\')}\n        </p>\n        <a href="/" className="mt-6 inline-block min-h-[44px] ...">\n          {t(\'actions.goHome\')}\n        </a>\n      </div>\n    </div>\n  );\n}\n\nexport const Route = createRootRoute({\n  component: RootComponent,\n  errorComponent: RootErrorComponent,\n  notFoundComponent: NotFoundComponent,\n});\n'})}),"\n",(0,s.jsx)(n.h3,{id:"per-route-error-boundaries",children:"Per-Route Error Boundaries"}),"\n",(0,s.jsx)(n.p,{children:"Routes can define their own error components:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export const Route = createFileRoute('/firewall')({\n  errorComponent: FirewallErrorComponent,\n  component: FirewallPage,\n});\n\nfunction FirewallErrorComponent({ error }: { error: Error }) {\n  return (\n    <div className=\"error-container\">\n      <h2>Firewall Configuration Error</h2>\n      <p>{error.message}</p>\n      <button onClick={() => window.location.reload()}>Reload</button>\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"lazy-loading-error-handling",children:"Lazy Loading Error Handling"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"LazyBoundary"})," catches Suspense errors automatically:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"<LazyBoundary\n  fallback={<FirewallSkeleton />}\n  errorFallback={(error, reset) => (\n    <div>\n      <p>Failed to load firewall: {error?.message}</p>\n      <button onClick={reset}>Try again</button>\n    </div>\n  )}\n>\n  <LazyFirewall />\n</LazyBoundary>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"10-app-level-hooks",children:"10. App-Level Hooks"}),"\n",(0,s.jsx)(n.p,{children:"These hooks run in the root layout and manage app-wide behavior."}),"\n",(0,s.jsx)(n.h3,{id:"useconnectionheartbeat",children:"useConnectionHeartbeat()"}),"\n",(0,s.jsxs)(n.p,{children:["From ",(0,s.jsx)(n.code,{children:"apps/connect/src/app/hooks/useConnectionHeartbeat.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"/**\n * Periodically checks router connection every 30 seconds.\n * Sends lightweight request to RouterOS API (system/identity).\n * Updates connection state in store based on success/failure.\n *\n * Configuration:\n * - Interval: 30 seconds\n * - Timeout: 5 seconds\n *\n * Only runs if currentRouterIp is set in store.\n */\nexport function useConnectionHeartbeat() {\n  // Reads fresh store state each invocation (avoids stale closures)\n  // On success \u2192 sets state to 'connected'\n  // On failure \u2192 sets state to 'disconnected'\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"useconnectiontoast",children:"useConnectionToast()"}),"\n",(0,s.jsxs)(n.p,{children:["From ",(0,s.jsx)(n.code,{children:"apps/connect/src/app/hooks/useConnectionToast.tsx"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"/**\n * Automatically shows toast notification when connection state changes.\n * Specifically triggers success toast on reconnecting \u2192 connected transition.\n *\n * Features:\n * - Watches connection state\n * - Shows success message + description\n * - Auto-dismisses after 3 seconds\n * - Only triggers on reconnecting \u2192 connected (not on initial connect)\n */\nexport function useConnectionToast() {\n  // Listens to connection state\n  // Shows toast only on reconnecting \u2192 connected transition\n  // Uses translation i18n strings\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"usedefaultcommands",children:"useDefaultCommands()"}),"\n",(0,s.jsxs)(n.p,{children:["From ",(0,s.jsx)(n.code,{children:"apps/connect/src/app/hooks/useDefaultCommands.ts"}),":"]}),"\n",(0,s.jsx)(n.p,{children:"Registers all default commands and keyboard shortcuts for the command palette."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Navigation Commands (with keyboard shortcuts):"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"g h"})," \u2192 Home"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"g d"})," \u2192 Dashboard"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"g r"})," \u2192 Routers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"g n"})," \u2192 Network"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"g f"})," \u2192 Firewall"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"g w"})," \u2192 WiFi"]}),"\n",(0,s.jsx)(n.li,{children:"No shortcut \u2192 Discover Routers"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Action Commands:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Add Router (Cmd+N concept)"}),"\n",(0,s.jsx)(n.li,{children:"Create Backup (Cmd+S concept)"}),"\n",(0,s.jsx)(n.li,{children:"Refresh Data (R key)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Resource Commands (with requiresNetwork flag):"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"DHCP Leases (keywords: lease, ip, clients)"}),"\n",(0,s.jsx)(n.li,{children:"System Logs (keywords: log, events, history)"}),"\n",(0,s.jsx)(n.li,{children:"Interfaces (keywords: port, eth, wan, lan)"}),"\n",(0,s.jsx)(n.li,{children:"Storage (keywords: disk, space, files)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"useglobalshortcuts",children:"useGlobalShortcuts()"}),"\n",(0,s.jsx)(n.p,{children:"Enables global keyboard shortcuts:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cmd+K"})," (or Ctrl+K) \u2192 Open command palette"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"?"})," (question mark) \u2192 Show shortcuts overlay"]}),"\n",(0,s.jsx)(n.li,{children:"Vim-style navigation (g h, g d, etc.) via command palette"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"usealertnotifications",children:"useAlertNotifications()"}),"\n",(0,s.jsxs)(n.p,{children:["From ",(0,s.jsx)(n.code,{children:"@nasnet/features/alerts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"/**\n * Subscribes to alert notifications from the backend.\n * Automatically shows:\n * - Toast notifications\n * - Sound alerts (configurable)\n * - In-app notification badge\n *\n * Integration with alert system (Watermill pub/sub).\n */\nexport function useAlertNotifications() {\n  // Subscriptions to alert events\n  // Shows toast + plays sound on alerts\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"11-navigation-patterns",children:"11. Navigation Patterns"}),"\n",(0,s.jsx)(n.h3,{id:"link-navigation",children:"Link Navigation"}),"\n",(0,s.jsx)(n.p,{children:"Using TanStack Router Link component:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { Link } from \'@tanstack/react-router\';\n\n// Simple navigation\n<Link to="/dashboard">Dashboard</Link>\n\n// With dynamic route params\n<Link to="/router/$id" params={{ id: \'abc123\' }}>\n  Router Details\n</Link>\n\n// With search params (query string)\n<Link to="/network/dhcp" search={{ page: 2, sort: \'name\' }}>\n  Page 2\n</Link>\n\n// Preload on hover (before commit)\n<Link\n  to="/firewall"\n  onMouseEnter={() => preloadFirewall()}\n  preload="intent"\n>\n  Firewall Rules\n</Link>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"programmatic-navigation",children:"Programmatic Navigation"}),"\n",(0,s.jsxs)(n.p,{children:["Using ",(0,s.jsx)(n.code,{children:"useNavigate()"})," hook:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { useNavigate } from '@tanstack/react-router';\n\nfunction SubmitButton() {\n  const navigate = useNavigate();\n\n  const handleSubmit = async (data) => {\n    await api.createRouter(data);\n    // Navigate after success\n    navigate({\n      to: '/router/$id',\n      params: { id: newRouterId },\n    });\n  };\n\n  return <Button onClick={handleSubmit}>Create Router</Button>;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"route-params",children:"Route Params"}),"\n",(0,s.jsxs)(n.p,{children:["Access route params with ",(0,s.jsx)(n.code,{children:"Route.useParams()"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// In /router/$id/dhcp.tsx\nexport const Route = createFileRoute('/router/$id/dhcp')({\n  component: DHCPTab,\n});\n\nfunction DHCPTab() {\n  const { id } = Route.useParams(); // id: string\n  const { serverId } = Route.useSearch(); // Search params\n\n  return <div>Router {id} DHCP Configuration</div>;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"route-preloading",children:"Route Preloading"}),"\n",(0,s.jsx)(n.p,{children:"Routes can be preloaded before navigation:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"function NavigationMenu() {\n  const navigate = useNavigate();\n  const router = useRouter();\n\n  return (\n    <button\n      onMouseEnter={() => router.preloadRoute({ to: '/settings' })}\n      onClick={() => navigate({ to: '/settings' })}\n    >\n      Settings\n    </button>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"navigation-history",children:"Navigation History"}),"\n",(0,s.jsx)(n.p,{children:"Back/forward navigation:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"function BackButton() {\n  const router = useRouter();\n\n  return (\n    <button onClick={() => router.history.back()}>\n      Go Back\n    </button>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"12-cross-references",children:"12. Cross-References"}),"\n",(0,s.jsx)(n.p,{children:"Related documentation:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Topic"}),(0,s.jsx)(n.th,{children:"Document"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"State Management (Zustand, Apollo)"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"architecture-overview.md"}),", ",(0,s.jsx)(n.code,{children:"state-management.md"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Component Architecture (3-layer)"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"architecture-overview.md"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Design System & Tokens"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Docs/design/DESIGN_TOKENS.md"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Error Handling & Reporting"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"error-handling.md"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Testing Routes & Navigation"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Docs/architecture/implementation-patterns/testing-strategy-patterns.md"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Responsive Design & Platform Presenters"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Docs/design/PLATFORM_PRESENTER_GUIDE.md"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Command Palette & Shortcuts"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"@nasnet/ui/patterns"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"TypeScript Router Types"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"apps/connect/src/routes/__root.tsx"})," type exports"]})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Summary:"})," NasNetConnect's routing system combines TanStack Router's file-based convention with code splitting, error boundaries, auth guards, and app-level integration hooks. Every route automatically benefits from lazy loading with skeleton fallbacks, type-safe params, and nested layout support. The architecture prioritizes fast navigation with preloading on hover while maintaining security through token refresh and auth guards."]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);