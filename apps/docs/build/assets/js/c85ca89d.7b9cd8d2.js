"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[48878],{16164:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"machines/change-set-machine","title":"Change Set Machine (Atomic Multi-Resource Operations)","description":"The Change Set Machine orchestrates atomic multi-resource operations with dependency-aware apply ordering and rollback on failure. It ensures that complex configurations involving multiple resources are either fully applied or fully rolled back\u2014no partial states.","source":"@site/../../libs/state/docs/machines/change-set-machine.md","sourceDirName":"machines","slug":"/machines/change-set-machine","permalink":"/docs/state/machines/change-set-machine","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../../libs/state/docs/machines/change-set-machine.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Machine Hooks Reference","permalink":"/docs/state/machines/hooks-reference"},"next":{"title":"Configuration Pipeline Machine (Safety Flow)","permalink":"/docs/state/machines/config-pipeline"}}');var l=r(31085),i=r(71184);const a={},s="Change Set Machine (Atomic Multi-Resource Operations)",o={},c=[{value:"Complete State Chart",id:"complete-state-chart",level:2},{value:"States Reference",id:"states-reference",level:2},{value:"Context",id:"context",level:2},{value:"ChangeSetProgressEvent",id:"changesetprogressevent",level:3},{value:"RollbackStep",id:"rollbackstep",level:3},{value:"Events",id:"events",level:2},{value:"Guards",id:"guards",level:2},{value:"Actions",id:"actions",level:2},{value:"Actors",id:"actors",level:2},{value:"Topological Sort (Dependency Ordering)",id:"topological-sort-dependency-ordering",level:2},{value:"Rollback on Failure",id:"rollback-on-failure",level:2},{value:"Usage with <code>createChangeSetMachine</code>",id:"usage-with-createchangesetmachine",level:2},{value:"Code Examples",id:"code-examples",level:2},{value:"Applying Multi-Resource Change Set",id:"applying-multi-resource-change-set",level:3},{value:"Progress Tracking",id:"progress-tracking",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Atomic Guarantees",id:"atomic-guarantees",level:2},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Comparing with Config Pipeline",id:"comparing-with-config-pipeline",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"change-set-machine-atomic-multi-resource-operations",children:"Change Set Machine (Atomic Multi-Resource Operations)"})}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.strong,{children:"Change Set Machine"})," orchestrates ",(0,l.jsx)(n.strong,{children:"atomic multi-resource operations"})," with dependency-aware apply ordering and rollback on failure. It ensures that complex configurations involving multiple resources are either fully applied or fully rolled back\u2014no partial states."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Source:"})," ",(0,l.jsx)(n.code,{children:"libs/state/machines/src/changeSetMachine.ts"})]}),"\n",(0,l.jsx)(n.h2,{id:"complete-state-chart",children:"Complete State Chart"}),"\n",(0,l.jsx)(n.mermaid,{value:"stateDiagram-v2\n    [*] --\x3e idle: Initial\n\n    idle --\x3e validating: LOAD, START_VALIDATION<br/>sortByDependency\n\n    validating --\x3e ready: noErrors\n    validating --\x3e cancelled: CANCEL\n    validating --\x3e failed: hasErrors\n\n    ready --\x3e applying: APPLY<br/>(canApply guard)\n    ready --\x3e idle: RESET\n    ready --\x3e cancelled: CANCEL\n\n    applying --\x3e applyingItem: Enter state\n    applyingItem --\x3e checkingMore: onDone\n    checkingMore --\x3e applyingItem: hasMoreItems<br/>nextItem action\n    checkingMore --\x3e completed: noMoreItems\n    checkingMore --\x3e rollingBack: on error\n\n    applying --\x3e rollingBack: CANCEL<br/>(cancelRequested)\n\n    completed --\x3e [*]: Final state\n\n    rollingBack --\x3e rolledBack: onDone<br/>(all success)\n    rollingBack --\x3e partialFailure: onError<br/>(some fail)\n\n    cancelled --\x3e [*]: Final state\n    cancelled --\x3e rollingBack: FORCE_ROLLBACK\n    cancelled --\x3e idle: RESET\n\n    failed --\x3e validating: RETRY\n    failed --\x3e rollingBack: FORCE_ROLLBACK\n    failed --\x3e idle: RESET\n    failed --\x3e [*]: Final state\n\n    rolledBack --\x3e [*]: Final state\n    partialFailure --\x3e [*]: Final state\n\n    note right of idle\n        - No active change set\n        - Can LOAD new change set\n    end note\n\n    note right of validating\n        - Running validation on all items\n        - Cannot skip validation\n        - Async operation in progress\n    end note\n\n    note right of ready\n        - Validation passed\n        - Ready to apply\n    end note\n\n    note right of applying\n        - Applying items in dependency order\n        - Initial: applyingItem\n        - After each: checkingMore\n        - Can CANCEL\n    end note\n\n    note right of completed\n        - All items applied\n        - notifyComplete callback\n    end note\n\n    note right of rollingBack\n        - Executing reverse order\n        - Rollback may fail\n        - onDone: check results\n    end note\n\n    note right of cancelled\n        - User cancelled operation\n        - May have partial applies\n    end note\n\n    note right of rolledBack\n        - All rolled back \u2713\n        - notifyRolledBack\n    end note\n\n    note right of partialFailure\n        - Rollback failed\n        - Manual intervention needed\n        - notifyFailed\n    end note\n\n    note right of failed\n        - Validation or apply failed\n        - notifyFailed callback\n    end note"}),"\n",(0,l.jsx)(n.h2,{id:"states-reference",children:"States Reference"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"State"}),(0,l.jsx)(n.th,{children:"Purpose"}),(0,l.jsx)(n.th,{children:"Sub-states"}),(0,l.jsx)(n.th,{children:"Transitions"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"idle"})}),(0,l.jsx)(n.td,{children:"Initial state"}),(0,l.jsx)(n.td,{children:"None"}),(0,l.jsx)(n.td,{children:"LOAD \u2192 idle (setup), START_VALIDATION \u2192 validating"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"validating"})}),(0,l.jsx)(n.td,{children:"Validating all items"}),(0,l.jsx)(n.td,{children:"None"}),(0,l.jsx)(n.td,{children:"onDone \u2192 idle|ready, onError \u2192 failed, CANCEL \u2192 cancelled"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"ready"})}),(0,l.jsx)(n.td,{children:"Validation passed"}),(0,l.jsx)(n.td,{children:"None"}),(0,l.jsx)(n.td,{children:"APPLY \u2192 applying (if canApply), RESET \u2192 idle, CANCEL \u2192 cancelled"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"applying"})}),(0,l.jsx)(n.td,{children:"Applying in order"}),(0,l.jsx)(n.td,{children:"applyingItem, checkingMore"}),(0,l.jsx)(n.td,{children:"Nested states handle iteration, CANCEL \u2192 cancellation on next check"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"completed"})}),(0,l.jsx)(n.td,{children:"All items applied"}),(0,l.jsx)(n.td,{children:"None"}),(0,l.jsx)(n.td,{children:"(Terminal - no transitions)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"rollingBack"})}),(0,l.jsx)(n.td,{children:"Rolling back applied"}),(0,l.jsx)(n.td,{children:"None"}),(0,l.jsx)(n.td,{children:"onDone \u2192 rolledBack|partialFailure, onError \u2192 partialFailure"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"rolledBack"})}),(0,l.jsx)(n.td,{children:"Rollback successful"}),(0,l.jsx)(n.td,{children:"None"}),(0,l.jsx)(n.td,{children:"(Terminal - no transitions)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"failed"})}),(0,l.jsx)(n.td,{children:"Validation or apply failed"}),(0,l.jsx)(n.td,{children:"None"}),(0,l.jsx)(n.td,{children:"RETRY \u2192 validating, FORCE_ROLLBACK \u2192 rollingBack (if has applied), RESET \u2192 idle"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"partialFailure"})}),(0,l.jsx)(n.td,{children:"Rollback partially failed"}),(0,l.jsx)(n.td,{children:"None"}),(0,l.jsx)(n.td,{children:"(Terminal - manual intervention needed)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"cancelled"})}),(0,l.jsx)(n.td,{children:"User cancelled"}),(0,l.jsx)(n.td,{children:"None"}),(0,l.jsx)(n.td,{children:"FORCE_ROLLBACK \u2192 rollingBack (if has applied), RESET \u2192 idle, (else Terminal)"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"context",children:"Context"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"interface ChangeSetMachineContext {\n  /** The change set being processed */\n  changeSet: ChangeSet | null;\n\n  /** Router ID for the operation */\n  routerId: string | null;\n\n  /** Validation result */\n  validationResult: ChangeSetValidationResult | null;\n\n  /** Current item index in sorted apply order */\n  currentItemIndex: number;\n\n  /** Items in apply order (topologically sorted) */\n  sortedItems: ChangeSetItem[];\n\n  /** Items that have been applied */\n  appliedItems: ChangeSetItem[];\n\n  /** Rollback plan (populated as items are applied) */\n  rollbackPlan: RollbackStep[];\n\n  /** Error information */\n  error: ChangeSetError | null;\n\n  /** Error message for simple errors */\n  errorMessage: string | null;\n\n  /** Whether cancellation was requested */\n  cancelRequested: boolean;\n\n  /** Apply start time */\n  applyStartedAt: number | null;\n\n  /** Progress callbacks */\n  onProgress?: (event: ChangeSetProgressEvent) => void;\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"changesetprogressevent",children:"ChangeSetProgressEvent"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"interface ChangeSetProgressEvent {\n  changeSetId: string;\n  status: 'validating' | 'applying' | 'completed' | 'rolling_back' | 'failed';\n  currentItem: {\n    id: string;\n    name: string;\n    index: number;\n  } | null;\n  appliedCount: number;\n  totalCount: number;\n  progressPercent: number;\n  error: string | null;\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"rollbackstep",children:"RollbackStep"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"interface RollbackStep {\n  itemId: string;                              // Which item to rollback\n  operation: 'DELETE' | 'REVERT' | 'RESTORE'; // What operation to do\n  restoreState: unknown;                       // Data to restore to\n  resourceUuid: string;                        // Resource to target\n  success: boolean;                            // Did rollback succeed?\n  error: string | null;                        // If failed, why?\n  rollbackOrder: number;                       // Order in rollback sequence\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"type ChangeSetMachineEvent =\n  | { type: 'LOAD'; changeSet: ChangeSet; routerId: string }  // Load change set\n  | { type: 'START_VALIDATION' }                              // Start validation\n  | { type: 'APPLY' }                                         // Start applying\n  | { type: 'CANCEL' }                                        // User cancellation\n  | { type: 'RETRY' }                                         // Retry after error\n  | { type: 'RESET' }                                         // Reset to idle\n  | { type: 'FORCE_ROLLBACK' };                               // Force rollback\n"})}),"\n",(0,l.jsx)(n.h2,{id:"guards",children:"Guards"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"{\n  hasMoreItems: boolean;              // currentItemIndex < sortedItems.length\n  noMoreItems: boolean;               // currentItemIndex >= sortedItems.length\n  canApply: boolean;                  // validationResult.canApply && items exist\n  hasAppliedItems: boolean;           // appliedItems.length > 0\n  isCancelled: boolean;               // cancelRequested === true\n  hasValidationErrors: boolean;       // validationResult.errors.length > 0\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"actions",children:"Actions"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"{\n  loadChangeSet();                    // Store changeSet and sort by dependency\n  setValidationResult();              // Store validation result\n  notifyValidationComplete();         // onValidationComplete callback\n  startApply();                       // Set applyStartedAt timestamp\n  recordApplied();                    // Add item to appliedItems, create rollback step\n  nextItem();                         // Increment currentItemIndex\n  setError();                         // Store error from apply failure\n  setValidationError();               // Store validation error message\n  markCancelRequested();              // Set cancelRequested flag\n  checkRollbackResults();             // Check rollback success/failure\n  notifyProgress();                   // onProgress callback with current status\n  notifyComplete();                   // onComplete callback\n  notifyFailed();                     // onFailed callback\n  notifyRolledBack();                 // onRolledBack callback\n  resetMachine();                     // Clear all context\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"actors",children:"Actors"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"actors: {\n  validateAll(changeSet: ChangeSet): Promise<ChangeSetValidationResult>;\n\n  applyCurrentItem(params: {\n    item: ChangeSetItem;\n    routerId: string;\n  }): Promise<{\n    confirmedState: Record<string, unknown>;\n    resourceUuid?: string;\n  }>;\n\n  executeRollback(params: {\n    rollbackPlan: RollbackStep[];\n    routerId: string;\n  }): Promise<void>;\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"topological-sort-dependency-ordering",children:"Topological Sort (Dependency Ordering)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"// Example: WireGuard VPN \u2192 Network Interface \u2192 Firewall Rule\n// Dependencies: Firewall depends on Network, Network depends on WireGuard\n//\n// Apply Order (forward): WireGuard \u2192 Network \u2192 Firewall\n// Rollback Order (reverse): Firewall \u2192 Network \u2192 WireGuard\n\nfunction sortItemsByDependency(items: ChangeSetItem[]): ChangeSetItem[] {\n  const nodes = buildDependencyGraph(items);\n  const result = topologicalSort(nodes);\n  if (!result.success) {\n    // Cycle detected - validation should catch this\n    return items;\n  }\n  return result.sortedIds.map(id => itemMap.get(id));\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"rollback-on-failure",children:"Rollback on Failure"}),"\n",(0,l.jsx)(n.p,{children:"When apply fails at item N:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Items applied: 1, 2, ..., N-1\nCreate rollback plan in REVERSE order:\n  1. Undo item N-1 (if partial apply)\n  2. Undo item N-2\n  ...\n  N-1. Undo item 1\n\nExecute each rollback:\n  - If rollback fails \u2192 mark as failed, continue with rest\n  - Track success/failure for each step\n  - Transition to partialFailure if any rollback fails\n  - Transition to rolledBack if all succeed\n"})}),"\n",(0,l.jsxs)(n.h2,{id:"usage-with-createchangesetmachine",children:["Usage with ",(0,l.jsx)(n.code,{children:"createChangeSetMachine"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"import { createChangeSetMachine } from '@nasnet/state/machines';\n\nconst changeSetMachine = createChangeSetMachine({\n  validateChangeSet: async (changeSet) => {\n    const response = await api.validateChangeSet(changeSet);\n    return {\n      canApply: response.valid,\n      errors: response.errors || [],\n    };\n  },\n  applyItem: async ({ item, routerId }) => {\n    const response = await api.applyResource({\n      routerId,\n      resourceType: item.resourceType,\n      operation: item.operation,\n      configuration: item.configuration,\n    });\n    return {\n      confirmedState: response.confirmedState,\n      resourceUuid: response.resourceUuid,\n    };\n  },\n  rollbackItem: async ({ rollbackStep, routerId }) => {\n    await api.rollbackResource({\n      routerId,\n      itemId: rollbackStep.itemId,\n      operation: rollbackStep.operation,\n      restoreState: rollbackStep.restoreState,\n    });\n  },\n  onComplete: (changeSet) => {\n    toast.success(`Applied ${changeSet.items.length} changes`);\n  },\n  onFailed: (error) => {\n    toast.error(`Change set failed: ${error.message}`);\n  },\n  onRolledBack: () => {\n    toast.info('All changes rolled back');\n  },\n});\n"})}),"\n",(0,l.jsx)(n.h2,{id:"code-examples",children:"Code Examples"}),"\n",(0,l.jsx)(n.h3,{id:"applying-multi-resource-change-set",children:"Applying Multi-Resource Change Set"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"interface WireGuardChangeSet extends ChangeSet {\n  items: [\n    {\n      id: 'wg-client';\n      operation: 'CREATE';\n      resourceType: 'wireguard-client';\n      configuration: WireGuardConfig;\n      dependencies: [];\n    },\n    {\n      id: 'route';\n      operation: 'CREATE';\n      resourceType: 'static-route';\n      configuration: RouteConfig;\n      dependencies: ['wg-client'];  // Depends on WireGuard\n    },\n    {\n      id: 'firewall';\n      operation: 'UPDATE';\n      resourceType: 'firewall-rule';\n      configuration: FirewallConfig;\n      dependencies: ['route'];      // Depends on Route\n    },\n  ];\n}\n\n// Apply order: wg-client \u2192 route \u2192 firewall\n// If firewall fails: rollback firewall \u2192 rollback route \u2192 rollback wg-client\n"})}),"\n",(0,l.jsx)(n.h3,{id:"progress-tracking",children:"Progress Tracking"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:"const [progress, setProgress] = useState<ChangeSetProgressEvent | null>(null);\n\nconst machine = createChangeSetMachine({\n  // ... config ...\n  onProgress: (event) => {\n    setProgress(event);\n    console.log(\n      `Applying ${event.currentItem?.name} ` +\n      `(${event.appliedCount}/${event.totalCount}, ${event.progressPercent}%)`\n    );\n  },\n});\n\n// In UI:\n{progress && (\n  <div>\n    <ProgressBar value={progress.progressPercent} />\n    <p>Applying: {progress.currentItem?.name}</p>\n    <p>{progress.appliedCount} / {progress.totalCount}</p>\n  </div>\n)}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"const [state, send] = useActor(changeSetMachine);\n\nif (state.matches('failed')) {\n  const error = state.context.error;\n  return (\n    <ErrorPanel\n      error={error?.message}\n      failedItem={error?.failedItemId}\n      partiallyApplied={error?.partiallyAppliedItemIds}\n      onRetry={() => send({ type: 'RETRY' })}\n      onRollback={() => send({ type: 'FORCE_ROLLBACK' })}\n    />\n  );\n}\n\nif (state.matches('partialFailure')) {\n  const failedRollbacks = state.context.error?.failedRollbackItemIds || [];\n  return (\n    <ManualInterventionPanel\n      failedRollbacks={failedRollbacks}\n      message=\"Some changes could not be rolled back. Manual intervention required.\"\n      contactSupport={() => api.openSupportTicket()}\n    />\n  );\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"atomic-guarantees",children:"Atomic Guarantees"}),"\n",(0,l.jsxs)(n.p,{children:["The change set machine provides ",(0,l.jsx)(n.strong,{children:"all-or-nothing semantics"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u2713 All items validated before any apply"}),"\n",(0,l.jsx)(n.li,{children:"\u2713 All items applied in dependency order"}),"\n",(0,l.jsx)(n.li,{children:"\u2713 Rollback happens in reverse dependency order"}),"\n",(0,l.jsx)(n.li,{children:"\u2713 Partial applies tracked for rollback"}),"\n",(0,l.jsx)(n.li,{children:"\u2713 Failures detected and reported"}),"\n",(0,l.jsx)(n.li,{children:"\u2713 Manual intervention available if rollback fails"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Batch Validation:"})," All items validated in parallel (if API supports)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Sequential Apply:"})," Applied one-by-one in dependency order (can't parallelize due to dependencies)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Async Rollback:"})," Rollback items can be parallel (they're reverse-ordered)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Progress Reporting:"})," Per-item progress for UI feedback"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"comparing-with-config-pipeline",children:"Comparing with Config Pipeline"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Feature"}),(0,l.jsx)(n.th,{children:"Config Pipeline"}),(0,l.jsx)(n.th,{children:"Change Set"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Scope"})}),(0,l.jsx)(n.td,{children:"Single resource"}),(0,l.jsx)(n.td,{children:"Multiple resources"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Order"})}),(0,l.jsx)(n.td,{children:"N/A"}),(0,l.jsx)(n.td,{children:"Dependency-ordered (topological sort)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Validation"})}),(0,l.jsx)(n.td,{children:"Single validation"}),(0,l.jsx)(n.td,{children:"Batch validation of all items"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Apply"})}),(0,l.jsx)(n.td,{children:"Single apply"}),(0,l.jsx)(n.td,{children:"Per-item apply in order"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Rollback"})}),(0,l.jsx)(n.td,{children:"Whole config"}),(0,l.jsx)(n.td,{children:"Per-item rollback in reverse"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"High-risk"})}),(0,l.jsx)(n.td,{children:"Yes (with confirm)"}),(0,l.jsx)(n.td,{children:"No (just validation)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Use case"})}),(0,l.jsx)(n.td,{children:"WireGuard config edit"}),(0,l.jsx)(n.td,{children:"Multi-service setup wizard"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Overview:"})," See ",(0,l.jsx)(n.code,{children:"overview.md"})," for machine catalog"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Resource Lifecycle:"})," See ",(0,l.jsx)(n.code,{children:"resource-lifecycle.md"})," for individual resource management"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config Pipeline:"})," See ",(0,l.jsx)(n.code,{children:"config-pipeline.md"})," for single-resource safety flow"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},71184:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>s});var t=r(14041);const l={},i=t.createContext(l);function a(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);