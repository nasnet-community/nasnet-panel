"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[34416],{57358:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"i18n-accessibility/i18n","title":"Internationalization (i18n)","description":"NasNetConnect uses i18next with react-i18next for internationalization. The setup supports multiple languages with lazy loading, RTL (right-to-left) layout support, and locale-aware formatting. English is bundled at build time; all other languages are loaded on demand via the HTTP backend.","source":"@site/../connect/docs/i18n-accessibility/i18n.md","sourceDirName":"i18n-accessibility","slug":"/i18n-accessibility/i18n","permalink":"/docs/frontend/i18n-accessibility/i18n","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../connect/docs/i18n-accessibility/i18n.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Accessibility","permalink":"/docs/frontend/i18n-accessibility/accessibility"},"next":{"title":"Development Workflow","permalink":"/docs/frontend/operations/development-workflow"}}');var i=s(31085),r=s(71184);const a={},d="Internationalization (i18n)",l={},c=[{value:"Supported Languages",id:"supported-languages",level:2},{value:"i18next Configuration",id:"i18next-configuration",level:2},{value:"Key configuration",id:"key-configuration",level:3},{value:"Namespace Strategy",id:"namespace-strategy",level:2},{value:"Default namespaces (loaded at startup)",id:"default-namespaces-loaded-at-startup",level:3},{value:"Feature namespaces (loaded on demand)",id:"feature-namespaces-loaded-on-demand",level:3},{value:"Providers",id:"providers",level:2},{value:"I18nProvider",id:"i18nprovider",level:3},{value:"DirectionProvider",id:"directionprovider",level:3},{value:"Hooks",id:"hooks",level:2},{value:"useTranslation",id:"usetranslation",level:3},{value:"useDirection",id:"usedirection",level:3},{value:"useFormatters",id:"useformatters",level:3},{value:"Translation Key Organization",id:"translation-key-organization",level:2},{value:"Key naming conventions",id:"key-naming-conventions",level:3},{value:"Pluralization",id:"pluralization",level:3},{value:"Interpolation",id:"interpolation",level:3},{value:"Adding a New Language",id:"adding-a-new-language",level:2},{value:"Adding Translations to a Component",id:"adding-translations-to-a-component",level:2},{value:"Language Detection",id:"language-detection",level:2},{value:"Utility Functions",id:"utility-functions",level:2},{value:"See Also",id:"see-also",level:2}];function o(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"internationalization-i18n",children:"Internationalization (i18n)"})}),"\n",(0,i.jsxs)(n.p,{children:["NasNetConnect uses ",(0,i.jsx)(n.strong,{children:"i18next"})," with ",(0,i.jsx)(n.code,{children:"react-i18next"})," for internationalization. The setup supports multiple languages with lazy loading, RTL (right-to-left) layout support, and locale-aware formatting. English is bundled at build time; all other languages are loaded on demand via the HTTP backend."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Source:"})," ",(0,i.jsx)(n.code,{children:"libs/core/i18n/src/"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"supported-languages",children:"Supported Languages"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// libs/core/i18n/src/i18n.ts\nexport const supportedLanguages = ['en', 'fa'] as const;\nexport type SupportedLanguage = (typeof supportedLanguages)[number];\n\nexport const languageNames: Record<SupportedLanguage, string> = {\n  en: 'English',\n  fa: '\u0641\u0627\u0631\u0633\u06cc',\n};\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Persian (",(0,i.jsx)(n.code,{children:"fa"}),") is a right-to-left language. The RTL list drives automatic document direction changes:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"export const rtlLanguages: readonly SupportedLanguage[] = ['fa'];\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"i18next-configuration",children:"i18next Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["The instance is initialized in ",(0,i.jsx)(n.code,{children:"libs/core/i18n/src/i18n.ts"})," and uses three plugins:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Plugin"}),(0,i.jsx)(n.th,{children:"Purpose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"i18next-http-backend"})}),(0,i.jsxs)(n.td,{children:["Lazy-loads translation JSON files from ",(0,i.jsx)(n.code,{children:"/locales/{{lng}}/{{ns}}.json"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"i18next-browser-languagedetector"})}),(0,i.jsxs)(n.td,{children:["Detects language from ",(0,i.jsx)(n.code,{children:"localStorage"})," then browser ",(0,i.jsx)(n.code,{children:"navigator"})," settings"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"react-i18next"})}),(0,i.jsx)(n.td,{children:"React bindings and Suspense support"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"key-configuration",children:"Key configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"i18n.init({\n  fallbackLng: 'en',          // English always available as fallback\n  supportedLngs: supportedLanguages,\n\n  // Namespaces loaded on app start\n  ns: defaultNamespaces,       // ['common', 'validation', 'errors']\n  defaultNS: 'common',\n\n  // Language detection\n  detection: {\n    order: ['localStorage', 'navigator'],\n    caches: ['localStorage'],\n    lookupLocalStorage: 'nasnet-language',  // storage key\n  },\n\n  // HTTP backend for lazy loading\n  backend: {\n    loadPath: '/locales/{{lng}}/{{ns}}.json',\n  },\n\n  interpolation: {\n    escapeValue: false,  // React handles escaping\n  },\n\n  react: {\n    useSuspense: true,   // Suspend while loading language packs\n  },\n\n  // Development helpers\n  debug: import.meta.env.DEV,\n  saveMissing: import.meta.env.DEV,  // console.warn on missing keys\n});\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"namespace-strategy",children:"Namespace Strategy"}),"\n",(0,i.jsx)(n.h3,{id:"default-namespaces-loaded-at-startup",children:"Default namespaces (loaded at startup)"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Namespace"}),(0,i.jsx)(n.th,{children:"Purpose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"common"})}),(0,i.jsx)(n.td,{children:"Global UI strings: navigation, buttons, status labels, table text, dialogs"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"validation"})}),(0,i.jsx)(n.td,{children:"Form validation error messages"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"errors"})}),(0,i.jsx)(n.td,{children:"API and application error messages"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"feature-namespaces-loaded-on-demand",children:"Feature namespaces (loaded on demand)"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Namespace"}),(0,i.jsx)(n.th,{children:"Contents"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"wizard"})}),(0,i.jsx)(n.td,{children:"Setup wizard: navigation, step labels"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"network"})}),(0,i.jsx)(n.td,{children:"Interfaces, ARP, DHCP, DNS, routes, VLANs"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"dashboard"})}),(0,i.jsx)(n.td,{children:"Bandwidth charts, resource gauges, log widgets"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"vpn"})}),(0,i.jsx)(n.td,{children:"VPN servers, clients, protocols, connection status"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"wifi"})}),(0,i.jsx)(n.td,{children:"Wireless interfaces, client list, security settings"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"firewall"})}),(0,i.jsx)(n.td,{children:"Filter rules, NAT, mangle, raw, address lists"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"services"})}),(0,i.jsx)(n.td,{children:"Feature marketplace, service management, templates"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"diagnostics"})}),(0,i.jsx)(n.td,{children:"Ping, traceroute, DNS lookup, troubleshoot wizard"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"router"})}),(0,i.jsx)(n.td,{children:"Router discovery, panel, overview, health checks"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["Feature namespaces are loaded automatically by ",(0,i.jsx)(n.code,{children:"useTranslation"})," when a component first uses them. React Suspense handles the loading state via the ",(0,i.jsx)(n.code,{children:"I18nProvider"}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"providers",children:"Providers"}),"\n",(0,i.jsx)(n.h3,{id:"i18nprovider",children:"I18nProvider"}),"\n",(0,i.jsxs)(n.p,{children:["Wraps the application with ",(0,i.jsx)(n.code,{children:"I18nextProvider"})," and a Suspense boundary. Place it near the top of the component tree in ",(0,i.jsx)(n.code,{children:"main.tsx"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"// libs/core/i18n/src/I18nProvider.tsx\nimport { I18nProvider, DirectionProvider } from '@nasnet/core/i18n';\n\n// In main.tsx\n<I18nProvider loadingFallback={<LoadingSpinner />}>\n  <DirectionProvider>\n    <App />\n  </DirectionProvider>\n</I18nProvider>\n"})}),"\n",(0,i.jsx)(n.p,{children:"Props:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Prop"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"children"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ReactNode"})}),(0,i.jsx)(n.td,{children:"required"}),(0,i.jsx)(n.td,{children:"Components to wrap"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"loadingFallback"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ReactNode"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"null"})}),(0,i.jsx)(n.td,{children:"Shown while language pack loads"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"directionprovider",children:"DirectionProvider"}),"\n",(0,i.jsxs)(n.p,{children:["Automatically manages the HTML ",(0,i.jsx)(n.code,{children:"dir"})," and ",(0,i.jsx)(n.code,{children:"lang"})," attributes as the language changes. It also provides a React context so components can read the current direction."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"// libs/core/i18n/src/DirectionProvider.tsx\nexport function DirectionProvider({ children }: DirectionProviderProps) {\n  const { i18n } = useTranslation();\n  const currentLanguage = i18n.language;\n  const isRTL = isRTLLanguage(currentLanguage);\n  const direction: Direction = isRTL ? 'rtl' : 'ltr';\n\n  useEffect(() => {\n    const html = document.documentElement;\n    html.dir = direction;        // e.g. \"rtl\"\n    html.lang = currentLanguage; // e.g. \"fa\"\n    html.setAttribute('data-direction', direction);\n  }, [direction, currentLanguage]);\n\n  return <DirectionContext.Provider value={{ direction, isRTL }}>\n    {children}\n  </DirectionContext.Provider>;\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:["Must be placed after ",(0,i.jsx)(n.code,{children:"I18nProvider"})]})," in the tree \u2014 it reads the i18n context."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"hooks",children:"Hooks"}),"\n",(0,i.jsxs)(n.p,{children:["All hooks are exported from ",(0,i.jsx)(n.code,{children:"@nasnet/core/i18n"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"usetranslation",children:"useTranslation"}),"\n",(0,i.jsxs)(n.p,{children:["Typed wrapper around ",(0,i.jsx)(n.code,{children:"react-i18next"}),"'s ",(0,i.jsx)(n.code,{children:"useTranslation"}),". Accepts a ",(0,i.jsx)(n.code,{children:"TranslationNamespace"})," or array of namespaces."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"import { useTranslation } from '@nasnet/core/i18n';\n\n// Single namespace\nfunction Dashboard() {\n  const { t } = useTranslation('dashboard');\n  return <h1>{t('widgets.bandwidth.title')}</h1>;\n}\n\n// Multiple namespaces \u2014 first namespace is the default\nfunction Form() {\n  const { t } = useTranslation(['common', 'validation']);\n  return <p>{t('button.save')}</p>;\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["For complex interpolations with JSX children, use the ",(0,i.jsx)(n.code,{children:"Trans"})," component:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"import { Trans } from '@nasnet/core/i18n';\n\n<Trans i18nKey=\"welcome.message\">\n  Welcome, <strong>{{ name }}</strong>\n</Trans>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"usedirection",children:"useDirection"}),"\n",(0,i.jsxs)(n.p,{children:["Returns the current text direction from ",(0,i.jsx)(n.code,{children:"DirectionProvider"}),". Use for direction-aware layout logic."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"import { useDirection } from '@nasnet/core/i18n';\n\nfunction ContentLayout() {\n  const { direction, isRTL } = useDirection();\n\n  return (\n    <div style={{ textAlign: isRTL ? 'right' : 'left' }}>\n      Content\n    </div>\n  );\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"useformatters",children:"useFormatters"}),"\n",(0,i.jsx)(n.p,{children:"Returns locale-aware formatting functions. Results are memoized and update when the active language changes."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"import { useFormatters } from '@nasnet/core/i18n';\n\nfunction StatusDisplay({ lastSeen, bytesTransferred, uptimeSeconds }) {\n  const { formatDate, formatBytes, formatDuration, formatRelativeTime, formatBandwidth } = useFormatters();\n\n  return (\n    <div>\n      <p>Last seen: {formatRelativeTime(lastSeen)}</p>\n      <p>Transferred: {formatBytes(bytesTransferred)}</p>\n      <p>Uptime: {formatDuration(uptimeSeconds)}</p>\n      <p>Updated: {formatDate(new Date(), { includeTime: true })}</p>\n    </div>\n  );\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"Available formatters:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Function"}),(0,i.jsx)(n.th,{children:"Input"}),(0,i.jsx)(n.th,{children:"Example output"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"formatDate(date, options?)"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Date | string | number"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"January 15, 2024"'})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"formatNumber(value, options?)"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"number"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"1,234.5"'})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"formatBytes(bytes, decimals?)"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"number"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"2.50 MB"'})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"formatDuration(seconds)"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"number"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"2h 30m 15s"'})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"formatRelativeTime(date, options?)"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Date | string | number"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"5 minutes ago"'})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"formatBandwidth(bitsPerSecond)"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"number"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"5.25 Mbps"'})})]})]})]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," Technical data such as IP addresses, MAC addresses, and port numbers must NOT use locale-specific formatting \u2014 they must remain in universal format. Only human-readable quantities (dates, byte sizes, bandwidth) go through ",(0,i.jsx)(n.code,{children:"useFormatters"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"translation-key-organization",children:"Translation Key Organization"}),"\n",(0,i.jsxs)(n.p,{children:["Translation files live at ",(0,i.jsx)(n.code,{children:"libs/core/i18n/src/locales/{lang}/{namespace}.json"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"key-naming-conventions",children:"Key naming conventions"}),"\n",(0,i.jsx)(n.p,{children:"Use dot-separated hierarchical keys organized by UI concept:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'// common.json\n{\n  "header": {\n    "navigation": {\n      "dashboard": "Dashboard",\n      "network": "Network"\n    }\n  },\n  "button": {\n    "save": "Save",\n    "cancel": "Cancel"\n  },\n  "status": {\n    "online": "Online",\n    "offline": "Offline"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"pluralization",children:"Pluralization"}),"\n",(0,i.jsxs)(n.p,{children:["i18next handles pluralization via the ",(0,i.jsx)(n.code,{children:"_other"})," suffix:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "time": {\n    "seconds": "{{count}} second",\n    "seconds_other": "{{count}} seconds"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"t('time.seconds', { count: 1 })  // \"1 second\"\nt('time.seconds', { count: 5 })  // \"5 seconds\"\n"})}),"\n",(0,i.jsx)(n.h3,{id:"interpolation",children:"Interpolation"}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"{{variable}}"})," syntax inside translation values:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "time": {\n    "ago": "{{time}} ago",\n    "in": "in {{time}}"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"adding-a-new-language",children:"Adding a New Language"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Create a folder at ",(0,i.jsx)(n.code,{children:"libs/core/i18n/src/locales/{lang}/"})]}),"\n",(0,i.jsxs)(n.li,{children:["Add a JSON file for each namespace (start with ",(0,i.jsx)(n.code,{children:"common.json"}),", ",(0,i.jsx)(n.code,{children:"validation.json"}),", ",(0,i.jsx)(n.code,{children:"errors.json"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["Add the language code to ",(0,i.jsx)(n.code,{children:"supportedLanguages"})," in ",(0,i.jsx)(n.code,{children:"i18n.ts"})]}),"\n",(0,i.jsxs)(n.li,{children:["Add the language's display name to ",(0,i.jsx)(n.code,{children:"languageNames"})]}),"\n",(0,i.jsxs)(n.li,{children:["If RTL, add the code to ",(0,i.jsx)(n.code,{children:"rtlLanguages"})]}),"\n",(0,i.jsx)(n.li,{children:"Copy the English files as a translation template"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// i18n.ts \u2014 add new language\nexport const supportedLanguages = ['en', 'fa', 'ar'] as const;\n\nexport const rtlLanguages: readonly SupportedLanguage[] = ['fa', 'ar'];\n\nexport const languageNames: Record<SupportedLanguage, string> = {\n  en: 'English',\n  fa: '\u0641\u0627\u0631\u0633\u06cc',\n  ar: '\u0627\u0644\u0639\u0631\u0628\u064a\u0629',\n};\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The HTTP backend will load the new locale files on demand from ",(0,i.jsx)(n.code,{children:"/locales/ar/common.json"}),", etc."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"adding-translations-to-a-component",children:"Adding Translations to a Component"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'// 1. Use the correct namespace for the feature\nconst { t } = useTranslation(\'network\');\n\n// 2. Add keys to the English file first\n// libs/core/i18n/src/locales/en/network.json\n{\n  "interfaces": {\n    "title": "Network Interfaces",\n    "columns": {\n      "name": "Interface Name",\n      "status": "Status"\n    }\n  }\n}\n\n// 3. Add keys to the Persian file\n// libs/core/i18n/src/locales/fa/network.json\n{\n  "interfaces": {\n    "title": "\u0631\u0627\u0628\u0637\u200c\u0647\u0627\u06cc \u0634\u0628\u06a9\u0647",\n    "columns": {\n      "name": "\u0646\u0627\u0645 \u0631\u0627\u0628\u0637",\n      "status": "\u0648\u0636\u0639\u06cc\u062a"\n    }\n  }\n}\n\n// 4. Use in component\n<h1>{t(\'interfaces.title\')}</h1>\n<th>{t(\'interfaces.columns.name\')}</th>\n'})}),"\n",(0,i.jsx)(n.p,{children:"In development, missing translation keys are logged to the console:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"[i18n] Missing translation: network:interfaces.newKey (lang: en)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"language-detection",children:"Language Detection"}),"\n",(0,i.jsx)(n.p,{children:"The detection order is:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"localStorage"})," \u2014 Key ",(0,i.jsx)(n.code,{children:"nasnet-language"}),". If the user has previously selected a language, this is used."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Browser navigator"})," \u2014 Falls back to the browser's language preference."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Fallback"})," \u2014 English (",(0,i.jsx)(n.code,{children:"en"}),") if no supported language is detected."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"To change the active language programmatically:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"import { i18n } from '@nasnet/core/i18n';\n\n// Change language (persisted to localStorage automatically)\nawait i18n.changeLanguage('fa');\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"utility-functions",children:"Utility Functions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { isRTLLanguage, getLanguageDirection } from '@nasnet/core/i18n';\n\nisRTLLanguage('fa')          // true\nisRTLLanguage('en')          // false\nisRTLLanguage('unknown')     // false\n\ngetLanguageDirection('fa')   // 'rtl'\ngetLanguageDirection('en')   // 'ltr'\n"})}),"\n",(0,i.jsx)(n.p,{children:"These are pure functions with no React dependency \u2014 safe to use outside components."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Docs/architecture/implementation-patterns/17-localization-patterns.md"})," \u2014 Architecture decisions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"libs/core/i18n/src/i18n.test.ts"})," \u2014 Unit tests for utility functions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"libs/core/i18n/src/hooks/useFormatters.test.ts"})," \u2014 Formatter tests"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},71184:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>d});var t=s(14041);const i={},r=t.createContext(i);function a(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);