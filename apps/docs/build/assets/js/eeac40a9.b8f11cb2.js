"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[24483],{3469:(e,s,d)=>{d.r(s),d.d(s,{assets:()=>l,contentTitle:()=>c,default:()=>x,frontMatter:()=>i,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"data-fetching/graphql-hooks","title":"GraphQL Hooks","description":"All GraphQL operations are wrapped in custom hooks under libs/api-client/queries/src/. Each domain has its own subdirectory. This document provides a comprehensive inventory and shows the standard patterns.","source":"@site/../connect/docs/data-fetching/graphql-hooks.md","sourceDirName":"data-fetching","slug":"/data-fetching/graphql-hooks","permalink":"/docs/frontend/data-fetching/graphql-hooks","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../connect/docs/data-fetching/graphql-hooks.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"GraphQL Code Generation","permalink":"/docs/frontend/data-fetching/codegen"},"next":{"title":"Offline Support","permalink":"/docs/frontend/data-fetching/offline-support"}}');var n=d(31085),t=d(71184);const i={},c="GraphQL Hooks",l={},h=[{value:"Standard Hook Patterns",id:"standard-hook-patterns",level:2},{value:"Query hook",id:"query-hook",level:3},{value:"Mutation hook (direct Apollo)",id:"mutation-hook-direct-apollo",level:3},{value:"Subscription hook",id:"subscription-hook",level:3},{value:"Hook Inventory by Domain",id:"hook-inventory-by-domain",level:2},{value:"Auth",id:"auth",level:3},{value:"Discovery / Connection",id:"discovery--connection",level:3},{value:"Resources (Universal State v2)",id:"resources-universal-state-v2",level:3},{value:"Change Set",id:"change-set",level:3},{value:"Network",id:"network",level:3},{value:"WAN",id:"wan",level:3},{value:"DNS",id:"dns",level:3},{value:"DHCP",id:"dhcp",level:3},{value:"Firewall",id:"firewall",level:3},{value:"Services (Feature Marketplace)",id:"services-feature-marketplace",level:3},{value:"Diagnostics",id:"diagnostics",level:3},{value:"Alerts",id:"alerts",level:3},{value:"Notifications",id:"notifications",level:3},{value:"Storage",id:"storage",level:3},{value:"VPN",id:"vpn",level:3},{value:"OUI (MAC Vendor)",id:"oui-mac-vendor",level:3},{value:"System",id:"system",level:3},{value:"Batch",id:"batch",level:3},{value:"Using the <code>useQueryWithLoading</code> and <code>useMutationWithLoading</code> Wrappers",id:"using-the-usequerywithloading-and-usemutationwithloading-wrappers",level:2},{value:"Query Keys",id:"query-keys",level:2}];function o(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"graphql-hooks",children:"GraphQL Hooks"})}),"\n",(0,n.jsxs)(s.p,{children:["All GraphQL operations are wrapped in custom hooks under ",(0,n.jsx)(s.code,{children:"libs/api-client/queries/src/"}),". Each domain has its own subdirectory. This document provides a comprehensive inventory and shows the standard patterns."]}),"\n",(0,n.jsx)(s.h2,{id:"standard-hook-patterns",children:"Standard Hook Patterns"}),"\n",(0,n.jsx)(s.h3,{id:"query-hook",children:"Query hook"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-typescript",children:"// libs/api-client/queries/src/network/useDnsLookup.ts\nexport function useDnsLookup(routerId: string, hostname: string) {\n  return useQuery(DNS_LOOKUP_QUERY, {\n    variables: { routerId, hostname },\n    skip: !routerId || !hostname,\n  });\n}\n"})}),"\n",(0,n.jsx)(s.h3,{id:"mutation-hook-direct-apollo",children:"Mutation hook (direct Apollo)"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-typescript",children:"// libs/api-client/queries/src/resources/useResourceMutations.ts\nexport function useCreateResource<TConfig = unknown>() {\n  const [mutation, { loading, error, reset }] = useMutation(CREATE_RESOURCE_MUTATION);\n\n  const mutate = useCallback(\n    async (input: CreateResourceInput): Promise<Resource<TConfig>> => {\n      const result = await mutation({ variables: { input } });\n      return result.data.createResource;\n    },\n    [mutation]\n  );\n\n  return { mutate, loading, error, reset };\n}\n"})}),"\n",(0,n.jsx)(s.h3,{id:"subscription-hook",children:"Subscription hook"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-typescript",children:"export function useTroubleshootProgress(sessionId: string) {\n  return useSubscription(TROUBLESHOOT_PROGRESS, {\n    variables: { sessionId },\n    skip: !sessionId,\n  });\n}\n"})}),"\n",(0,n.jsx)(s.h2,{id:"hook-inventory-by-domain",children:"Hook Inventory by Domain"}),"\n",(0,n.jsx)(s.h3,{id:"auth",children:"Auth"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Hook"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"File"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"(auth handled by interceptors, not hooks)"}),(0,n.jsx)(s.td,{children:"\u2014"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"core/src/interceptors/auth.ts"})})]})})]}),"\n",(0,n.jsx)(s.h3,{id:"discovery--connection",children:"Discovery / Connection"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Hook"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"File"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useTestConnection"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"discovery/useTestConnection.ts"})})]})})]}),"\n",(0,n.jsx)(s.h3,{id:"resources-universal-state-v2",children:"Resources (Universal State v2)"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Hook"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"File"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useResourceLayers"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"resources/useResourceLayers.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useResourceSubscription"})}),(0,n.jsx)(s.td,{children:"Subscription"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"resources/useResourceSubscription.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useCreateResource"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"resources/useResourceMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useUpdateResource"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"resources/useResourceMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useDeleteResource"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"resources/useResourceMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useValidateResource"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"resources/useResourceMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useApplyResource"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"resources/useResourceMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useSyncResource"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"resources/useResourceMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useRevertResource"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"resources/useResourceMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useArchiveResource"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"resources/useResourceMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useRestoreResource"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"resources/useResourceMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useCloneResource"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"resources/useResourceMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useBatchApplyResources"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"resources/useResourceMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useUpdateResourceMetadata"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"resources/useResourceMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useToggleFavorite"})}),(0,n.jsx)(s.td,{children:"Mutation (composite)"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"resources/useResourceMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useTogglePinned"})}),(0,n.jsx)(s.td,{children:"Mutation (composite)"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"resources/useResourceMutations.ts"})})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"change-set",children:"Change Set"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Hook"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"File"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useChangeSetQueries"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"change-set/useChangeSetQueries.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useChangeSetMutations"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"change-set/useChangeSetMutations.ts"})})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"network",children:"Network"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Hook"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"File"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useInterfaceMutations"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"network/useInterfaceMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useIPAddressMutations"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"network/useIPAddressMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useBridgeQueries"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"network/useBridgeQueries.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useBridgeMutations"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"network/useBridgeMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useRoutes"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"network/useRoutes.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useVlanMutations"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"network/useVlanMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useDnsLookup"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"network/useDnsLookup.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useDnsBenchmark"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"network/useDnsBenchmark.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useDnsCacheStats"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"network/useDnsCacheStats.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useFlushDnsCache"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"network/useFlushDnsCache.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useRouteLookup"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"network/useRouteLookup.ts"})})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"wan",children:"WAN"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Hook"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"File"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useWANMutations"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"wan/useWANMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"(WAN queries defined inline in components)"}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"wan/wan-queries.graphql.ts"})})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"dns",children:"DNS"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Hook"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"File"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useDNS"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"dns/useDNS.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"(DNS mutations)"}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"dns/mutations.ts"})})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"dhcp",children:"DHCP"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Hook"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"File"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"(DHCP mutations)"}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"dhcp/mutations.ts"})})]})})]}),"\n",(0,n.jsx)(s.h3,{id:"firewall",children:"Firewall"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Hook"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"File"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useFilterRules"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"firewall/useFilterRules.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useMangleRules"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"firewall/useMangleRules.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useRawRules"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"firewall/useRawRules.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useConnections"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"firewall/useConnections.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useConnectionTrackingSettings"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"firewall/useConnectionTrackingSettings.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useUpdateConnectionTracking"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"firewall/useUpdateConnectionTracking.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useKillConnection"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"firewall/useKillConnection.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"templates"})}),(0,n.jsx)(s.td,{children:"Query/Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"firewall/templates.ts"})})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"services-feature-marketplace",children:"Services (Feature Marketplace)"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Hook"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"File"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useAvailableServices"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"services/useAvailableServices.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useInstanceMutations"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"services/useInstanceMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useFeatureVerification"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"services/useFeatureVerification.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useVirtualInterfaces"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"services/useVirtualInterfaces.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useBridgeStatus"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"services/useBridgeStatus.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useDependencies"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"services/useDependencies.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useDependencyMutations"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"services/useDependencyMutations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useGatewayStatus"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"services/useGatewayStatus.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useVLANAllocations"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"services/useVLANAllocations.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useVLANPoolStatus"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"services/useVLANPoolStatus.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useCleanupOrphanedVLANs"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"services/useCleanupOrphanedVLANs.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useUpdateVLANPoolConfig"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"services/useUpdateVLANPoolConfig.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useSystemResources"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"services/useSystemResources.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useServiceLogs"})}),(0,n.jsx)(s.td,{children:"Query/Subscription"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"services/useServiceLogs.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useDiagnostics"})}),(0,n.jsx)(s.td,{children:"Query/Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"services/useDiagnostics.ts"})})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"diagnostics",children:"Diagnostics"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Hook"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"File"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"(operations: start, run step, apply fix, verify, cancel, subscribe)"}),(0,n.jsx)(s.td,{children:"Query/Mutation/Subscription"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"diagnostics/operations.ts"})})]})})]}),"\n",(0,n.jsx)(s.h3,{id:"alerts",children:"Alerts"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Hook"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"File"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useAlertRuleTemplates"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"alerts/useAlertRuleTemplates.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useAlertTemplate"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"alerts/useAlertTemplate.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useSaveAlertTemplate"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"alerts/useSaveAlertTemplate.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"usePreviewAlertTemplate"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"alerts/usePreviewAlertTemplate.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useDigestQueueCount"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"alerts/useDigestQueueCount.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useDigestHistory"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"alerts/useDigestHistory.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useTriggerDigestNow"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"alerts/useTriggerDigestNow.ts"})})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"notifications",children:"Notifications"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Hook"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"File"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"(notification hooks)"}),(0,n.jsx)(s.td,{children:"Query/Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"notifications/index.ts"})})]})})]}),"\n",(0,n.jsx)(s.h3,{id:"storage",children:"Storage"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Hook"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"File"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useStorageInfo"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"storage/useStorageInfo.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useStorageUsage"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"storage/useStorageUsage.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useStorageConfig"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"storage/useStorageConfig.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useStorageMutations"})}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"storage/useStorageMutations.ts"})})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"vpn",children:"VPN"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Hook"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"File"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"usePPPActive"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"vpn/usePPPActive.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useIPsecActive"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"vpn/useIPsecActive.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"(VPN mutations)"}),(0,n.jsx)(s.td,{children:"Mutation"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"vpn/mutations/index.ts"})})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"oui-mac-vendor",children:"OUI (MAC Vendor)"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Hook"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"File"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useVendorLookup"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"oui/useVendorLookup.ts"})})]})})]}),"\n",(0,n.jsx)(s.h3,{id:"system",children:"System"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Hook"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"File"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useIPServices"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"system/useIPServices.ts"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useSystemNote"})}),(0,n.jsx)(s.td,{children:"Query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"system/useSystemNote.ts"})})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"batch",children:"Batch"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Hook"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"File"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"useBatchJob"})}),(0,n.jsx)(s.td,{children:"Query/Subscription"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"batch/useBatchJob.ts"})})]})})]}),"\n",(0,n.jsxs)(s.h2,{id:"using-the-usequerywithloading-and-usemutationwithloading-wrappers",children:["Using the ",(0,n.jsx)(s.code,{children:"useQueryWithLoading"})," and ",(0,n.jsx)(s.code,{children:"useMutationWithLoading"})," Wrappers"]}),"\n",(0,n.jsx)(s.p,{children:"The core package provides lightweight wrappers that normalise loading states across all hooks:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-typescript",children:"import { useQueryWithLoading } from '@nasnet/api-client/core';\n\n// Returns { data, isLoading, error } instead of Apollo's { loading, data, error }\nconst { data, isLoading, error } = useQueryWithLoading(MY_QUERY, { variables });\n"})}),"\n",(0,n.jsxs)(s.p,{children:["These wrappers live in ",(0,n.jsx)(s.code,{children:"libs/api-client/core/src/hooks/"}),"."]}),"\n",(0,n.jsx)(s.h2,{id:"query-keys",children:"Query Keys"}),"\n",(0,n.jsxs)(s.p,{children:["Each domain that uses cache invalidation defines stable query key factories in a ",(0,n.jsx)(s.code,{children:"queryKeys.ts"})," file:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-typescript",children:"// libs/api-client/queries/src/resources/queryKeys.ts\nexport const resourceKeys = {\n  all: ['resources'] as const,\n  lists: () => [...resourceKeys.all, 'list'] as const,\n  detail: (uuid: string) => [...resourceKeys.all, 'detail', uuid] as const,\n};\n"})}),"\n",(0,n.jsx)(s.p,{children:"This ensures consistent invalidation when mutations succeed."})]})}function x(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},71184:(e,s,d)=>{d.d(s,{R:()=>i,x:()=>c});var r=d(14041);const n={},t=r.createContext(n);function i(e){const s=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);