"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[23185],{14008:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"guides/accessibility-patterns","title":"Accessibility Patterns","description":"Reference: libs/state/stores/src/a11y/a11y-provider.tsx | libs/core/utils/src/hooks/useReducedMotion.ts | WCAG 2.1 AAA Compliance","source":"@site/../../libs/core/docs/guides/accessibility-patterns.md","sourceDirName":"guides","slug":"/guides/accessibility-patterns","permalink":"/docs/core/guides/accessibility-patterns","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../../libs/core/docs/guides/accessibility-patterns.md","tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"sidebar_position":12,"title":"Accessibility Patterns"},"sidebar":"sidebar","previous":{"title":"State Machines Guide","permalink":"/docs/core/guides/state-machines-guide"},"next":{"title":"Performance Patterns","permalink":"/docs/core/guides/performance-patterns"}}');var r=s(31085),o=s(71184);const i={sidebar_position:12,title:"Accessibility Patterns"},a="Accessibility Patterns in NasNetConnect",c={},l=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"A11yProvider Architecture",id:"a11yprovider-architecture",level:2},{value:"Setup",id:"setup",level:3},{value:"Context Architecture",id:"context-architecture",level:3},{value:"SSR Safety",id:"ssr-safety",level:3},{value:"A11yContextValue Interface",id:"a11ycontextvalue-interface",level:2},{value:"reducedMotion: boolean",id:"reducedmotion-boolean",level:3},{value:"highContrast: boolean",id:"highcontrast-boolean",level:3},{value:"keyboardUser: boolean",id:"keyboarduser-boolean",level:3},{value:"announce: (message, priority?) =&gt; void",id:"announce-message-priority--void",level:3},{value:"Available Hooks",id:"available-hooks",level:2},{value:"useA11y() \u2014 Full Context Access",id:"usea11y--full-context-access",level:3},{value:"useA11yOptional() \u2014 Nullable Access",id:"usea11yoptional--nullable-access",level:3},{value:"useReducedMotion() \u2014 Selector Hook",id:"usereducedmotion--selector-hook",level:3},{value:"useKeyboardUser() \u2014 Selector Hook",id:"usekeyboarduser--selector-hook",level:3},{value:"useHighContrast() \u2014 Selector Hook",id:"usehighcontrast--selector-hook",level:3},{value:"useAnnounce() \u2014 Selector Hook",id:"useannounce--selector-hook",level:3},{value:"Standalone useReducedMotion Hook",id:"standalone-usereducedmotion-hook",level:2},{value:"useReducedMotion() \u2014 React Hook",id:"usereducedmotion--react-hook",level:3},{value:"getReducedMotionPreference() \u2014 Static Check",id:"getreducedmotionpreference--static-check",level:3},{value:"WCAG AAA Compliance Checklist",id:"wcag-aaa-compliance-checklist",level:2},{value:"Color Contrast (7:1 ratio)",id:"color-contrast-71-ratio",level:3},{value:"Touch Target Size (44px minimum)",id:"touch-target-size-44px-minimum",level:3},{value:"Focus Indicators (3px ring)",id:"focus-indicators-3px-ring",level:3},{value:"Semantic HTML + ARIA Labels",id:"semantic-html--aria-labels",level:3},{value:"Full Keyboard Navigation",id:"full-keyboard-navigation",level:3},{value:"Reduced Motion Support",id:"reduced-motion-support",level:3},{value:"Data Attributes for CSS Targeting",id:"data-attributes-for-css-targeting",level:2},{value:"data-keyboard-user",id:"data-keyboard-user",level:3},{value:"data-reduced-motion",id:"data-reduced-motion",level:3},{value:"Testing Accessibility",id:"testing-accessibility",level:2},{value:"Mocking prefers-reduced-motion in Tests",id:"mocking-prefers-reduced-motion-in-tests",level:3},{value:"axe-core Testing",id:"axe-core-testing",level:3},{value:"Code Examples",id:"code-examples",level:2},{value:"Complete Accessible Form Example",id:"complete-accessible-form-example",level:3},{value:"Responsive Animation Component",id:"responsive-animation-component",level:3},{value:"Screen Reader Announcement on Data Change",id:"screen-reader-announcement-on-data-change",level:3},{value:"Related Guides",id:"related-guides",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"accessibility-patterns-in-nasnetconnect",children:"Accessibility Patterns in NasNetConnect"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Reference:"})," ",(0,r.jsx)(n.code,{children:"libs/state/stores/src/a11y/a11y-provider.tsx"})," | ",(0,r.jsx)(n.code,{children:"libs/core/utils/src/hooks/useReducedMotion.ts"})," | WCAG 2.1 AAA Compliance"]}),"\n",(0,r.jsx)(n.p,{children:"NasNetConnect implements a comprehensive accessibility (a11y) system that detects and respects user preferences for reduced motion, high contrast, and keyboard navigation. This guide documents the accessibility infrastructure, available hooks, and compliance patterns."}),"\n",(0,r.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#a11yprovider-architecture",children:"A11yProvider Architecture"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#a11ycontextvalue-interface",children:"A11yContextValue Interface"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#available-hooks",children:"Available Hooks"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#standalone-usereducedmotion-hook",children:"Standalone useReducedMotion Hook"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#wcag-aaa-compliance-checklist",children:"WCAG AAA Compliance Checklist"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#data-attributes-for-css-targeting",children:"Data Attributes for CSS Targeting"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#testing-accessibility",children:"Testing Accessibility"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#code-examples",children:"Code Examples"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"a11yprovider-architecture",children:"A11yProvider Architecture"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"A11yProvider"})," is a React context provider that wraps the entire application tree and provides accessibility state to all components. It detects user preferences at runtime and maintains reactive state for motion, contrast, and keyboard usage."]}),"\n",(0,r.jsx)(n.h3,{id:"setup",children:"Setup"}),"\n",(0,r.jsx)(n.p,{children:"The provider must be placed at your application root:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// apps/connect/src/routes/__root.tsx\nimport { A11yProvider } from '@nasnet/state/stores';\n\nfunction Root() {\n  return (\n    <A11yProvider>\n      <YourApp />\n    </A11yProvider>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"context-architecture",children:"Context Architecture"}),"\n",(0,r.jsxs)(n.p,{children:["The provider uses React Context (",(0,r.jsx)(n.code,{children:"createContext"}),") with a null default to enforce provider presence:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const A11yContext = createContext<A11yContextValue | null>(null);\n"})}),"\n",(0,r.jsx)(n.p,{children:"This architecture ensures:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type safety"}),": Null context forces provider usage"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SSR compatibility"}),": ",(0,r.jsx)(n.code,{children:"isBrowser()"})," checks prevent hydration errors"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance"}),": Context value is memoized to prevent unnecessary re-renders"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Error handling"}),": Helpful error message if hooks are used outside provider"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"ssr-safety",children:"SSR Safety"}),"\n",(0,r.jsxs)(n.p,{children:["All browser APIs are guarded with ",(0,r.jsx)(n.code,{children:"isBrowser()"})," checks to support Server-Side Rendering:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"function isBrowser(): boolean {\n  return typeof window !== 'undefined';\n}\n\nfunction getInitialReducedMotion(): boolean {\n  if (!isBrowser()) return false;  // Safe default during SSR\n  return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"a11ycontextvalue-interface",children:"A11yContextValue Interface"}),"\n",(0,r.jsx)(n.p,{children:"The context provides five key properties and methods:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export interface A11yContextValue {\n  reducedMotion: boolean;\n  highContrast: boolean;\n  keyboardUser: boolean;\n  announce: (message: string, priority?: 'polite' | 'assertive') => void;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"reducedmotion-boolean",children:"reducedMotion: boolean"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Detection:"})," Based on ",(0,r.jsx)(n.code,{children:"prefers-reduced-motion: reduce"})," media query"]}),"\n",(0,r.jsx)(n.p,{children:"Indicates whether the user has enabled reduced motion in their operating system settings (System Preferences > Accessibility > Display on macOS, Settings > Ease of Access > Display on Windows)."}),"\n",(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"true"}),", animations should be disabled or significantly reduced:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"function AnimatedButton() {\n  const { reducedMotion } = useA11y();\n\n  return (\n    <motion.button\n      animate={reducedMotion ? {} : { scale: 1.05 }}\n      transition={reducedMotion ? { duration: 0 } : { duration: 0.3 }}\n    >\n      Click Me\n    </motion.button>\n  );\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Reactive:"})," Updated in real-time if user changes system preferences while app is running."]}),"\n",(0,r.jsx)(n.h3,{id:"highcontrast-boolean",children:"highContrast: boolean"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Detection:"})," Based on ",(0,r.jsx)(n.code,{children:"prefers-contrast: more"})," media query"]}),"\n",(0,r.jsx)(n.p,{children:"Indicates whether the user has enabled high contrast mode in their operating system accessibility settings."}),"\n",(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"true"}),", use enhanced contrast colors from design tokens:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"function TextBlock() {\n  const { highContrast } = useA11y();\n\n  return (\n    <p className={highContrast ? 'text-high-contrast' : 'text-normal'}>\n      Content\n    </p>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"keyboarduser-boolean",children:"keyboardUser: boolean"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Detection:"})," Tab key pressed \u2192 ",(0,r.jsx)(n.code,{children:"true"})," | Mouse/touch used \u2192 ",(0,r.jsx)(n.code,{children:"false"})]}),"\n",(0,r.jsx)(n.p,{children:'Tracks whether the user is navigating with keyboard only or using mouse/touch. Useful for showing focus rings only when needed (avoid "keyboard user, no focus ring" problem).'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"function FocusableElement() {\n  const { keyboardUser } = useA11y();\n\n  return (\n    <button\n      className={keyboardUser ? 'show-focus-ring' : ''}\n      onKeyDown={() => /* handle keyboard */}\n    >\n      Button\n    </button>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"CSS Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-css",children:"/* Only show focus ring for keyboard users */\n[data-keyboard-user] button:focus {\n  outline: 3px solid var(--focus-ring-color);\n  outline-offset: 2px;\n}\n\n/* Mouse users don't see focus ring */\nbutton:focus {\n  outline: none;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"announce-message-priority--void",children:"announce: (message, priority?) => void"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Screen Reader Announcements"})}),"\n",(0,r.jsx)(n.p,{children:"Sends messages to screen readers via an aria-live region. Use for dynamic content changes:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"function FormWithAsync() {\n  const { announce } = useA11y();\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = async () => {\n    setIsLoading(true);\n    announce('Validating form, please wait...', 'polite');\n\n    try {\n      await submitForm();\n      announce('Form submitted successfully', 'assertive');\n    } catch {\n      announce('Form submission failed', 'assertive');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return <button onClick={handleSubmit}>Submit</button>;\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Priority Levels:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"'polite'"})," (default): Waits for screen reader to finish reading current content"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"'assertive'"}),": Interrupts screen reader immediately (use for critical errors)"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"available-hooks",children:"Available Hooks"}),"\n",(0,r.jsx)(n.h3,{id:"usea11y--full-context-access",children:"useA11y() \u2014 Full Context Access"}),"\n",(0,r.jsxs)(n.p,{children:["Provides access to the entire accessibility context. Throws an error if used outside ",(0,r.jsx)(n.code,{children:"A11yProvider"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useA11y } from '@nasnet/state/stores';\n\nfunction Component() {\n  const { reducedMotion, highContrast, keyboardUser, announce } = useA11y();\n\n  return <div>All accessibility features</div>;\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Error Handling:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'// This will throw:\n// "useA11y must be used within an A11yProvider"\nfunction ComponentOutsideProvider() {\n  const a11y = useA11y();  // \u274c Error\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"usea11yoptional--nullable-access",children:"useA11yOptional() \u2014 Nullable Access"}),"\n",(0,r.jsxs)(n.p,{children:["Returns the full context or ",(0,r.jsx)(n.code,{children:"null"})," if outside provider. Useful for optional accessibility features:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"function OptionalA11yComponent() {\n  const a11y = useA11yOptional();\n\n  if (!a11y) {\n    // Provider not available, use defaults\n    return <div>Default behavior</div>;\n  }\n\n  return <div>Enhanced a11y features</div>;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"usereducedmotion--selector-hook",children:"useReducedMotion() \u2014 Selector Hook"}),"\n",(0,r.jsxs)(n.p,{children:["Returns only the ",(0,r.jsx)(n.code,{children:"reducedMotion"})," boolean. Optimized for components that only need this one value:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useReducedMotion } from '@nasnet/state/stores';\n\nfunction AnimatedComponent() {\n  const reducedMotion = useReducedMotion();\n\n  return (\n    <div className={reducedMotion ? 'no-animation' : 'animated'}>\n      Content\n    </div>\n  );\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Performance Note:"})," Selector hooks reduce re-render churn by only subscribing to the specific value they need."]}),"\n",(0,r.jsx)(n.h3,{id:"usekeyboarduser--selector-hook",children:"useKeyboardUser() \u2014 Selector Hook"}),"\n",(0,r.jsxs)(n.p,{children:["Returns only the ",(0,r.jsx)(n.code,{children:"keyboardUser"})," boolean:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useKeyboardUser } from '@nasnet/state/stores';\n\nfunction FocusRingComponent() {\n  const keyboardUser = useKeyboardUser();\n\n  return (\n    <button className={keyboardUser ? 'show-focus' : ''}>\n      Keyboard Accessible Button\n    </button>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"usehighcontrast--selector-hook",children:"useHighContrast() \u2014 Selector Hook"}),"\n",(0,r.jsxs)(n.p,{children:["Returns only the ",(0,r.jsx)(n.code,{children:"highContrast"})," boolean:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useHighContrast } from '@nasnet/state/stores';\n\nfunction HighContrastComponent() {\n  const highContrast = useHighContrast();\n\n  return (\n    <div className={highContrast ? 'high-contrast-mode' : 'normal-mode'}>\n      Content\n    </div>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"useannounce--selector-hook",children:"useAnnounce() \u2014 Selector Hook"}),"\n",(0,r.jsxs)(n.p,{children:["Returns only the ",(0,r.jsx)(n.code,{children:"announce"})," function:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useAnnounce } from '@nasnet/state/stores';\n\nfunction AlertComponent() {\n  const announce = useAnnounce();\n\n  const handleAlert = () => {\n    announce('Important alert message', 'assertive');\n  };\n\n  return <button onClick={handleAlert}>Trigger Alert</button>;\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"standalone-usereducedmotion-hook",children:"Standalone useReducedMotion Hook"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@nasnet/core/utils"})," package exports a standalone ",(0,r.jsx)(n.code,{children:"useReducedMotion"})," hook that does NOT require a provider. This is useful for utility libraries or non-React contexts."]}),"\n",(0,r.jsx)(n.h3,{id:"usereducedmotion--react-hook",children:"useReducedMotion() \u2014 React Hook"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useReducedMotion } from '@nasnet/core/utils/hooks';\n\nfunction Component() {\n  const prefersReducedMotion = useReducedMotion();\n\n  // This hook sets up an event listener and returns true/false\n  // Safe to use without A11yProvider\n  return <div>Uses media query directly</div>;\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Differences from A11yProvider version:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"No provider required"}),"\n",(0,r.jsx)(n.li,{children:"Sets up its own event listeners"}),"\n",(0,r.jsx)(n.li,{children:"Safe to use in utility libraries"}),"\n",(0,r.jsx)(n.li,{children:"Returns false during SSR (default)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"getreducedmotionpreference--static-check",children:"getReducedMotionPreference() \u2014 Static Check"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { getReducedMotionPreference } from '@nasnet/core/utils/hooks';\n\n// Use at module level or outside React\nconst prefersReduced = getReducedMotionPreference();\nconst animationDuration = prefersReduced ? 0 : 300;\n\n// Define animation config\nconst animationConfig = {\n  duration: animationDuration,\n  easing: prefersReduced ? 'linear' : 'cubic-bezier(0.4, 0, 0.2, 1)',\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"When to Use:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"CSS-in-JS configuration at module level"}),"\n",(0,r.jsx)(n.li,{children:"Non-React contexts (event handlers, utility functions)"}),"\n",(0,r.jsx)(n.li,{children:"One-time checks (not reactive)"}),"\n",(0,r.jsx)(n.li,{children:"Browser polyfills"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Browser Compatibility:"})}),"\n",(0,r.jsxs)(n.p,{children:["Both modern (",(0,r.jsx)(n.code,{children:"addEventListener"}),") and legacy (",(0,r.jsx)(n.code,{children:"addListener"}),"/",(0,r.jsx)(n.code,{children:"removeListener"}),") media query APIs are supported:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"if (mediaQuery.addEventListener) {\n  mediaQuery.addEventListener('change', handler);\n} else {\n  // Fallback for older browsers\n  mediaQuery.addListener(handler);\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"wcag-aaa-compliance-checklist",children:"WCAG AAA Compliance Checklist"}),"\n",(0,r.jsxs)(n.p,{children:["When using ",(0,r.jsx)(n.code,{children:"libs/core"})," in your components, ensure you meet these WCAG 2.1 Level AAA requirements:"]}),"\n",(0,r.jsx)(n.h3,{id:"color-contrast-71-ratio",children:"Color Contrast (7:1 ratio)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use semantic design tokens (not raw color values)"}),"\n",(0,r.jsx)(n.li,{children:"Test contrast with tools like WebAIM Contrast Checker"}),"\n",(0,r.jsx)(n.li,{children:"Verify all interactive elements pass 7:1 contrast ratio"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'// Good - uses semantic tokens with guaranteed contrast\n<button className="bg-primary text-primary-foreground">\n  Accessible Button\n</button>\n\n// Bad - arbitrary color values may not meet WCAG AAA\n<button className="bg-blue-400 text-blue-50">\n  May fail contrast check\n</button>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"touch-target-size-44px-minimum",children:"Touch Target Size (44px minimum)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"All interactive elements must be at least 44x44 pixels"}),"\n",(0,r.jsx)(n.li,{children:"Account for padding, not just the content"}),"\n",(0,r.jsx)(n.li,{children:"Use platform presenters to ensure mobile components meet this"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'// Mobile: 44px touch target\n<button className="p-3 h-11 w-11">Icon Button</button>\n\n// Desktop: Can be smaller\n<button className="p-1 h-6 w-6">Desktop Icon</button>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"focus-indicators-3px-ring",children:"Focus Indicators (3px ring)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Show focus ring only for keyboard users"}),"\n",(0,r.jsx)(n.li,{children:"Use consistent focus color across all components"}),"\n",(0,r.jsx)(n.li,{children:"Ensure 3px outline or ring"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Use data attribute set by A11yProvider\n[data-keyboard-user] button:focus {\n  outline: 3px solid var(--color-focus);\n  outline-offset: 2px;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"semantic-html--aria-labels",children:"Semantic HTML + ARIA Labels"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use semantic elements: ",(0,r.jsx)(n.code,{children:"<button>"}),", ",(0,r.jsx)(n.code,{children:"<nav>"}),", ",(0,r.jsx)(n.code,{children:"<article>"}),", etc."]}),"\n",(0,r.jsx)(n.li,{children:"Add ARIA labels for icon-only buttons"}),"\n",(0,r.jsx)(n.li,{children:"Use aria-live for dynamic content"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'function IconButton() {\n  return (\n    <button aria-label="Close menu">\n      <XIcon />\n    </button>\n  );\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"full-keyboard-navigation",children:"Full Keyboard Navigation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"All interactive elements must be reachable via Tab key"}),"\n",(0,r.jsx)(n.li,{children:"Implement focus management in modals/menus"}),"\n",(0,r.jsx)(n.li,{children:"Use tabindex strategically (avoid tabindex > 0)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"reduced-motion-support",children:"Reduced Motion Support"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use the ",(0,r.jsx)(n.code,{children:"useReducedMotion()"})," hook to disable animations"]}),"\n",(0,r.jsx)(n.li,{children:"Provide keyboard alternatives to gesture interactions"}),"\n",(0,r.jsxs)(n.li,{children:["Test with ",(0,r.jsx)(n.code,{children:"prefers-reduced-motion: reduce"})," enabled"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"function MotionComponent() {\n  const reducedMotion = useReducedMotion();\n\n  return (\n    <motion.div\n      animate={reducedMotion ? {} : { scale: 1.1 }}\n      transition={{ duration: reducedMotion ? 0 : 0.3 }}\n    >\n      Content\n    </motion.div>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"data-attributes-for-css-targeting",children:"Data Attributes for CSS Targeting"}),"\n",(0,r.jsxs)(n.p,{children:["The provider automatically sets data attributes on ",(0,r.jsx)(n.code,{children:"document.documentElement"})," for CSS-based accessibility:"]}),"\n",(0,r.jsx)(n.h3,{id:"data-keyboard-user",children:"data-keyboard-user"}),"\n",(0,r.jsxs)(n.p,{children:["Set to ",(0,r.jsx)(n.code,{children:'"true"'})," when user presses Tab key, removed when mouse/touch is used:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'\x3c!-- When keyboard user --\x3e\n<html data-keyboard-user="true">\n\n\x3c!-- When mouse/touch user --\x3e\n<html>\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"CSS Usage:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-css",children:"/* Show focus ring only for keyboard users */\n[data-keyboard-user] :focus-visible {\n  outline: 3px solid var(--color-focus);\n}\n\n/* Hide focus ring for mouse users */\n:focus-visible {\n  outline: none;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"data-reduced-motion",children:"data-reduced-motion"}),"\n",(0,r.jsxs)(n.p,{children:["Set to ",(0,r.jsx)(n.code,{children:'"true"'})," when user has ",(0,r.jsx)(n.code,{children:"prefers-reduced-motion: reduce"})," enabled, removed otherwise:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'\x3c!-- When reduced motion is preferred --\x3e\n<html data-reduced-motion="true">\n\n\x3c!-- When animations are allowed --\x3e\n<html>\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"CSS Usage:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-css",children:"[data-reduced-motion] * {\n  animation-duration: 0.01ms !important;\n  animation-iteration-count: 1 !important;\n  transition-duration: 0.01ms !important;\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"testing-accessibility",children:"Testing Accessibility"}),"\n",(0,r.jsx)(n.h3,{id:"mocking-prefers-reduced-motion-in-tests",children:"Mocking prefers-reduced-motion in Tests"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useReducedMotion } from '@nasnet/state/stores';\nimport { render } from '@testing-library/react';\nimport { A11yProvider } from '@nasnet/state/stores';\n\ndescribe('Reduced Motion', () => {\n  it('disables animations when reduced motion is preferred', () => {\n    // Mock matchMedia\n    Object.defineProperty(window, 'matchMedia', {\n      writable: true,\n      value: jest.fn().mockImplementation(query => ({\n        matches: query === '(prefers-reduced-motion: reduce)',\n        media: query,\n        onchange: null,\n        addListener: jest.fn(),\n        removeListener: jest.fn(),\n        addEventListener: jest.fn(),\n        removeEventListener: jest.fn(),\n        dispatchEvent: jest.fn(),\n      })),\n    });\n\n    const { getByRole } = render(\n      <A11yProvider>\n        <AnimatedComponent />\n      </A11yProvider>\n    );\n\n    const button = getByRole('button');\n    // Assert animation is disabled\n    expect(button).toHaveClass('no-animation');\n  });\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"axe-core-testing",children:"axe-core Testing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { render } from '@testing-library/react';\nimport { axe, toHaveNoViolations } from 'jest-axe';\nimport { A11yProvider } from '@nasnet/state/stores';\n\nexpect.extend(toHaveNoViolations);\n\nit('passes accessibility audit', async () => {\n  const { container } = render(\n    <A11yProvider>\n      <YourComponent />\n    </A11yProvider>\n  );\n\n  const results = await axe(container);\n  expect(results).toHaveNoViolations();\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"code-examples",children:"Code Examples"}),"\n",(0,r.jsx)(n.h3,{id:"complete-accessible-form-example",children:"Complete Accessible Form Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { A11yProvider, useA11y } from '@nasnet/state/stores';\nimport { useFormPersistence } from '@nasnet/core/forms';\n\nfunction AccessibleForm() {\n  const { announce } = useA11y();\n  const form = useZodForm({ schema, defaultValues });\n  const { clearPersistence } = useFormPersistence({\n    form,\n    storageKey: 'accessible-form',\n  });\n\n  const onSubmit = async (data) => {\n    announce('Submitting form...', 'polite');\n    try {\n      await submitForm(data);\n      announce('Form submitted successfully', 'assertive');\n      clearPersistence();\n    } catch (error) {\n      announce(`Error: ${error.message}`, 'assertive');\n    }\n  };\n\n  return (\n    <form onSubmit={form.handleSubmit(onSubmit)}>\n      <label htmlFor=\"name\">Name *</label>\n      <input\n        id=\"name\"\n        type=\"text\"\n        aria-required=\"true\"\n        {...form.register('name')}\n      />\n      {form.formState.errors.name && (\n        <span role=\"alert\">{form.formState.errors.name.message}</span>\n      )}\n\n      <button type=\"submit\" aria-label=\"Submit form\">\n        Submit\n      </button>\n    </form>\n  );\n}\n\n// Root component\nfunction App() {\n  return (\n    <A11yProvider>\n      <AccessibleForm />\n    </A11yProvider>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"responsive-animation-component",children:"Responsive Animation Component"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useReducedMotion } from '@nasnet/state/stores';\nimport { motion } from 'framer-motion';\n\nfunction StatusIndicator({ status }: { status: 'online' | 'offline' }) {\n  const reducedMotion = useReducedMotion();\n\n  const pulseVariants = reducedMotion\n    ? {}\n    : {\n        animate: { scale: [1, 1.1, 1], opacity: [1, 0.8, 1] },\n        transition: {\n          duration: 2,\n          repeat: Infinity,\n        },\n      };\n\n  return (\n    <motion.div\n      className={`status-indicator ${status}`}\n      {...pulseVariants}\n      role=\"status\"\n      aria-label={`Status: ${status}`}\n    />\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"screen-reader-announcement-on-data-change",children:"Screen Reader Announcement on Data Change"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useAnnounce } from '@nasnet/state/stores';\nimport { useQuery } from '@apollo/client';\n\nfunction RealTimeDataComponent() {\n  const announce = useAnnounce();\n  const { data, refetch } = useQuery(QUERY);\n\n  useEffect(() => {\n    if (data?.hasUpdates) {\n      announce(`New data available: ${data.updateCount} items updated`, 'polite');\n    }\n  }, [data?.hasUpdates, announce]);\n\n  return <div>{/* Component UI */}</div>;\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"related-guides",children:"Related Guides"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"WCAG AAA Compliance:"})," See ",(0,r.jsx)(n.code,{children:"Docs/design/ux-design/8-responsive-design-accessibility.md"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Design Tokens:"})," See ",(0,r.jsx)(n.code,{children:"Docs/design/DESIGN_TOKENS.md"})," for semantic color tokens"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Platform Presenters:"})," See ",(0,r.jsx)(n.code,{children:"Docs/design/PLATFORM_PRESENTER_GUIDE.md"})," for responsive design patterns"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},71184:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>a});var t=s(14041);const r={},o=t.createContext(r);function i(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);