"use strict";(globalThis.webpackChunk_nas_net_docs=globalThis.webpackChunk_nas_net_docs||[]).push([[38332],{46769:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"architecture-overview","title":"Architecture Overview","description":"This document describes the structural conventions, dependency rules, Platform Presenter pattern,","source":"@site/../../libs/features/docs/architecture-overview.md","sourceDirName":".","slug":"/architecture-overview","permalink":"/docs/features/architecture-overview","draft":false,"unlisted":false,"editUrl":"https://github.com/nasnet-community/nasnet-panel/tree/main/../../libs/features/docs/architecture-overview.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"API Client and GraphQL","permalink":"/docs/features/api-client-and-graphql"},"next":{"title":"Cross-Cutting Flows","permalink":"/docs/features/cross-cutting-flows"}}');var r=s(31085),i=s(71184);const l={},c="Architecture Overview",a={},o=[{value:"1. What Is a Feature Module?",id:"1-what-is-a-feature-module",level:2},{value:"The Dependency Direction",id:"the-dependency-direction",level:3},{value:"2. Standard Module Anatomy",id:"2-standard-module-anatomy",level:2},{value:"Real Directory Tree: firewall",id:"real-directory-tree-firewall",level:3},{value:"Real Directory Tree: services",id:"real-directory-tree-services",level:3},{value:"3. All 11 Feature Modules",id:"3-all-11-feature-modules",level:2},{value:"4. Public API Contract: The <code>src/index.ts</code> Barrel",id:"4-public-api-contract-the-srcindexts-barrel",level:2},{value:"What Belongs in <code>src/index.ts</code>",id:"what-belongs-in-srcindexts",level:3},{value:"Real Example: <code>libs/features/firewall/src/index.ts</code>",id:"real-example-libsfeaturesfirewallsrcindexts",level:3},{value:"Real Example: <code>libs/features/alerts/src/index.ts</code> (granular named exports)",id:"real-example-libsfeaturesalertssrcindexts-granular-named-exports",level:3},{value:"5. Platform Presenter Pattern",id:"5-platform-presenter-pattern",level:2},{value:"Real Example: <code>InterfaceList</code> (complete three-file implementation)",id:"real-example-interfacelist-complete-three-file-implementation",level:3},{value:"The Three Invariants",id:"the-three-invariants",level:3},{value:"6. Headless Hook Pattern",id:"6-headless-hook-pattern",level:2},{value:"7. XState Machines",id:"7-xstate-machines",level:2},{value:"Firewall Template Apply Machine",id:"firewall-template-apply-machine",level:3},{value:"Services Update Machine",id:"services-update-machine",level:3},{value:"Ping Machine",id:"ping-machine",level:3},{value:"8. Zod Schemas",id:"8-zod-schemas",level:2},{value:"9. Dependency Rules",id:"9-dependency-rules",level:2},{value:"Allowed Imports",id:"allowed-imports",level:3},{value:"Forbidden Imports",id:"forbidden-imports",level:3},{value:"10. Import Aliases",id:"10-import-aliases",level:2},{value:"11. Naming Conventions",id:"11-naming-conventions",level:2},{value:"Files",id:"files",level:3},{value:"Components and Hooks",id:"components-and-hooks",level:3},{value:"Props Interfaces",id:"props-interfaces",level:3},{value:"12. File and Folder Size Limits",id:"12-file-and-folder-size-limits",level:2},{value:"13. Storybook Integration",id:"13-storybook-integration",level:2},{value:"14. Cross-References",id:"14-cross-references",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"architecture-overview",children:"Architecture Overview"})}),"\n",(0,r.jsxs)(n.p,{children:["This document describes the structural conventions, dependency rules, Platform Presenter pattern,\nnaming conventions, and file organization that govern every module in ",(0,r.jsx)(n.code,{children:"libs/features/"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"1-what-is-a-feature-module",children:"1. What Is a Feature Module?"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"Feature Module"})," is Layer 3 in NasNetConnect's three-tier component architecture:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Layer 1: libs/ui/primitives    \u2014 Atomic building blocks (Button, Card, Input, Badge, Dialog\u2026)\nLayer 2: libs/ui/patterns      \u2014 Composite reusables (DataTable, ResourceCard, WizardStep\u2026)\nLayer 3: libs/features/*/      \u2014 Domain business logic (THIS LAYER)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Feature modules encode product behavior. They answer questions like:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"How do firewall rules get filtered and paginated?"}),"\n",(0,r.jsx)(n.li,{children:"What XState machine governs template application with rollback?"}),"\n",(0,r.jsx)(n.li,{children:"How does the alert notification form differ between mobile and desktop?"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Feature modules are ",(0,r.jsx)(n.strong,{children:"not reusable design components"}),". They are domain boundaries that happen to\nexport React components. A component inside ",(0,r.jsx)(n.code,{children:"libs/features/firewall/"})," knows about firewall rule\ntypes, chain names, GraphQL mutations, and Zod schemas. It composes Layer 2 patterns and Layer 1\nprimitives to render that knowledge."]}),"\n",(0,r.jsx)(n.h3,{id:"the-dependency-direction",children:"The Dependency Direction"}),"\n",(0,r.jsx)(n.mermaid,{value:'flowchart LR\n    connect["apps/connect"]\n    features["features/*"]\n    patterns["ui/patterns"]\n    primitives["ui/primitives"]\n    api["api-client/"]\n    core["core/"]\n    state["state/stores"]\n\n    connect --\x3e features\n    features --\x3e patterns\n    features --\x3e api\n    features --\x3e core\n    features --\x3e state\n    patterns --\x3e primitives'}),"\n",(0,r.jsx)(n.p,{children:"This is a strict one-way dependency. Features may never import from other features."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-standard-module-anatomy",children:"2. Standard Module Anatomy"}),"\n",(0,r.jsxs)(n.p,{children:["Every feature module follows the same directory layout. Optional directories are marked with\n",(0,r.jsx)(n.code,{children:"(optional)"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"libs/features/<name>/\n\u2514\u2500\u2500 src/\n    \u251c\u2500\u2500 index.ts              # Public API \u2014 only file consumers import from\n    \u251c\u2500\u2500 components/           # Domain components (Layer 3)\n    \u2502   \u251c\u2500\u2500 index.ts          # Barrel export for all components\n    \u2502   \u251c\u2500\u2500 MyComponent.tsx   # Headless wrapper with platform dispatch\n    \u2502   \u251c\u2500\u2500 MyComponentDesktop.tsx   # Desktop presenter\n    \u2502   \u251c\u2500\u2500 MyComponentMobile.tsx    # Mobile presenter\n    \u2502   \u2514\u2500\u2500 SubFeature/       # Subfolder when component has sub-parts (max 10 files/folder)\n    \u251c\u2500\u2500 pages/                # Full-page components (routed by apps/connect)\n    \u2502   \u2514\u2500\u2500 FeaturePage.tsx\n    \u251c\u2500\u2500 hooks/                # Feature-specific React hooks\n    \u2502   \u251c\u2500\u2500 index.ts\n    \u2502   \u2514\u2500\u2500 useFeatureData.ts\n    \u251c\u2500\u2500 schemas/              # Zod validation schemas and TypeScript types\n    \u2502   \u2514\u2500\u2500 feature.schema.ts\n    \u251c\u2500\u2500 machines/ (optional)  # XState machines for complex flows\n    \u2502   \u2514\u2500\u2500 feature.machine.ts\n    \u251c\u2500\u2500 services/ (optional)  # Non-React business logic, storage helpers\n    \u2502   \u2514\u2500\u2500 featureService.ts\n    \u251c\u2500\u2500 utils/ (optional)     # Pure utility functions\n    \u2502   \u2514\u2500\u2500 featureUtils.ts\n    \u251c\u2500\u2500 types/ (optional)     # Shared TypeScript interfaces for this domain\n    \u2502   \u2514\u2500\u2500 feature.types.ts\n    \u251c\u2500\u2500 graphql/ (optional)   # Inline GraphQL operation definitions\n    \u2502   \u2514\u2500\u2500 feature.graphql.ts\n    \u251c\u2500\u2500 i18n/ (optional)      # Message constants (no i18n framework, just typed strings)\n    \u2502   \u2514\u2500\u2500 messages.ts\n    \u251c\u2500\u2500 data/ (optional)      # Static option data (channel lists, country codes, etc.)\n    \u2502   \u2514\u2500\u2500 options.ts\n    \u2514\u2500\u2500 constants/ (optional) # Feature-specific constants\n        \u2514\u2500\u2500 registry.ts\n"})}),"\n",(0,r.jsx)(n.h3,{id:"real-directory-tree-firewall",children:"Real Directory Tree: firewall"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"libs/features/firewall/src/\n\u251c\u2500\u2500 index.ts\n\u251c\u2500\u2500 components/\n\u2502   \u251c\u2500\u2500 index.ts\n\u2502   \u251c\u2500\u2500 FilterRulesTable.tsx            # headless wrapper\n\u2502   \u251c\u2500\u2500 FilterRulesTableDesktop.tsx     # desktop presenter\n\u2502   \u251c\u2500\u2500 FilterRulesTableMobile.tsx      # mobile presenter\n\u2502   \u251c\u2500\u2500 MangleRulesTable.tsx\n\u2502   \u251c\u2500\u2500 MangleRulesTableDesktop.tsx\n\u2502   \u251c\u2500\u2500 MangleRulesTableMobile.tsx\n\u2502   \u251c\u2500\u2500 RawRulesTable.tsx\n\u2502   \u251c\u2500\u2500 RawRulesTableDesktop.tsx\n\u2502   \u251c\u2500\u2500 RawRulesTableMobile.tsx\n\u2502   \u251c\u2500\u2500 NATRulesTable.tsx\n\u2502   \u251c\u2500\u2500 NATRulesTableMobile.tsx\n\u2502   \u251c\u2500\u2500 PortKnockSequenceManager.tsx\n\u2502   \u251c\u2500\u2500 PortKnockSequenceManagerDesktop.tsx\n\u2502   \u251c\u2500\u2500 PortKnockSequenceManagerMobile.tsx\n\u2502   \u251c\u2500\u2500 ServicePortsTable.tsx\n\u2502   \u251c\u2500\u2500 ServicePortsTableDesktop.tsx\n\u2502   \u251c\u2500\u2500 ServicePortsTableMobile.tsx\n\u2502   \u251c\u2500\u2500 FirewallStatusHero.tsx\n\u2502   \u251c\u2500\u2500 FirewallQuickStats.tsx\n\u2502   \u251c\u2500\u2500 ChainSummaryCards.tsx\n\u2502   \u251c\u2500\u2500 TrafficFlowDiagram.tsx\n\u2502   \u251c\u2500\u2500 RecentFirewallActivity.tsx\n\u2502   \u251c\u2500\u2500 FirewallDetailTabs.tsx\n\u2502   \u251c\u2500\u2500 ConnectionsPage.tsx\n\u2502   \u251c\u2500\u2500 PortForwardWizardDialog.tsx\n\u2502   \u251c\u2500\u2500 MasqueradeQuickDialog.tsx\n\u2502   \u251c\u2500\u2500 PortKnockingPage.tsx\n\u2502   \u251c\u2500\u2500 PortKnockLogViewer.tsx\n\u2502   \u251c\u2500\u2500 AddressListEntryForm.tsx\n\u2502   \u251c\u2500\u2500 AddressListImportDialog.tsx\n\u2502   \u251c\u2500\u2500 AddressListExportDialog.tsx\n\u2502   \u251c\u2500\u2500 IPAddressDisplay.tsx\n\u2502   \u251c\u2500\u2500 AddToAddressListContextMenu.tsx\n\u2502   \u251c\u2500\u2500 RuleSearchFilters.tsx\n\u2502   \u251c\u2500\u2500 ReadOnlyNotice.tsx\n\u2502   \u251c\u2500\u2500 ServicesStatus.tsx\n\u2502   \u251c\u2500\u2500 RoutingTable.tsx\n\u2502   \u251c\u2500\u2500 SaveTemplateDialog.tsx\n\u2502   \u251c\u2500\u2500 ImportTemplateDialog.tsx\n\u2502   \u251c\u2500\u2500 TemplateApplyFlow.tsx\n\u2502   \u2514\u2500\u2500 UndoFloatingButton.tsx\n\u251c\u2500\u2500 pages/\n\u2502   \u251c\u2500\u2500 AddressListView.tsx\n\u2502   \u251c\u2500\u2500 FirewallLogsPage.tsx\n\u2502   \u251c\u2500\u2500 ManglePage.tsx\n\u2502   \u251c\u2500\u2500 NATRulesPage.tsx\n\u2502   \u251c\u2500\u2500 RateLimitingPage.tsx\n\u2502   \u251c\u2500\u2500 RawPage.tsx\n\u2502   \u251c\u2500\u2500 ServicePortsPage.tsx\n\u2502   \u2514\u2500\u2500 TemplatesPage.tsx\n\u251c\u2500\u2500 hooks/\n\u2502   \u251c\u2500\u2500 index.ts\n\u2502   \u251c\u2500\u2500 useChainSummary.ts\n\u2502   \u251c\u2500\u2500 useRuleFilters.ts\n\u2502   \u251c\u2500\u2500 useCounterSettingsStore.ts\n\u2502   \u251c\u2500\u2500 useCustomServices.ts\n\u2502   \u251c\u2500\u2500 useCustomTemplates.ts\n\u2502   \u2514\u2500\u2500 use-rule-navigation.ts\n\u251c\u2500\u2500 schemas/\n\u2502   \u2514\u2500\u2500 templateSchemas.ts\n\u251c\u2500\u2500 machines/\n\u2502   \u2514\u2500\u2500 template-apply.machine.ts\n\u2514\u2500\u2500 services/\n    \u251c\u2500\u2500 index.ts\n    \u251c\u2500\u2500 counterHistoryStorage.ts\n    \u2514\u2500\u2500 rate-limit-alert.stub.ts\n"})}),"\n",(0,r.jsx)(n.h3,{id:"real-directory-tree-services",children:"Real Directory Tree: services"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"libs/features/services/src/\n\u251c\u2500\u2500 index.ts\n\u251c\u2500\u2500 components/\n\u2502   \u251c\u2500\u2500 InstallDialog.tsx\n\u2502   \u251c\u2500\u2500 GatewayStatusCard.tsx\n\u2502   \u251c\u2500\u2500 GatewayStatusCardDesktop.tsx\n\u2502   \u251c\u2500\u2500 GatewayStatusCardMobile.tsx\n\u2502   \u251c\u2500\u2500 PortRegistryView.tsx\n\u2502   \u251c\u2500\u2500 PortRegistryViewDesktop.tsx\n\u2502   \u251c\u2500\u2500 PortRegistryViewMobile.tsx\n\u2502   \u251c\u2500\u2500 VLANPoolConfig.tsx\n\u2502   \u251c\u2500\u2500 StopDependentsDialog.tsx\n\u2502   \u251c\u2500\u2500 UpdateAllPanel.tsx\n\u2502   \u251c\u2500\u2500 ChangelogModal.tsx\n\u2502   \u251c\u2500\u2500 ResourceLimitsForm.tsx\n\u2502   \u251c\u2500\u2500 ServiceAlertsTab.tsx\n\u2502   \u251c\u2500\u2500 ServiceAlertsTabDesktop.tsx\n\u2502   \u251c\u2500\u2500 ServiceAlertsTabMobile.tsx\n\u2502   \u251c\u2500\u2500 ServiceConfigForm/\n\u2502   \u2502   \u251c\u2500\u2500 ServiceConfigForm.tsx\n\u2502   \u2502   \u251c\u2500\u2500 ServiceConfigFormDesktop.tsx\n\u2502   \u2502   \u251c\u2500\u2500 ServiceConfigFormMobile.tsx\n\u2502   \u2502   \u251c\u2500\u2500 DynamicField.tsx\n\u2502   \u2502   \u2514\u2500\u2500 fields/\n\u2502   \u2502       \u251c\u2500\u2500 TextField.tsx\n\u2502   \u2502       \u251c\u2500\u2500 TextArea.tsx\n\u2502   \u2502       \u251c\u2500\u2500 NumberField.tsx\n\u2502   \u2502       \u251c\u2500\u2500 PasswordField.tsx\n\u2502   \u2502       \u251c\u2500\u2500 Select.tsx\n\u2502   \u2502       \u251c\u2500\u2500 MultiSelect.tsx\n\u2502   \u2502       \u2514\u2500\u2500 ArrayField.tsx\n\u2502   \u251c\u2500\u2500 ServiceLogViewer/\n\u2502   \u2502   \u251c\u2500\u2500 ServiceLogViewer.tsx\n\u2502   \u2502   \u251c\u2500\u2500 ServiceLogViewerDesktop.tsx\n\u2502   \u2502   \u2514\u2500\u2500 ServiceLogViewerMobile.tsx\n\u2502   \u251c\u2500\u2500 DiagnosticsPanel/\n\u2502   \u2502   \u251c\u2500\u2500 DiagnosticsPanel.tsx\n\u2502   \u2502   \u251c\u2500\u2500 DiagnosticsPanelDesktop.tsx\n\u2502   \u2502   \u2514\u2500\u2500 DiagnosticsPanelMobile.tsx\n\u2502   \u251c\u2500\u2500 service-traffic/\n\u2502   \u2502   \u251c\u2500\u2500 ServiceTrafficPanel.tsx\n\u2502   \u2502   \u251c\u2500\u2500 ServiceTrafficPanelDesktop.tsx\n\u2502   \u2502   \u251c\u2500\u2500 ServiceTrafficPanelMobile.tsx\n\u2502   \u2502   \u2514\u2500\u2500 QuotaSettingsForm.tsx\n\u2502   \u251c\u2500\u2500 storage/\n\u2502   \u2502   \u251c\u2500\u2500 StorageSettings.tsx\n\u2502   \u2502   \u251c\u2500\u2500 StorageSettingsDesktop.tsx\n\u2502   \u2502   \u251c\u2500\u2500 StorageSettingsMobile.tsx\n\u2502   \u2502   \u251c\u2500\u2500 StorageUsageBar.tsx\n\u2502   \u2502   \u2514\u2500\u2500 StorageDisconnectBanner.tsx\n\u2502   \u2514\u2500\u2500 templates/\n\u2502       \u251c\u2500\u2500 TemplatesBrowser.tsx\n\u2502       \u251c\u2500\u2500 TemplatesBrowserDesktop.tsx\n\u2502       \u251c\u2500\u2500 TemplatesBrowserMobile.tsx\n\u2502       \u251c\u2500\u2500 TemplateFilters.tsx\n\u2502       \u251c\u2500\u2500 TemplateInstallWizard.tsx\n\u2502       \u251c\u2500\u2500 TemplateInstallWizardDesktop.tsx\n\u2502       \u251c\u2500\u2500 TemplateInstallWizardMobile.tsx\n\u2502       \u2514\u2500\u2500 wizard-steps/\n\u2502           \u251c\u2500\u2500 VariablesStep.tsx\n\u2502           \u251c\u2500\u2500 ReviewStep.tsx\n\u2502           \u251c\u2500\u2500 InstallingStep.tsx\n\u2502           \u2514\u2500\u2500 RoutingStep.tsx\n\u251c\u2500\u2500 pages/\n\u2502   \u251c\u2500\u2500 ServicesPage.tsx\n\u2502   \u251c\u2500\u2500 ServiceDetailPage.tsx\n\u2502   \u251c\u2500\u2500 VLANSettingsPage.tsx\n\u2502   \u2514\u2500\u2500 DeviceRoutingPage.tsx\n\u251c\u2500\u2500 hooks/\n\u2502   \u251c\u2500\u2500 useServiceConfigForm.ts\n\u2502   \u251c\u2500\u2500 useServiceAlertsTab.ts\n\u2502   \u2514\u2500\u2500 useServiceAlertToasts.ts\n\u251c\u2500\u2500 machines/\n\u2502   \u2514\u2500\u2500 update-machine.ts\n\u251c\u2500\u2500 schemas/\n\u2502   \u2514\u2500\u2500 (service config schemas)\n\u2514\u2500\u2500 utils/\n    \u2514\u2500\u2500 (dynamic schema builders)\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-all-11-feature-modules",children:"3. All 11 Feature Modules"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Module"}),(0,r.jsx)(n.th,{children:"Import Alias"}),(0,r.jsx)(n.th,{children:"Key Exports"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"alerts"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/alerts"})}),(0,r.jsxs)(n.td,{children:["Alert rules CRUD hooks, notification channel forms (email, webhook, ntfy), quiet hours, template browser, ",(0,r.jsx)(n.code,{children:"NotificationSettingsPage"}),", Zod schemas"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"configuration-import"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/configuration-import"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"ConfigurationImportWizard"}),", ",(0,r.jsx)(n.code,{children:"useConfigurationCheck"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"dashboard"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/dashboard"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"DashboardPage"}),", ",(0,r.jsx)(n.code,{children:"ResourceGauges"}),", ",(0,r.jsx)(n.code,{children:"BandwidthChart"}),", ",(0,r.jsx)(n.code,{children:"RecentLogs"}),", ",(0,r.jsx)(n.code,{children:"InterfaceGrid"}),", ",(0,r.jsx)(n.code,{children:"RouterHealthSummaryCard"}),", ",(0,r.jsx)(n.code,{children:"ConnectedDevices"}),", ",(0,r.jsx)(n.code,{children:"LogViewer"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"diagnostics"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/diagnostics"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"PingTool"}),", ",(0,r.jsx)(n.code,{children:"TracerouteTool"}),", ",(0,r.jsx)(n.code,{children:"DnsLookupTool"}),", ",(0,r.jsx)(n.code,{children:"TroubleshootWizard"}),", ",(0,r.jsx)(n.code,{children:"DeviceScanTool"}),", XState ping machine, ISP detection utils"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"firewall"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/firewall"})}),(0,r.jsx)(n.td,{children:"Filter/NAT/mangle/raw/rate-limit rule tables, address lists, port knocking, service ports, template apply machine with undo, firewall logs and pages"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"logs"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/logs"})}),(0,r.jsx)(n.td,{children:"Log action menu, log bookmarks, log correlation, log settings/alert dialogs, cache utilities"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"network"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/network"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"InterfaceList"}),", ",(0,r.jsx)(n.code,{children:"InterfaceDetail"}),", bridges, IP addresses, static routes, DHCP lease management, VLANs, DNS configuration, WAN management, interface statistics"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"router-discovery"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/router-discovery"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"NetworkScanner"}),", ",(0,r.jsx)(n.code,{children:"ManualRouterEntry"}),", ",(0,r.jsx)(n.code,{children:"CredentialDialog"}),", ",(0,r.jsx)(n.code,{children:"RouterCard"}),", ",(0,r.jsx)(n.code,{children:"RouterList"}),", scan service, credential service"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"services"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/services"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"ServicesPage"}),", ",(0,r.jsx)(n.code,{children:"ServiceDetailPage"}),", ",(0,r.jsx)(n.code,{children:"ServiceConfigForm"}),", ",(0,r.jsx)(n.code,{children:"ServiceTrafficPanel"}),", ",(0,r.jsx)(n.code,{children:"TemplatesBrowser"}),", ",(0,r.jsx)(n.code,{children:"TemplateInstallWizard"}),", ",(0,r.jsx)(n.code,{children:"ServiceLogViewer"}),", ",(0,r.jsx)(n.code,{children:"DiagnosticsPanel"}),", storage sub-module, update machine"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"wireless"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/wireless"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"WirelessInterfaceCard"}),", ",(0,r.jsx)(n.code,{children:"WirelessInterfaceList"}),", ",(0,r.jsx)(n.code,{children:"WirelessInterfaceDetail"}),", ",(0,r.jsx)(n.code,{children:"WirelessSettingsForm"}),", ",(0,r.jsx)(n.code,{children:"WirelessSettingsModal"}),", channel/security option data, validation schemas"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"network"})," (sub-modules)"]}),(0,r.jsx)(n.td,{children:"\u2014"}),(0,r.jsxs)(n.td,{children:["The ",(0,r.jsx)(n.code,{children:"network"})," module is further organized into: ",(0,r.jsx)(n.code,{children:"bridges"}),", ",(0,r.jsx)(n.code,{children:"dhcp"}),", ",(0,r.jsx)(n.code,{children:"dns"}),", ",(0,r.jsx)(n.code,{children:"vlans"}),", ",(0,r.jsx)(n.code,{children:"wan"}),", ",(0,r.jsx)(n.code,{children:"interface-stats"}),", ",(0,r.jsx)(n.code,{children:"components/interface-list"}),", ",(0,r.jsx)(n.code,{children:"components/interface-detail"}),", ",(0,r.jsx)(n.code,{children:"components/interface-edit"}),", ",(0,r.jsx)(n.code,{children:"components/routes"}),", ",(0,r.jsx)(n.code,{children:"components/ip-address"}),", ",(0,r.jsx)(n.code,{children:"components/DnsBenchmark"}),", ",(0,r.jsx)(n.code,{children:"components/DnsCachePanel"})]})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"4-public-api-contract-the-srcindexts-barrel",children:["4. Public API Contract: The ",(0,r.jsx)(n.code,{children:"src/index.ts"})," Barrel"]}),"\n",(0,r.jsxs)(n.p,{children:["Each module exposes exactly one public surface: ",(0,r.jsx)(n.code,{children:"src/index.ts"}),". Consumers must never import from\ninternal paths."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Correct\nimport { FilterRulesTable, useRuleFilters } from '@nasnet/features/firewall';\n\n// Wrong \u2014 never import from internal paths\nimport { FilterRulesTable } from '@nasnet/features/firewall/src/components/FilterRulesTable';\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"what-belongs-in-srcindexts",children:["What Belongs in ",(0,r.jsx)(n.code,{children:"src/index.ts"})]}),"\n",(0,r.jsx)(n.p,{children:"The barrel exports everything consumers legitimately need:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Components"})," \u2014 headless wrappers and any presenter components that callers configure explicitly"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Pages"})," \u2014 top-level page components routed by ",(0,r.jsx)(n.code,{children:"apps/connect"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Hooks"})," \u2014 headless hooks that callers may use standalone (e.g., ",(0,r.jsx)(n.code,{children:"useRuleFilters"})," for embedding\nfilter logic)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Schemas"})," \u2014 Zod schemas and their inferred TypeScript types (for form validation in consumer\npages)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Machines"})," \u2014 XState machine factories (when callers need to compose machines)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Types"})," \u2014 domain TypeScript interfaces needed by consumers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Constants and utilities"})," \u2014 when callers need them for display logic"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["What does NOT belong in ",(0,r.jsx)(n.code,{children:"src/index.ts"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Internal sub-components that are only composed inside this module"}),"\n",(0,r.jsx)(n.li,{children:"Implementation details of machines or services"}),"\n",(0,r.jsxs)(n.li,{children:["Test utilities (these go in ",(0,r.jsx)(n.code,{children:"src/__test-utils__/"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"real-example-libsfeaturesfirewallsrcindexts",children:["Real Example: ",(0,r.jsx)(n.code,{children:"libs/features/firewall/src/index.ts"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"/**\n * @nasnet/features/firewall\n * Firewall viewing feature library\n * Epic 0.6: Firewall & Routing Viewer\n */\n\n// Components\nexport * from './components';\n\n// Pages\nexport * from './pages';\n\n// Hooks\nexport * from './hooks';\n\n// Services\nexport * from './services';\n\n// Schemas\nexport * from './schemas/templateSchemas';\n\n// Machines\nexport * from './machines/template-apply.machine';\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"real-example-libsfeaturesalertssrcindexts-granular-named-exports",children:["Real Example: ",(0,r.jsx)(n.code,{children:"libs/features/alerts/src/index.ts"})," (granular named exports)"]}),"\n",(0,r.jsx)(n.p,{children:"Some modules prefer granular named exports instead of re-exporting barrel files. This improves\ntree-shaking and makes the public API explicit:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Hooks \u2014 named individually so callers know exactly what's available\nexport {\n  useAlertRules,\n  useAlertRule,\n  useCreateAlertRule,\n  useUpdateAlertRule,\n  useDeleteAlertRule,\n} from './hooks/useAlertRules';\nexport { useAlerts, useAcknowledgeAlert, useUnacknowledgedAlertCount } from './hooks/useAlerts';\nexport {\n  useAlertRuleTemplates,\n  useApplyAlertRuleTemplate,\n  useSaveCustomAlertRuleTemplate,\n} from './hooks/useAlertRuleTemplates';\n\n// Components \u2014 including platform-specific presenters that callers may use directly\nexport { AlertRuleForm } from './components/AlertRuleForm';\nexport { AlertBadge } from './components/AlertBadge';\nexport { EmailChannelFormDesktop } from './components/EmailChannelFormDesktop';\nexport { EmailChannelFormMobile } from './components/EmailChannelFormMobile';\n\n// Pages\nexport { NotificationSettingsPage } from './pages/NotificationSettingsPage';\n\n// Schemas + types together\nexport {\n  alertRuleFormSchema,\n  defaultAlertRule,\n  SEVERITY_CONFIG,\n} from './schemas/alert-rule.schema';\nexport type { AlertRuleFormData, QuietHoursConfigData } from './schemas/alert-rule.schema';\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-platform-presenter-pattern",children:"5. Platform Presenter Pattern"}),"\n",(0,r.jsx)(n.p,{children:"NasNetConnect runs on three device classes with fundamentally different interaction models:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Platform"}),(0,r.jsx)(n.th,{children:"Breakpoint"}),(0,r.jsx)(n.th,{children:"Paradigm"}),(0,r.jsx)(n.th,{children:"Key Differences"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Mobile"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<640px"})}),(0,r.jsx)(n.td,{children:"Touch-first, consumer-grade simplicity"}),(0,r.jsx)(n.td,{children:"Card lists, bottom action bars, 44px touch targets, no dense tables"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Tablet"}),(0,r.jsx)(n.td,{children:"640-1024px"}),(0,r.jsx)(n.td,{children:"Hybrid"}),(0,r.jsx)(n.td,{children:"Collapsible panels, medium density"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Desktop"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:">1024px"})}),(0,r.jsx)(n.td,{children:"Keyboard-first, power-user density"}),(0,r.jsx)(n.td,{children:"Dense data tables, multi-column layouts, hover actions"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"The pattern solves this with three collaborating files per component:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Headless wrapper"})," \u2014 owns all logic, delegates rendering to a platform presenter"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Desktop presenter"})," \u2014 dense table/form layout for large screens"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mobile presenter"})," \u2014 card/list layout for small touch screens"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"real-example-interfacelist-complete-three-file-implementation",children:["Real Example: ",(0,r.jsx)(n.code,{children:"InterfaceList"})," (complete three-file implementation)"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"InterfaceList.tsx"})," \u2014 headless wrapper"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useState, useMemo, useCallback } from 'react';\nimport { usePlatform } from '@nasnet/ui/layouts';\nimport { useInterfaceList } from '@nasnet/api-client/queries';\nimport type { InterfaceType, InterfaceStatus } from '@nasnet/api-client/generated';\nimport { InterfaceListDesktop } from './InterfaceListDesktop';\nimport { InterfaceListMobile } from './InterfaceListMobile';\nimport { InterfaceDetail } from '../interface-detail';\n\nexport interface InterfaceFilters {\n  type: InterfaceType | null;\n  status: InterfaceStatus | null;\n  search: string;\n}\n\nexport function InterfaceList({ routerId, className }: InterfaceListProps) {\n  const platform = usePlatform();\n\n  // All business logic lives here \u2014 shared by both presenters\n  const { interfaces, loading, error, refetch } = useInterfaceList(routerId);\n  const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set());\n  const [filters, setFilters] = useState<InterfaceFilters>({\n    type: null,\n    status: null,\n    search: '',\n  });\n  const [selectedInterfaceId, setSelectedInterfaceId] = useState<string | null>(null);\n\n  const filteredInterfaces = useMemo(() => {\n    return interfaces\n      .filter((iface: any) => !filters.type || iface.type === filters.type)\n      .filter((iface: any) => !filters.status || iface.status === filters.status)\n      .filter(\n        (iface: any) =>\n          !filters.search || iface.name.toLowerCase().includes(filters.search.toLowerCase())\n      );\n  }, [interfaces, filters]);\n\n  const handleSelectChange = useCallback((ids: Set<string>) => setSelectedIds(ids), []);\n  const handleFilterChange = useCallback(\n    (newFilters: InterfaceFilters) => setFilters(newFilters),\n    []\n  );\n  const handleOpenDetail = useCallback((id: string | null) => setSelectedInterfaceId(id), []);\n\n  // sharedProps contains everything both presenters need \u2014 no logic duplication\n  const sharedProps = {\n    interfaces: filteredInterfaces,\n    allInterfaces: interfaces,\n    loading,\n    error,\n    selectedIds,\n    onSelect: handleSelectChange,\n    filters,\n    onFilterChange: handleFilterChange,\n    onRefresh: refetch,\n    routerId,\n    onOpenDetail: handleOpenDetail,\n    className,\n  };\n\n  return (\n    <div className=\"category-networking\">\n      {platform === 'mobile' ?\n        <InterfaceListMobile {...sharedProps} />\n      : <InterfaceListDesktop {...sharedProps} />}\n      <InterfaceDetail\n        routerId={routerId}\n        interfaceId={selectedInterfaceId}\n        open={selectedInterfaceId !== null}\n        onClose={() => handleOpenDetail(null)}\n      />\n    </div>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"InterfaceListDesktop.tsx"})," \u2014 data table for power users"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { memo } from 'react';\nimport { DataTable } from '@nasnet/ui/patterns';\nimport { Badge, Button } from '@nasnet/ui/primitives';\nimport { InterfaceListFilters } from './InterfaceListFilters';\nimport { BatchActionsToolbar } from './BatchActionsToolbar';\n\nexport const InterfaceListDesktop = memo(function InterfaceListDesktop({\n  interfaces,\n  allInterfaces,\n  loading,\n  error,\n  selectedIds,\n  onSelect,\n  filters,\n  onFilterChange,\n  onRefresh,\n  routerId,\n  onOpenDetail,\n}: InterfaceListDesktopProps) {\n  const selectedInterfaces = allInterfaces.filter((iface) => selectedIds.has(iface.id));\n\n  const columns = [\n    {\n      key: 'name',\n      header: 'Name',\n      cell: (row: any) => (\n        <span className=\"category-networking font-mono font-medium\">{row.name}</span>\n      ),\n    },\n    {\n      key: 'type',\n      header: 'Type',\n      cell: (row: any) => <Badge variant=\"outline\">{row.type}</Badge>,\n    },\n    {\n      key: 'status',\n      header: 'Status',\n      cell: (row: any) => {\n        const variant =\n          row.status === 'UP' ? 'success'\n          : row.status === 'DOWN' ? 'error'\n          : 'secondary';\n        return <Badge variant={variant}>{row.status}</Badge>;\n      },\n    },\n    // \u2026 ip, mtu, comment columns\n  ];\n\n  return (\n    <div className=\"space-y-component-md category-networking\">\n      <div className=\"flex items-center justify-between\">\n        <InterfaceListFilters\n          filters={filters}\n          onChange={onFilterChange}\n        />\n        {selectedIds.size > 0 && (\n          <BatchActionsToolbar\n            routerId={routerId}\n            selectedIds={selectedIds}\n            selectedInterfaces={selectedInterfaces}\n            onClearSelection={() => onSelect(new Set())}\n          />\n        )}\n      </div>\n      <DataTable\n        columns={columns}\n        data={interfaces}\n        isLoading={loading}\n        onRowClick={(row: any) => onOpenDetail(row.id)}\n        emptyMessage=\"No interfaces found\"\n      />\n    </div>\n  );\n});\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"InterfaceListMobile.tsx"})," \u2014 touch-optimized card list"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'import { memo } from \'react\';\nimport { Button, Badge, Card, CardHeader, CardTitle, CardContent, Checkbox } from \'@nasnet/ui/primitives\';\n\nexport const InterfaceListMobile = memo(function InterfaceListMobile({\n  interfaces, allInterfaces, loading, error, selectedIds, onSelect,\n  filters, onFilterChange, onRefresh, routerId, onOpenDetail,\n}: InterfaceListMobileProps) {\n  const toggleSelection = (interfaceId: string) => {\n    const newSelection = new Set(selectedIds);\n    newSelection.has(interfaceId) ? newSelection.delete(interfaceId) : newSelection.add(interfaceId);\n    onSelect(newSelection);\n  };\n\n  return (\n    <div className="space-y-component-md p-component-md category-networking">\n      <InterfaceListFilters filters={filters} onChange={onFilterChange} />\n\n      <div className="space-y-component-sm">\n        {interfaces.map((iface) => (\n          <Card\n            key={iface.id}\n            className={`cursor-pointer ${selectedIds.has(iface.id) ? \'border-primary bg-primary/5\' : \'\'}`}\n            onClick={() => onOpenDetail(iface.id)}\n            role="button"\n            tabIndex={0}\n            aria-label={`View details for ${iface.name} interface`}\n          >\n            <CardHeader className="flex-row items-start justify-between space-y-0 pb-2">\n              <div className="flex items-start gap-3 flex-1">\n                <Checkbox\n                  checked={selectedIds.has(iface.id)}\n                  onCheckedChange={() => toggleSelection(iface.id)}\n                  onClick={(e) => e.stopPropagation()}\n                  aria-label={`Select ${iface.name}`}\n                />\n                <div className="flex-1 min-w-0">\n                  <CardTitle className="text-base font-mono">{iface.name}</CardTitle>\n                  {/* status badge, type badge */}\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent className="space-y-component-sm text-sm">\n              {/* ip, mtu, comment rows */}\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {/* Bottom action bar \u2014 fixed above the bottom navigation */}\n      {selectedIds.size > 0 && (\n        <div className="fixed bottom-4 left-4 right-4 z-10">\n          <Card className="shadow-lg">\n            <CardContent className="p-component-md">\n              <BatchActionsToolbar \u2026 />\n            </CardContent>\n          </Card>\n        </div>\n      )}\n    </div>\n  );\n});\n'})}),"\n",(0,r.jsx)(n.h3,{id:"the-three-invariants",children:"The Three Invariants"}),"\n",(0,r.jsx)(n.p,{children:"Every Platform Presenter implementation must satisfy:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"All logic in the headless wrapper."})," Presenters receive only data and callbacks via\n",(0,r.jsx)(n.code,{children:"sharedProps"}),". No ",(0,r.jsx)(n.code,{children:"useQuery"}),", ",(0,r.jsx)(n.code,{children:"useState"})," for business data, or ",(0,r.jsx)(n.code,{children:"useMemo"})," for computed values\nbelongs in a presenter."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Mobile uses 44px touch targets."})," Buttons, checkboxes, and interactive cards must have\n",(0,r.jsx)(n.code,{children:"min-h-[44px]"})," (or equivalent padding) in Mobile presenters."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsxs)(n.strong,{children:["Desktop uses Layer 2 ",(0,r.jsx)(n.code,{children:"DataTable"}),"."]})," Where mobile shows cards, desktop shows ",(0,r.jsx)(n.code,{children:"<DataTable>"})," from\n",(0,r.jsx)(n.code,{children:"@nasnet/ui/patterns"}),". This contrast is intentional and required."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-headless-hook-pattern",children:"6. Headless Hook Pattern"}),"\n",(0,r.jsxs)(n.p,{children:["Some components are large enough that the headless logic is extracted into a dedicated hook rather\nthan living inside the wrapper component. The ",(0,r.jsx)(n.code,{children:"useTemplateBrowser"})," in the alerts module is an\nexample:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Hook: owns all filtering, sorting, selection state\nexport function useTemplateBrowser(options: UseTemplateBrowserOptions): UseTemplateBrowserReturn {\n  const { templates, loading } = useAlertRuleTemplates();\n  const [filters, setFilters] = useState<TemplateFilter>({ category: null, search: '' });\n  const [sort, setSort] = useState<TemplateSort>({ field: 'name', direction: 'asc' });\n  const [selection, setSelection] = useState<TemplateSelection>(null);\n\n  const filteredTemplates = useMemo(() => applyFilters(templates, filters), [templates, filters]);\n  const sortedTemplates = useMemo(() => applySort(filteredTemplates, sort), [filteredTemplates, sort]);\n\n  return { templates: sortedTemplates, loading, filters, sort, selection, setFilters, setSort, setSelection };\n}\n\n// Wrapper: dispatches to platform\nexport function AlertTemplateBrowserNew(props: AlertTemplateBrowserNewProps) {\n  const platform = usePlatform();\n  const hookReturn = useTemplateBrowser(props);\n\n  return platform === 'mobile'\n    ? <AlertTemplateBrowserMobile {...hookReturn} />\n    : <AlertTemplateBrowserDesktop {...hookReturn} />;\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"This pattern is preferred when the hook needs to be tested independently or when multiple components\nshare the same logic slice."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"7-xstate-machines",children:"7. XState Machines"}),"\n",(0,r.jsxs)(n.p,{children:["Feature modules that implement multi-step workflows with rollback use XState v5 machines. These live\nin ",(0,r.jsx)(n.code,{children:"src/machines/"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"firewall-template-apply-machine",children:"Firewall Template Apply Machine"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"template-apply.machine.ts"})," in ",(0,r.jsx)(n.code,{children:"libs/features/firewall/"})," implements the Safety Pipeline pattern:"]}),"\n",(0,r.jsx)(n.mermaid,{value:'flowchart TD\n    idle["idle"]\n    configuring["configuring"]\n    previewing["previewing"]\n    reviewing["reviewing"]\n    confirming["confirming"]\n    applying["applying"]\n    success["success"]\n    rollingBack["rollingBack"]\n    rolledBack["rolledBack"]\n\n    idle --\x3e configuring\n    configuring --\x3e previewing\n    previewing --\x3e reviewing\n    reviewing --\x3e confirming\n    confirming --\x3e applying\n    applying --\x3e success\n    applying --\x3e rollingBack\n    rollingBack --\x3e rolledBack'}),"\n",(0,r.jsxs)(n.p,{children:["Any state transition that contacts the router goes through a ",(0,r.jsx)(n.code,{children:"fromPromise"})," actor. The machine is\ninvoked in ",(0,r.jsx)(n.code,{children:"TemplateApplyFlow.tsx"})," via ",(0,r.jsx)(n.code,{children:"createActor(machine).start()"})," and sends events like\n",(0,r.jsx)(n.code,{children:"SELECT_TEMPLATE"}),", ",(0,r.jsx)(n.code,{children:"CONFIRM_APPLY"}),", ",(0,r.jsx)(n.code,{children:"UNDO"}),". The 10-second undo window is modeled as a delayed\ntransition in the ",(0,r.jsx)(n.code,{children:"success"})," state."]}),"\n",(0,r.jsx)(n.h3,{id:"services-update-machine",children:"Services Update Machine"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"libs/features/services/src/machines/update-machine.ts"})," governs the service update lifecycle (check\n\u2192 download \u2192 verify \u2192 install \u2192 restart)."]}),"\n",(0,r.jsx)(n.h3,{id:"ping-machine",children:"Ping Machine"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"libs/features/diagnostics/src/machines/ping-machine.ts"})," governs the ping tool: idle \u2192 running\n(periodic) \u2192 stopped, with abort and error handling."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"8-zod-schemas",children:"8. Zod Schemas"}),"\n",(0,r.jsxs)(n.p,{children:["All form data in feature modules is validated with Zod. Schemas live in ",(0,r.jsx)(n.code,{children:"src/schemas/"})," and are\nexported from ",(0,r.jsx)(n.code,{children:"src/index.ts"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// libs/features/alerts/src/schemas/alert-rule.schema.ts\nexport const alertRuleFormSchema = z.object({\n  name: z.string().min(1, 'Name is required').max(100),\n  condition: alertConditionSchema,\n  throttle: throttleConfigSchema,\n  quietHours: quietHoursConfigSchema.optional(),\n  channels: z.array(z.string()).min(1, 'At least one channel required'),\n});\n\nexport type AlertRuleFormData = z.infer<typeof alertRuleFormSchema>;\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Forms bind schemas via ",(0,r.jsx)(n.code,{children:"zodResolver"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const form = useForm<AlertRuleFormData>({\n  resolver: zodResolver(alertRuleFormSchema),\n  defaultValues: defaultAlertRule,\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"9-dependency-rules",children:"9. Dependency Rules"}),"\n",(0,r.jsx)(n.h3,{id:"allowed-imports",children:"Allowed Imports"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// From @nasnet/ui/primitives \u2014 atomic components\nimport { Button, Badge, Card, Input, Dialog } from '@nasnet/ui/primitives';\n\n// From @nasnet/ui/patterns \u2014 composite patterns\nimport { DataTable, ResourceCard, WizardStep } from '@nasnet/ui/patterns';\n\n// From @nasnet/ui/layouts \u2014 usePlatform and layout shells\nimport { usePlatform } from '@nasnet/ui/layouts';\n\n// From @nasnet/ui/utils \u2014 cn() and other utilities\nimport { cn } from '@nasnet/ui/utils';\n\n// From @nasnet/api-client/queries \u2014 Apollo hooks per domain\nimport { useInterfaceList, useFirewallRules } from '@nasnet/api-client/queries';\n\n// From @nasnet/api-client/generated \u2014 generated types\nimport type { InterfaceType, FirewallRule } from '@nasnet/api-client/generated';\n\n// From @nasnet/core/types \u2014 shared TypeScript interfaces\nimport type { LogEntry } from '@nasnet/core/types';\n\n// From @nasnet/core/utils \u2014 pure utility functions\nimport { formatBytes } from '@nasnet/core/utils';\n\n// From @nasnet/state/stores \u2014 Zustand stores\nimport { useThemeStore } from '@nasnet/state/stores';\n"})}),"\n",(0,r.jsx)(n.h3,{id:"forbidden-imports",children:"Forbidden Imports"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Never import from another feature module\nimport { AlertBadge } from '@nasnet/features/alerts'; // in libs/features/firewall/ \u2014 FORBIDDEN\n\n// Never import from internal paths of another module\nimport { useAlertRules } from '../../alerts/src/hooks/useAlertRules'; // FORBIDDEN\n\n// Never import from apps/\nimport { RouterPanel } from '../../../apps/connect/src/routes/router-panel/RouterPanel'; // FORBIDDEN\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"10-import-aliases",children:"10. Import Aliases"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.code,{children:"apps/connect/vite.config.ts"})," and ",(0,r.jsx)(n.code,{children:"tsconfig.json"})," at the workspace root. All aliases use\nthe ",(0,r.jsx)(n.code,{children:"@nasnet/"})," namespace."]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Alias"}),(0,r.jsx)(n.th,{children:"Resolves To"}),(0,r.jsx)(n.th,{children:"Usage"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/alerts"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/features/alerts/src"})}),(0,r.jsx)(n.td,{children:"Import from alerts module"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/dashboard"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/features/dashboard/src"})}),(0,r.jsx)(n.td,{children:"Import from dashboard module"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/diagnostics"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/features/diagnostics/src"})}),(0,r.jsx)(n.td,{children:"Import from diagnostics module"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/firewall"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/features/firewall/src"})}),(0,r.jsx)(n.td,{children:"Import from firewall module"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/logs"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/features/logs/src"})}),(0,r.jsx)(n.td,{children:"Import from logs module"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/network"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/features/network/src"})}),(0,r.jsx)(n.td,{children:"Import from network module"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/router-discovery"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/features/router-discovery/src"})}),(0,r.jsx)(n.td,{children:"Import from router-discovery module"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/services"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/features/services/src"})}),(0,r.jsx)(n.td,{children:"Import from services module"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/wireless"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/features/wireless/src"})}),(0,r.jsx)(n.td,{children:"Import from wireless module"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/features/configuration-import"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/features/configuration-import/src"})}),(0,r.jsx)(n.td,{children:"Import from configuration-import module"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/ui/primitives"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/ui/primitives/src"})}),(0,r.jsx)(n.td,{children:"Layer 1 components"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/ui/patterns"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/ui/patterns/src"})}),(0,r.jsx)(n.td,{children:"Layer 2 components"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/ui/layouts"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/ui/layouts/src"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"usePlatform"}),", layout shells"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/ui/utils"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/ui/utils/src"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"cn()"})," and shared utilities"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/api-client/queries"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/api-client/queries/src"})}),(0,r.jsx)(n.td,{children:"Apollo hooks"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/api-client/generated"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/api-client/generated"})}),(0,r.jsx)(n.td,{children:"Codegen output"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/core/types"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/core/types/src"})}),(0,r.jsx)(n.td,{children:"Shared TypeScript types"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/core/utils"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/core/utils/src"})}),(0,r.jsx)(n.td,{children:"Pure utility functions"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@nasnet/state/stores"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/state/stores/src"})}),(0,r.jsx)(n.td,{children:"Zustand stores"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"11-naming-conventions",children:"11. Naming Conventions"}),"\n",(0,r.jsx)(n.h3,{id:"files",children:"Files"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Convention"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Headless wrapper component"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PascalCase.tsx"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"InterfaceList.tsx"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Desktop presenter"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"PascalCaseDesktop.tsx"})," or ",(0,r.jsx)(n.code,{children:"PascalCase.Desktop.tsx"})]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"InterfaceListDesktop.tsx"})," or ",(0,r.jsx)(n.code,{children:"InterfaceGrid.Desktop.tsx"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Mobile presenter"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"PascalCaseMobile.tsx"})," or ",(0,r.jsx)(n.code,{children:"PascalCase.Mobile.tsx"})]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"InterfaceListMobile.tsx"})," or ",(0,r.jsx)(n.code,{children:"InterfaceGrid.Mobile.tsx"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Tablet presenter (rare)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PascalCase.Tablet.tsx"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"InterfaceGrid.Tablet.tsx"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"React hook"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"useFeatureName.ts"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"useInterfaceList.ts"}),", ",(0,r.jsx)(n.code,{children:"use-rule-navigation.ts"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"XState machine"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"feature.machine.ts"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"template-apply.machine.ts"}),", ",(0,r.jsx)(n.code,{children:"update-machine.ts"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Zod schema file"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"feature.schema.ts"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"alert-rule.schema.ts"}),", ",(0,r.jsx)(n.code,{children:"wirelessSettings.schema.ts"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Storybook file"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Component.stories.tsx"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"InterfaceList.stories.tsx"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Unit test file"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"Component.test.tsx"})," or ",(0,r.jsx)(n.code,{children:"hook.test.ts"})]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"InterfaceList.test.tsx"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Integration test"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Component.integration.test.tsx"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ServiceConfigForm.integration.test.tsx"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Accessibility test"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Component.a11y.test.tsx"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"StorageSettings.a11y.test.tsx"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Barrel export"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"index.ts"})}),(0,r.jsxs)(n.td,{children:["All sub-directories have an ",(0,r.jsx)(n.code,{children:"index.ts"})]})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"components-and-hooks",children:"Components and Hooks"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Components"}),": ",(0,r.jsx)(n.code,{children:"PascalCase"}),". Exported with the same name as the file minus extension."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Hooks"}),": ",(0,r.jsx)(n.code,{children:"camelCase"})," with ",(0,r.jsx)(n.code,{children:"use"})," prefix. ",(0,r.jsx)(n.code,{children:"useAlertRules"}),", ",(0,r.jsx)(n.code,{children:"useChainSummary"}),", ",(0,r.jsx)(n.code,{children:"useRuleNavigation"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Machine factories"}),": ",(0,r.jsx)(n.code,{children:"createMachineName"})," or exported directly as ",(0,r.jsx)(n.code,{children:"machineName"}),". Machine types\nuse ",(0,r.jsx)(n.code,{children:"PascalCase"}),": ",(0,r.jsx)(n.code,{children:"TemplateApplyMachine"}),", ",(0,r.jsx)(n.code,{children:"TemplateApplyEvent"}),", ",(0,r.jsx)(n.code,{children:"TemplateApplyContext"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Schema objects"}),": ",(0,r.jsx)(n.code,{children:"camelCase"})," with ",(0,r.jsx)(n.code,{children:"Schema"})," suffix. ",(0,r.jsx)(n.code,{children:"alertRuleFormSchema"}),",\n",(0,r.jsx)(n.code,{children:"wirelessSettingsSchema"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Schema TypeScript types"}),": ",(0,r.jsx)(n.code,{children:"PascalCase"}),". ",(0,r.jsx)(n.code,{children:"AlertRuleFormData"}),", ",(0,r.jsx)(n.code,{children:"WirelessSettingsFormData"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"props-interfaces",children:"Props Interfaces"}),"\n",(0,r.jsxs)(n.p,{children:["Every component has a co-located ",(0,r.jsx)(n.code,{children:"Props"})," interface named ",(0,r.jsx)(n.code,{children:"ComponentNameProps"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export interface InterfaceListProps {\n  routerId: string;\n  className?: string;\n}\n\nexport interface InterfaceListDesktopProps {\n  interfaces: any[];\n  loading: boolean;\n  // \u2026 all the sharedProps\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Presenter ",(0,r.jsx)(n.code,{children:"Props"})," interfaces are also exported so callers can compose presenters directly when\nneeded."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"12-file-and-folder-size-limits",children:"12. File and Folder Size Limits"}),"\n",(0,r.jsx)(n.p,{children:"These limits are enforced in code review and exist to prevent cognitive overload and merge\nconflicts."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"File type"}),(0,r.jsx)(n.th,{children:"Limit"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["TypeScript source files (",(0,r.jsx)(n.code,{children:".ts"}),", ",(0,r.jsx)(n.code,{children:".tsx"}),")"]}),(0,r.jsx)(n.td,{children:"300\u2013500 lines"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["Test files (",(0,r.jsx)(n.code,{children:".test.ts"}),", ",(0,r.jsx)(n.code,{children:".test.tsx"}),")"]}),(0,r.jsx)(n.td,{children:"800 lines"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Generated files"}),(0,r.jsx)(n.td,{children:"No limit (excluded from review)"})]})]})]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Folder"}),(0,r.jsx)(n.th,{children:"Limit"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Files per folder"}),(0,r.jsx)(n.td,{children:"10 maximum"})]})})]}),"\n",(0,r.jsxs)(n.p,{children:["When a component folder approaches 10 files, move related sub-components into a named subfolder. The\n",(0,r.jsx)(n.code,{children:"services"})," module's ",(0,r.jsx)(n.code,{children:"components/ServiceConfigForm/fields/"})," subfolder is a real example of this rule\nin action."]}),"\n",(0,r.jsx)(n.p,{children:"When a file approaches 500 lines, split by concern:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"// Before: 800-line MonolithicForm.tsx\n// After:\nMonolithicForm/\n\u251c\u2500\u2500 index.ts\n\u251c\u2500\u2500 MonolithicForm.tsx       # wrapper only, <100 lines\n\u251c\u2500\u2500 MonolithicFormDesktop.tsx\n\u251c\u2500\u2500 MonolithicFormMobile.tsx\n\u251c\u2500\u2500 MonolithicFormSchema.ts  # validation only\n\u2514\u2500\u2500 MonolithicFormUtils.ts   # utilities only\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"13-storybook-integration",children:"13. Storybook Integration"}),"\n",(0,r.jsxs)(n.p,{children:["Every domain component must have a ",(0,r.jsx)(n.code,{children:".stories.tsx"})," file. Stories serve as:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Living documentation"}),"\n",(0,r.jsx)(n.li,{children:"Visual regression baselines"}),"\n",(0,r.jsx)(n.li,{children:"Accessibility testing targets (via the Storybook a11y addon)"}),"\n",(0,r.jsx)(n.li,{children:"Platform presenter visual comparison (each story has Mobile and Desktop variants)"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Example from InterfaceList.stories.tsx pattern\nconst meta: Meta<typeof InterfaceList> = {\n  title: 'Features/Network/InterfaceList',\n  component: InterfaceList,\n  parameters: {\n    layout: 'fullscreen',\n  },\n};\n\nexport const Desktop: Story = {\n  parameters: { viewport: { defaultViewport: 'desktop' } },\n  args: { routerId: 'r1' },\n};\n\nexport const Mobile: Story = {\n  parameters: { viewport: { defaultViewport: 'mobile1' } },\n  args: { routerId: 'r1' },\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"Storybook is available per library:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npx nx run ui-primitives:storybook    # Layer 1 (port 4400)\nnpx nx run ui-patterns:storybook      # Layer 2 (port 4401)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Feature module stories are included in the connect app's Storybook configuration."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"14-cross-references",children:"14. Cross-References"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Topic"}),(0,r.jsx)(n.th,{children:"Document"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"This index"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libs/features/docs/index.md"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Platform Presenter implementation guide"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Docs/design/PLATFORM_PRESENTER_GUIDE.md"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"56-component pattern catalog (Layer 2)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Docs/design/ux-design/6-component-library.md"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Design tokens (200+, semantic usage)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Docs/design/DESIGN_TOKENS.md"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Accessibility requirements (WCAG AAA)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Docs/design/ux-design/8-responsive-design-accessibility.md"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Frontend architecture (20 principles)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Docs/architecture/frontend-architecture.md"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Universal State v2 and Apply-Confirm-Merge"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Docs/architecture/data-architecture.md"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Novel patterns (VIF, Safety Pipeline, etc.)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Docs/architecture/novel-pattern-designs.md"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"GraphQL schema patterns"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Docs/architecture/api-contracts.md"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Testing strategy"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Docs/architecture/implementation-patterns/testing-strategy-patterns.md"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ADR-018 (Platform Presenters decision)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Docs/architecture/adrs/"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"All architecture docs"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Docs/architecture/index.md"})})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},71184:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>c});var t=s(14041);const r={},i=t.createContext(r);function l(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);